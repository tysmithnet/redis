<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>redis: src/server.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">redis
   </div>
   <div id="projectbrief">Redis hacking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">server.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="server_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2009-2016, Salvatore Sanfilippo &lt;antirez at gmail dot com&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions are met:</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *   * Redistributions of source code must retain the above copyright notice,</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *     this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *   * Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *     notice, this list of conditions and the following disclaimer in the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *     documentation and/or other materials provided with the distribution.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *   * Neither the name of Redis nor the names of its contributors may be used</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *     to endorse or promote products derived from this software without</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *     specific prior written permission.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="server_8h.html">server.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cluster_8h.html">cluster.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="slowlog_8h.html">slowlog.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bio_8h.html">bio.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="latency_8h.html">latency.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="atomicvar_8h.html">atomicvar.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;sys/wait.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;sys/uio.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;sys/un.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;float.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;sys/utsname.h&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;locale.h&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* Our shared &quot;common&quot; objects */</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="server_8h.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">   61</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structshared_objects_struct.html">sharedObjectsStruct</a> <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">/* Global vars that are actually used as constants. The following double</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * values are used for double on-disk serialization, and are initialized</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * at runtime to avoid strange compiler optimizations. */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="server_8h.html#ac9a7c8e90c7d43ad161e32bb70767d0d">   67</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a>, <a class="code" href="server_8c.html#aed49f2a4bd56cf7199a1d7c7f7eceab9">R_PosInf</a>, <a class="code" href="server_8c.html#acb612fbd4d2085a8dad448365f5c6d61">R_NegInf</a>, <a class="code" href="server_8c.html#a0a74d6229ebb2e89cd8d282bb2d57cd2">R_Nan</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/*================================= Globals ================================= */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/* Global vars */</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="server_8h.html#a8d73c25eebeb3e3656b34e7807cb15b4">   72</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structredis_server.html">redisServer</a> <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>; <span class="comment">/* Server global state */</span></div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="server_8c.html#a9ace62050a85a5451725d854408867df">   73</a></span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="server_8c.html#a9ace62050a85a5451725d854408867df">lru_clock</a>; <span class="comment">/* Server global current LRU time. */</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">/* Our command table.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> * Every entry is composed of the following fields:</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * name: a string representing the command name.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * function: pointer to the C function implementing the command.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * arity: number of arguments, it is possible to use -N to say &gt;= N</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * sflags: command flags as string. See below for a table of flags.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * flags: flags as bitmask. Computed by Redis using the &#39;sflags&#39; field.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * get_keys_proc: an optional function to get key arguments from a command.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> *                This is only used when the following three fields are not</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> *                enough to specify what arguments are keys.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> * first_key_index: first argument that is a key</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> * last_key_index: last argument that is a key</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * key_step: step to get all the keys from first to last argument. For instance</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *           in MSET the step is two since arguments are key,val,key,val,...</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * microseconds: microseconds of total execution time for this command.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * calls: total number of calls of this command.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * The flags, microseconds and calls fields are computed by Redis and should</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * always be set to zero.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> * Command flags are expressed using strings where every character represents</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> * a flag. Later the populateCommandTable() function will take care of</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"> * populating the real &#39;flags&#39; field using this characters.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * This is the meaning of the flags:</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> * w: write command (may modify the key space).</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"> * r: read command  (will never modify the key space).</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> * m: may increase memory usage once called. Don&#39;t allow if out of memory.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"> * a: admin command, like SAVE or SHUTDOWN.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> * p: Pub/Sub related command.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * f: force replication of this command, regardless of server.dirty.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> * s: command not allowed in scripts.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * R: random command. Command is not deterministic, that is, the same command</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> *    with the same arguments, with the same key space, may have different</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> *    results. For instance SPOP and RANDOMKEY are two random commands.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> * S: Sort command output array if called from script, so that the output</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> *    is deterministic.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> * l: Allow command while loading the database.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> * t: Allow command while a slave has stale data but is not allowed to</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> *    server this data. Normally no command is accepted in this condition</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> *    but just a few.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * M: Do not automatically propagate the command on MONITOR.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> * k: Perform an implicit ASKING for this command, so the command will be</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> *    accepted in cluster mode if the slot is marked as &#39;importing&#39;.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * F: Fast command: O(1) or O(log(N)) command that should never delay</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> *    its execution as long as the kernel scheduler is giving us time.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> *    Note that commands that may trigger a DEL as a side effect (like SET)</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> *    are not fast commands.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="server_8c.html#a28856a2957d6f48c684d877c9189fc18">  127</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> <a class="code" href="server_8c.html#a28856a2957d6f48c684d877c9189fc18">redisCommandTable</a>[] = {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {<span class="stringliteral">&quot;module&quot;</span>,<a class="code" href="module_8c.html#a000fda557883aa7629f70616614a979f">moduleCommand</a>,-2,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    {<span class="stringliteral">&quot;get&quot;</span>,<a class="code" href="server_8h.html#a06bd26a900d06b177e0b9bbb67977761">getCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {<span class="stringliteral">&quot;set&quot;</span>,<a class="code" href="server_8h.html#acff0bf145e0c32f0ce05da78aac8a85f">setCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    {<span class="stringliteral">&quot;setnx&quot;</span>,<a class="code" href="server_8h.html#a85ed2d5f370914814d254fdb182cca46">setnxCommand</a>,3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {<span class="stringliteral">&quot;setex&quot;</span>,<a class="code" href="server_8h.html#ac8f41381de6a73069064befd66482b57">setexCommand</a>,4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    {<span class="stringliteral">&quot;psetex&quot;</span>,<a class="code" href="server_8h.html#acc08f077e279fea572c00484f4744fc1">psetexCommand</a>,4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {<span class="stringliteral">&quot;append&quot;</span>,<a class="code" href="server_8h.html#a4dba63a3cf60c2e23d5dffa26fb3c8bc">appendCommand</a>,3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    {<span class="stringliteral">&quot;strlen&quot;</span>,<a class="code" href="server_8h.html#a452e0a39c42c68759c8cdd072b5336cd">strlenCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {<span class="stringliteral">&quot;del&quot;</span>,<a class="code" href="db_8c.html#a19e7751e41c41f29de69cf2cdedd3b2f">delCommand</a>,-2,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {<span class="stringliteral">&quot;unlink&quot;</span>,<a class="code" href="db_8c.html#af4810a412b1235c49c49e26124440d9d">unlinkCommand</a>,-2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    {<span class="stringliteral">&quot;exists&quot;</span>,<a class="code" href="db_8c.html#a0c7c021fa3d11ac6772baed2c41f96af">existsCommand</a>,-2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    {<span class="stringliteral">&quot;setbit&quot;</span>,<a class="code" href="bitops_8c.html#ae66b442041f4beefc834a1ab5e84adbb">setbitCommand</a>,4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    {<span class="stringliteral">&quot;getbit&quot;</span>,<a class="code" href="bitops_8c.html#a21071498ba2aeb06395aee8293e7e527">getbitCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {<span class="stringliteral">&quot;bitfield&quot;</span>,<a class="code" href="bitops_8c.html#a0b0771537df6eefbc289d48ff7aac77a">bitfieldCommand</a>,-2,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {<span class="stringliteral">&quot;setrange&quot;</span>,<a class="code" href="server_8h.html#a84ef395cc8698721347af9fa5ac00904">setrangeCommand</a>,4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    {<span class="stringliteral">&quot;getrange&quot;</span>,<a class="code" href="server_8h.html#a9d350e3ba0a6a560b3731f9cce78ca2a">getrangeCommand</a>,4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    {<span class="stringliteral">&quot;substr&quot;</span>,<a class="code" href="server_8h.html#a9d350e3ba0a6a560b3731f9cce78ca2a">getrangeCommand</a>,4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {<span class="stringliteral">&quot;incr&quot;</span>,<a class="code" href="server_8h.html#a26b127b9f676a82e78c29694e284cc73">incrCommand</a>,2,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    {<span class="stringliteral">&quot;decr&quot;</span>,<a class="code" href="server_8h.html#a395b1661b661c1dd3983e856955e3a75">decrCommand</a>,2,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    {<span class="stringliteral">&quot;mget&quot;</span>,<a class="code" href="server_8h.html#a5c06e803ad12cd034a808a885bc342cf">mgetCommand</a>,-2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    {<span class="stringliteral">&quot;rpush&quot;</span>,<a class="code" href="server_8h.html#aa0c827caa37aa713be68e285c0c14104">rpushCommand</a>,-3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {<span class="stringliteral">&quot;lpush&quot;</span>,<a class="code" href="server_8h.html#ad24e9bc40b2e7ebcb22efaca39b0f4ee">lpushCommand</a>,-3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {<span class="stringliteral">&quot;rpushx&quot;</span>,<a class="code" href="server_8h.html#a7f53193adb63ba79f34d39439fcf9621">rpushxCommand</a>,-3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {<span class="stringliteral">&quot;lpushx&quot;</span>,<a class="code" href="server_8h.html#a16aed28fce864ad4403a609dc8456ea5">lpushxCommand</a>,-3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    {<span class="stringliteral">&quot;linsert&quot;</span>,<a class="code" href="server_8h.html#aab4fb79f7d4462edc3409f47b30a1e14">linsertCommand</a>,5,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    {<span class="stringliteral">&quot;rpop&quot;</span>,<a class="code" href="server_8h.html#a2c47065029081b2deb64cf58fa07459f">rpopCommand</a>,2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    {<span class="stringliteral">&quot;lpop&quot;</span>,<a class="code" href="server_8h.html#a7f01b7200b32817202b3fe357b74dbc5">lpopCommand</a>,2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {<span class="stringliteral">&quot;brpop&quot;</span>,<a class="code" href="server_8h.html#a4c87bb6cabee0992ae46e8ce3a4617f7">brpopCommand</a>,-3,<span class="stringliteral">&quot;ws&quot;</span>,0,NULL,1,-2,1,0,0},</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    {<span class="stringliteral">&quot;brpoplpush&quot;</span>,<a class="code" href="server_8h.html#a746ad828ffb5e77f774223ae18849b09">brpoplpushCommand</a>,4,<span class="stringliteral">&quot;wms&quot;</span>,0,NULL,1,2,1,0,0},</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    {<span class="stringliteral">&quot;blpop&quot;</span>,<a class="code" href="server_8h.html#aac60533b8974a80cbba84fa83cefadba">blpopCommand</a>,-3,<span class="stringliteral">&quot;ws&quot;</span>,0,NULL,1,-2,1,0,0},</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    {<span class="stringliteral">&quot;llen&quot;</span>,<a class="code" href="server_8h.html#aa3ba8e5baa37a74455b598dea729afa3">llenCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {<span class="stringliteral">&quot;lindex&quot;</span>,<a class="code" href="server_8h.html#ae87bf05241efb6cf0ed6cc7bb7068a96">lindexCommand</a>,3,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    {<span class="stringliteral">&quot;lset&quot;</span>,<a class="code" href="server_8h.html#a7a804fd4614bb512d4a04bf4c9ed0ce3">lsetCommand</a>,4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {<span class="stringliteral">&quot;lrange&quot;</span>,<a class="code" href="server_8h.html#a163b0c739289c1a4fd117af7bd8e0ff1">lrangeCommand</a>,4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {<span class="stringliteral">&quot;ltrim&quot;</span>,<a class="code" href="server_8h.html#a50ebe1be63a259b7c9b0583a0790e15b">ltrimCommand</a>,4,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    {<span class="stringliteral">&quot;lrem&quot;</span>,<a class="code" href="server_8h.html#ad9887134ab0f5a756b866adf77ed93b3">lremCommand</a>,4,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {<span class="stringliteral">&quot;rpoplpush&quot;</span>,<a class="code" href="server_8h.html#a7fdc7df0e6f17449d8c5858ddda95f67">rpoplpushCommand</a>,3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,2,1,0,0},</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {<span class="stringliteral">&quot;sadd&quot;</span>,<a class="code" href="server_8h.html#a81bfa438480da1127e7338b44596ac01">saddCommand</a>,-3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    {<span class="stringliteral">&quot;srem&quot;</span>,<a class="code" href="server_8h.html#a4efe64e73e38a940543888e6c61453d8">sremCommand</a>,-3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {<span class="stringliteral">&quot;smove&quot;</span>,<a class="code" href="server_8h.html#abc22c5bbf656d114e74df1ab353c8906">smoveCommand</a>,4,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,2,1,0,0},</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {<span class="stringliteral">&quot;sismember&quot;</span>,<a class="code" href="server_8h.html#a32774e3d7df495ab453ea9b310c597c1">sismemberCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {<span class="stringliteral">&quot;scard&quot;</span>,<a class="code" href="server_8h.html#a7a91d1ddcd40677b0f5521a9a42f4638">scardCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {<span class="stringliteral">&quot;spop&quot;</span>,<a class="code" href="server_8h.html#a79f5e9dd310e06a26497ab01b3d99faf">spopCommand</a>,-2,<span class="stringliteral">&quot;wRF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {<span class="stringliteral">&quot;srandmember&quot;</span>,<a class="code" href="server_8h.html#a685b89e1976480e5eab98f110b12af93">srandmemberCommand</a>,-2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {<span class="stringliteral">&quot;sinter&quot;</span>,<a class="code" href="server_8h.html#a4fee297599eb9a8a4f86e3fcf77e9fa2">sinterCommand</a>,-2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {<span class="stringliteral">&quot;sinterstore&quot;</span>,<a class="code" href="server_8h.html#a21029b37e9d0139bd20c77751e99795a">sinterstoreCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    {<span class="stringliteral">&quot;sunion&quot;</span>,<a class="code" href="server_8h.html#add7103c0a8afae48dd4d6912675dfa1e">sunionCommand</a>,-2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {<span class="stringliteral">&quot;sunionstore&quot;</span>,<a class="code" href="server_8h.html#a1aaa4bc76dc063da787c63d40dec5930">sunionstoreCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {<span class="stringliteral">&quot;sdiff&quot;</span>,<a class="code" href="server_8h.html#afd035a2d3cedcd2b9f6cbf968f45ef2e">sdiffCommand</a>,-2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {<span class="stringliteral">&quot;sdiffstore&quot;</span>,<a class="code" href="server_8h.html#a8801ccf1a973c132e7aaca2a55dadbc2">sdiffstoreCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    {<span class="stringliteral">&quot;smembers&quot;</span>,<a class="code" href="server_8h.html#a4fee297599eb9a8a4f86e3fcf77e9fa2">sinterCommand</a>,2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {<span class="stringliteral">&quot;sscan&quot;</span>,<a class="code" href="server_8h.html#a4e835145118ea509fa83e502ddd7825f">sscanCommand</a>,-3,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    {<span class="stringliteral">&quot;zadd&quot;</span>,<a class="code" href="server_8h.html#a77b2d655d5c957841a27588a991a6d0c">zaddCommand</a>,-4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {<span class="stringliteral">&quot;zincrby&quot;</span>,<a class="code" href="server_8h.html#a9a55797eec6ecb31c031b629ceb36b50">zincrbyCommand</a>,4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    {<span class="stringliteral">&quot;zrem&quot;</span>,<a class="code" href="server_8h.html#a8ec453137b40be876e779a605a0c5177">zremCommand</a>,-3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    {<span class="stringliteral">&quot;zremrangebyscore&quot;</span>,<a class="code" href="server_8h.html#ab3c6c64d2957b6ca82b754949c302060">zremrangebyscoreCommand</a>,4,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {<span class="stringliteral">&quot;zremrangebyrank&quot;</span>,<a class="code" href="server_8h.html#a91104f8c8859946e5d00fafbcf1aa300">zremrangebyrankCommand</a>,4,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {<span class="stringliteral">&quot;zremrangebylex&quot;</span>,<a class="code" href="server_8h.html#a21661a6f516b424b56400fabb5ed3600">zremrangebylexCommand</a>,4,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {<span class="stringliteral">&quot;zunionstore&quot;</span>,<a class="code" href="server_8h.html#aeea566aab7e8f14c691429404c4452f6">zunionstoreCommand</a>,-4,<span class="stringliteral">&quot;wm&quot;</span>,0,<a class="code" href="db_8c.html#a7887c9791609e331185f3113ce763c98">zunionInterGetKeys</a>,0,0,0,0,0},</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    {<span class="stringliteral">&quot;zinterstore&quot;</span>,<a class="code" href="server_8h.html#a6700d1c92ae982f7b80c74e743312a0f">zinterstoreCommand</a>,-4,<span class="stringliteral">&quot;wm&quot;</span>,0,<a class="code" href="db_8c.html#a7887c9791609e331185f3113ce763c98">zunionInterGetKeys</a>,0,0,0,0,0},</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    {<span class="stringliteral">&quot;zrange&quot;</span>,<a class="code" href="server_8h.html#a2a2565f607ffdd4c544e7acae798073e">zrangeCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {<span class="stringliteral">&quot;zrangebyscore&quot;</span>,<a class="code" href="server_8h.html#a473aaa83d89c486a3f5431be9aaef783">zrangebyscoreCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    {<span class="stringliteral">&quot;zrevrangebyscore&quot;</span>,<a class="code" href="server_8h.html#a14964fe6b734762bcc05bfc8cdc7204c">zrevrangebyscoreCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {<span class="stringliteral">&quot;zrangebylex&quot;</span>,<a class="code" href="server_8h.html#ab94955184c30533b403ddc9fb9f1a7b2">zrangebylexCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {<span class="stringliteral">&quot;zrevrangebylex&quot;</span>,<a class="code" href="server_8h.html#a27fb450e6e9e5d6a20c74ad87aefd2b7">zrevrangebylexCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    {<span class="stringliteral">&quot;zcount&quot;</span>,<a class="code" href="server_8h.html#a49cf2ef5d30cb3b0e51cc801342c11d3">zcountCommand</a>,4,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {<span class="stringliteral">&quot;zlexcount&quot;</span>,<a class="code" href="server_8h.html#a2ba95c8ef6fe16363dde79a7c31ab363">zlexcountCommand</a>,4,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    {<span class="stringliteral">&quot;zrevrange&quot;</span>,<a class="code" href="server_8h.html#aed33d49831b424cda07b7859d156c854">zrevrangeCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {<span class="stringliteral">&quot;zcard&quot;</span>,<a class="code" href="server_8h.html#a80bd8dd11b207cae4f5e77f2cd77f467">zcardCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    {<span class="stringliteral">&quot;zscore&quot;</span>,<a class="code" href="server_8h.html#ac6a3926cde6ff160a3fd378af151fa3a">zscoreCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {<span class="stringliteral">&quot;zrank&quot;</span>,<a class="code" href="server_8h.html#a32ce16d3d8626f18d6799b328923dfc9">zrankCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    {<span class="stringliteral">&quot;zrevrank&quot;</span>,<a class="code" href="server_8h.html#a6ba1a78f4a4238c9f31b103562690e80">zrevrankCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {<span class="stringliteral">&quot;zscan&quot;</span>,<a class="code" href="server_8h.html#ada6ec2e62675456c34d699bd6f2f7a5d">zscanCommand</a>,-3,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    {<span class="stringliteral">&quot;zpopmin&quot;</span>,<a class="code" href="server_8h.html#ae914a718cc003a40862eeb3b4301ed57">zpopminCommand</a>,-2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {<span class="stringliteral">&quot;zpopmax&quot;</span>,<a class="code" href="server_8h.html#a9d1d54e41ab48c620621b01e07f8459c">zpopmaxCommand</a>,-2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    {<span class="stringliteral">&quot;bzpopmin&quot;</span>,<a class="code" href="server_8h.html#a51d6f5ebca3a951559c2f96900981238">bzpopminCommand</a>,-2,<span class="stringliteral">&quot;wsF&quot;</span>,0,NULL,1,-2,1,0,0},</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {<span class="stringliteral">&quot;bzpopmax&quot;</span>,<a class="code" href="server_8h.html#a33f4fa5acb60b7b09f8e977eb97c8d90">bzpopmaxCommand</a>,-2,<span class="stringliteral">&quot;wsF&quot;</span>,0,NULL,1,-2,1,0,0},</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    {<span class="stringliteral">&quot;hset&quot;</span>,<a class="code" href="server_8h.html#a8f47603665c339a8ba7c6831119235f7">hsetCommand</a>,-4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {<span class="stringliteral">&quot;hsetnx&quot;</span>,<a class="code" href="server_8h.html#aedd7251bdcd9ca336153d90aa7a01b0b">hsetnxCommand</a>,4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {<span class="stringliteral">&quot;hget&quot;</span>,<a class="code" href="server_8h.html#a189bf86d6a43bf93596b169db47b5528">hgetCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {<span class="stringliteral">&quot;hmset&quot;</span>,<a class="code" href="server_8h.html#a8f47603665c339a8ba7c6831119235f7">hsetCommand</a>,-4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    {<span class="stringliteral">&quot;hmget&quot;</span>,<a class="code" href="server_8h.html#a521a4712dde25cca82bef5a42a48e7dd">hmgetCommand</a>,-3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    {<span class="stringliteral">&quot;hincrby&quot;</span>,<a class="code" href="server_8h.html#a65f143a5917f723c20d209d56f2f909c">hincrbyCommand</a>,4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    {<span class="stringliteral">&quot;hincrbyfloat&quot;</span>,<a class="code" href="server_8h.html#a9aa38ab80a6a76dcb9edc0c24332d65b">hincrbyfloatCommand</a>,4,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    {<span class="stringliteral">&quot;hdel&quot;</span>,<a class="code" href="server_8h.html#a3d9bb3651349ff303085988d23117fd1">hdelCommand</a>,-3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {<span class="stringliteral">&quot;hlen&quot;</span>,<a class="code" href="server_8h.html#aa58c7aa9d28d027fbcecca9fc4443e40">hlenCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {<span class="stringliteral">&quot;hstrlen&quot;</span>,<a class="code" href="server_8h.html#af807f6a1ed93f11b51bf3d834b859b0a">hstrlenCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {<span class="stringliteral">&quot;hkeys&quot;</span>,<a class="code" href="server_8h.html#ac3639325926480a4762281da684484a8">hkeysCommand</a>,2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    {<span class="stringliteral">&quot;hvals&quot;</span>,<a class="code" href="server_8h.html#ab430d96c57f42f9856a1db7400eaadcb">hvalsCommand</a>,2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {<span class="stringliteral">&quot;hgetall&quot;</span>,<a class="code" href="server_8h.html#a7d57bb74515d8874cf4f25a7b4c85a30">hgetallCommand</a>,2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {<span class="stringliteral">&quot;hexists&quot;</span>,<a class="code" href="server_8h.html#a0a62e324503ec3accad9680554df26d0">hexistsCommand</a>,3,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    {<span class="stringliteral">&quot;hscan&quot;</span>,<a class="code" href="server_8h.html#a6ac9f9314c1788f7cc8549ea40d4efb1">hscanCommand</a>,-3,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {<span class="stringliteral">&quot;incrby&quot;</span>,<a class="code" href="server_8h.html#ac93d3efcff085863089f595a037ac664">incrbyCommand</a>,3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {<span class="stringliteral">&quot;decrby&quot;</span>,<a class="code" href="server_8h.html#a17ef8e7bb0aa527068a2667fc9c77a40">decrbyCommand</a>,3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    {<span class="stringliteral">&quot;incrbyfloat&quot;</span>,<a class="code" href="server_8h.html#a3dec1c137e29e15e8f5bfcf372766609">incrbyfloatCommand</a>,3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    {<span class="stringliteral">&quot;getset&quot;</span>,<a class="code" href="server_8h.html#a0ff1c70665289eef5bc6f530c8fecf0a">getsetCommand</a>,3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    {<span class="stringliteral">&quot;mset&quot;</span>,<a class="code" href="server_8h.html#a6a8bd5902de5f6d6d0eb7e5105f40fef">msetCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,2,0,0},</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    {<span class="stringliteral">&quot;msetnx&quot;</span>,<a class="code" href="server_8h.html#a87641859a9a0701a1d2ff93f5c9a6e7b">msetnxCommand</a>,-3,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,2,0,0},</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {<span class="stringliteral">&quot;randomkey&quot;</span>,<a class="code" href="db_8c.html#a8f01d577acb7acd9df43669b691b83f6">randomkeyCommand</a>,1,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {<span class="stringliteral">&quot;select&quot;</span>,<a class="code" href="db_8c.html#ae1c2d1b29aae61e4ee80b6e026239668">selectCommand</a>,2,<span class="stringliteral">&quot;lF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    {<span class="stringliteral">&quot;swapdb&quot;</span>,<a class="code" href="db_8c.html#a0cc0184a1a7d36addb4e145134f8a2a9">swapdbCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    {<span class="stringliteral">&quot;move&quot;</span>,<a class="code" href="db_8c.html#a8f6e1f834a16c0f5489c82beb4385ac5">moveCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    {<span class="stringliteral">&quot;rename&quot;</span>,<a class="code" href="db_8c.html#a53c5f34956f6624513b7cdd46f2dedf1">renameCommand</a>,3,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,1,2,1,0,0},</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {<span class="stringliteral">&quot;renamenx&quot;</span>,<a class="code" href="db_8c.html#ad9aef1be17e5b63294cf55a9ee22204c">renamenxCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,2,1,0,0},</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {<span class="stringliteral">&quot;expire&quot;</span>,<a class="code" href="expire_8c.html#a394a24f28982a4d71d587bd93e714839">expireCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    {<span class="stringliteral">&quot;expireat&quot;</span>,<a class="code" href="expire_8c.html#aaa6d4f828c5e0a2eb4313561fd09a8d0">expireatCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {<span class="stringliteral">&quot;pexpire&quot;</span>,<a class="code" href="expire_8c.html#a007647f9fe6b994df961341a7d8690aa">pexpireCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {<span class="stringliteral">&quot;pexpireat&quot;</span>,<a class="code" href="expire_8c.html#a2311f10fbab3b7e873055e784ae61bd8">pexpireatCommand</a>,3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    {<span class="stringliteral">&quot;keys&quot;</span>,<a class="code" href="db_8c.html#a8bf3b20b3cdff120e5e34249d659b5fd">keysCommand</a>,2,<span class="stringliteral">&quot;rS&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {<span class="stringliteral">&quot;scan&quot;</span>,<a class="code" href="db_8c.html#ab7d62562d550246831d204c7be7df9e8">scanCommand</a>,-2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    {<span class="stringliteral">&quot;dbsize&quot;</span>,<a class="code" href="db_8c.html#a3100815e1719696e90a6b249e100f536">dbsizeCommand</a>,1,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    {<span class="stringliteral">&quot;auth&quot;</span>,<a class="code" href="server_8c.html#a102476624bc170decc56549ae0932703">authCommand</a>,2,<span class="stringliteral">&quot;sltF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    {<span class="stringliteral">&quot;ping&quot;</span>,<a class="code" href="server_8c.html#ae1066bde6904041087bdf3efa2bde1e7">pingCommand</a>,-1,<span class="stringliteral">&quot;tF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {<span class="stringliteral">&quot;echo&quot;</span>,<a class="code" href="server_8c.html#aace7644d1202bfaf862c6bb1eeacb119">echoCommand</a>,2,<span class="stringliteral">&quot;F&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {<span class="stringliteral">&quot;save&quot;</span>,<a class="code" href="rdb_8c.html#a3ff628b60acf9fd10c77c462417e4d98">saveCommand</a>,1,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    {<span class="stringliteral">&quot;bgsave&quot;</span>,<a class="code" href="rdb_8c.html#aab77fdfffc0bf7e912b9a2389c412029">bgsaveCommand</a>,-1,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {<span class="stringliteral">&quot;bgrewriteaof&quot;</span>,<a class="code" href="aof_8c.html#acd094b7bb70912d9fc503b07a190ee80">bgrewriteaofCommand</a>,1,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    {<span class="stringliteral">&quot;shutdown&quot;</span>,<a class="code" href="db_8c.html#a30e4f224a138ea036bb4ecc024796be0">shutdownCommand</a>,-1,<span class="stringliteral">&quot;aslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    {<span class="stringliteral">&quot;lastsave&quot;</span>,<a class="code" href="db_8c.html#a867edfec1a517aeb68c4977557ef263c">lastsaveCommand</a>,1,<span class="stringliteral">&quot;RF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    {<span class="stringliteral">&quot;type&quot;</span>,<a class="code" href="db_8c.html#a74b968fe09cf52976e47f672988c3802">typeCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    {<span class="stringliteral">&quot;multi&quot;</span>,<a class="code" href="multi_8c.html#a31af7ae891c458efa31333f98aa0129a">multiCommand</a>,1,<span class="stringliteral">&quot;sF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {<span class="stringliteral">&quot;exec&quot;</span>,<a class="code" href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a>,1,<span class="stringliteral">&quot;sM&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {<span class="stringliteral">&quot;discard&quot;</span>,<a class="code" href="multi_8c.html#a754eaefc6b7bfb8177b8a239a8d4168f">discardCommand</a>,1,<span class="stringliteral">&quot;sF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {<span class="stringliteral">&quot;sync&quot;</span>,<a class="code" href="replication_8c.html#a7c1fd41f13821ba72fb98e077bbd61f0">syncCommand</a>,1,<span class="stringliteral">&quot;ars&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {<span class="stringliteral">&quot;psync&quot;</span>,<a class="code" href="replication_8c.html#a7c1fd41f13821ba72fb98e077bbd61f0">syncCommand</a>,3,<span class="stringliteral">&quot;ars&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {<span class="stringliteral">&quot;replconf&quot;</span>,<a class="code" href="replication_8c.html#a6f8585370e62320875abea412e5c8a9a">replconfCommand</a>,-1,<span class="stringliteral">&quot;aslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    {<span class="stringliteral">&quot;flushdb&quot;</span>,<a class="code" href="db_8c.html#a47000c62451a737c56a464e16b843ae4">flushdbCommand</a>,-1,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    {<span class="stringliteral">&quot;flushall&quot;</span>,<a class="code" href="db_8c.html#a8fa1120506d50175d9faec8e9807bff3">flushallCommand</a>,-1,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {<span class="stringliteral">&quot;sort&quot;</span>,<a class="code" href="server_8h.html#a7668b4e80446fce88c9d14ea64bd7b1a">sortCommand</a>,-2,<span class="stringliteral">&quot;wm&quot;</span>,0,<a class="code" href="db_8c.html#abce45027353410ce6f2d533057606f03">sortGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    {<span class="stringliteral">&quot;info&quot;</span>,<a class="code" href="server_8c.html#a2275257c1c0bbf34821270d4e169c0b8">infoCommand</a>,-1,<span class="stringliteral">&quot;ltR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {<span class="stringliteral">&quot;monitor&quot;</span>,<a class="code" href="server_8c.html#acb9a010d69d43d85f665f6238bfc3164">monitorCommand</a>,1,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    {<span class="stringliteral">&quot;ttl&quot;</span>,<a class="code" href="expire_8c.html#aeba7167525fc8ded96efbc118ce9d333">ttlCommand</a>,2,<span class="stringliteral">&quot;rFR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    {<span class="stringliteral">&quot;touch&quot;</span>,<a class="code" href="expire_8c.html#af5c458e6e7b368aae1a32b34e357fae2">touchCommand</a>,-2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    {<span class="stringliteral">&quot;pttl&quot;</span>,<a class="code" href="expire_8c.html#a5a5a788edf07140d6e41103a31476fdd">pttlCommand</a>,2,<span class="stringliteral">&quot;rFR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {<span class="stringliteral">&quot;persist&quot;</span>,<a class="code" href="expire_8c.html#afd7e1cc73d466ea95d10f0bccb297194">persistCommand</a>,2,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {<span class="stringliteral">&quot;slaveof&quot;</span>,<a class="code" href="replication_8c.html#a965792099fe57baacccb8bd8be7d2bd0">replicaofCommand</a>,3,<span class="stringliteral">&quot;ast&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    {<span class="stringliteral">&quot;replicaof&quot;</span>,<a class="code" href="replication_8c.html#a965792099fe57baacccb8bd8be7d2bd0">replicaofCommand</a>,3,<span class="stringliteral">&quot;ast&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    {<span class="stringliteral">&quot;role&quot;</span>,<a class="code" href="replication_8c.html#a513fcda284bfbf4e1cebe298c3e1f8a8">roleCommand</a>,1,<span class="stringliteral">&quot;lst&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {<span class="stringliteral">&quot;debug&quot;</span>,<a class="code" href="debug_8c.html#ac04bd45c841516e4eed2861b7be626ab">debugCommand</a>,-2,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    {<span class="stringliteral">&quot;config&quot;</span>,<a class="code" href="server_8h.html#a7046f4b2214cca2a9bac0b8150a10d58">configCommand</a>,-2,<span class="stringliteral">&quot;last&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    {<span class="stringliteral">&quot;subscribe&quot;</span>,<a class="code" href="pubsub_8c.html#a7322700796b561a34a18723b5d1b754a">subscribeCommand</a>,-2,<span class="stringliteral">&quot;pslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {<span class="stringliteral">&quot;unsubscribe&quot;</span>,<a class="code" href="pubsub_8c.html#a472428e32d6dddf29790796d3388e135">unsubscribeCommand</a>,-1,<span class="stringliteral">&quot;pslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {<span class="stringliteral">&quot;psubscribe&quot;</span>,<a class="code" href="pubsub_8c.html#adc25a077e0766a1a45816ff2c280a247">psubscribeCommand</a>,-2,<span class="stringliteral">&quot;pslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    {<span class="stringliteral">&quot;punsubscribe&quot;</span>,<a class="code" href="pubsub_8c.html#acb5aa2733bb6ecb41cf96fa248454697">punsubscribeCommand</a>,-1,<span class="stringliteral">&quot;pslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {<span class="stringliteral">&quot;publish&quot;</span>,<a class="code" href="pubsub_8c.html#ac269d82d816d53b573d249343770c07a">publishCommand</a>,3,<span class="stringliteral">&quot;pltF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    {<span class="stringliteral">&quot;pubsub&quot;</span>,<a class="code" href="pubsub_8c.html#a1bf715db9fa019cbdd2f6fe6422867a9">pubsubCommand</a>,-2,<span class="stringliteral">&quot;pltR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {<span class="stringliteral">&quot;watch&quot;</span>,<a class="code" href="multi_8c.html#a48749bd23a226514aaae95894ba8d51e">watchCommand</a>,-2,<span class="stringliteral">&quot;sF&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    {<span class="stringliteral">&quot;unwatch&quot;</span>,<a class="code" href="multi_8c.html#a39752e6b7b70b3e8df42d46168a40543">unwatchCommand</a>,1,<span class="stringliteral">&quot;sF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {<span class="stringliteral">&quot;cluster&quot;</span>,<a class="code" href="cluster_8c.html#a8d49e8373402fda00571443d463a9ec4">clusterCommand</a>,-2,<span class="stringliteral">&quot;a&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {<span class="stringliteral">&quot;restore&quot;</span>,<a class="code" href="cluster_8c.html#a8bbf763a26259982d93a4ed3350267b8">restoreCommand</a>,-4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {<span class="stringliteral">&quot;restore-asking&quot;</span>,<a class="code" href="cluster_8c.html#a8bbf763a26259982d93a4ed3350267b8">restoreCommand</a>,-4,<span class="stringliteral">&quot;wmk&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {<span class="stringliteral">&quot;migrate&quot;</span>,<a class="code" href="cluster_8c.html#a5cc13836303811438b984932f6fc1b1b">migrateCommand</a>,-6,<span class="stringliteral">&quot;wR&quot;</span>,0,<a class="code" href="db_8c.html#a3b1be63f398af051a20563fbe81a2694">migrateGetKeys</a>,0,0,0,0,0},</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {<span class="stringliteral">&quot;asking&quot;</span>,<a class="code" href="cluster_8c.html#ade6a3e195889b66cd73fe6d1b17d7a4a">askingCommand</a>,1,<span class="stringliteral">&quot;F&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {<span class="stringliteral">&quot;readonly&quot;</span>,<a class="code" href="cluster_8c.html#a9f6e0de4535394fe6602e3d061055d5a">readonlyCommand</a>,1,<span class="stringliteral">&quot;F&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {<span class="stringliteral">&quot;readwrite&quot;</span>,<a class="code" href="cluster_8c.html#a57e19f9388112556fc5429c2be240f24">readwriteCommand</a>,1,<span class="stringliteral">&quot;F&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    {<span class="stringliteral">&quot;dump&quot;</span>,<a class="code" href="cluster_8c.html#aca571ae521b349616304e35643826ec6">dumpCommand</a>,2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {<span class="stringliteral">&quot;object&quot;</span>,<a class="code" href="object_8c.html#af4babb9f5d489b16aebeafedfa0ee244">objectCommand</a>,-2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,2,2,1,0,0},</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {<span class="stringliteral">&quot;memory&quot;</span>,<a class="code" href="object_8c.html#a082ea922419a3d6fe58a9b369e89f359">memoryCommand</a>,-2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {<span class="stringliteral">&quot;client&quot;</span>,<a class="code" href="networking_8c.html#ad3c3c6d763b64355f5098a511d7b7ae4">clientCommand</a>,-2,<span class="stringliteral">&quot;as&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    {<span class="stringliteral">&quot;eval&quot;</span>,<a class="code" href="scripting_8c.html#a2cdaa68c50caa976607eca0c95a038a8">evalCommand</a>,-3,<span class="stringliteral">&quot;s&quot;</span>,0,<a class="code" href="db_8c.html#a47c215eb1db99539269323838e931217">evalGetKeys</a>,0,0,0,0,0},</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    {<span class="stringliteral">&quot;evalsha&quot;</span>,<a class="code" href="scripting_8c.html#ad44734ccd422e1268dd69670cde0d1bc">evalShaCommand</a>,-3,<span class="stringliteral">&quot;s&quot;</span>,0,<a class="code" href="db_8c.html#a47c215eb1db99539269323838e931217">evalGetKeys</a>,0,0,0,0,0},</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    {<span class="stringliteral">&quot;slowlog&quot;</span>,<a class="code" href="slowlog_8c.html#a09b465bea2c8178bf67b7910b5c9cd80">slowlogCommand</a>,-2,<span class="stringliteral">&quot;aR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    {<span class="stringliteral">&quot;script&quot;</span>,<a class="code" href="scripting_8c.html#a9e2aac4d91cc39a7634cc42a8acea80b">scriptCommand</a>,-2,<span class="stringliteral">&quot;s&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    {<span class="stringliteral">&quot;time&quot;</span>,<a class="code" href="server_8c.html#ae485b0f848c19fbea1b4673053553028">timeCommand</a>,1,<span class="stringliteral">&quot;RF&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    {<span class="stringliteral">&quot;bitop&quot;</span>,<a class="code" href="bitops_8c.html#ac8ff2376b5058730e205cf6694eb3e1c">bitopCommand</a>,-4,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,2,-1,1,0,0},</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    {<span class="stringliteral">&quot;bitcount&quot;</span>,<a class="code" href="bitops_8c.html#ab37b7a9613378a1894018aa36f38717e">bitcountCommand</a>,-2,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {<span class="stringliteral">&quot;bitpos&quot;</span>,<a class="code" href="bitops_8c.html#ab1ad23ed68457dde6acc8392449ddd23">bitposCommand</a>,-3,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {<span class="stringliteral">&quot;wait&quot;</span>,<a class="code" href="replication_8c.html#a7165ef8a155631ec4056f99153277c2b">waitCommand</a>,3,<span class="stringliteral">&quot;s&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    {<span class="stringliteral">&quot;command&quot;</span>,<a class="code" href="server_8c.html#a13ee06265ca4b39a89d55522e52e6cf0">commandCommand</a>,0,<span class="stringliteral">&quot;ltR&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {<span class="stringliteral">&quot;geoadd&quot;</span>,<a class="code" href="geo_8c.html#a82b4ce858571367183e61934bc7956ee">geoaddCommand</a>,-5,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {<span class="stringliteral">&quot;georadius&quot;</span>,<a class="code" href="geo_8c.html#a72b8d1b78f421a4b45cf1d5f512f222d">georadiusCommand</a>,-6,<span class="stringliteral">&quot;w&quot;</span>,0,<a class="code" href="db_8c.html#a5e94ebbd0f9e5d4198ed832d321f6ff7">georadiusGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {<span class="stringliteral">&quot;georadius_ro&quot;</span>,<a class="code" href="geo_8c.html#a44f8201e2ead35ff305230162fda6473">georadiusroCommand</a>,-6,<span class="stringliteral">&quot;r&quot;</span>,0,<a class="code" href="db_8c.html#a5e94ebbd0f9e5d4198ed832d321f6ff7">georadiusGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    {<span class="stringliteral">&quot;georadiusbymember&quot;</span>,<a class="code" href="geo_8c.html#a543609a8c18d15f679a23355a8fb66f6">georadiusbymemberCommand</a>,-5,<span class="stringliteral">&quot;w&quot;</span>,0,<a class="code" href="db_8c.html#a5e94ebbd0f9e5d4198ed832d321f6ff7">georadiusGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    {<span class="stringliteral">&quot;georadiusbymember_ro&quot;</span>,<a class="code" href="geo_8c.html#a455937ea1a76e1b4f6ee295b1d504295">georadiusbymemberroCommand</a>,-5,<span class="stringliteral">&quot;r&quot;</span>,0,<a class="code" href="db_8c.html#a5e94ebbd0f9e5d4198ed832d321f6ff7">georadiusGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {<span class="stringliteral">&quot;geohash&quot;</span>,<a class="code" href="geo_8c.html#a6392ef9236b185a2988e3bcda4b92307">geohashCommand</a>,-2,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    {<span class="stringliteral">&quot;geopos&quot;</span>,<a class="code" href="geo_8c.html#a421ca0fe58969d4979d1dea40559b641">geoposCommand</a>,-2,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    {<span class="stringliteral">&quot;geodist&quot;</span>,<a class="code" href="geo_8c.html#ac430686cb8d0fdb278f003407c7c2139">geodistCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {<span class="stringliteral">&quot;pfselftest&quot;</span>,<a class="code" href="hyperloglog_8c.html#acebc0877c8aca6beb919b963b784356d">pfselftestCommand</a>,1,<span class="stringliteral">&quot;a&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {<span class="stringliteral">&quot;pfadd&quot;</span>,<a class="code" href="hyperloglog_8c.html#a258d945b9cd883a1f5190730571819fe">pfaddCommand</a>,-2,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    {<span class="stringliteral">&quot;pfcount&quot;</span>,<a class="code" href="hyperloglog_8c.html#a6fb9b8776b74679f421d3fc3ade798b8">pfcountCommand</a>,-2,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {<span class="stringliteral">&quot;pfmerge&quot;</span>,<a class="code" href="hyperloglog_8c.html#a3cc766564e1420433a9c1e4b59e2ba51">pfmergeCommand</a>,-2,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,1,-1,1,0,0},</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    {<span class="stringliteral">&quot;pfdebug&quot;</span>,<a class="code" href="hyperloglog_8c.html#adc6a2e5cb61800b6dc6dad89a53b2b88">pfdebugCommand</a>,-3,<span class="stringliteral">&quot;w&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {<span class="stringliteral">&quot;xadd&quot;</span>,<a class="code" href="server_8h.html#ae3b1500717382cd57df0145b983850b7">xaddCommand</a>,-5,<span class="stringliteral">&quot;wmFR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {<span class="stringliteral">&quot;xrange&quot;</span>,<a class="code" href="server_8h.html#a1d52bd6ad34190b95bdd913b721579d4">xrangeCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    {<span class="stringliteral">&quot;xrevrange&quot;</span>,<a class="code" href="server_8h.html#a9a9052fd2ff219c8b78526c3aee06b0d">xrevrangeCommand</a>,-4,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    {<span class="stringliteral">&quot;xlen&quot;</span>,<a class="code" href="server_8h.html#a3427a2458646e3be42838aff8a8d462f">xlenCommand</a>,2,<span class="stringliteral">&quot;rF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    {<span class="stringliteral">&quot;xread&quot;</span>,<a class="code" href="server_8h.html#a522e62025050d3c5e38754dd89bff308">xreadCommand</a>,-4,<span class="stringliteral">&quot;rs&quot;</span>,0,<a class="code" href="db_8c.html#acd71f8bb3ecce70aa5a950862eaefbfb">xreadGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {<span class="stringliteral">&quot;xreadgroup&quot;</span>,<a class="code" href="server_8h.html#a522e62025050d3c5e38754dd89bff308">xreadCommand</a>,-7,<span class="stringliteral">&quot;ws&quot;</span>,0,<a class="code" href="db_8c.html#acd71f8bb3ecce70aa5a950862eaefbfb">xreadGetKeys</a>,1,1,1,0,0},</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    {<span class="stringliteral">&quot;xgroup&quot;</span>,<a class="code" href="server_8h.html#a2f9e724916a15106d599c92f2008aa3d">xgroupCommand</a>,-2,<span class="stringliteral">&quot;wm&quot;</span>,0,NULL,2,2,1,0,0},</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {<span class="stringliteral">&quot;xsetid&quot;</span>,<a class="code" href="server_8h.html#a7f42e15eaa12457ce5e5dc897fb0ad83">xsetidCommand</a>,3,<span class="stringliteral">&quot;wmF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {<span class="stringliteral">&quot;xack&quot;</span>,<a class="code" href="server_8h.html#a6490bfa0bdbbc119ec4534f4941c5f58">xackCommand</a>,-4,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    {<span class="stringliteral">&quot;xpending&quot;</span>,<a class="code" href="server_8h.html#a8c19b37d1efc9fd02ae44551430a06be">xpendingCommand</a>,-3,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    {<span class="stringliteral">&quot;xclaim&quot;</span>,<a class="code" href="server_8h.html#a71a6d7c46b8e717e82d80cb49744fcb2">xclaimCommand</a>,-6,<span class="stringliteral">&quot;wRF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {<span class="stringliteral">&quot;xinfo&quot;</span>,<a class="code" href="server_8h.html#a89c17a788c9beba2b0e2db97288c245e">xinfoCommand</a>,-2,<span class="stringliteral">&quot;rR&quot;</span>,0,NULL,2,2,1,0,0},</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    {<span class="stringliteral">&quot;xdel&quot;</span>,<a class="code" href="server_8h.html#ad0681f6bc16125fa278c2e1e1405d624">xdelCommand</a>,-3,<span class="stringliteral">&quot;wF&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    {<span class="stringliteral">&quot;xtrim&quot;</span>,<a class="code" href="server_8h.html#ae083a38d96add33ed217bf7640b11541">xtrimCommand</a>,-2,<span class="stringliteral">&quot;wFR&quot;</span>,0,NULL,1,1,1,0,0},</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {<span class="stringliteral">&quot;post&quot;</span>,<a class="code" href="networking_8c.html#adc0c436432b3be7679bed96bd8e9472e">securityWarningCommand</a>,-1,<span class="stringliteral">&quot;lt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    {<span class="stringliteral">&quot;host:&quot;</span>,<a class="code" href="networking_8c.html#adc0c436432b3be7679bed96bd8e9472e">securityWarningCommand</a>,-1,<span class="stringliteral">&quot;lt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    {<span class="stringliteral">&quot;latency&quot;</span>,<a class="code" href="latency_8c.html#ac43a2991bfa54144ae06a30e6ebb1690">latencyCommand</a>,-2,<span class="stringliteral">&quot;aslt&quot;</span>,0,NULL,0,0,0,0,0},</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    {<span class="stringliteral">&quot;lolwut&quot;</span>,<a class="code" href="lolwut_8c.html#a2b7e3056f3609f07c28dbb05dca5aba5">lolwutCommand</a>,-1,<span class="stringliteral">&quot;r&quot;</span>,0,NULL,0,0,0,0,0}</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;};</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/*============================ Utility functions ============================ */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">/* We use a private localtime implementation which is fork-safe. The logging</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> * function of Redis may be called from other threads. */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a096a91daf3af60dbaccb4de8aa3ca7b2">nolocks_localtime</a>(<span class="keyword">struct</span> tm *tmp, time_t t, time_t tz, <span class="keywordtype">int</span> dst);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/* Low level logging. To use only for very big messages, otherwise</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> * serverLog() is to prefer. */</span></div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="server_8h.html#a9438694faedfc9ba62643c59c414b3dc">  338</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a9438694faedfc9ba62643c59c414b3dc">serverLogRaw</a>(<span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> syslogLevelMap[] = { LOG_DEBUG, LOG_INFO, LOG_NOTICE, LOG_WARNING };</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *c = <span class="stringliteral">&quot;.-*#&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    FILE *fp;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">char</span> buf[64];</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordtype">int</span> rawmode = (level &amp; <a class="code" href="server_8h.html#a6b3768a4d2dfb3ac580b8d999baa9350">LL_RAW</a>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">int</span> log_to_stdout = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    level &amp;= 0xff; <span class="comment">/* clear flags */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (level &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1bdcfae3209cbd96db35a2ae356fa15e">verbosity</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    fp = log_to_stdout ? stdout : fopen(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a>,<span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (rawmode) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        fprintf(fp,<span class="stringliteral">&quot;%s&quot;</span>,msg);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordtype">int</span> off;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordtype">int</span> role_char;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        pid_t pid = getpid();</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        gettimeofday(&amp;tv,NULL);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keyword">struct </span>tm tm;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="server_8c.html#a096a91daf3af60dbaccb4de8aa3ca7b2">nolocks_localtime</a>(&amp;tm,tv.tv_sec,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaffc55850982666923b1b7497631ac79">timezone</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6baf24aca17821492f320e69d6707a7e">daylight_active</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        off = strftime(buf,<span class="keyword">sizeof</span>(buf),<span class="stringliteral">&quot;%d %b %Y %H:%M:%S.&quot;</span>,&amp;tm);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        snprintf(buf+off,<span class="keyword">sizeof</span>(buf)-off,<span class="stringliteral">&quot;%03d&quot;</span>,(<span class="keywordtype">int</span>)tv.tv_usec/1000);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            role_char = <span class="charliteral">&#39;X&#39;</span>; <span class="comment">/* Sentinel. */</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pid != <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            role_char = <span class="charliteral">&#39;C&#39;</span>; <span class="comment">/* RDB / AOF writing child. */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            role_char = (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> ? <span class="charliteral">&#39;S&#39;</span>:<span class="charliteral">&#39;M&#39;</span>); <span class="comment">/* Slave or Master. */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        fprintf(fp,<span class="stringliteral">&quot;%d:%c %s %c %s\n&quot;</span>,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            (<span class="keywordtype">int</span>)getpid(),role_char, buf,c[level],msg);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    fflush(fp);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (!log_to_stdout) fclose(fp);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1e234838fd4211781e47a97ca8dd03cc">syslog_enabled</a>) syslog(syslogLevelMap[level], <span class="stringliteral">&quot;%s&quot;</span>, msg);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">/* Like serverLogRaw() but with printf-alike support. This is the function that</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> * is used across the code. The raw version is only used in order to dump</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"> * the INFO output on crash. */</span></div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="server_8h.html#a5d44be26238d998d662a5d38e4d3e52c">  384</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    va_list ap;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">char</span> msg[<a class="code" href="server_8h.html#a37cd05cbfd7fb52ad21d3a822cff2ee6">LOG_MAX_LEN</a>];</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> ((level&amp;0xff) &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1bdcfae3209cbd96db35a2ae356fa15e">verbosity</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    va_start(ap, fmt);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    vsnprintf(msg, <span class="keyword">sizeof</span>(msg), fmt, ap);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    va_end(ap);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="server_8c.html#a9438694faedfc9ba62643c59c414b3dc">serverLogRaw</a>(level,msg);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/* Log a fixed message without printf-alike capabilities, in a way that is</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> * safe to call from a signal handler.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> * We actually use this only for signals that are not fatal from the point</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> * of view of Redis. Signals that are going to kill the server anyway and</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"> * where we need printf-alike features are served by serverLog(). */</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="server_8h.html#af29037e986e1377d7a74a9c95df0f1e0">  403</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#af29037e986e1377d7a74a9c95df0f1e0">serverLogFromHandler</a>(<span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">int</span> log_to_stdout = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">char</span> buf[64];</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> ((level&amp;0xff) &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1bdcfae3209cbd96db35a2ae356fa15e">verbosity</a> || (log_to_stdout &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa2339b21f98abccd12533a54d5f9d712">daemonize</a>))</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    fd = log_to_stdout ? STDOUT_FILENO :</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                         open(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a>, O_APPEND|O_CREAT|O_WRONLY, 0644);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (fd == -1) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="util_8c.html#a0ec291923d3b4034b8200ac45b97d1b6">ll2string</a>(buf,<span class="keyword">sizeof</span>(buf),getpid());</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (write(fd,buf,strlen(buf)) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (write(fd,<span class="stringliteral">&quot;:signal-handler (&quot;</span>,17) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="util_8c.html#a0ec291923d3b4034b8200ac45b97d1b6">ll2string</a>(buf,<span class="keyword">sizeof</span>(buf),time(NULL));</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (write(fd,buf,strlen(buf)) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (write(fd,<span class="stringliteral">&quot;) &quot;</span>,2) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (write(fd,msg,strlen(msg)) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (write(fd,<span class="stringliteral">&quot;\n&quot;</span>,1) == -1) <span class="keywordflow">goto</span> err;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;err:</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (!log_to_stdout) close(fd);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/* Return the UNIX time in microseconds */</span></div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="server_8h.html#a9ef4824ea818b12731c36603eed062d5">  426</a></span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> ust;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    gettimeofday(&amp;tv, NULL);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    ust = ((<span class="keywordtype">long</span> long)tv.tv_sec)*1000000;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    ust += tv.tv_usec;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> ust;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">/* Return the UNIX time in milliseconds */</span></div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="server_8h.html#a1aa45bb9fac23f08294a8d618ba18d64">  437</a></span>&#160;<a class="code" href="redismodule_8h.html#a652ae61e2475bc8957454534544968fc">mstime_t</a> <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>()/1000;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">/* After an RDB dump or AOF rewrite we exit from children using _exit() instead of</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"> * exit(), because the latter may interact with the same file objects used by</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"> * the parent process. However if we are testing the coverage normal exit() is</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"> * used in order to obtain the right coverage information. */</span></div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="server_8h.html#a1a3a833d70823af9432a61b05c5d04fd">  445</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a1a3a833d70823af9432a61b05c5d04fd">exitFromChild</a>(<span class="keywordtype">int</span> retcode) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">#ifdef COVERAGE_TEST</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    exit(retcode);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    _exit(retcode);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/*====================== Hash table type implementation  ==================== */</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/* This is a hash table type that uses the SDS dynamic strings library as</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"> * keys and redis objects as values (objects can hold SDS strings,</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> * lists, sets). */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="server_8c.html#a88e671bb22d29c9970e6b33a7b4312dd">  459</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a88e671bb22d29c9970e6b33a7b4312dd">dictVanillaFree</a>(<span class="keywordtype">void</span> *privdata, <span class="keywordtype">void</span> *val)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(val);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="server_8c.html#acfaf49811894b77d8a4b8984b2fb6cbf">  465</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#acfaf49811894b77d8a4b8984b2fb6cbf">dictListDestructor</a>(<span class="keywordtype">void</span> *privdata, <span class="keywordtype">void</span> *val)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="adlist_8c.html#a2113a59d0a138217a944af5cafee6d46">listRelease</a>((<a class="code" href="structlist.html">list</a>*)val);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="t__zset_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">  471</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>(<span class="keywordtype">void</span> *privdata, <span class="keyword">const</span> <span class="keywordtype">void</span> *key1,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">void</span> *key2)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">int</span> l1,l2;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    l1 = sdslen((<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a>)key1);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    l2 = sdslen((<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a>)key2);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (l1 != l2) <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> memcmp(key1, key2, l1) == 0;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/* A case insensitive version used for the command lookup table and other</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * places where case insensitive non binary-safe comparison is needed. */</span></div><div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="server_8c.html#ac350c29f63271e4d5766b02997733738">  485</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>(<span class="keywordtype">void</span> *privdata, <span class="keyword">const</span> <span class="keywordtype">void</span> *key1,</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">void</span> *key2)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">return</span> strcasecmp(key1, key2) == 0;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">  493</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>(<span class="keywordtype">void</span> *privdata, <span class="keywordtype">void</span> *val)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (val == NULL) <span class="keywordflow">return</span>; <span class="comment">/* Lazy freeing will set value to NULL. */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(val);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno"><a class="line" href="server_8h.html#af0b4e72e76f0b16f5b43f1d03879b750">  501</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>(<span class="keywordtype">void</span> *privdata, <span class="keywordtype">void</span> *val)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;{</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a>(privdata);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="sds_8c.html#a4d9266a6b2d5a98f0df0ac62f51324fd">sdsfree</a>(val);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="server_8c.html#a1f8ea185286a42da74f3cb080e90fff1">  508</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a1f8ea185286a42da74f3cb080e90fff1">dictObjKeyCompare</a>(<span class="keywordtype">void</span> *privdata, <span class="keyword">const</span> <span class="keywordtype">void</span> *key1,</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">void</span> *key2)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">const</span> <a class="code" href="structredis_object.html">robj</a> *o1 = key1, *o2 = key2;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>(privdata,o1-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,o2-&gt;ptr);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="server_8c.html#aec4df04fce73561a5638b3c5137e43ef">  515</a></span>&#160;uint64_t <a class="code" href="server_8c.html#aec4df04fce73561a5638b3c5137e43ef">dictObjHash</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a>) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keyword">const</span> <a class="code" href="structredis_object.html">robj</a> *o = <a class="code" href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a>(o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, sdslen((<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a>)o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>));</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="t__zset_8c.html#abf11672cc702adce676d41c162b20345">  520</a></span>&#160;uint64_t <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a>) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)key, sdslen((<span class="keywordtype">char</span>*)key));</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">  524</a></span>&#160;uint64_t <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a>) {</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a9e6309bcf1537c2ea46b8205dbf5c79c">dictGenCaseHashFunction</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)key, sdslen((<span class="keywordtype">char</span>*)key));</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="server_8c.html#a1cc981bc44bbef251951374538c489fd">  528</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a1cc981bc44bbef251951374538c489fd">dictEncObjKeyCompare</a>(<span class="keywordtype">void</span> *privdata, <span class="keyword">const</span> <span class="keywordtype">void</span> *key1,</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">void</span> *key2)</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="structredis_object.html">robj</a> *o1 = (<a class="code" href="structredis_object.html">robj</a>*) key1, *o2 = (<a class="code" href="structredis_object.html">robj</a>*) key2;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (o1-&gt;<a class="code" href="structredis_object.html#adecc103e438ee35843ae312812d974a0">encoding</a> == <a class="code" href="server_8h.html#ae934cf008a0be0ef009c92c2d006a816">OBJ_ENCODING_INT</a> &amp;&amp;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        o2-&gt;encoding == <a class="code" href="server_8h.html#ae934cf008a0be0ef009c92c2d006a816">OBJ_ENCODING_INT</a>)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">return</span> o1-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> == o2-&gt;ptr;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    o1 = <a class="code" href="object_8c.html#a42d455241ac5e34b9db676b6e7a23cef">getDecodedObject</a>(o1);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    o2 = <a class="code" href="object_8c.html#a42d455241ac5e34b9db676b6e7a23cef">getDecodedObject</a>(o2);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    cmp = <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>(privdata,o1-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,o2-&gt;ptr);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(o1);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(o2);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="server_8c.html#a2eb31143e51e5ff4255f8cf6cf814c88">  546</a></span>&#160;uint64_t <a class="code" href="server_8c.html#a2eb31143e51e5ff4255f8cf6cf814c88">dictEncObjHash</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a>) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="structredis_object.html">robj</a> *o = (<a class="code" href="structredis_object.html">robj</a>*) key;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8h.html#afcfb5bd97af52d1dbce331745cae030c">sdsEncodedObject</a>(o)) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a>(o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, sdslen((<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a>)o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>));</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (o-&gt;<a class="code" href="structredis_object.html#adecc103e438ee35843ae312812d974a0">encoding</a> == <a class="code" href="server_8h.html#ae934cf008a0be0ef009c92c2d006a816">OBJ_ENCODING_INT</a>) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordtype">char</span> buf[32];</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordtype">int</span> len;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            len = <a class="code" href="util_8c.html#a0ec291923d3b4034b8200ac45b97d1b6">ll2string</a>(buf,32,(<span class="keywordtype">long</span>)o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)buf, len);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            uint64_t hash;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            o = <a class="code" href="object_8c.html#a42d455241ac5e34b9db676b6e7a23cef">getDecodedObject</a>(o);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            hash = <a class="code" href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a>(o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, sdslen((<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a>)o-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>));</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(o);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">return</span> hash;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/* Generic hash table type where keys are Redis Objects, Values</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> * dummy pointers. */</span></div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="server_8h.html#ad82e385bd0bd86e560c48bd2d0f67478">  571</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#ad82e385bd0bd86e560c48bd2d0f67478">objectKeyPointerValueDictType</a> = {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="server_8c.html#a2eb31143e51e5ff4255f8cf6cf814c88">dictEncObjHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    NULL,                      <span class="comment">/* key dup */</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    NULL,                      <span class="comment">/* val dup */</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="server_8c.html#a1cc981bc44bbef251951374538c489fd">dictEncObjKeyCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>,      <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    NULL                       <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;};</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">/* Like objectKeyPointerValueDictType(), but values can be destroyed, if</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> * not NULL, calling zfree(). */</span></div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="server_8h.html#aeef51ee58c906c0eb51ccb8fc523337f">  582</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#aeef51ee58c906c0eb51ccb8fc523337f">objectKeyHeapPointerValueDictType</a> = {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="server_8c.html#a2eb31143e51e5ff4255f8cf6cf814c88">dictEncObjHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    NULL,                      <span class="comment">/* key dup */</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    NULL,                      <span class="comment">/* val dup */</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="server_8c.html#a1cc981bc44bbef251951374538c489fd">dictEncObjKeyCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>,      <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="server_8c.html#a88e671bb22d29c9970e6b33a7b4312dd">dictVanillaFree</a>            <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;};</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/* Set dictionary type. Keys are SDS strings, values are ot used. */</span></div><div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="server_8h.html#a6d37ca075aa0bff83305ecd2823ef744">  592</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a6d37ca075aa0bff83305ecd2823ef744">setDictType</a> = {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,               <span class="comment">/* hash function */</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    NULL,                      <span class="comment">/* key dup */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    NULL,                      <span class="comment">/* val dup */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,         <span class="comment">/* key compare */</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,         <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    NULL                       <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;};</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">/* Sorted sets hash (note: a skiplist is used in addition to the hash table) */</span></div><div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="server_8h.html#a3b638a07aaedd8dc871d0bbd18a662b6">  602</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a3b638a07aaedd8dc871d0bbd18a662b6">zsetDictType</a> = {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,               <span class="comment">/* hash function */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    NULL,                      <span class="comment">/* key dup */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    NULL,                      <span class="comment">/* val dup */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,         <span class="comment">/* key compare */</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    NULL,                      <span class="comment">/* Note: SDS string shared &amp; freed by skiplist */</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    NULL                       <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;};</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/* Db-&gt;dict, keys are sds strings, vals are Redis objects. */</span></div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="server_8h.html#a17053b73c765fbf5a627fdf984dfa5b5">  612</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a17053b73c765fbf5a627fdf984dfa5b5">dbDictType</a> = {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>   <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;};</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">/* server.lua_scripts sha (as sds string) -&gt; scripts (as robj) cache. */</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="server_8h.html#a71fbe9a81ae4723396f78c2099081737">  622</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a71fbe9a81ae4723396f78c2099081737">shaScriptObjectDictType</a> = {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;};</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/* Db-&gt;expires */</span></div><div class="line"><a name="l00632"></a><span class="lineno"><a class="line" href="server_8h.html#afe9ec6263163ba1c2234d5fafafd3305">  632</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#afe9ec6263163ba1c2234d5fafafd3305">keyptrDictType</a> = {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    NULL,                       <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;};</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/* Command table. sds string -&gt; command struct pointer. */</span></div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="server_8c.html#af6a5067383cda7ca4a7fdd76ed0a4e49">  642</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#af6a5067383cda7ca4a7fdd76ed0a4e49">commandTableDictType</a> = {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;};</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/* Hash type hash table (note that small hashes are represented with ziplists) */</span></div><div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="server_8h.html#a5116862ff029d61bef6506eb58b354eb">  652</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a5116862ff029d61bef6506eb58b354eb">hashDictType</a> = {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    dictSdsDestructor           <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;};</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">/* Keylist hash table type has unencoded redis objects as keys and</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment"> * lists as values. It&#39;s used for blocking operations (BLPOP) and to</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"> * map swapped keys to a list of clients waiting for this keys to be loaded. */</span></div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="server_8c.html#adb43393a4b666131c7c9d50fc07f7417">  664</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#adb43393a4b666131c7c9d50fc07f7417">keylistDictType</a> = {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="server_8c.html#aec4df04fce73561a5638b3c5137e43ef">dictObjHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="server_8c.html#a1f8ea185286a42da74f3cb080e90fff1">dictObjKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a>,       <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="server_8c.html#acfaf49811894b77d8a4b8984b2fb6cbf">dictListDestructor</a>          <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;};</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">/* Cluster nodes hash table, mapping nodes addresses 1.2.3.4:6379 to</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"> * clusterNode structures. */</span></div><div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="server_8h.html#ae708fe45da0f49045474eef570a9c94b">  675</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#ae708fe45da0f49045474eef570a9c94b">clusterNodesDictType</a> = {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;};</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">/* Cluster re-addition blacklist. This maps node IDs to the time</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"> * we can re-add this node. The goal is to avoid readding a removed</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"> * node for some time. */</span></div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="server_8h.html#a081bf08d6361c6866492e82b0ac7c69c">  687</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a081bf08d6361c6866492e82b0ac7c69c">clusterNodesBlackListDictType</a> = {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;};</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">/* Cluster re-addition blacklist. This maps node IDs to the time</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"> * we can re-add this node. The goal is to avoid readding a removed</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"> * node for some time. */</span></div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="server_8h.html#ab55a5573159f65b2989a00724b2c18d2">  699</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#ab55a5573159f65b2989a00724b2c18d2">modulesDictType</a> = {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;};</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">/* Migrate cache dict type. */</span></div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="server_8c.html#a7c3f256ff87d31f4c736b141d15649ba">  709</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#a7c3f256ff87d31f4c736b141d15649ba">migrateCacheDictType</a> = {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a>,                <span class="comment">/* hash function */</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a>,          <span class="comment">/* key compare */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;};</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">/* Replication cached script dict (server.repl_scriptcache_dict).</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"> * Keys are sds SHA1 strings, while values are not used at all in the current</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"> * implementation. */</span></div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="server_8h.html#afdc383c06704fe8b2095158efc389ebe">  721</a></span>&#160;<a class="code" href="structdict_type.html">dictType</a> <a class="code" href="server_8c.html#afdc383c06704fe8b2095158efc389ebe">replScriptCacheDictType</a> = {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a>,            <span class="comment">/* hash function */</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    NULL,                       <span class="comment">/* key dup */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    NULL,                       <span class="comment">/* val dup */</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a>,      <span class="comment">/* key compare */</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a>,          <span class="comment">/* key destructor */</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    NULL                        <span class="comment">/* val destructor */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;};</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="server_8h.html#a20f117a4c9b350a980b7e37338dd8228">  730</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a20f117a4c9b350a980b7e37338dd8228">htNeedsResize</a>(<a class="code" href="structdict.html">dict</a> *<a class="code" href="structdict.html">dict</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> size, used;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    size = <a class="code" href="dict_8h.html#aca9596be4bcc2caa07c17dd8cebcceec">dictSlots</a>(dict);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    used = <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(dict);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> (size &gt; <a class="code" href="dict_8h.html#aff97c19d1616cf2c697573ee3f515692">DICT_HT_INITIAL_SIZE</a> &amp;&amp;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            (used*100/size &lt; <a class="code" href="server_8h.html#aab8d0fb9427699c23cdbeb524f875562">HASHTABLE_MIN_FILL</a>));</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;}</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">/* If the percentage of used slots in the HT reaches HASHTABLE_MIN_FILL</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> * we resize the hash table to save memory */</span></div><div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="server_8c.html#ad7d4cb9fb361d3a287c57c45ab896010">  741</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ad7d4cb9fb361d3a287c57c45ab896010">tryResizeHashTables</a>(<span class="keywordtype">int</span> dbid) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a20f117a4c9b350a980b7e37338dd8228">htNeedsResize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>))</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="dict_8c.html#a9207bfc4adb969486d70c098a1a5892e">dictResize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a20f117a4c9b350a980b7e37338dd8228">htNeedsResize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>))</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="dict_8c.html#a9207bfc4adb969486d70c098a1a5892e">dictResize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">/* Our hash table implementation performs rehashing incrementally while</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"> * we write/read from the hash table. Still if the server is idle, the hash</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"> * table will use two tables for a long time. So we try to use 1 millisecond</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"> * of CPU time at every call of this function to perform some rehahsing.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> * The function returns 1 if some rehashing was performed, otherwise 0</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment"> * is returned. */</span></div><div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="server_8c.html#aa06cb110ba3d25c232fd1241979cbd3e">  755</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#aa06cb110ba3d25c232fd1241979cbd3e">incrementallyRehash</a>(<span class="keywordtype">int</span> dbid) {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">/* Keys dictionary */</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8h.html#aa6e4917a6a32fdf47180e03ed8969e02">dictIsRehashing</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>)) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="dict_8c.html#aa912fa4994a15258d2ba9fd8879e41a9">dictRehashMilliseconds</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>,1);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">/* already used our millisecond for this loop... */</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">/* Expires */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8h.html#aa6e4917a6a32fdf47180e03ed8969e02">dictIsRehashing</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>)) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="dict_8c.html#aa912fa4994a15258d2ba9fd8879e41a9">dictRehashMilliseconds</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[dbid].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>,1);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">return</span> 1; <span class="comment">/* already used our millisecond for this loop... */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">/* This function is called once a background process of some kind terminates,</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"> * as we want to avoid resizing the hash tables when there is a child in order</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"> * to play well with copy-on-write (otherwise when a resize happens lots of</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"> * memory pages are copied). The goal of this function is to update the ability</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> * for dict.c to resize the hash tables accordingly to the fact we have o not</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> * running childs. */</span></div><div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="server_8h.html#af9f969928d06fbe9a2fb63f13cb4c801">  775</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#af9f969928d06fbe9a2fb63f13cb4c801">updateDictResizePolicy</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1)</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="dict_8c.html#ab8ad4f6b3eb651aa1de68061c7ed4ca6">dictEnableResize</a>();</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="dict_8c.html#afc2f80f578929fbcfb7ff7a2e847cf90">dictDisableResize</a>();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/* ======================= Cron: called every 100 ms ======================== */</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">/* Add a sample to the operations per second array of samples. */</span></div><div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">  785</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">trackInstantaneousMetric</a>(<span class="keywordtype">int</span> metric, <span class="keywordtype">long</span> <span class="keywordtype">long</span> current_reading) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> t = <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>() - <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a6174bec3505236755e0fde7aae802526">last_sample_time</a>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> ops = current_reading -</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a5b4e7d9ab981c793773240b967e69b35">last_sample_count</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> ops_sec;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    ops_sec = t &gt; 0 ? (ops*1000/t) : 0;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a33ae086151bbbc7e1930cd04c3a58ed0">samples</a>[<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#ae40354a1051342eb5a9db005715dcfa9">idx</a>] =</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        ops_sec;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#ae40354a1051342eb5a9db005715dcfa9">idx</a>++;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#ae40354a1051342eb5a9db005715dcfa9">idx</a> %= <a class="code" href="server_8h.html#a225a9e35f2cb8aa663571625bc59a533">STATS_METRIC_SAMPLES</a>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a6174bec3505236755e0fde7aae802526">last_sample_time</a> = <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>();</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a5b4e7d9ab981c793773240b967e69b35">last_sample_count</a> = current_reading;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">/* Return the mean of all the samples. */</span></div><div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">  802</a></span>&#160;<span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">getInstantaneousMetric</a>(<span class="keywordtype">int</span> metric) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> sum = 0;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#a225a9e35f2cb8aa663571625bc59a533">STATS_METRIC_SAMPLES</a>; j++)</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        sum += <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[metric].<a class="code" href="structredis_server.html#a33ae086151bbbc7e1930cd04c3a58ed0">samples</a>[j];</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">return</span> sum / STATS_METRIC_SAMPLES;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">/* Check for timeouts. Returns non-zero if the client was terminated.</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> * The function gets the current time in milliseconds as argument since</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"> * it gets called multiple times in a loop, so calling gettimeofday() for</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"> * each iteration would be costly without any actual gain. */</span></div><div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="server_8c.html#a74bbe29298fd27a8ade5e78f89e87f6b">  815</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a74bbe29298fd27a8ade5e78f89e87f6b">clientsCronHandleTimeout</a>(<a class="code" href="structclient.html">client</a> *c, <a class="code" href="redismodule_8h.html#a652ae61e2475bc8957454534544968fc">mstime_t</a> now_ms) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    time_t now = now_ms/1000;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8938316e9f6211b407eb2b1b74648f86">maxidletime</a> &amp;&amp;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#ae9f6995948253652bc9454d79a72f4a7">CLIENT_SLAVE</a>) &amp;&amp;    <span class="comment">/* no timeout for slaves */</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a>) &amp;&amp;   <span class="comment">/* no timeout for masters */</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a503ad979164a52f0f5e2a63e4c7da3a0">CLIENT_BLOCKED</a>) &amp;&amp;  <span class="comment">/* no timeout for BLPOP */</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a20f2f5380db97cd09013118ffc9411cc">CLIENT_PUBSUB</a>) &amp;&amp;   <span class="comment">/* no timeout for Pub/Sub clients */</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        (now - c-&gt;<a class="code" href="structclient.html#a08c13433165f221a86bc5c3160f17c82">lastinteraction</a> &gt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8938316e9f6211b407eb2b1b74648f86">maxidletime</a>))</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a479b60032f8da6d8ad72e1a9d0809950">LL_VERBOSE</a>,<span class="stringliteral">&quot;Closing idle client&quot;</span>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="networking_8c.html#a34d1a0858eea45e7d588959840490a7d">freeClient</a>(c);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a503ad979164a52f0f5e2a63e4c7da3a0">CLIENT_BLOCKED</a>) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">/* Blocked OPS timeout is handled with milliseconds resolution.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">         * However note that the actual resolution is limited by</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">         * server.hz. */</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ade2d291613f86ad81abd9b32a331c97d">bpop</a>.<a class="code" href="structblocking_state.html#a1adf524d2a0c7f9eb77f4f78e6c05620">timeout</a> != 0 &amp;&amp; c-&gt;<a class="code" href="structclient.html#ade2d291613f86ad81abd9b32a331c97d">bpop</a>.<a class="code" href="structblocking_state.html#a1adf524d2a0c7f9eb77f4f78e6c05620">timeout</a> &lt; now_ms) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <span class="comment">/* Handle blocking operation specific timeout. */</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <a class="code" href="blocked_8c.html#a013c052c4f60c072698f634122d2a663">replyToBlockedClientTimedOut</a>(c);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            <a class="code" href="blocked_8c.html#aa898365761ea14b64094f6c41bfac1cc">unblockClient</a>(c);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="comment">/* Cluster: handle unblock &amp; redirect of clients blocked</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">             * into keys no longer served by this server. */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cluster_8c.html#a4b2e8f1c74deb908a4af55f7fc20f161">clusterRedirectBlockedClientIfNeeded</a>(c))</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <a class="code" href="blocked_8c.html#aa898365761ea14b64094f6c41bfac1cc">unblockClient</a>(c);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">/* The client query buffer is an sds.c string that can end with a lot of</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"> * free space not used, this function reclaims space if needed.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"> * The function always returns 0 as it never terminates the client. */</span></div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="server_8c.html#a5bd4331cf0cd603021bb75be8e34cf31">  851</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a5bd4331cf0cd603021bb75be8e34cf31">clientsCronResizeQueryBuffer</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordtype">size_t</span> querybuf_size = <a class="code" href="sds_8c.html#a8633545cba735b390afad7bf8b5a9833">sdsAllocSize</a>(c-&gt;<a class="code" href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">querybuf</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    time_t idletime = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a> - c-&gt;<a class="code" href="structclient.html#a08c13433165f221a86bc5c3160f17c82">lastinteraction</a>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">/* There are two conditions to resize the query buffer:</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">     * 1) Query buffer is &gt; BIG_ARG and too big for latest peak.</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">     * 2) Query buffer is &gt; BIG_ARG and client is idle. */</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (querybuf_size &gt; <a class="code" href="server_8h.html#afb6bccf6f1ac66b1d563330ab499fb32">PROTO_MBULK_BIG_ARG</a> &amp;&amp;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;         ((querybuf_size/(c-&gt;<a class="code" href="structclient.html#a09bca2273efb7490d637016ba048ae6e">querybuf_peak</a>+1)) &gt; 2 ||</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;          idletime &gt; 2))</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="comment">/* Only resize the query buffer if it is actually wasting</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">         * at least a few kbytes. */</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span> (sdsavail(c-&gt;<a class="code" href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">querybuf</a>) &gt; 1024*4) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            c-&gt;<a class="code" href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">querybuf</a> = <a class="code" href="sds_8c.html#a12cf0d8aca38e55eef468cc0265ef473">sdsRemoveFreeSpace</a>(c-&gt;<a class="code" href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">querybuf</a>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">/* Reset the peak again to capture the peak memory usage in the next</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">     * cycle. */</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    c-&gt;<a class="code" href="structclient.html#a09bca2273efb7490d637016ba048ae6e">querybuf_peak</a> = 0;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">/* Clients representing masters also use a &quot;pending query buffer&quot; that</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">     * is the yet not applied part of the stream we are reading. Such buffer</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">     * also needs resizing from time to time, otherwise after a very large</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">     * transfer (a huge value or a big MIGRATE operation) it will keep using</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">     * a lot of memory. */</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a>) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="comment">/* There are two conditions to resize the pending query buffer:</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">         * 1) Pending Query buffer is &gt; LIMIT_PENDING_QUERYBUF.</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">         * 2) Used length is smaller than pending_querybuf_size/2 */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordtype">size_t</span> pending_querybuf_size = <a class="code" href="sds_8c.html#a8633545cba735b390afad7bf8b5a9833">sdsAllocSize</a>(c-&gt;<a class="code" href="structclient.html#ae41c09e14760e794d4378519d312ba9a">pending_querybuf</a>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span>(pending_querybuf_size &gt; <a class="code" href="server_8h.html#a2f51c1df6c64bff1fc4156bbab9557b5">LIMIT_PENDING_QUERYBUF</a> &amp;&amp;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;           sdslen(c-&gt;<a class="code" href="structclient.html#ae41c09e14760e794d4378519d312ba9a">pending_querybuf</a>) &lt; (pending_querybuf_size/2))</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            c-&gt;<a class="code" href="structclient.html#ae41c09e14760e794d4378519d312ba9a">pending_querybuf</a> = <a class="code" href="sds_8c.html#a12cf0d8aca38e55eef468cc0265ef473">sdsRemoveFreeSpace</a>(c-&gt;<a class="code" href="structclient.html#ae41c09e14760e794d4378519d312ba9a">pending_querybuf</a>);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/* This function is used in order to track clients using the biggest amount</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"> * of memory in the latest few seconds. This way we can provide such information</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"> * in the INFO output (clients section), without having to do an O(N) scan for</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"> * all the clients.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment"> * This is how it works. We have an array of CLIENTS_PEAK_MEM_USAGE_SLOTS slots</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"> * where we track, for each, the biggest client output and input buffers we</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment"> * saw in that slot. Every slot correspond to one of the latest seconds, since</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"> * the array is indexed by doing UNIXTIME % CLIENTS_PEAK_MEM_USAGE_SLOTS.</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"> * When we want to know what was recently the peak memory usage, we just scan</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"> * such few slots searching for the maximum value. */</span></div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">  903</a></span>&#160;<span class="preprocessor">#define CLIENTS_PEAK_MEM_USAGE_SLOTS 8</span></div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">  904</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[<a class="code" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a>];</div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">  905</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[<a class="code" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a>];</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="server_8c.html#adfc266c0c3523ff393445b3421b9467a">  907</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#adfc266c0c3523ff393445b3421b9467a">clientsCronTrackExpansiveClients</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">size_t</span> in_usage = <a class="code" href="sds_8c.html#a8633545cba735b390afad7bf8b5a9833">sdsAllocSize</a>(c-&gt;<a class="code" href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">querybuf</a>);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">size_t</span> out_usage = <a class="code" href="networking_8c.html#ada74196bbcb069635697ca0d3183e183">getClientOutputBufferMemoryUsage</a>(c);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">int</span> i = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a> % <a class="code" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">int</span> zeroidx = (i+1) % <a class="code" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">/* Always zero the next sample, so that when we switch to that second, we&#39;ll</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">     * only register samples that are greater in that second without considering</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">     * the history of such slot.</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">     * Note: our index may jump to any random position if serverCron() is not</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">     * called for some reason with the normal frequency, for instance because</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">     * some slow command is called taking multiple seconds to execute. In that</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">     * case our array may end containing data which is potentially older</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">     * than CLIENTS_PEAK_MEM_USAGE_SLOTS seconds: however this is not a problem</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">     * since here we want just to track if &quot;recently&quot; there were very expansive</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">     * clients from the POV of memory usage. */</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[zeroidx] = 0;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[zeroidx] = 0;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">/* Track the biggest values observed so far in this slot. */</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">if</span> (in_usage &gt; <a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[i]) <a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[i] = in_usage;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">if</span> (out_usage &gt; <a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[i]) <a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[i] = out_usage;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">/* This function never terminates the client. */</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;}</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">/* Return the max samples in the memory usage of clients tracked by</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"> * the function clientsCronTrackExpansiveClients(). */</span></div><div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="server_8c.html#a1ab599246a3e9b664768ebb0c33d4cce">  936</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a1ab599246a3e9b664768ebb0c33d4cce">getExpansiveClientsInfo</a>(<span class="keywordtype">size_t</span> *in_usage, <span class="keywordtype">size_t</span> *out_usage) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordtype">size_t</span> i = 0, o = 0;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a>; j++) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[j] &gt; i) i = <a class="code" href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a>[j];</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[j] &gt; o) o = <a class="code" href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a>[j];</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    *in_usage = i;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    *out_usage = o;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;}</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">/* This function is called by serverCron() and is used in order to perform</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment"> * operations on clients that are important to perform constantly. For instance</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment"> * we use this function in order to disconnect clients after a timeout, including</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"> * clients blocked in some blocking command with a non-zero timeout.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment"> * The function makes some effort to process all the clients every second, even</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment"> * if this cannot be strictly guaranteed, since serverCron() may be called with</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"> * an actual frequency lower than server.hz in case of latency events like slow</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment"> * commands.</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"> * It is very important for this function, and the functions it calls, to be</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"> * very fast: sometimes Redis has tens of hundreds of connected clients, and the</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"> * default server.hz value is 10, so sometimes here we need to process thousands</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"> * of clients per second, turning this function into a source of latency.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="server_8c.html#a79785342d159d7e8dc4547ffb330835d">  961</a></span>&#160;<span class="preprocessor">#define CLIENTS_CRON_MIN_ITERATIONS 5</span></div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="server_8c.html#a98d0c07d94ea748cb852feb8001cba41">  962</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a98d0c07d94ea748cb852feb8001cba41">clientsCron</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">/* Try to process at least numclients/server.hz of clients</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">     * per call. Since normally (if there are no big latency events) this</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">     * function is called server.hz times per second, in the average case we</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">     * process all the clients in 1 second. */</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordtype">int</span> numclients = <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <span class="keywordtype">int</span> iterations = numclients/<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="redismodule_8h.html#a652ae61e2475bc8957454534544968fc">mstime_t</a> now = <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>();</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">/* Process at least a few clients while we are at it, even if we need</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">     * to process less than CLIENTS_CRON_MIN_ITERATIONS to meet our contract</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">     * of processing each client once per second. */</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">if</span> (iterations &lt; <a class="code" href="server_8c.html#a79785342d159d7e8dc4547ffb330835d">CLIENTS_CRON_MIN_ITERATIONS</a>)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        iterations = (numclients &lt; <a class="code" href="server_8c.html#a79785342d159d7e8dc4547ffb330835d">CLIENTS_CRON_MIN_ITERATIONS</a>) ?</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                     numclients : <a class="code" href="server_8c.html#a79785342d159d7e8dc4547ffb330835d">CLIENTS_CRON_MIN_ITERATIONS</a>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>) &amp;&amp; iterations--) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <a class="code" href="structclient.html">client</a> *c;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="structlist_node.html">listNode</a> *head;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="comment">/* Rotate the list, take the current head, process.</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">         * This way if the client must be removed from the list it&#39;s the</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">         * first element and we don&#39;t incur into O(N) computation. */</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <a class="code" href="adlist_8c.html#ad0572eafe5ee0ebe76023a8434a9ea8c">listRotate</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        head = <a class="code" href="adlist_8h.html#aa8dc514bbe217bb2e87c1c77cfa84690">listFirst</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        c = <a class="code" href="adlist_8h.html#af84cae230e7180ebcda1e2736fce9f65">listNodeValue</a>(head);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="comment">/* The following functions do different service checks on the client.</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">         * The protocol is that they return non-zero if the client was</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">         * terminated. */</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a74bbe29298fd27a8ade5e78f89e87f6b">clientsCronHandleTimeout</a>(c,now)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a5bd4331cf0cd603021bb75be8e34cf31">clientsCronResizeQueryBuffer</a>(c)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#adfc266c0c3523ff393445b3421b9467a">clientsCronTrackExpansiveClients</a>(c)) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">/* This function handles &#39;background&#39; operations we are required to do</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"> * incrementally in Redis databases, such as active key expiring, resizing,</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"> * rehashing. */</span></div><div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="server_8c.html#a3807ad9bc88bdbbf3d7e02e214d56d02"> 1000</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a3807ad9bc88bdbbf3d7e02e214d56d02">databasesCron</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">/* Expire keys by random sampling. Not required for slaves</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">     * as master will synthesize DELs for us. */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a78056184f7c0e33de7ae2c47c06241d9">active_expire_enabled</a> &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> == NULL) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <a class="code" href="expire_8c.html#a9ac447b86b9a05e76145b634348fda4a">activeExpireCycle</a>(<a class="code" href="server_8h.html#a62e5b6ba358ddcdef709e107e4d24744">ACTIVE_EXPIRE_CYCLE_SLOW</a>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> != NULL) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <a class="code" href="expire_8c.html#a698b2c7b12d4733babe53417ff0503c4">expireSlaveKeys</a>();</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="comment">/* Defrag keys gradually. */</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a942145ea5901d08771aba9d27746f2cc">active_defrag_enabled</a>)</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="defrag_8c.html#ae8a66e28d3034eb320bc9ac3df9e4a1f">activeDefragCycle</a>();</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">/* Perform hash tables rehashing if needed, but only if there are no</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">     * other processes saving the DB on disk. Otherwise rehashing is bad</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="comment">     * as will cause a lot of copy-on-write of memory pages. */</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="comment">/* We use global counters so if we stop the computation at a given</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">         * DB we&#39;ll be able to start from the successive in the next</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">         * cron loop iteration. */</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> resize_db = 0;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rehash_db = 0;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordtype">int</span> dbs_per_call = <a class="code" href="server_8h.html#aaab0790ee1a625276dce078a9dbbe075">CRON_DBS_PER_CALL</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="comment">/* Don&#39;t test more DBs than we have. */</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">if</span> (dbs_per_call &gt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>) dbs_per_call = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">/* Resize */</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; dbs_per_call; j++) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <a class="code" href="server_8c.html#ad7d4cb9fb361d3a287c57c45ab896010">tryResizeHashTables</a>(resize_db % <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            resize_db++;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="comment">/* Rehash */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0fd4dc9c26fc4a70bfbfe3e97a6c4295">activerehashing</a>) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; dbs_per_call; j++) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="keywordtype">int</span> work_done = <a class="code" href="server_8c.html#aa06cb110ba3d25c232fd1241979cbd3e">incrementallyRehash</a>(rehash_db);</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="keywordflow">if</span> (work_done) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                    <span class="comment">/* If the function did some work, stop here, we&#39;ll do</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">                     * more at the next cron loop. */</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    <span class="comment">/* If this db didn&#39;t need rehash, we&#39;ll try the next one. */</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    rehash_db++;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    rehash_db %= <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">/* We take a cached value of the unix time in the global state because with</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"> * virtual memory and aging there is to store the current time in objects at</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"> * every object access, and accuracy is not needed. To access a global var is</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> * a lot faster than calling time(NULL) */</span></div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="server_8h.html#a6e0f6f6fad563644eb1b2b382b1fa9dc"> 1056</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a6e0f6f6fad563644eb1b2b382b1fa9dc">updateCachedTime</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    time_t unixtime = time(NULL);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <a class="code" href="atomicvar_8h.html#a0f02b5846dcf4ed3669ecf771c512d12">atomicSet</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>,unixtime);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaef517ca82e5d3ac5b2dbdebbd35f857">mstime</a> = <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>();</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">/* To get information about daylight saving time, we need to call localtime_r</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">     * and cache the result. However calling localtime_r in this context is safe</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">     * since we will never fork() while here, in the main thread. The logging</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">     * function will call a thread safe version of localtime that has no locks. */</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keyword">struct </span>tm tm;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    localtime_r(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>,&amp;tm);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6baf24aca17821492f320e69d6707a7e">daylight_active</a> = tm.tm_isdst;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;}</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">/* This is our timer interrupt, called server.hz times per second.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"> * Here is where we do a number of things that need to be done asynchronously.</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"> * For instance:</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"> * - Active expired keys collection (it is also performed in a lazy way on</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"> *   lookup).</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"> * - Software watchdog.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment"> * - Update some statistic.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"> * - Incremental rehashing of the DBs hash tables.</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment"> * - Triggering BGSAVE / AOF rewrite, and handling of terminated children.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment"> * - Clients timeout of different kinds.</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"> * - Replication reconnection.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment"> * - Many more...</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment"> * Everything directly called here will be called server.hz times per second,</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"> * so in order to throttle execution of things we want to do less frequently</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"> * a macro is used: run_with_period(milliseconds) { .... }</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="server_8c.html#af588c16d11b3c614a398d31edde3275b"> 1089</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#af588c16d11b3c614a398d31edde3275b">serverCron</a>(<span class="keyword">struct</span> <a class="code" href="structae_event_loop.html">aeEventLoop</a> *eventLoop, <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *clientData) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(eventLoop);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(clientData);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">/* Software watchdog: deliver the SIGALRM that will reach the signal</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">     * handler if we don&#39;t return here fast enough. */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6b2bc45f4e219cd3c7f1dbc717ad88ea">watchdog_period</a>) <a class="code" href="debug_8c.html#a52331223339742c28ebd3383a0758853">watchdogScheduleSignal</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6b2bc45f4e219cd3c7f1dbc717ad88ea">watchdog_period</a>);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">/* Update the time cache. */</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="server_8c.html#a6e0f6f6fad563644eb1b2b382b1fa9dc">updateCachedTime</a>();</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeae2d40a88ece004cc0fa4bc228077a8">config_hz</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">/* Adapt the server.hz value to the number of configured clients. If we have</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">     * many clients, we want to call serverCron() with an higher frequency. */</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb58a3bfa3d302d8c4b74b7c4f59644b">dynamic_hz</a>) {</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>) / <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> &gt;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;               <a class="code" href="server_8h.html#a47ec8c745e852fad013870aa64e84188">MAX_CLIENTS_PER_CLOCK_TICK</a>)</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> *= 2;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> &gt; <a class="code" href="server_8h.html#a39e5c16e64adef2e14a9d66a725b91fd">CONFIG_MAX_HZ</a>) {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> = <a class="code" href="server_8h.html#a39e5c16e64adef2e14a9d66a725b91fd">CONFIG_MAX_HZ</a>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(100) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">trackInstantaneousMetric</a>(<a class="code" href="server_8h.html#ac8d50898802f96b76479bc975e1bbbf3">STATS_METRIC_COMMAND</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa818a00bded05cbfc242fbd30a51bd06">stat_numcommands</a>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <a class="code" href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">trackInstantaneousMetric</a>(<a class="code" href="server_8h.html#a6d217560ae714ab8d0cc21832b210e0b">STATS_METRIC_NET_INPUT</a>,</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe1289d87c7c7b12540c36b93d1bdb25">stat_net_input_bytes</a>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <a class="code" href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">trackInstantaneousMetric</a>(<a class="code" href="server_8h.html#a3885f356f3a4cef22eb96fbfcc406333">STATS_METRIC_NET_OUTPUT</a>,</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0e3c35b8ea641cec0a4afb2658bccb9">stat_net_output_bytes</a>);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">/* We have just LRU_BITS bits per object for LRU information.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">     * So we use an (eventually wrapping) LRU clock.</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">     * Note that even if the counter wraps it&#39;s not a big problem,</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">     * everything will still work but some object will appear younger</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">     * to Redis. However for this to happen a given object should never be</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">     * touched for all the time needed to the counter to wrap, which is</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">     * not likely.</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">     * Note that you can change the resolution altering the</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">     * LRU_CLOCK_RESOLUTION define. */</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lruclock = <a class="code" href="evict_8c.html#ac541840357c3d2acaf8b83b1d85fad02">getLRUClock</a>();</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="atomicvar_8h.html#a0f02b5846dcf4ed3669ecf771c512d12">atomicSet</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a99c6b6e30b43c077eb30507d7c1d0813">lruclock</a>,lruclock);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">/* Record the max memory used since the server was started. */</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>() &gt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a>)</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a> = <a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>();</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(100) {</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="comment">/* Sample the RSS and other metrics here since this is a relatively slow call.</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment">         * We must sample the zmalloc_used at the same time we take the rss, otherwise</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">         * the frag ratio calculate may be off (ratio of two samples at different times) */</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">process_rss</a> = <a class="code" href="zmalloc_8c.html#ac9df23b6d142ed3a10bfea258759a3ff">zmalloc_get_rss</a>();</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a24fe6607486bb69f2f446830dbf6c8fb">zmalloc_used</a> = <a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>();</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="comment">/* Sampling the allcator info can be slow too.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">         * The fragmentation ratio it&#39;ll show is potentically more accurate</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">         * it excludes other RSS pages such as: shared libraries, LUA and other non-zmalloc</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">         * allocations, and allocator reserved pages that can be pursed (all not actual frag) */</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="zmalloc_8c.html#ad4842ce8d33e9f71028dc61b6955ecd1">zmalloc_get_allocator_info</a>(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">allocator_allocated</a>,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                   &amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">allocator_active</a>,</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                   &amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a>);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">/* in case the allocator isn&#39;t providing these stats, fake them so that</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">         * fragmention info still shows some (inaccurate metrics) */</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a>) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="comment">/* LUA memory isn&#39;t part of zmalloc_used, but it is part of the process RSS,</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">             * so we must desuct it in order to be able to calculate correct</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">             * &quot;allocator fragmentation&quot; ratio */</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="keywordtype">size_t</span> lua_memory = lua_gc(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab44819023af4734d6f559d7f4e3d18bb">lua</a>,LUA_GCCOUNT,0)*1024LL;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">process_rss</a> - lua_memory;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">allocator_active</a>)</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">allocator_active</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">allocator_allocated</a>)</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">allocator_allocated</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a24fe6607486bb69f2f446830dbf6c8fb">zmalloc_used</a>;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="comment">/* We received a SIGTERM, shutting down here in a safe way, as it is</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment">     * not ok doing so inside the signal handler. */</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">shutdown_asap</a>) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a052960af9fbd487bc866d61c2f0cc996">prepareForShutdown</a>(<a class="code" href="server_8h.html#a077401d3a9f810d535c00725ef6c6532">SHUTDOWN_NOFLAGS</a>) == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) exit(0);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;SIGTERM received but errors trying to shut down the server, check the logs for more information&quot;</span>);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">shutdown_asap</a> = 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="comment">/* Show some info about non-empty databases */</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(5000) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>; j++) {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordtype">long</span> <span class="keywordtype">long</span> size, used, vkeys;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            size = <a class="code" href="dict_8h.html#aca9596be4bcc2caa07c17dd8cebcceec">dictSlots</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            used = <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            vkeys = <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordflow">if</span> (used || vkeys) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a479b60032f8da6d8ad72e1a9d0809950">LL_VERBOSE</a>,<span class="stringliteral">&quot;DB %d: %lld keys (%lld volatile) in %lld slots HT.&quot;</span>,j,used,vkeys,size);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <span class="comment">/* dictPrintStats(server.dict); */</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">/* Show information about connected clients */</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) {</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(5000) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a479b60032f8da6d8ad72e1a9d0809950">LL_VERBOSE</a>,</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="stringliteral">&quot;%lu clients connected (%lu replicas), %zu bytes in use&quot;</span>,</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>)-<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>),</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>),</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                <a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>());</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">/* We need to do a few operations on clients asynchronously. */</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="server_8c.html#a98d0c07d94ea748cb852feb8001cba41">clientsCron</a>();</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="comment">/* Handle background operations on Redis databases. */</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <a class="code" href="server_8c.html#a3807ad9bc88bdbbf3d7e02e214d56d02">databasesCron</a>();</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="comment">/* Start a scheduled AOF rewrite if this was requested by the user while</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">     * a BGSAVE was in progress. */</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1 &amp;&amp;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aab840164dbc88da9dd9f21004b92e3ea">aof_rewrite_scheduled</a>)</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <a class="code" href="aof_8c.html#aa2e5539b40259eac08d1612822ebcf9c">rewriteAppendOnlyFileBackground</a>();</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">/* Check if a background saving or AOF rewrite in progress terminated. */</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> != -1 || <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> != -1 ||</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <a class="code" href="scripting_8c.html#aeb3cfb52752189eb4d68ed4cafb9ebbf">ldbPendingChildren</a>())</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        <span class="keywordtype">int</span> statloc;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        pid_t pid;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">if</span> ((pid = wait3(&amp;statloc,WNOHANG,NULL)) != 0) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <span class="keywordtype">int</span> exitcode = WEXITSTATUS(statloc);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordtype">int</span> bysignal = 0;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">if</span> (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">if</span> (pid == -1) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;wait3() returned an error: %s. &quot;</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                    <span class="stringliteral">&quot;rdb_child_pid = %d, aof_child_pid = %d&quot;</span>,</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                    strerror(errno),</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                    (<span class="keywordtype">int</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a>,</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                    (<span class="keywordtype">int</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a>);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pid == <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a>) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                <a class="code" href="rdb_8c.html#a08638ef1294c6584df5b54b0ef109a95">backgroundSaveDoneHandler</a>(exitcode,bysignal);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                <span class="keywordflow">if</span> (!bysignal &amp;&amp; exitcode == 0) <a class="code" href="childinfo_8c.html#a8453f3d3b0bbc7b3fcad3802aab61853">receiveChildInfo</a>();</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pid == <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                <a class="code" href="aof_8c.html#a1fed587e74f1e81c22594897f3d0ccf3">backgroundRewriteDoneHandler</a>(exitcode,bysignal);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                <span class="keywordflow">if</span> (!bysignal &amp;&amp; exitcode == 0) <a class="code" href="childinfo_8c.html#a8453f3d3b0bbc7b3fcad3802aab61853">receiveChildInfo</a>();</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="scripting_8c.html#ab85a8e6842f1e1c17c6954ffb09eddad">ldbRemoveChild</a>(pid)) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        <span class="stringliteral">&quot;Warning, detected child with unmatched pid: %ld&quot;</span>,</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                        (<span class="keywordtype">long</span>)pid);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="server_8c.html#af9f969928d06fbe9a2fb63f13cb4c801">updateDictResizePolicy</a>();</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="childinfo_8c.html#ae870ecf71d2516302c699eb89cb1dc70">closeChildInfoPipe</a>();</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="comment">/* If there is not a background saving/rewrite in progress check if</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">         * we have to save/rewrite now. */</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad4654cdc5b77789a9175000290abc831">saveparamslen</a>; j++) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <span class="keyword">struct </span><a class="code" href="structsaveparam.html">saveparam</a> *sp = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2ef075c5a1090a6b39536909cd779787">saveparams</a>+j;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="comment">/* Save if we reached the given amount of changes,</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">             * the given amount of seconds, and if the latest bgsave was</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<span class="comment">             * successful or if, in case of an error, at least</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">             * CONFIG_BGSAVE_RETRY_DELAY seconds already elapsed. */</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">dirty</a> &gt;= sp-&gt;<a class="code" href="structsaveparam.html#a428798c15a127930411bd3af43e3cdc7">changes</a> &amp;&amp;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae08caa5f869e19e94cd95d1a2edea4b2">lastsave</a> &gt; sp-&gt;<a class="code" href="structsaveparam.html#ae112d79896ed83ac05e155da60e85523">seconds</a> &amp;&amp;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab23a754e7d3bd832810530b360eabd91">lastbgsave_try</a> &gt;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                 <a class="code" href="server_8h.html#a27e00ebd25c04beef22fabf61ea0b5ea">CONFIG_BGSAVE_RETRY_DELAY</a> ||</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                 <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">lastbgsave_status</a> == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>))</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;%d changes in %d seconds. Saving...&quot;</span>,</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                    sp-&gt;<a class="code" href="structsaveparam.html#a428798c15a127930411bd3af43e3cdc7">changes</a>, (<span class="keywordtype">int</span>)sp-&gt;<a class="code" href="structsaveparam.html#ae112d79896ed83ac05e155da60e85523">seconds</a>);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                <a class="code" href="structrdb_save_info.html">rdbSaveInfo</a> rsi, *rsiptr;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                rsiptr = <a class="code" href="rdb_8c.html#a4838759ceeea9016784d256d85dc04ea">rdbPopulateSaveInfo</a>(&amp;rsi);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                <a class="code" href="rdb_8c.html#a375bcef317cf901664d95fad3bfcfd40">rdbSaveBackground</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">rdb_filename</a>,rsiptr);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="comment">/* Trigger an AOF rewrite if needed. */</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> == <a class="code" href="server_8h.html#af6b151c9dced28e94c19479197113a83">AOF_ON</a> &amp;&amp;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1 &amp;&amp;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1 &amp;&amp;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac106a3df3840507040d96398c5872311">aof_rewrite_perc</a> &amp;&amp;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a144bfd85a66513e2cba147e3329c6e0d">aof_current_size</a> &gt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1fc70c8161cd5f19a076dc119c7cf0af">aof_rewrite_min_size</a>)</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordtype">long</span> <span class="keywordtype">long</span> base = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a44b41e9adbd5c3f5d46df203b79d987a">aof_rewrite_base_size</a> ?</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a44b41e9adbd5c3f5d46df203b79d987a">aof_rewrite_base_size</a> : 1;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keywordtype">long</span> <span class="keywordtype">long</span> growth = (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a144bfd85a66513e2cba147e3329c6e0d">aof_current_size</a>*100/base) - 100;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <span class="keywordflow">if</span> (growth &gt;= <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac106a3df3840507040d96398c5872311">aof_rewrite_perc</a>) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Starting automatic rewriting of AOF on %lld%% growth&quot;</span>,growth);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                <a class="code" href="aof_8c.html#aa2e5539b40259eac08d1612822ebcf9c">rewriteAppendOnlyFileBackground</a>();</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="comment">/* AOF postponed flush: Try at every cron cycle if the slow fsync</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">     * completed. */</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#addf6373063f352c2ede7d06f1260b820">aof_flush_postponed_start</a>) <a class="code" href="aof_8c.html#a85f34d09b65dafc802c9eb3c6a344d37">flushAppendOnlyFile</a>(0);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="comment">/* AOF write errors: in this case we have a buffer to flush as well and</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">     * clear the AOF error in case of success to make the DB writable again,</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">     * however to try every second is enough in case of &#39;hz&#39; is set to</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">     * an higher frequency. */</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(1000) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa67a20f0faa8ffcc2abcb42b15d4b3d0">aof_last_write_status</a> == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <a class="code" href="aof_8c.html#a85f34d09b65dafc802c9eb3c6a344d37">flushAppendOnlyFile</a>(0);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="comment">/* Close clients that need to be closed asynchronous */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="networking_8c.html#ae560b28a9d6ceb5ead039461970f59b8">freeClientsInAsyncFreeQueue</a>();</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">/* Clear the paused clients flag if needed. */</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="networking_8c.html#ad30dc7b4a28c489b672535b1a47c7612">clientsArePaused</a>(); <span class="comment">/* Don&#39;t check return value, just use the side effect.*/</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="comment">/* Replication cron function -- used to reconnect to master,</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">     * detect transfer failures, start background RDB transfers and so forth. */</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(1000) <a class="code" href="replication_8c.html#a1e6f92550637c74bd1ae6b34ee8e36dc">replicationCron</a>();</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="comment">/* Run the Redis Cluster cron. */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(100) {</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) <a class="code" href="cluster_8c.html#a29d9657a4ac5c0dbe65bb20c36202d43">clusterCron</a>();</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="comment">/* Run the Sentinel timer if we are in sentinel mode. */</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) <a class="code" href="sentinel_8c.html#a3cb995563d699c28a1f74dea410f131b">sentinelTimer</a>();</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">/* Cleanup expired MIGRATE cached sockets. */</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a>(1000) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="cluster_8c.html#a5ceb25441c0355b24f1d991b704cb3b5">migrateCloseTimedoutSockets</a>();</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="comment">/* Start a scheduled BGSAVE if the corresponding flag is set. This is</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">     * useful when we are forced to postpone a BGSAVE because an AOF</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">     * rewrite is in progress.</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">     * Note: this code must be after the replicationCron() call above so</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">     * make sure when refactoring this file to keep this order. This is useful</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">     * because we want to give priority to RDB savings for replication. */</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1 &amp;&amp;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a15ca1e9689b70a0f66fe2ccc7ae435cb">rdb_bgsave_scheduled</a> &amp;&amp;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab23a754e7d3bd832810530b360eabd91">lastbgsave_try</a> &gt; <a class="code" href="server_8h.html#a27e00ebd25c04beef22fabf61ea0b5ea">CONFIG_BGSAVE_RETRY_DELAY</a> ||</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;         <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">lastbgsave_status</a> == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>))</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="structrdb_save_info.html">rdbSaveInfo</a> rsi, *rsiptr;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        rsiptr = <a class="code" href="rdb_8c.html#a4838759ceeea9016784d256d85dc04ea">rdbPopulateSaveInfo</a>(&amp;rsi);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="rdb_8c.html#a375bcef317cf901664d95fad3bfcfd40">rdbSaveBackground</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">rdb_filename</a>,rsiptr) == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>)</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a15ca1e9689b70a0f66fe2ccc7ae435cb">rdb_bgsave_scheduled</a> = 0;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa80c0c1c323f199611105d43a6e5ed28">cronloops</a>++;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">return</span> 1000/<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;}</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">/* This function gets called every time Redis is entering the</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment"> * main loop of the event driven library, that is, before to sleep</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment"> * for ready file descriptors. */</span></div><div class="line"><a name="l01358"></a><span class="lineno"><a class="line" href="server_8c.html#a1e6f24a15ad04b8e16084190fb05cc42"> 1358</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a1e6f24a15ad04b8e16084190fb05cc42">beforeSleep</a>(<span class="keyword">struct</span> <a class="code" href="structae_event_loop.html">aeEventLoop</a> *eventLoop) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(eventLoop);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="comment">/* Call the Redis Cluster before sleep function. Note that this function</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">     * may change the state of Redis Cluster (from ok to fail or vice versa),</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">     * so it&#39;s a good idea to call it before serving the unblocked clients</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">     * later in this function. */</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) <a class="code" href="cluster_8c.html#a194aa6e002b5b8eb055233a6f3f8cb3a">clusterBeforeSleep</a>();</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="comment">/* Run a fast expire cycle (the called function will return</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">     * ASAP if a fast cycle is not needed). */</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a78056184f7c0e33de7ae2c47c06241d9">active_expire_enabled</a> &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> == NULL)</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <a class="code" href="expire_8c.html#a9ac447b86b9a05e76145b634348fda4a">activeExpireCycle</a>(<a class="code" href="server_8h.html#ae265e849da28d7e7793659e45579ee11">ACTIVE_EXPIRE_CYCLE_FAST</a>);</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="comment">/* Send all the slaves an ACK request if at least one client blocked</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">     * during the previous event loop iteration. */</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a07a4e0373efa220e37c571db92057029">get_ack_from_slaves</a>) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <a class="code" href="structredis_object.html">robj</a> *argv[3];</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        argv[0] = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;REPLCONF&quot;</span>,8);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        argv[1] = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;GETACK&quot;</span>,6);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        argv[2] = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;*&quot;</span>,1); <span class="comment">/* Not used argument. */</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <a class="code" href="replication_8c.html#a767d8f1bda78e1aca2fcb8da3d495a59">replicationFeedSlaves</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a5d8345cb446035f33a1ff2c093870f35">slaveseldb</a>, argv, 3);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(argv[0]);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(argv[1]);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(argv[2]);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a07a4e0373efa220e37c571db92057029">get_ack_from_slaves</a> = 0;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    }</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">/* Unblock all the clients blocked for synchronous replication</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">     * in WAIT. */</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a5f87bbf8bd892d1459c39ae55c19bdec">clients_waiting_acks</a>))</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <a class="code" href="replication_8c.html#a52f8e1fcf71986503c1a7fff6066bfaa">processClientsWaitingReplicas</a>();</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="comment">/* Check if there are clients unblocked by modules that implement</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">     * blocking commands. */</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="module_8c.html#a4904fe1a72e86ea32fbe45393445620d">moduleHandleBlockedClients</a>();</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="comment">/* Try to process pending commands for clients that were just unblocked. */</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af1e6c692e015469af388bc1e9e1307ed">unblocked_clients</a>))</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <a class="code" href="blocked_8c.html#a1d7d6a801531d229b34b082122c82d83">processUnblockedClients</a>();</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">/* Write the AOF buffer on disk */</span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="aof_8c.html#a85f34d09b65dafc802c9eb3c6a344d37">flushAppendOnlyFile</a>(0);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="comment">/* Handle writes with pending output buffers. */</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="networking_8c.html#a5b7a1863aa26723ce29afe1ad44b12c1">handleClientsWithPendingWrites</a>();</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">/* Before we are going to sleep, let the threads access the dataset by</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">     * releasing the GIL. Redis main thread will not touch anything at this</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">     * time. */</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="module_8c.html#ad77ba8d952365687cc72a35ccc5e0b3c">moduleCount</a>()) <a class="code" href="module_8c.html#aff1542d7a41c4f3ff27bfd4326fbd247">moduleReleaseGIL</a>();</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">/* This function is called immadiately after the event loop multiplexing</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment"> * API returned, and the control is going to soon return to Redis by invoking</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment"> * the different events callbacks. */</span></div><div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="server_8c.html#a5baf7e76a67bcd855a187fae72c2d3bf"> 1415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a5baf7e76a67bcd855a187fae72c2d3bf">afterSleep</a>(<span class="keyword">struct</span> <a class="code" href="structae_event_loop.html">aeEventLoop</a> *eventLoop) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(eventLoop);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="module_8c.html#ad77ba8d952365687cc72a35ccc5e0b3c">moduleCount</a>()) <a class="code" href="module_8c.html#a536a21756c3b996ca78b9053e17bdc06">moduleAcquireGIL</a>();</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;}</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">/* =========================== Server initialization ======================== */</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="server_8c.html#aacccd08c1c30ec2982422f0f349f96b3"> 1422</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#aacccd08c1c30ec2982422f0f349f96b3">createSharedObjects</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a8e86d7d4a75a99a34dbd2a92d4b72f7b">crlf</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;\r\n&quot;</span>));</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#adf30e1960aaa30991c8cc6f5d1b8f1f5">ok</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;+OK\r\n&quot;</span>));</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a5bb2a1ee7cb13a791280fa3f6f4fb49d">err</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;-ERR\r\n&quot;</span>));</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a2000cee710e5ba495f272e3f5a76a06d">emptybulk</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;$0\r\n\r\n&quot;</span>));</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a6f3eb32f4b1c6b80d7c749a1436161cd">czero</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;:0\r\n&quot;</span>));</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a2a3c372da9bb19fb6f5f3a5a1316b6b8">cone</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;:1\r\n&quot;</span>));</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a003d043b915883dacb3360afccdaabc0">cnegone</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;:-1\r\n&quot;</span>));</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a9b39b9335155d55eb2e631def6827b82">nullbulk</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;$-1\r\n&quot;</span>));</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ac85b834d303fa79baa4900ba584e580e">nullmultibulk</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;*-1\r\n&quot;</span>));</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ae0dc19921ef5f92e1dacd14526c8cc3e">emptymultibulk</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;*0\r\n&quot;</span>));</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a0d9dc084f22782d4cf6740dca7c606f5">pong</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;+PONG\r\n&quot;</span>));</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af1169abbaa153a574db3ad92b5a62dec">queued</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;+QUEUED\r\n&quot;</span>));</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a336652c82ce06dac863197d50697ffe2">emptyscan</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;*2\r\n$1\r\n0\r\n*0\r\n&quot;</span>));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a72d93f8c752cbe76e225113137ac21ec">wrongtypeerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="stringliteral">&quot;-WRONGTYPE Operation against a key holding the wrong kind of value\r\n&quot;</span>));</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af656fbe75f826d0b700d1e4dd21dc935">nokeyerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="stringliteral">&quot;-ERR no such key\r\n&quot;</span>));</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#aff4b27537592388d89ec9788325cc134">syntaxerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="stringliteral">&quot;-ERR syntax error\r\n&quot;</span>));</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a5d8232e4793ca39381aaf0de4b23023e">sameobjecterr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="stringliteral">&quot;-ERR source and destination objects are the same\r\n&quot;</span>));</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a487e5c6040610ebb13a617cadfd2ffe1">outofrangeerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="stringliteral">&quot;-ERR index out of range\r\n&quot;</span>));</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#adb319a36f9a5125295c89701c1090a44">noscripterr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="stringliteral">&quot;-NOSCRIPT No matching script. Please use EVAL.\r\n&quot;</span>));</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ab0049b4891325314ab168a96180f8500">loadingerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="stringliteral">&quot;-LOADING Redis is loading the dataset in memory\r\n&quot;</span>));</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#abc68d5d846335b9ca10130c196268b67">slowscripterr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <span class="stringliteral">&quot;-BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE.\r\n&quot;</span>));</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a98b0919e4d91db1f0737099903c2d020">masterdownerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="stringliteral">&quot;-MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to &#39;no&#39;.\r\n&quot;</span>));</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a8e60666fa4a7bb1814cfc4734c9504d9">bgsaveerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="stringliteral">&quot;-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\r\n&quot;</span>));</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a332bfc8ddfe9e7c0ecfbef5f85a9014a">roslaveerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        <span class="stringliteral">&quot;-READONLY You can&#39;t write against a read only replica.\r\n&quot;</span>));</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a6af65e1a894c290efe8a917e9a318d65">noautherr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="stringliteral">&quot;-NOAUTH Authentication required.\r\n&quot;</span>));</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a04d6600ef1fe2b894f70764a861e41ff">oomerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="stringliteral">&quot;-OOM command not allowed when used memory &gt; &#39;maxmemory&#39;.\r\n&quot;</span>));</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ae0861a6d46f478570cfa00f797eae1ac">execaborterr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <span class="stringliteral">&quot;-EXECABORT Transaction discarded because of previous errors.\r\n&quot;</span>));</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af5c9958d2aef90751637972126ea441d">noreplicaserr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <span class="stringliteral">&quot;-NOREPLICAS Not enough good replicas to write.\r\n&quot;</span>));</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a6384c1eb0ed7c50d69e80af355a5866c">busykeyerr</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <span class="stringliteral">&quot;-BUSYKEY Target key name already exists.\r\n&quot;</span>));</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a52f1b7a905e11005b98c2b413cf312fd">space</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot; &quot;</span>));</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a7757d2719322989b2b8a084f06d5410a">colon</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;:&quot;</span>));</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a57d329aa59d364f97cf11cc419c8f968">plus</a> = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,<a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;+&quot;</span>));</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#a950a6acbe9809f9e3dc541e8175b7b44">PROTO_SHARED_SELECT_CMDS</a>; j++) {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="keywordtype">char</span> dictid_str[64];</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordtype">int</span> dictid_len;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        dictid_len = <a class="code" href="util_8c.html#a0ec291923d3b4034b8200ac45b97d1b6">ll2string</a>(dictid_str,<span class="keyword">sizeof</span>(dictid_str),j);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a6ee5caf807a005678e7075fd44ce7038">select</a>[j] = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(<a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>(),</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                <span class="stringliteral">&quot;*2\r\n$6\r\nSELECT\r\n$%d\r\n%s\r\n&quot;</span>,</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                dictid_len, dictid_str));</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a08fd7c7369de058dcf4225d8cd4e8e78">messagebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$7\r\nmessage\r\n&quot;</span>,13);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a77c06a595d2361dac7f9850206edd65d">pmessagebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$8\r\npmessage\r\n&quot;</span>,14);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a55aac59c6e764de00683477c4a760ed2">subscribebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$9\r\nsubscribe\r\n&quot;</span>,15);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ac72519418e62af0eef5f9a568b956504">unsubscribebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$11\r\nunsubscribe\r\n&quot;</span>,18);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#add3893894b8fb0a0f7d3a4c182ef4e9e">psubscribebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$10\r\npsubscribe\r\n&quot;</span>,17);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a18e82c193f4ef2d57caf0eb697679596">punsubscribebulk</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;$12\r\npunsubscribe\r\n&quot;</span>,19);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a8e6a0ce0f0a88aca63b18e417de09cac">del</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;DEL&quot;</span>,3);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af489983c57174cb5b97002fc2cd1e0d5">unlink</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;UNLINK&quot;</span>,6);</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af4f77116ef0692e38caf492ab0ae0aa5">rpop</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;RPOP&quot;</span>,4);</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a2f2790835bd839f996e27b66682e8665">lpop</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;LPOP&quot;</span>,4);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a74ff42ea3b15dd3271cf5e060e68d2fd">lpush</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;LPUSH&quot;</span>,5);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ac63a0c4f6733ddf45a05ffe9069213fd">rpoplpush</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;RPOPLPUSH&quot;</span>,9);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a068ba9c2967d8f0f639a27df62d9122d">zpopmin</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;ZPOPMIN&quot;</span>,7);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ac83914f3396175fb89619333b752fc41">zpopmax</a> = <a class="code" href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a>(<span class="stringliteral">&quot;ZPOPMAX&quot;</span>,7);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#a311fc8b18b93af94e1ad418f1386b519">OBJ_SHARED_INTEGERS</a>; j++) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a0a900c43b0635b0afef2c83d7def52c7">integers</a>[j] =</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <a class="code" href="object_8c.html#aa14f89ea2cc52c4e3d9ba91d85478a1c">makeObjectShared</a>(<a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,(<span class="keywordtype">void</span>*)(<span class="keywordtype">long</span>)j));</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a0a900c43b0635b0afef2c83d7def52c7">integers</a>[j]-&gt;<a class="code" href="structredis_object.html#adecc103e438ee35843ae312812d974a0">encoding</a> = <a class="code" href="server_8h.html#ae934cf008a0be0ef009c92c2d006a816">OBJ_ENCODING_INT</a>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#aff2f6e62c729d3f8b119d761818be317">OBJ_SHARED_BULKHDR_LEN</a>; j++) {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a5ba04845895cc30f8583215e1b1bfd32">mbulkhdr</a>[j] = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(<a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>(),<span class="stringliteral">&quot;*%d\r\n&quot;</span>,j));</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#aad9ef4e12438584f8b4a1ea055ba1d9c">bulkhdr</a>[j] = <a class="code" href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a>(<a class="code" href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a>,</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(<a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>(),<span class="stringliteral">&quot;$%d\r\n&quot;</span>,j));</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">/* The following two shared objects, minstring and maxstrings, are not</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">     * actually used for their value but as a special object meaning</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">     * respectively the minimum possible string and the maximum possible</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">     * string in string comparisons for the ZRANGEBYLEX command. */</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a5d1b090719486b6cba969aa7f76fcf8e">minstring</a> = <a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;minstring&quot;</span>);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a9ec2b071c9af3042098b878026d9c3dd">maxstring</a> = <a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(<span class="stringliteral">&quot;maxstring&quot;</span>);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;}</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="server_8c.html#ad708a8be8ec0172827f3006e9237f840"> 1517</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ad708a8be8ec0172827f3006e9237f840">initServerConfig</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    pthread_mutex_init(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab3c25439f27c5b8411020804ffe59b51">next_client_id_mutex</a>,NULL);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    pthread_mutex_init(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abbd87a8d07dfa99cfb535b59fcb83b4c">lruclock_mutex</a>,NULL);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    pthread_mutex_init(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a25c0d5c7a909d3768192bd96a83116fc">unixtime_mutex</a>,NULL);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="server_8c.html#a6e0f6f6fad563644eb1b2b382b1fa9dc">updateCachedTime</a>();</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="server_8h.html#a293669fbc8a97f4cdb8a8de87e9a6911">getRandomHexChars</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3bd69064f36a186f0a83bbe22cee41d2">runid</a>,<a class="code" href="server_8h.html#aba6794fa3ee28f85165eaed93190f1df">CONFIG_RUN_ID_SIZE</a>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3bd69064f36a186f0a83bbe22cee41d2">runid</a>[<a class="code" href="server_8h.html#aba6794fa3ee28f85165eaed93190f1df">CONFIG_RUN_ID_SIZE</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="replication_8c.html#af842a6430c5f5a08a39d5e2112041a85">changeReplicationId</a>();</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="replication_8c.html#a37d4584ae9eb714716d84482498a1fe6">clearReplicationId2</a>();</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaffc55850982666923b1b7497631ac79">timezone</a> = timezone; <span class="comment">/* Initialized by tzset(). */</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a> = NULL;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a> = NULL;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeae2d40a88ece004cc0fa4bc228077a8">config_hz</a> = <a class="code" href="server_8h.html#aa5a3b127e21d6bf089025d953c44678a">CONFIG_DEFAULT_HZ</a>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb58a3bfa3d302d8c4b74b7c4f59644b">dynamic_hz</a> = <a class="code" href="server_8h.html#ae93fffc90adf826b97c182893d1f7c5a">CONFIG_DEFAULT_DYNAMIC_HZ</a>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4fa04e8ede4efc50a4eae5a4ee94be15">arch_bits</a> = (<span class="keyword">sizeof</span>(long) == 8) ? 64 : 32;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a> = <a class="code" href="server_8h.html#afc9f3396e2da1194ef2ccc6ab97d4e3d">CONFIG_DEFAULT_SERVER_PORT</a>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a> = <a class="code" href="server_8h.html#ab85c155ec2652313a561af139fdb5575">CONFIG_DEFAULT_TCP_BACKLOG</a>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa0e3099c4f00ad746e97d1bc7685f95">bindaddr_count</a> = 0;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a> = NULL;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aadc46c1e937463532712d5cf6579eaa8">unixsocketperm</a> = <a class="code" href="server_8h.html#a486eb6d6b0e44a772877112dbd928494">CONFIG_DEFAULT_UNIX_SOCKET_PERM</a>;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a> = 0;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> = -1;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3d1de338a7f6bb594efb159e1e34bf2d">protected_mode</a> = <a class="code" href="server_8h.html#aa84cedc4d9e3da82d28324a85626a666">CONFIG_DEFAULT_PROTECTED_MODE</a>;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a> = <a class="code" href="server_8h.html#abc5ff12d4e9b662f85d2cb11a0220926">CONFIG_DEFAULT_DBNUM</a>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1bdcfae3209cbd96db35a2ae356fa15e">verbosity</a> = <a class="code" href="server_8h.html#a407337e4d193cc8fc965938b7a247240">CONFIG_DEFAULT_VERBOSITY</a>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8938316e9f6211b407eb2b1b74648f86">maxidletime</a> = <a class="code" href="server_8h.html#a1d6ca2cad092805de3acd7b74876a323">CONFIG_DEFAULT_CLIENT_TIMEOUT</a>;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a93ff934e4b3870c270b9149fc4f65fe6">tcpkeepalive</a> = <a class="code" href="server_8h.html#a2c8d2290c3ac70d63ed2e62b11ab566b">CONFIG_DEFAULT_TCP_KEEPALIVE</a>;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a78056184f7c0e33de7ae2c47c06241d9">active_expire_enabled</a> = 1;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a942145ea5901d08771aba9d27746f2cc">active_defrag_enabled</a> = <a class="code" href="server_8h.html#a7bc03a080189821c8c88b31027281d4b">CONFIG_DEFAULT_ACTIVE_DEFRAG</a>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abc0787f1240642d77c7e797e7a9b5667">active_defrag_ignore_bytes</a> = <a class="code" href="server_8h.html#aed98ddd341b643d52417b875418b2ecb">CONFIG_DEFAULT_DEFRAG_IGNORE_BYTES</a>;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acd747facbe7c55a698e167667b5deddc">active_defrag_threshold_lower</a> = <a class="code" href="server_8h.html#a9d23ea1ff80f9db5faef6f5aca6f76aa">CONFIG_DEFAULT_DEFRAG_THRESHOLD_LOWER</a>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad96648ad6e6ace0d086d5d599a0dba60">active_defrag_threshold_upper</a> = <a class="code" href="server_8h.html#a75b8ce2fafb93ddeb96f0e5602c2bd0c">CONFIG_DEFAULT_DEFRAG_THRESHOLD_UPPER</a>;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1ed4dbd1b85eb15f7d9afca46a1342da">active_defrag_cycle_min</a> = <a class="code" href="server_8h.html#a5d49d5c9a11564577f7e78d6f52d9db5">CONFIG_DEFAULT_DEFRAG_CYCLE_MIN</a>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb5ed4e0e888f5378c38ea3667cec956">active_defrag_cycle_max</a> = <a class="code" href="server_8h.html#ac3f69c7e78a189639eab66a2b32753d0">CONFIG_DEFAULT_DEFRAG_CYCLE_MAX</a>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6da0c59bbc902ce083758c4498893a65">active_defrag_max_scan_fields</a> = <a class="code" href="server_8h.html#a4d95efc047deefbc5459b4492c3588d2">CONFIG_DEFAULT_DEFRAG_MAX_SCAN_FIELDS</a>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad8b9c110356e88c74267accd345b669d">proto_max_bulk_len</a> = <a class="code" href="server_8h.html#a0301682a02368c940035f9e5d9616450">CONFIG_DEFAULT_PROTO_MAX_BULK_LEN</a>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2a6541cee50890f9c9be5d252b2f9b31">client_max_querybuf_len</a> = <a class="code" href="server_8h.html#a395f766c5962e4ee2da01dee43600f7a">PROTO_MAX_QUERYBUF_LEN</a>;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2ef075c5a1090a6b39536909cd779787">saveparams</a> = NULL;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> = 0;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#a0698b50ff7fe51afd74cf20a72b75e1b">CONFIG_DEFAULT_LOGFILE</a>);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1e234838fd4211781e47a97ca8dd03cc">syslog_enabled</a> = <a class="code" href="server_8h.html#a22c57e53d530d95ae346f13d6781a549">CONFIG_DEFAULT_SYSLOG_ENABLED</a>;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae4a6e447ef5fbc09a9765fa2da7c51d7">syslog_ident</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#ac7414291a371fd3a2bad4d34e13f0d77">CONFIG_DEFAULT_SYSLOG_IDENT</a>);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4f074cb73b7191ef570261fb35b29a8e">syslog_facility</a> = LOG_LOCAL0;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa2339b21f98abccd12533a54d5f9d712">daemonize</a> = <a class="code" href="server_8h.html#a1783425a4095949ab8b23ae4cbe0e576">CONFIG_DEFAULT_DAEMONIZE</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae4d226836f4e8579243896d2ad72c8fd">supervised</a> = 0;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2be7aa4385144f8fb0d9b18f0a7a63b9">supervised_mode</a> = <a class="code" href="server_8h.html#a2a0d6ba64b419357e52a6473f48bc882">SUPERVISED_NONE</a>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> = <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a>;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a051898042b62130483a09369ab92e5b0">aof_fsync</a> = <a class="code" href="server_8h.html#af07bcc4b15ed4f7aed3f6efcb483b75b">CONFIG_DEFAULT_AOF_FSYNC</a>;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3cdc960c3fc022e4c1d7a92aafc7ae2f">aof_no_fsync_on_rewrite</a> = <a class="code" href="server_8h.html#a9b588e3803fff7fe515f20d7bc4aa8e6">CONFIG_DEFAULT_AOF_NO_FSYNC_ON_REWRITE</a>;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac106a3df3840507040d96398c5872311">aof_rewrite_perc</a> = <a class="code" href="server_8h.html#a85f5870a07f58d1679988f7eb84ca995">AOF_REWRITE_PERC</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1fc70c8161cd5f19a076dc119c7cf0af">aof_rewrite_min_size</a> = <a class="code" href="server_8h.html#a9b5a91047aa18eb5df52e99c97afab84">AOF_REWRITE_MIN_SIZE</a>;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a44b41e9adbd5c3f5d46df203b79d987a">aof_rewrite_base_size</a> = 0;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aab840164dbc88da9dd9f21004b92e3ea">aof_rewrite_scheduled</a> = 0;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acbcfbae88969a2dd7d176d58ae6110d7">aof_last_fsync</a> = time(NULL);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ace9d6cef9af1e3feb31816a30a017a7c">aof_rewrite_time_last</a> = -1;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af6832f23d61ee1b6d41ec93f837aa9d5">aof_rewrite_time_start</a> = -1;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af53a8a16d14d100894cab6431a4622d9">aof_lastbgrewrite_status</a> = <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a187b658f1e959f3f46ec5caa22b782cd">aof_delayed_fsync</a> = 0;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1499cec4d5dc7a8bda9c061289c7a500">aof_fd</a> = -1;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6e58fa4905fbaedc73bcc1c128f34f68">aof_selected_db</a> = -1; <span class="comment">/* Make sure the first time will not match */</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#addf6373063f352c2ede7d06f1260b820">aof_flush_postponed_start</a> = 0;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a320d427960bbcbd74742e22bb212b30f">aof_rewrite_incremental_fsync</a> = <a class="code" href="server_8h.html#a356d1b1e39a75671cc55fdaf64be3a85">CONFIG_DEFAULT_AOF_REWRITE_INCREMENTAL_FSYNC</a>;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4db97e483512d8067f0527e75efac10b">rdb_save_incremental_fsync</a> = <a class="code" href="server_8h.html#afafdd9e48fdc75907e57ac5910729a04">CONFIG_DEFAULT_RDB_SAVE_INCREMENTAL_FSYNC</a>;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af5cd250e4dc688a3d3db7ea6844efb8c">aof_load_truncated</a> = <a class="code" href="server_8h.html#a35b94be7201c7ad80e43f8aa214867b7">CONFIG_DEFAULT_AOF_LOAD_TRUNCATED</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0c953f8b0a592e40db65c5af748d7974">aof_use_rdb_preamble</a> = <a class="code" href="server_8h.html#a938328826b94d0e9bd07b225767cad43">CONFIG_DEFAULT_AOF_USE_RDB_PREAMBLE</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a> = NULL;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">rdb_filename</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#af563e9454f9a1ef49de787e4fc66c448">CONFIG_DEFAULT_RDB_FILENAME</a>);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bdcedcc3282626ac99ee15091d20586">aof_filename</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#af3bada72076c951a9d5959e73456635a">CONFIG_DEFAULT_AOF_FILENAME</a>);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0ba0e84624d22e52e900533adf7d9ba8">requirepass</a> = NULL;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a672826c5f111e440081c74f2f07180d6">rdb_compression</a> = <a class="code" href="server_8h.html#a250e4ab3a143ecbce2603ffaa3a29c0a">CONFIG_DEFAULT_RDB_COMPRESSION</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3a842ed365a5fb2b92ea473ce9aa13f2">rdb_checksum</a> = <a class="code" href="server_8h.html#a549382a72b7490f18a44f03e2dbe5568">CONFIG_DEFAULT_RDB_CHECKSUM</a>;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a74b48fc7843d6cfaf61b0e49a47e2be1">stop_writes_on_bgsave_err</a> = <a class="code" href="server_8h.html#a050e337ffdb94f18e190cc6d6d851196">CONFIG_DEFAULT_STOP_WRITES_ON_BGSAVE_ERROR</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0fd4dc9c26fc4a70bfbfe3e97a6c4295">activerehashing</a> = <a class="code" href="server_8h.html#a147863f3b338d25f54e026d88a487010">CONFIG_DEFAULT_ACTIVE_REHASHING</a>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe0f85c6013794d585451f21440f5982">active_defrag_running</a> = 0;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa886fb87091fa910b444f9d00d792b18">notify_keyspace_events</a> = 0;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a> = <a class="code" href="server_8h.html#ab24065d7a9205264189681ab4e4d410e">CONFIG_DEFAULT_MAX_CLIENTS</a>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa58813aba5328ff8194bcf2c2326dda7">blocked_clients</a> = 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    memset(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6f19e371db996c707abef6d06c6231c2">blocked_clients_by_type</a>,0,</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;           <span class="keyword">sizeof</span>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6f19e371db996c707abef6d06c6231c2">blocked_clients_by_type</a>));</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> = <a class="code" href="server_8h.html#a314eacfa28e22254ee8cc05f2b257281">CONFIG_DEFAULT_MAXMEMORY</a>;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a98440b0fba87820830ee90965c9f54f4">maxmemory_policy</a> = <a class="code" href="server_8h.html#a5b8590d1c7aa090e48b9506c0842d206">CONFIG_DEFAULT_MAXMEMORY_POLICY</a>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7dfb65e4690d5e3ddf6689e030c624c4">maxmemory_samples</a> = <a class="code" href="server_8h.html#a38e65004c240be8a04ab492731c7da50">CONFIG_DEFAULT_MAXMEMORY_SAMPLES</a>;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1a4fb70d4b90d928d032e1be232c4566">lfu_log_factor</a> = <a class="code" href="server_8h.html#ab343786c44a1885885a1ac254b724317">CONFIG_DEFAULT_LFU_LOG_FACTOR</a>;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a933413e654fa963feaa5c069387e825c">lfu_decay_time</a> = <a class="code" href="server_8h.html#a24a132a96a693133fc057a491080aebf">CONFIG_DEFAULT_LFU_DECAY_TIME</a>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa33ecfb95959d1b06853cc81e176ac2">hash_max_ziplist_entries</a> = <a class="code" href="server_8h.html#a41a8473748a5eeafbd30b20f22177c51">OBJ_HASH_MAX_ZIPLIST_ENTRIES</a>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0035ae0969e226acb750cf0859bfd2c5">hash_max_ziplist_value</a> = <a class="code" href="server_8h.html#a63842e277a2ccef80f42cbae07c9f5d8">OBJ_HASH_MAX_ZIPLIST_VALUE</a>;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a96b12a6138b1998b70ecb702f40735e8">list_max_ziplist_size</a> = <a class="code" href="server_8h.html#a27c7e814708df2c7eed37fbc6ac0b7f1">OBJ_LIST_MAX_ZIPLIST_SIZE</a>;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a59696a740cc848c44be295172dc0e052">list_compress_depth</a> = <a class="code" href="server_8h.html#a7b811522f7befdc10e69883f360e45b4">OBJ_LIST_COMPRESS_DEPTH</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a5e2c040b399186b37bf289ea387c55e2">set_max_intset_entries</a> = <a class="code" href="server_8h.html#a333fe7f520eb6f33cd1c88e4691de3ed">OBJ_SET_MAX_INTSET_ENTRIES</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8e76d99dd09948088702e8d138fb5662">zset_max_ziplist_entries</a> = <a class="code" href="server_8h.html#ac29d7218c448fac5b27039cf0d73fde2">OBJ_ZSET_MAX_ZIPLIST_ENTRIES</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae1bafd11e7b9f269c3ab48acb8046f32">zset_max_ziplist_value</a> = <a class="code" href="server_8h.html#a24b004e72489e83f721bdd334234aa49">OBJ_ZSET_MAX_ZIPLIST_VALUE</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a40b0c5a28706a3d79fd7f38f76543796">hll_sparse_max_bytes</a> = <a class="code" href="server_8h.html#a479f69398ffb0f86fdbb4fa03876bc69">CONFIG_DEFAULT_HLL_SPARSE_MAX_BYTES</a>;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a293e6dedeaca2bf16929f9903380c7d3">stream_node_max_bytes</a> = <a class="code" href="server_8h.html#aaf7d188f844d86576cfc9c1fdb31fdee">OBJ_STREAM_NODE_MAX_BYTES</a>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a51f312f9239789ab90069710fa720bf1">stream_node_max_entries</a> = <a class="code" href="server_8h.html#ace8cc293b491805bb904abd3ec2c8ee3">OBJ_STREAM_NODE_MAX_ENTRIES</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">shutdown_asap</a> = 0;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a> = 0;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a096ccc623839d9ec2ce7b80cf9d1b4a2">cluster_node_timeout</a> = <a class="code" href="cluster_8h.html#acb94b0516dcfb9814e13dfe97f3ad6b1">CLUSTER_DEFAULT_NODE_TIMEOUT</a>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a08cd2c8856e15a14b0ebcff7305a6e">cluster_migration_barrier</a> = <a class="code" href="cluster_8h.html#a1895138f4125c5dce77e8fe28c9bd8d1">CLUSTER_DEFAULT_MIGRATION_BARRIER</a>;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae410e7aa29b3cb4a15ab178f573e6fa2">cluster_slave_validity_factor</a> = <a class="code" href="cluster_8h.html#a44b183827017eca27648d5991fc50b13">CLUSTER_DEFAULT_SLAVE_VALIDITY</a>;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a75c9adc095d3d8e9670249063267c1e4">cluster_require_full_coverage</a> = <a class="code" href="cluster_8h.html#aa27e3466414a1464e6f2721b8872827d">CLUSTER_DEFAULT_REQUIRE_FULL_COVERAGE</a>;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a20f2120dbdc24446be7f4a2950a7ad9e">cluster_slave_no_failover</a> = <a class="code" href="cluster_8h.html#a71480cf46082d44207e3a4740314fc31">CLUSTER_DEFAULT_SLAVE_NO_FAILOVER</a>;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a073361fbb3cafb1304ba30260585b408">cluster_configfile</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#a5b0c46fd63529819e2c0189003d72122">CONFIG_DEFAULT_CLUSTER_CONFIG_FILE</a>);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8273ca89328d272782c8aed13b137526">cluster_announce_ip</a> = <a class="code" href="server_8h.html#a0b8729bdfd537311480f4c3bb3a20905">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_IP</a>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8128d183929124046c3411691de82b0a">cluster_announce_port</a> = <a class="code" href="server_8h.html#ac55c8423c202c1f0b4e786eb70adefb3">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_PORT</a>;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6b891047e7daea5f7d603218e0249b7e">cluster_announce_bus_port</a> = <a class="code" href="server_8h.html#a86d6a82bc81e718079728c3cb6c8c5b4">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_BUS_PORT</a>;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a55d43de23d27c946ee397eb185bd8e98">cluster_module_flags</a> = <a class="code" href="cluster_8h.html#afc2490fcb8306e719f18de95b3694d75">CLUSTER_MODULE_FLAG_NONE</a>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abc582fb4bb1c2a826e1fe27280a716e7">migrate_cached_sockets</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;migrateCacheDictType,NULL);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeb9ca9dc2e5a71a7d964e2389d48678f">next_client_id</a> = 1; <span class="comment">/* Client IDs, start from 1 .*/</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8a999e130bddf30284b12a4b625afe3d">loading_process_events_interval_bytes</a> = (1024*1024*2);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa2a751d9d0430a065d573c0adafdb90b">lazyfree_lazy_eviction</a> = <a class="code" href="server_8h.html#aa6529c6ba7143b1ec4aa15d8a96b2154">CONFIG_DEFAULT_LAZYFREE_LAZY_EVICTION</a>;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a192b9c651f47c1e7e927b0c6c2620952">lazyfree_lazy_expire</a> = <a class="code" href="server_8h.html#a2e6080731ab6e81b19f1bfedf7b298f9">CONFIG_DEFAULT_LAZYFREE_LAZY_EXPIRE</a>;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d2a15a8dbe14095038ad527dea866d5">lazyfree_lazy_server_del</a> = <a class="code" href="server_8h.html#ac1f765315b576de4c0ea2beb7e37ae02">CONFIG_DEFAULT_LAZYFREE_LAZY_SERVER_DEL</a>;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7dff68985c6f97d270358d27472972e2">always_show_logo</a> = <a class="code" href="server_8h.html#a0f350070473d6d89bcd365ea4ff361cb">CONFIG_DEFAULT_ALWAYS_SHOW_LOGO</a>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0ee11cd40096c9b2be4753c10113db7d">lua_time_limit</a> = <a class="code" href="server_8h.html#ab72fac70fbc902a7f106f4c710e08271">LUA_SCRIPT_TIME_LIMIT</a>;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lruclock = <a class="code" href="evict_8c.html#ac541840357c3d2acaf8b83b1d85fad02">getLRUClock</a>();</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="atomicvar_8h.html#a0f02b5846dcf4ed3669ecf771c512d12">atomicSet</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a99c6b6e30b43c077eb30507d7c1d0813">lruclock</a>,lruclock);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="config_8c.html#a99594147f9c18590b474b8a2dfb812c8">resetServerSaveParams</a>();</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="config_8c.html#a9d52f141a2c829da9047255e87482a16">appendServerSaveParams</a>(60*60,1);  <span class="comment">/* save after 1 hour and 1 change */</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="config_8c.html#a9d52f141a2c829da9047255e87482a16">appendServerSaveParams</a>(300,100);  <span class="comment">/* save after 5 minutes and 100 changes */</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="config_8c.html#a9d52f141a2c829da9047255e87482a16">appendServerSaveParams</a>(60,10000); <span class="comment">/* save after 1 minute and 10000 changes */</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="comment">/* Replication related */</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a22a84652dad6047f6c28d032b3c8327e">masterauth</a> = NULL;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> = NULL;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8310dd417853e8153b749f1be9afe9b0">masterport</a> = 6379;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">master</a> = NULL;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa6d326e1db1991e81cd897babf52ea8d">cached_master</a> = NULL;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3d9da20a74aeccf932f6dccaef7075a6">master_initial_offset</a> = -1;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> = <a class="code" href="server_8h.html#a256b9506e551eaa7417f75f8fa9ed901">REPL_STATE_NONE</a>;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aca3e40a81aabd234727f99625efdd84c">repl_syncio_timeout</a> = <a class="code" href="server_8h.html#a68ad9c6e5f817d58fa51c1b2e88e83e0">CONFIG_REPL_SYNCIO_TIMEOUT</a>;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac57f30da06fd89c76b8dd1f93ea0083f">repl_serve_stale_data</a> = <a class="code" href="server_8h.html#ab42b23884952f9887529b6efbf0d4ac6">CONFIG_DEFAULT_SLAVE_SERVE_STALE_DATA</a>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a297743fec342702645d8b174a4877e3b">repl_slave_ro</a> = <a class="code" href="server_8h.html#af9b93e225d47183c97bc1f86db1aff2a">CONFIG_DEFAULT_SLAVE_READ_ONLY</a>;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3ec18fc81887ca7248668fd8151956c3">repl_slave_ignore_maxmemory</a> = <a class="code" href="server_8h.html#a172dfe9a0401b7e2fe512d5d596bc00b">CONFIG_DEFAULT_SLAVE_IGNORE_MAXMEMORY</a>;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1456517f960c1a06b3eb29614ab5f16e">repl_slave_lazy_flush</a> = <a class="code" href="server_8h.html#ace54c14c3b13acbf1d7a6d6e893cdfd3">CONFIG_DEFAULT_SLAVE_LAZY_FLUSH</a>;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe6a14c37b00e7e4ace95e04b1c2ded7">repl_down_since</a> = 0; <span class="comment">/* Never connected, repl is down since EVER. */</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a56c6284aa27660523e8fe4ddc6b2f38b">repl_disable_tcp_nodelay</a> = <a class="code" href="server_8h.html#a27f51044a8a11ab99366a77bb3ea1e93">CONFIG_DEFAULT_REPL_DISABLE_TCP_NODELAY</a>;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad28a95e9b6cd31f5feb7ebe5a8a8992a">repl_diskless_sync</a> = <a class="code" href="server_8h.html#a08ebaf972da18ad58c71c615aa26c5cf">CONFIG_DEFAULT_REPL_DISKLESS_SYNC</a>;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2f5a9f08effdaba922ea7a432c753175">repl_diskless_sync_delay</a> = <a class="code" href="server_8h.html#aee54cf0e2819c8b96136987f0f8ef0b8">CONFIG_DEFAULT_REPL_DISKLESS_SYNC_DELAY</a>;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86ac125d831ba2b0ad05e80972cdb0d2">repl_ping_slave_period</a> = <a class="code" href="server_8h.html#a5496312872886690751d1e4a248026e9">CONFIG_DEFAULT_REPL_PING_SLAVE_PERIOD</a>;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af8b98ad90dc60d4e8b2bf836b518e198">repl_timeout</a> = <a class="code" href="server_8h.html#a7608d2301c8447e2237ba173d8eef88e">CONFIG_DEFAULT_REPL_TIMEOUT</a>;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2948a0fa6ec92b071befb3e78fd57b2f">repl_min_slaves_to_write</a> = <a class="code" href="server_8h.html#a68661cd596afb7595059264beee63dc7">CONFIG_DEFAULT_MIN_SLAVES_TO_WRITE</a>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3b224fc091bae066a03314069adf205">repl_min_slaves_max_lag</a> = <a class="code" href="server_8h.html#a547664770d2cec2d58d144a2f5afbbd8">CONFIG_DEFAULT_MIN_SLAVES_MAX_LAG</a>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaf81cefb84c292ee7dee2cbf749595fb">slave_priority</a> = <a class="code" href="server_8h.html#a7effaf912f26a1eabe495e899d705fee">CONFIG_DEFAULT_SLAVE_PRIORITY</a>;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac7835028128a4b2dbf35822063fb73f8">slave_announce_ip</a> = <a class="code" href="server_8h.html#aca61db3dff4f6e864b3e49d3f087fb51">CONFIG_DEFAULT_SLAVE_ANNOUNCE_IP</a>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a531f1468f7a70bf4efc1004cdc8570b5">slave_announce_port</a> = <a class="code" href="server_8h.html#ac8ad217da6cfbdf399948aff4d3550ca">CONFIG_DEFAULT_SLAVE_ANNOUNCE_PORT</a>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ba0eb500edf919e115c9d159b991cd1">master_repl_offset</a> = 0;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="comment">/* Replication partial resync backlog */</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acabb38054cd6d1d619d7c19d3e57bf28">repl_backlog</a> = NULL;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a036a70cd5499d31b3b3964aeb182cd97">repl_backlog_size</a> = <a class="code" href="server_8h.html#a6ac2fd3dd83df43a6b262bab091bc371">CONFIG_DEFAULT_REPL_BACKLOG_SIZE</a>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad76d83545056feccc5ff262ed29488c6">repl_backlog_histlen</a> = 0;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae11d40717bf4cf77473590daf20922db">repl_backlog_idx</a> = 0;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa215648deded4376d85651aa4e999815">repl_backlog_off</a> = 0;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a959bf5f04d138a3af6b360b20d5d25bd">repl_backlog_time_limit</a> = <a class="code" href="server_8h.html#ac5c5c62f45277671484daad919338b5e">CONFIG_DEFAULT_REPL_BACKLOG_TIME_LIMIT</a>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa24c62412daaae8c6a8356c85524b7c7">repl_no_slaves_since</a> = time(NULL);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="comment">/* Client output buffer limits */</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#aea8f6f3fac3a68e35807eba109dbc501">CLIENT_TYPE_OBUF_COUNT</a>; j++)</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad2bce729f21c3a876e4f5527c16a93ff">client_obuf_limits</a>[j] = <a class="code" href="config_8c.html#af90f93ddb3d2f22813cd4d72f960ee3c">clientBufferLimitsDefaults</a>[j];</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="comment">/* Double constants initialization */</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a> = 0.0;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <a class="code" href="server_8c.html#aed49f2a4bd56cf7199a1d7c7f7eceab9">R_PosInf</a> = 1.0/<a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="server_8c.html#acb612fbd4d2085a8dad448365f5c6d61">R_NegInf</a> = -1.0/<a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a>;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="server_8c.html#a0a74d6229ebb2e89cd8d282bb2d57cd2">R_Nan</a> = <a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a>/<a class="code" href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="comment">/* Command table -- we initiialize it here as it is part of the</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">     * initial configuration, since command names may be changed via</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">     * redis.conf using the rename-command directive. */</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;commandTableDictType,NULL);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2282515ee7614e17de7aeae0db6ea65b">orig_commands</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;commandTableDictType,NULL);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <a class="code" href="server_8c.html#a9475c3fcad317183a072323859fb5409">populateCommandTable</a>();</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a577bbf6b03a99e785eed8ea6ebd4a665">delCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;del&quot;</span>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1a7fbbf584c0a372e035053026784436">multiCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;multi&quot;</span>);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad5f3f0f97fb511f8f86f21d13e03801c">lpushCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;lpush&quot;</span>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa67bd29148b6d1ad47541e9e40b7cb82">lpopCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;lpop&quot;</span>);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad4fa040bb64cd95458a6d5c959daa380">rpopCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;rpop&quot;</span>);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1ad649607159f0284068556041fcd387">zpopminCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;zpopmin&quot;</span>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3227752cf5245878455863e34d768180">zpopmaxCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;zpopmax&quot;</span>);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#adca63c4602215bd9e28e5e81bcf91fe6">sremCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;srem&quot;</span>);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada9d4d8c776057d1f91e8e40dfdc70a4">execCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;exec&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac9f201a49ff1edc5864a68753ef8bf6d">expireCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;expire&quot;</span>);</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeea48ca4b779b703c49b82fd535b2922">pexpireCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;pexpire&quot;</span>);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a19a694ea86bc8d8418f366392c0d8bdb">xclaimCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;xclaim&quot;</span>);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a41f877042e8ddc732d1aecbf4e2a472b">xgroupCommand</a> = <a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="stringliteral">&quot;xgroup&quot;</span>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="comment">/* Slow log */</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a16d71dc7df6d4a717d3a6e6a840bf6a5">slowlog_log_slower_than</a> = <a class="code" href="server_8h.html#a3cf317db9aeeba99be3654b11d3d0580">CONFIG_DEFAULT_SLOWLOG_LOG_SLOWER_THAN</a>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a007cbc9d6c2e3d0fa86d9355a96c9f69">slowlog_max_len</a> = <a class="code" href="server_8h.html#ada65a939812527070ed001e451d9bc54">CONFIG_DEFAULT_SLOWLOG_MAX_LEN</a>;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="comment">/* Latency monitor */</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a73ce15b906abae61ce26fda115af09e4">latency_monitor_threshold</a> = <a class="code" href="server_8h.html#a20a7f934b2eceae8fdbb1ac112a783c3">CONFIG_DEFAULT_LATENCY_MONITOR_THRESHOLD</a>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">/* Debugging */</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7efbc19379f272f8ce13f1eb663a0fdb">assert_failed</a> = <span class="stringliteral">&quot;&lt;no assertion failed&gt;&quot;</span>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a88cc72814affa99c142827f25b714fd9">assert_file</a> = <span class="stringliteral">&quot;&lt;no file&gt;&quot;</span>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0f9ff421f7264992c5857ea7f03fb50">assert_line</a> = 0;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae14e3c2d101f572b27b06e1f23613000">bug_report_start</a> = 0;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6b2bc45f4e219cd3c7f1dbc717ad88ea">watchdog_period</a> = 0;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="comment">/* By default we want scripts to be always replicated by effects</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">     * (single commands executed by the script), and not by sending the</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment">     * script to the slave / AOF. This is the new way starting from</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment">     * Redis 5. However it is possible to revert it via redis.conf. */</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1bdb308c6148667ad72670aa18d883ba">lua_always_replicate_commands</a> = 1;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;}</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> **<a class="code" href="server_8c.html#aa006daaf11f1e2e45a6ababaf463212b">environ</a>;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">/* Restart the server, executing the same executable that started this</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment"> * instance, with the same arguments and configuration file.</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment"> * The function is designed to directly call execve() so that the new</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="comment"> * server instance will retain the PID of the previous one.</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment"> * The list of flags, that may be bitwise ORed together, alter the</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment"> * behavior of this function:</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment"> * RESTART_SERVER_NONE              No flags.</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment"> * RESTART_SERVER_GRACEFULLY        Do a proper shutdown before restarting.</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment"> * RESTART_SERVER_CONFIG_REWRITE    Rewrite the config file before restarting.</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="comment"> * On success the function does not return, because the process turns into</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<span class="comment"> * a different process. On error C_ERR is returned. */</span></div><div class="line"><a name="l01746"></a><span class="lineno"><a class="line" href="server_8h.html#a0d713384337b0a7271f1208cd5f10795"> 1746</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a0d713384337b0a7271f1208cd5f10795">restartServer</a>(<span class="keywordtype">int</span> flags, <a class="code" href="redismodule_8h.html#a652ae61e2475bc8957454534544968fc">mstime_t</a> delay) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="comment">/* Check if we still have accesses to the executable that started this</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">     * server instance. */</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">if</span> (access(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a>,X_OK) == -1) {</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Can&#39;t restart: this process has no &quot;</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                             <span class="stringliteral">&quot;permissions to execute %s&quot;</span>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a>);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="comment">/* Config rewriting. */</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a57b24bdd0dc4a156941789096e9e1f44">RESTART_SERVER_CONFIG_REWRITE</a> &amp;&amp;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a> &amp;&amp;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <a class="code" href="server_8h.html#a32a2d5040a508f2d760186b8880abdfb">rewriteConfig</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a>) == -1)</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Can&#39;t restart: configuration rewrite process &quot;</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                             <span class="stringliteral">&quot;failed&quot;</span>);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    }</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">/* Perform a proper shutdown. */</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#af951fdb3aa8efbce7cde83e8a31fff6a">RESTART_SERVER_GRACEFULLY</a> &amp;&amp;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <a class="code" href="server_8c.html#a052960af9fbd487bc866d61c2f0cc996">prepareForShutdown</a>(<a class="code" href="server_8h.html#a077401d3a9f810d535c00725ef6c6532">SHUTDOWN_NOFLAGS</a>) != <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>)</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Can&#39;t restart: error preparing for shutdown&quot;</span>);</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="comment">/* Close all file descriptors, with the exception of stdin, stdout, strerr</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">     * which are useful if we restart a Redis server which is not daemonized. */</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">for</span> (j = 3; j &lt; (int)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a> + 1024; j++) {</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="comment">/* Test the descriptor validity before closing it, otherwise</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">         * Valgrind issues a warning on close(). */</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">if</span> (fcntl(j,F_GETFD) != -1) close(j);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="comment">/* Execute the server with the original command line. */</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">if</span> (delay) usleep(delay*1000);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[0]);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[0] = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a>);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    execve(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>,<a class="code" href="server_8c.html#aa006daaf11f1e2e45a6ababaf463212b">environ</a>);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="comment">/* If an error occurred here, there is nothing we can do, but exit. */</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    _exit(1);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>; <span class="comment">/* Never reached. */</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment">/* This function will try to raise the max number of open files accordingly to</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment"> * the configured max number of clients. It also reserves a number of file</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment"> * descriptors (CONFIG_MIN_RESERVED_FDS) for extra operations of</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment"> * persistence, listening sockets, log files and so forth.</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment"> * If it will not be possible to set the limit accordingly to the configured</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"> * max number of clients, the function will do the reverse setting</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment"> * server.maxclients to the value that we can actually handle. */</span></div><div class="line"><a name="l01803"></a><span class="lineno"><a class="line" href="server_8h.html#a3d823b9ddd3225d0c4ebb282296bf1d3"> 1803</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a3d823b9ddd3225d0c4ebb282296bf1d3">adjustOpenFilesLimit</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    rlim_t maxfiles = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a>+<a class="code" href="server_8h.html#abcea50457e3de849eab11d0ba5d81d08">CONFIG_MIN_RESERVED_FDS</a>;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keyword">struct </span>rlimit limit;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">if</span> (getrlimit(RLIMIT_NOFILE,&amp;limit) == -1) {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.&quot;</span>,</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            strerror(errno));</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a> = 1024-<a class="code" href="server_8h.html#abcea50457e3de849eab11d0ba5d81d08">CONFIG_MIN_RESERVED_FDS</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        rlim_t oldlimit = limit.rlim_cur;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="comment">/* Set the max number of files if the current limit is not enough</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">         * for our needs. */</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">if</span> (oldlimit &lt; maxfiles) {</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            rlim_t bestlimit;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <span class="keywordtype">int</span> setrlimit_error = 0;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="comment">/* Try to set the file limit to match &#39;maxfiles&#39; or at least</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="comment">             * to the higher value supported less than maxfiles. */</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            bestlimit = maxfiles;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <span class="keywordflow">while</span>(bestlimit &gt; oldlimit) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                rlim_t decr_step = 16;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                limit.rlim_cur = bestlimit;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                limit.rlim_max = bestlimit;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                <span class="keywordflow">if</span> (setrlimit(RLIMIT_NOFILE,&amp;limit) != -1) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                setrlimit_error = errno;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                <span class="comment">/* We failed to set file limit to &#39;bestlimit&#39;. Try with a</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">                 * smaller limit decrementing by a few FDs per iteration. */</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                <span class="keywordflow">if</span> (bestlimit &lt; decr_step) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                bestlimit -= decr_step;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            }</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="comment">/* Assume that the limit we get initially is still valid if</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">             * our last try was even lower. */</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            <span class="keywordflow">if</span> (bestlimit &lt; oldlimit) bestlimit = oldlimit;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">if</span> (bestlimit &lt; maxfiles) {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> old_maxclients = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a>;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a> = bestlimit-<a class="code" href="server_8h.html#abcea50457e3de849eab11d0ba5d81d08">CONFIG_MIN_RESERVED_FDS</a>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                <span class="comment">/* maxclients is unsigned so may overflow: in order</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">                 * to check if maxclients is now logically less than 1</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment">                 * we test indirectly via bestlimit. */</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                <span class="keywordflow">if</span> (bestlimit &lt;= CONFIG_MIN_RESERVED_FDS) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Your current &#39;ulimit -n&#39; &quot;</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                        <span class="stringliteral">&quot;of %llu is not enough for the server to start. &quot;</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                        <span class="stringliteral">&quot;Please increase your open file limit to at least &quot;</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                        <span class="stringliteral">&quot;%llu. Exiting.&quot;</span>,</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) oldlimit,</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) maxfiles);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                    exit(1);</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;You requested maxclients of %d &quot;</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                    <span class="stringliteral">&quot;requiring at least %llu max file descriptors.&quot;</span>,</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                    old_maxclients,</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) maxfiles);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Server can&#39;t set maximum open files &quot;</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                    <span class="stringliteral">&quot;to %llu because of OS error: %s.&quot;</span>,</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) maxfiles, strerror(setrlimit_error));</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Current maximum open files is %llu. &quot;</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                    <span class="stringliteral">&quot;maxclients has been reduced to %d to compensate for &quot;</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                    <span class="stringliteral">&quot;low ulimit. &quot;</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                    <span class="stringliteral">&quot;If you need higher maxclients increase &#39;ulimit -n&#39;.&quot;</span>,</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) bestlimit, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a>);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Increased maximum number of open files &quot;</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                    <span class="stringliteral">&quot;to %llu (it was originally set to %llu).&quot;</span>,</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) maxfiles,</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                    (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) oldlimit);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    }</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">/* Check that server.tcp_backlog can be actually enforced in Linux according</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment"> * to the value of /proc/sys/net/core/somaxconn, or warn about it. */</span></div><div class="line"><a name="l01880"></a><span class="lineno"><a class="line" href="server_8c.html#a4ca74222ae99615dd8eaa8ca5050046d"> 1880</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a4ca74222ae99615dd8eaa8ca5050046d">checkTcpBacklogSettings</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="preprocessor">#ifdef HAVE_PROC_SOMAXCONN</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    FILE *fp = fopen(<span class="stringliteral">&quot;/proc/sys/net/core/somaxconn&quot;</span>,<span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordtype">char</span> buf[1024];</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span>;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="keywordflow">if</span> (fgets(buf,<span class="keyword">sizeof</span>(buf),fp) != NULL) {</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <span class="keywordtype">int</span> somaxconn = atoi(buf);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">if</span> (somaxconn &gt; 0 &amp;&amp; somaxconn &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.&quot;</span>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>, somaxconn);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        }</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    fclose(fp);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">/* Initialize a set of file descriptors to listen to the specified &#39;port&#39;</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<span class="comment"> * binding the addresses specified in the Redis server configuration.</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;<span class="comment"> * The listening file descriptors are stored in the integer array &#39;fds&#39;</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;<span class="comment"> * and their number is set in &#39;*count&#39;.</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;<span class="comment"> * The addresses to bind are specified in the global server.bindaddr array</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment"> * and their number is server.bindaddr_count. If the server configuration</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment"> * contains no specific addresses to bind, this function will try to</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment"> * bind * (all addresses) for both the IPv4 and IPv6 protocols.</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment"> * On success the function returns C_OK.</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;<span class="comment"> * On error the function returns C_ERR. For the function to be on</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment"> * error, at least one of the server.bindaddr addresses was</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment"> * impossible to bind, or no bind addresses were specified in the server</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment"> * configuration but the function is not able to bind * for at least</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment"> * one of the IPv4 or IPv6 protocols. */</span></div><div class="line"><a name="l01913"></a><span class="lineno"><a class="line" href="server_8h.html#aeac3678c664fd0436c1deb3f1b8097f4"> 1913</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#aeac3678c664fd0436c1deb3f1b8097f4">listenToPort</a>(<span class="keywordtype">int</span> port, <span class="keywordtype">int</span> *fds, <span class="keywordtype">int</span> *count) {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="comment">/* Force binding of 0.0.0.0 if no bind address is specified, always</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">     * entering the loop if j == 0. */</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa0e3099c4f00ad746e97d1bc7685f95">bindaddr_count</a> == 0) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[0] = NULL;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa0e3099c4f00ad746e97d1bc7685f95">bindaddr_count</a> || j == 0; j++) {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j] == NULL) {</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordtype">int</span> unsupported = 0;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <span class="comment">/* Bind * for both IPv6 and IPv4, we enter here only if</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment">             * server.bindaddr_count == 0. */</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;            fds[*count] = <a class="code" href="anet_8c.html#ac2a48196c12df4f013a2ef973c0aef7f">anetTcp6Server</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>,port,NULL,</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;            <span class="keywordflow">if</span> (fds[*count] != <a class="code" href="anet_8h.html#a0697b7774a7e0f4ef141839fe93536fe">ANET_ERR</a>) {</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                <a class="code" href="anet_8c.html#a0ffab7741e0d2152c02a6af6f3048cae">anetNonBlock</a>(NULL,fds[*count]);</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                (*count)++;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EAFNOSUPPORT) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                unsupported++;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Not listening to IPv6: unsupproted&quot;</span>);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">if</span> (*count == 1 || unsupported) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                <span class="comment">/* Bind the IPv4 address as well. */</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                fds[*count] = <a class="code" href="anet_8c.html#a2637a681b73d89c8b6a7b0ca95afd07c">anetTcpServer</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>,port,NULL,</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                <span class="keywordflow">if</span> (fds[*count] != <a class="code" href="anet_8h.html#a0697b7774a7e0f4ef141839fe93536fe">ANET_ERR</a>) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                    <a class="code" href="anet_8c.html#a0ffab7741e0d2152c02a6af6f3048cae">anetNonBlock</a>(NULL,fds[*count]);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                    (*count)++;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno == EAFNOSUPPORT) {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                    unsupported++;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Not listening to IPv4: unsupproted&quot;</span>);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                }</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <span class="comment">/* Exit the loop if we were able to bind * on IPv4 and IPv6,</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">             * otherwise fds[*count] will be ANET_ERR and we&#39;ll print an</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">             * error and return to the caller with an error. */</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">if</span> (*count + unsupported == 2) <span class="keywordflow">break</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strchr(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j],<span class="charliteral">&#39;:&#39;</span>)) {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            <span class="comment">/* Bind IPv6 address. */</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            fds[*count] = <a class="code" href="anet_8c.html#ac2a48196c12df4f013a2ef973c0aef7f">anetTcp6Server</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>,port,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j],</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="comment">/* Bind IPv4 address. */</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            fds[*count] = <a class="code" href="anet_8c.html#a2637a681b73d89c8b6a7b0ca95afd07c">anetTcpServer</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>,port,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j],</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        }</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <span class="keywordflow">if</span> (fds[*count] == <a class="code" href="anet_8h.html#a0697b7774a7e0f4ef141839fe93536fe">ANET_ERR</a>) {</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                <span class="stringliteral">&quot;Creating Server TCP listening socket %s:%d: %s&quot;</span>,</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j] ? <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[j] : <span class="stringliteral">&quot;*&quot;</span>,</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                port, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <a class="code" href="anet_8c.html#a0ffab7741e0d2152c02a6af6f3048cae">anetNonBlock</a>(NULL,fds[*count]);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        (*count)++;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;}</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment">/* Resets the stats that we expose via INFO or other means that we want</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment"> * to reset via CONFIG RESETSTAT. The function is also used in order to</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment"> * initialize these fields in initServer() at server startup. */</span></div><div class="line"><a name="l01975"></a><span class="lineno"><a class="line" href="server_8h.html#acc7cb5c8d228c7db0b6d8d86c95e705a"> 1975</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#acc7cb5c8d228c7db0b6d8d86c95e705a">resetServerStats</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa818a00bded05cbfc242fbd30a51bd06">stat_numcommands</a> = 0;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afcaf03ea9071943ef74fc499a34f364c">stat_numconnections</a> = 0;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a898017f30dfd6e8b25edf9ace36b175a">stat_expiredkeys</a> = 0;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a908fb5c9a872cac4539382205fec357b">stat_expired_stale_perc</a> = 0;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3cd30a9c8ce282f08de3c733d1ccd19d">stat_expired_time_cap_reached_count</a> = 0;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a45229d2d3b593513143c5a9871a2be10">stat_evictedkeys</a> = 0;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad5efcac8b7288ed40db68e69b9ff306b">stat_keyspace_misses</a> = 0;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad7d881fd1df3221d80a749be2e66d0d0">stat_keyspace_hits</a> = 0;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acf21ed827000471af091d6f7f2820843">stat_active_defrag_hits</a> = 0;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2cfe978a155a9359c774048dd502afc3">stat_active_defrag_misses</a> = 0;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a67834c6012b1d5912befb42573b3138f">stat_active_defrag_key_hits</a> = 0;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a88f7d67b743022ba822fd5c7b6ea6964">stat_active_defrag_key_misses</a> = 0;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3de172bb2507aa566698d109c783153a">stat_active_defrag_scanned</a> = 0;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4cdd4eed3d7fac9da3b95c1f6fe29de8">stat_fork_time</a> = 0;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0463703f3899cad4e931faefe7b591b">stat_fork_rate</a> = 0;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afbe16be5f4b41cc85b8952c52f8afae0">stat_rejected_conn</a> = 0;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a75b9c0bc4b9974b3880f057a519c8cac">stat_sync_full</a> = 0;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a426c3298fab0d00a17cb6f35c5f607b0">stat_sync_partial_ok</a> = 0;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afae1b2ee523b006366dbe18ce9dae2e1">stat_sync_partial_err</a> = 0;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8h.html#ad9e350cb5eeb396592d0d80f70e6e040">STATS_METRIC_COUNT</a>; j++) {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[j].<a class="code" href="structredis_server.html#ae40354a1051342eb5a9db005715dcfa9">idx</a> = 0;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[j].<a class="code" href="structredis_server.html#a6174bec3505236755e0fde7aae802526">last_sample_time</a> = <a class="code" href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a>();</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[j].<a class="code" href="structredis_server.html#a5b4e7d9ab981c793773240b967e69b35">last_sample_count</a> = 0;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        memset(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[j].<a class="code" href="structredis_server.html#a33ae086151bbbc7e1930cd04c3a58ed0">samples</a>,0,</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">inst_metric</a>[j].<a class="code" href="structredis_server.html#a33ae086151bbbc7e1930cd04c3a58ed0">samples</a>));</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    }</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe1289d87c7c7b12540c36b93d1bdb25">stat_net_input_bytes</a> = 0;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0e3c35b8ea641cec0a4afb2658bccb9">stat_net_output_bytes</a> = 0;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a187b658f1e959f3f46ec5caa22b782cd">aof_delayed_fsync</a> = 0;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;}</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div><div class="line"><a name="l02009"></a><span class="lineno"><a class="line" href="server_8c.html#ad21e41fa09dce3d1a3b91503b755b7a2"> 2009</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ad21e41fa09dce3d1a3b91503b755b7a2">initServer</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    signal(SIGHUP, SIG_IGN);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    signal(SIGPIPE, SIG_IGN);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <a class="code" href="server_8c.html#acdd4d8214a1a0cf660e5d3a48d576344">setupSignalHandlers</a>();</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1e234838fd4211781e47a97ca8dd03cc">syslog_enabled</a>) {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        openlog(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae4a6e447ef5fbc09a9765fa2da7c51d7">syslog_ident</a>, LOG_PID | LOG_NDELAY | LOG_NOWAIT,</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4f074cb73b7191ef570261fb35b29a8e">syslog_facility</a>);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    }</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeae2d40a88ece004cc0fa4bc228077a8">config_hz</a>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = getpid();</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6997b24b6b724923db5756c39f5e0662">current_client</a> = NULL;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a309f80dceccd8fa762e54a07499f4a24">clients_index</a> = <a class="code" href="rax_8c.html#a56b1e46d8b342fed1d696f59c6dff08d">raxNew</a>();</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afc193ee38ed3ebcc1aa1bee7a506c0f9">clients_to_close</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#adafbaec515301e4446949c48a2670a84">monitors</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a98158f8fefde91e0943a1b16668c4529">clients_pending_write</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a5d8345cb446035f33a1ff2c093870f35">slaveseldb</a> = -1; <span class="comment">/* Force to emit the first SELECT command. */</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af1e6c692e015469af388bc1e9e1307ed">unblocked_clients</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7a707c2da0ace2b0eb8a278960c34f7a">ready_keys</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a5f87bbf8bd892d1459c39ae55c19bdec">clients_waiting_acks</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a07a4e0373efa220e37c571db92057029">get_ack_from_slaves</a> = 0;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a98ae4963dfd94a8a552ec143cbd04ccb">clients_paused</a> = 0;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ee3dc3ba57fc269a2becfe29fdc8d42">system_memory_size</a> = <a class="code" href="zmalloc_8c.html#a841fad39a05a81f1e8cf94138e9dae6f">zmalloc_get_memory_size</a>();</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <a class="code" href="server_8c.html#aacccd08c1c30ec2982422f0f349f96b3">createSharedObjects</a>();</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <a class="code" href="server_8c.html#a3d823b9ddd3225d0c4ebb282296bf1d3">adjustOpenFilesLimit</a>();</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a> = <a class="code" href="ae_8c.html#a06456e32738f0ccb40a4bb7f7f6c6f75">aeCreateEventLoop</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">maxclients</a>+<a class="code" href="server_8h.html#a6725c1ff5b6a17f930627263f484d107">CONFIG_FDSET_INCR</a>);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a> == NULL) {</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            <span class="stringliteral">&quot;Failed creating the event loop. Error message: &#39;%s&#39;&quot;</span>,</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            strerror(errno));</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        exit(1);</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;    }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a> = <a class="code" href="zmalloc_8c.html#a879ee0956348fd24dc2ac69c2d4f220b">zmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structredis_db.html">redisDb</a>)*<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="comment">/* Open the TCP listening socket for the user commands. */</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a> != 0 &amp;&amp;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;        <a class="code" href="server_8c.html#aeac3678c664fd0436c1deb3f1b8097f4">listenToPort</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a396e19fe18c6bdeb9a1ac2a342323b6f">ipfd</a>,&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a>) == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>)</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        exit(1);</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="comment">/* Open the listening Unix domain socket. */</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a> != NULL) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        unlink(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a>); <span class="comment">/* don&#39;t care if this fails */</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> = <a class="code" href="anet_8c.html#ad7d02bffdb97772cda66cc6abe791a76">anetUnixServer</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a>,</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aadc46c1e937463532712d5cf6579eaa8">unixsocketperm</a>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">tcp_backlog</a>);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> == <a class="code" href="anet_8h.html#a0697b7774a7e0f4ef141839fe93536fe">ANET_ERR</a>) {</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Opening Unix socket: %s&quot;</span>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a792473f9197291c19d0c522011b09630">neterr</a>);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            exit(1);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;        <a class="code" href="anet_8c.html#a0ffab7741e0d2152c02a6af6f3048cae">anetNonBlock</a>(NULL,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a>);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    }</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="comment">/* Abort if there are no listening sockets at all. */</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a> == 0 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> &lt; 0) {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Configured to not listen anywhere, exiting.&quot;</span>);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        exit(1);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <span class="comment">/* Create the Redis databases, and initialize other internal state. */</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>; j++) {</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;dbDictType,NULL);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;keyptrDictType,NULL);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#a439ca8f8cd0c2a19b8d2e0fe0044160d">blocking_keys</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;keylistDictType,NULL);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#a06ae0ac6a04c866ce83ece29d9a44073">ready_keys</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;objectKeyPointerValueDictType,NULL);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#acf93a40c69ba9e3938f50aa3b1087abc">watched_keys</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;keylistDictType,NULL);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a> = j;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#a605ade426dd43b0de7ea393efa17d337">avg_ttl</a> = 0;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#ae22579f2281ceefa3099ad028f0c6260">defrag_later</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    }</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <a class="code" href="evict_8c.html#a30986a11358949941022bb52ca7e56cd">evictionPoolAlloc</a>(); <span class="comment">/* Initialize the LRU keys pool. */</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac6c18a3bf3ec4d85777ca2db7d4a9b47">pubsub_channels</a> = <a class="code" href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a>(&amp;keylistDictType,NULL);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aced844471ea20e757a4bc7bdee34d930">pubsub_patterns</a> = <a class="code" href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a>();</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <a class="code" href="adlist_8h.html#a648e4a2d20decff3182a72a608b0b8f2">listSetFreeMethod</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aced844471ea20e757a4bc7bdee34d930">pubsub_patterns</a>,<a class="code" href="pubsub_8c.html#abf8fab747aad35233c8ad6f2b537d691">freePubsubPattern</a>);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <a class="code" href="adlist_8h.html#a3dac429a545f8def9a2bf9077eb66ddc">listSetMatchMethod</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aced844471ea20e757a4bc7bdee34d930">pubsub_patterns</a>,<a class="code" href="pubsub_8c.html#aff060253395a382dce70cc8090c8d5bc">listMatchPubsubPattern</a>);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa80c0c1c323f199611105d43a6e5ed28">cronloops</a> = 0;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> = -1;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> = -1;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3a0208c5b729ff578851041f2e01441">rdb_child_type</a> = <a class="code" href="server_8h.html#acfd6e0670ac08e8f4c13f33c8a2c6b5e">RDB_CHILD_TYPE_NONE</a>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a15ca1e9689b70a0f66fe2ccc7ae435cb">rdb_bgsave_scheduled</a> = 0;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a03c39bc68938b334e9c4722f34ca097d">child_info_pipe</a>[0] = -1;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a03c39bc68938b334e9c4722f34ca097d">child_info_pipe</a>[1] = -1;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa96405b85d2082e0f231cb462e821a54">child_info_data</a>.<a class="code" href="structredis_server.html#a08654d4e800966822ca48a08cf86deac">magic</a> = 0;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <a class="code" href="aof_8c.html#a55a176249cd6ec3d89f7115527622f36">aofRewriteBufferReset</a>();</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4546e03b0256d4d50b71681b6cd45f52">aof_buf</a> = <a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>();</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae08caa5f869e19e94cd95d1a2edea4b2">lastsave</a> = time(NULL); <span class="comment">/* At startup we consider the DB saved. */</span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab23a754e7d3bd832810530b360eabd91">lastbgsave_try</a> = 0;    <span class="comment">/* At startup we never tried to BGSAVE. */</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae6262935d09c243040d0a767dc4781d9">rdb_save_time_last</a> = -1;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a94be71fb61af4310e0bef804992da1ed">rdb_save_time_start</a> = -1;</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">dirty</a> = 0;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <a class="code" href="server_8c.html#acc7cb5c8d228c7db0b6d8d86c95e705a">resetServerStats</a>();</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="comment">/* A few stats we don&#39;t want to reset: server startup time, and peak mem. */</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2e6bd1e4e734c677e1a73aa12931b8d2">stat_starttime</a> = time(NULL);</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a> = 0;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a23a0a2cb99e43742881408116b2fbd08">stat_rdb_cow_bytes</a> = 0;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab89dd03338e3ba557ce26478c4edcdc4">stat_aof_cow_bytes</a> = 0;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a24fe6607486bb69f2f446830dbf6c8fb">zmalloc_used</a> = 0;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">process_rss</a> = 0;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">allocator_allocated</a> = 0;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">allocator_active</a> = 0;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a> = 0;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">lastbgsave_status</a> = <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa67a20f0faa8ffcc2abcb42b15d4b3d0">aof_last_write_status</a> = <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad47f78d56e1b3866a1a31c4389fc753e">aof_last_write_errno</a> = 0;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a1716a96025de1fff867e1af23329e9">repl_good_slaves_count</a> = 0;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="comment">/* Create the timer callback, this is our way to process many background</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">     * operations incrementally, like clients timeout, eviction of unaccessed</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">     * expired keys and so forth. */</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ae_8c.html#ae2b6461448420e59fdb578cb8809d036">aeCreateTimeEvent</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>, 1, <a class="code" href="server_8c.html#af588c16d11b3c614a398d31edde3275b">serverCron</a>, NULL, NULL) == <a class="code" href="ae_8h.html#aa16dcf7effdf8f8df97f51b1cb51a9df">AE_ERR</a>) {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(<span class="stringliteral">&quot;Can&#39;t create event loop timers.&quot;</span>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        exit(1);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="comment">/* Create an event handler for accepting new connections in TCP and Unix</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="comment">     * domain sockets. */</span></div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a>; j++) {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ae_8c.html#ad1918e57c96446a7e5a5067922c1a3a5">aeCreateFileEvent</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a396e19fe18c6bdeb9a1ac2a342323b6f">ipfd</a>[j], <a class="code" href="ae_8h.html#a7a9a2162d007d09739955b4e55c65bf3">AE_READABLE</a>,</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            <a class="code" href="networking_8c.html#a6e45692aca887ad07ad4e9351b862314">acceptTcpHandler</a>,NULL) == <a class="code" href="ae_8h.html#aa16dcf7effdf8f8df97f51b1cb51a9df">AE_ERR</a>)</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                    <span class="stringliteral">&quot;Unrecoverable error creating server.ipfd file event.&quot;</span>);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            }</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    }</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> &gt; 0 &amp;&amp; <a class="code" href="ae_8c.html#ad1918e57c96446a7e5a5067922c1a3a5">aeCreateFileEvent</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a>,<a class="code" href="ae_8h.html#a7a9a2162d007d09739955b4e55c65bf3">AE_READABLE</a>,</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <a class="code" href="networking_8c.html#ae258914c132880db02b3ea87b9fcb2e1">acceptUnixHandler</a>,NULL) == <a class="code" href="ae_8h.html#aa16dcf7effdf8f8df97f51b1cb51a9df">AE_ERR</a>) <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(<span class="stringliteral">&quot;Unrecoverable error creating server.sofd file event.&quot;</span>);</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="comment">/* Register a readable event for the pipe used to awake the event loop</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;<span class="comment">     * when a blocked client in a module needs attention. */</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ae_8c.html#ad1918e57c96446a7e5a5067922c1a3a5">aeCreateFileEvent</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a25bdcbb11f0d80bf9a7df68456b425b5">module_blocked_pipe</a>[0], <a class="code" href="ae_8h.html#a7a9a2162d007d09739955b4e55c65bf3">AE_READABLE</a>,</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;        <a class="code" href="module_8c.html#a5f5b1031fe4849990705d6e879d126db">moduleBlockedClientPipeReadable</a>,NULL) == <a class="code" href="ae_8h.html#aa16dcf7effdf8f8df97f51b1cb51a9df">AE_ERR</a>) {</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                <span class="stringliteral">&quot;Error registering the readable event for the module &quot;</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                <span class="stringliteral">&quot;blocked clients subsystem.&quot;</span>);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="comment">/* Open the AOF file if needed. */</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> == <a class="code" href="server_8h.html#af6b151c9dced28e94c19479197113a83">AOF_ON</a>) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1499cec4d5dc7a8bda9c061289c7a500">aof_fd</a> = open(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bdcedcc3282626ac99ee15091d20586">aof_filename</a>,</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                               O_WRONLY|O_APPEND|O_CREAT,0644);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1499cec4d5dc7a8bda9c061289c7a500">aof_fd</a> == -1) {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t open the append-only file: %s&quot;</span>,</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                strerror(errno));</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;            exit(1);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        }</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    }</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="comment">/* 32 bit instances are limited to 4GB of address space, so if there is</span></div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;<span class="comment">     * no explicit limit in the user provided configuration we set a limit</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;<span class="comment">     * at 3 GB using maxmemory with &#39;noeviction&#39; policy&#39;. This avoids</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;<span class="comment">     * useless crashes of the Redis instance for out of memory. */</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4fa04e8ede4efc50a4eae5a4ee94be15">arch_bits</a> == 32 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> == 0) {</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with &#39;noeviction&#39; policy now.&quot;</span>);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> = 3072LL*(1024*1024); <span class="comment">/* 3 GB */</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a98440b0fba87820830ee90965c9f54f4">maxmemory_policy</a> = <a class="code" href="server_8h.html#a418e5a222cf659c003df77830f1ae343">MAXMEMORY_NO_EVICTION</a>;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    }</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) <a class="code" href="cluster_8c.html#acde939ce69844e6df42f0d5887bf970f">clusterInit</a>();</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    <a class="code" href="replication_8c.html#a952c0abc9ec545a730536aa35c5a1ee2">replicationScriptCacheInit</a>();</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <a class="code" href="scripting_8c.html#a0afc20a5e4e51989e17b34c3bc4602d9">scriptingInit</a>(1);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <a class="code" href="slowlog_8c.html#a9f809d36b7eec2078bc7a3e4ed497505">slowlogInit</a>();</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <a class="code" href="latency_8c.html#a7f4b4d18fb9666b1ecd84b944ca3cc8f">latencyMonitorInit</a>();</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <a class="code" href="bio_8c.html#a3e0959494cbc322c6f3ed132cd89dfb3">bioInit</a>();</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1e552149c10f70ef055718ed88837bc3">initial_memory_usage</a> = <a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>();</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;}</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;<span class="comment">/* Populates the Redis Command Table starting from the hard coded list</span></div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;<span class="comment"> * we have on top of redis.c file. */</span></div><div class="line"><a name="l02182"></a><span class="lineno"><a class="line" href="server_8h.html#a9475c3fcad317183a072323859fb5409"> 2182</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a9475c3fcad317183a072323859fb5409">populateCommandTable</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordtype">int</span> numcommands = <span class="keyword">sizeof</span>(<a class="code" href="server_8c.html#a28856a2957d6f48c684d877c9189fc18">redisCommandTable</a>)/<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; numcommands; j++) {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *c = redisCommandTable+j;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        <span class="keywordtype">char</span> *f = c-&gt;<a class="code" href="structredis_command.html#abb4214e4b2dadd9f73384b61c6f13bee">sflags</a>;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;        <span class="keywordtype">int</span> retval1, retval2;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <span class="keywordflow">while</span>(*f != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            <span class="keywordflow">switch</span>(*f) {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a7e9c728f228e1c82ae1e22173375abcf">CMD_READONLY</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#aef97c640ad8dfdaca21eb67d4c37e447">CMD_DENYOOM</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a1917805ea3942a4784ec806c33bc6033">CMD_ADMIN</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a201d97fc457fe5bd58cb863b4ac7a0cc">CMD_PUBSUB</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#aaf26ba9b59589bc7701e36fb440a0fbe">CMD_NOSCRIPT</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a9f6608fefa355981c2a865ef3d44f196">CMD_RANDOM</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a819ad39aa4aef302c4421c3cd910252d">CMD_SORT_FOR_SCRIPT</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a5327d118cf467e77d8bb0cebdce3c0ce">CMD_LOADING</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#acf1f58ff0b6790cd8d0e3edf1a7e599f">CMD_STALE</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a43e2aecb49a88a6cd4e56bfa971bdc71">CMD_SKIP_MONITOR</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#af0b13ef0f1dabe404fd7d904cb66b548">CMD_ASKING</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>: c-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#ae21dc0d9c0dcdefa14ca1054c48f252f">CMD_FAST</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            <span class="keywordflow">default</span>: <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(<span class="stringliteral">&quot;Unsupported command flag&quot;</span>); <span class="keywordflow">break</span>;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            }</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            f++;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        retval1 = <a class="code" href="dict_8c.html#a99b61ef54f38b47e4b726b77a8ded387">dictAdd</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>, <a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(c-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>), c);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        <span class="comment">/* Populate an additional dictionary that will be unaffected</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">         * by rename-command statements in redis.conf. */</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        retval2 = <a class="code" href="dict_8c.html#a99b61ef54f38b47e4b726b77a8ded387">dictAdd</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2282515ee7614e17de7aeae0db6ea65b">orig_commands</a>, <a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(c-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>), c);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <a class="code" href="server_8h.html#a88114b5169b4c382df6b56506285e56a">serverAssert</a>(retval1 == <a class="code" href="dict_8h.html#a2afecbeab8f7efbc183048f52f6d17e5">DICT_OK</a> &amp;&amp; retval2 == <a class="code" href="dict_8h.html#a2afecbeab8f7efbc183048f52f6d17e5">DICT_OK</a>);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    }</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;}</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"><a class="line" href="server_8h.html#a8b0d640eab37ee8093c012db67666888"> 2219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a8b0d640eab37ee8093c012db67666888">resetCommandTableStats</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *c;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <a class="code" href="structdict_entry.html">dictEntry</a> *de;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <a class="code" href="structdict_iterator.html">dictIterator</a> *di;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    di = <a class="code" href="dict_8c.html#aad268687a4d34aab2c051233348a04c7">dictGetSafeIterator</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">while</span>((de = <a class="code" href="dict_8c.html#ab51f7613d1fe7b63edecd24efbcc7d2b">dictNext</a>(di)) != NULL) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        c = (<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *) <a class="code" href="dict_8h.html#ae8d2cc391873b2bea2b87c4f80f43120">dictGetVal</a>(de);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        c-&gt;<a class="code" href="structredis_command.html#a89a6c4af7ebda470a83c3b01d01dcb14">microseconds</a> = 0;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        c-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a> = 0;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <a class="code" href="dict_8c.html#a8bfc6c2908c66772c09a1315c078bf06">dictReleaseIterator</a>(di);</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">/* ========================== Redis OP Array API ============================ */</span></div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;</div><div class="line"><a name="l02236"></a><span class="lineno"><a class="line" href="server_8c.html#ac6c49554ad3b252a11f7736b4d2e1d79"> 2236</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ac6c49554ad3b252a11f7736b4d2e1d79">redisOpArrayInit</a>(<a class="code" href="structredis_op_array.html">redisOpArray</a> *oa) {</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a> = NULL;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a> = 0;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;}</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"><a class="line" href="server_8c.html#aba16001cc1e4c8d9a92c584492ea9a40"> 2241</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#aba16001cc1e4c8d9a92c584492ea9a40">redisOpArrayAppend</a>(<a class="code" href="structredis_op_array.html">redisOpArray</a> *oa, <span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a> *cmd, <span class="keywordtype">int</span> dbid,</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                       <a class="code" href="structredis_object.html">robj</a> **argv, <span class="keywordtype">int</span> argc, <span class="keywordtype">int</span> target)</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;{</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <a class="code" href="structredis_op.html">redisOp</a> *op;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a> = <a class="code" href="zmalloc_8c.html#ac24423a93cab2fbf18e28cc2f42f7f97">zrealloc</a>(oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a>,<span class="keyword">sizeof</span>(<a class="code" href="structredis_op.html">redisOp</a>)*(oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>+1));</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    op = oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a>+oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    op-&gt;<a class="code" href="structredis_op.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a> = cmd;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    op-&gt;<a class="code" href="structredis_op.html#adc62368127157e2b3ff9cabe77f4f337">dbid</a> = dbid;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    op-&gt;<a class="code" href="structredis_op.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a> = argv;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    op-&gt;<a class="code" href="structredis_op.html#ad1447518f4372828b8435ae82e48499e">argc</a> = argc;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    op-&gt;<a class="code" href="structredis_op.html#ae8aa5cb4faa95420993aad5d4f2e839f">target</a> = target;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>++;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">return</span> oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;}</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;</div><div class="line"><a name="l02257"></a><span class="lineno"><a class="line" href="server_8c.html#a68e6e5295ed738c87d1559060b0110e9"> 2257</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a68e6e5295ed738c87d1559060b0110e9">redisOpArrayFree</a>(<a class="code" href="structredis_op_array.html">redisOpArray</a> *oa) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keywordflow">while</span>(oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;        <a class="code" href="structredis_op.html">redisOp</a> *op;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>--;</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        op = oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a>+oa-&gt;<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; op-&gt;<a class="code" href="structredis_op.html#ad1447518f4372828b8435ae82e48499e">argc</a>; j++)</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <a class="code" href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a>(op-&gt;<a class="code" href="structredis_op.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[j]);</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(op-&gt;<a class="code" href="structredis_op.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>);</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    }</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(oa-&gt;<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;<span class="comment">/* ====================== Commands lookup and execution ===================== */</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="server_8h.html#ae0246c16fba26f65782c698060d394b6"> 2273</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *<a class="code" href="server_8c.html#ae0246c16fba26f65782c698060d394b6">lookupCommand</a>(<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> <a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>) {</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>, name);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;}</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"><a class="line" href="server_8h.html#a902505c4d30238285b73f529b8adfa21"> 2277</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *<a class="code" href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a>(<span class="keywordtype">char</span> *s) {</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *cmd;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> <a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a> = <a class="code" href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a>(s);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    cmd = <a class="code" href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>, name);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="sds_8c.html#a4d9266a6b2d5a98f0df0ac62f51324fd">sdsfree</a>(name);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">return</span> cmd;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;}</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="comment">/* Lookup the command in the current table, if not found also check in</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<span class="comment"> * the original table containing the original command names unaffected by</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment"> * redis.conf rename-command statement.</span></div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;<span class="comment"> * This is used by functions rewriting the argument vector such as</span></div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment"> * rewriteClientCommandVector() in order to set client-&gt;cmd pointer</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="comment"> * correctly even if the command was renamed. */</span></div><div class="line"><a name="l02293"></a><span class="lineno"><a class="line" href="server_8h.html#aeef77c6d0cbe617d2f68cc9ba193456b"> 2293</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *<a class="code" href="server_8c.html#aeef77c6d0cbe617d2f68cc9ba193456b">lookupCommandOrOriginal</a>(<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> <a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>) {</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *cmd = <a class="code" href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>, name);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <span class="keywordflow">if</span> (!cmd) cmd = <a class="code" href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2282515ee7614e17de7aeae0db6ea65b">orig_commands</a>,name);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">return</span> cmd;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">/* Propagate the specified command (in the context of the specified database id)</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment"> * to AOF and Slaves.</span></div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment"> * flags are an xor between:</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="comment"> * + PROPAGATE_NONE (no propagation of command at all)</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment"> * + PROPAGATE_AOF (propagate into the AOF file if is enabled)</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment"> * + PROPAGATE_REPL (propagate into the replication link)</span></div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment"> * This should not be used inside commands implementation. Use instead</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment"> * alsoPropagate(), preventCommandPropagation(), forceCommandPropagation().</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02311"></a><span class="lineno"><a class="line" href="server_8h.html#aa0eb79342e9715fd0886aa33c657409d"> 2311</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#aa0eb79342e9715fd0886aa33c657409d">propagate</a>(<span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a> *cmd, <span class="keywordtype">int</span> dbid, <a class="code" href="structredis_object.html">robj</a> **argv, <span class="keywordtype">int</span> argc,</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;               <span class="keywordtype">int</span> <a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;{</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> != <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a> &amp;&amp; flags &amp; <a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>)</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;        <a class="code" href="aof_8c.html#aca13d71d381248c8a1ef6caeb82c9244">feedAppendOnlyFile</a>(cmd,dbid,argv,argc);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>)</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <a class="code" href="replication_8c.html#a767d8f1bda78e1aca2fcb8da3d495a59">replicationFeedSlaves</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>,dbid,argv,argc);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">/* Used inside commands to schedule the propagation of additional commands</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment"> * after the current command is propagated to AOF / Replication.</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment"> * &#39;cmd&#39; must be a pointer to the Redis command to replicate, dbid is the</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment"> * database ID the command should be propagated into.</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment"> * Arguments of the command to propagte are passed as an array of redis</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="comment"> * objects pointers of len &#39;argc&#39;, using the &#39;argv&#39; vector.</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment"> * The function does not take a reference to the passed &#39;argv&#39; vector,</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment"> * so it is up to the caller to release the passed argv (but it is usually</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment"> * stack allocated).  The function autoamtically increments ref count of</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="comment"> * passed objects, so the caller does not need to. */</span></div><div class="line"><a name="l02332"></a><span class="lineno"><a class="line" href="server_8h.html#a7e6e3fe0b3bdb1bb7eb4d9e511054fa6"> 2332</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a7e6e3fe0b3bdb1bb7eb4d9e511054fa6">alsoPropagate</a>(<span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a> *cmd, <span class="keywordtype">int</span> dbid, <a class="code" href="structredis_object.html">robj</a> **argv, <span class="keywordtype">int</span> argc,</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                   <span class="keywordtype">int</span> target)</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;{</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="structredis_object.html">robj</a> **argvcopy;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) <span class="keywordflow">return</span>; <span class="comment">/* No propagation during loading. */</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    argvcopy = <a class="code" href="zmalloc_8c.html#a879ee0956348fd24dc2ac69c2d4f220b">zmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structredis_object.html">robj</a>*)*argc);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; argc; j++) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        argvcopy[j] = argv[j];</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <a class="code" href="object_8c.html#aa84594b5dd7a5dda8201c15c85b1457a">incrRefCount</a>(argv[j]);</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <a class="code" href="server_8c.html#aba16001cc1e4c8d9a92c584492ea9a40">redisOpArrayAppend</a>(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>,cmd,dbid,argvcopy,argc,target);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;}</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment">/* It is possible to call the function forceCommandPropagation() inside a</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment"> * Redis command implementation in order to to force the propagation of a</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="comment"> * specific command execution into AOF / Replication. */</span></div><div class="line"><a name="l02351"></a><span class="lineno"><a class="line" href="server_8h.html#a2926d1d3245c14f1014cc11d673d0416"> 2351</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a2926d1d3245c14f1014cc11d673d0416">forceCommandPropagation</a>(<a class="code" href="structclient.html">client</a> *c, <span class="keywordtype">int</span> <a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>) {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>) c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>) c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;}</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment">/* Avoid that the executed command is propagated at all. This way we</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment"> * are free to just propagate what we want using the alsoPropagate()</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="comment"> * API. */</span></div><div class="line"><a name="l02359"></a><span class="lineno"><a class="line" href="server_8h.html#a4e8fb07372f94fa524c781db04cf3b20"> 2359</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a4e8fb07372f94fa524c781db04cf3b20">preventCommandPropagation</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;}</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="comment">/* AOF specific version of preventCommandPropagation(). */</span></div><div class="line"><a name="l02364"></a><span class="lineno"><a class="line" href="server_8h.html#af6ad2050172ff936330b3a32b853e317"> 2364</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#af6ad2050172ff936330b3a32b853e317">preventCommandAOF</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a9948ae3a2778b5a06b704231b921e7fa">CLIENT_PREVENT_AOF_PROP</a>;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;}</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">/* Replication specific version of preventCommandPropagation(). */</span></div><div class="line"><a name="l02369"></a><span class="lineno"><a class="line" href="server_8h.html#a595cec82a851fe7b87861d93677cc32d"> 2369</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a595cec82a851fe7b87861d93677cc32d">preventCommandReplication</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a01c18c16bc758787b5cfc287eb7b089e">CLIENT_PREVENT_REPL_PROP</a>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment">/* Call() is the core of Redis execution of a command.</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;<span class="comment"> * The following flags can be passed:</span></div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;<span class="comment"> * CMD_CALL_NONE        No flags.</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment"> * CMD_CALL_SLOWLOG     Check command speed and log in the slow log if needed.</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment"> * CMD_CALL_STATS       Populate command stats.</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment"> * CMD_CALL_PROPAGATE_AOF   Append command to AOF if it modified the dataset</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment"> *                          or if the client flags are forcing propagation.</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment"> * CMD_CALL_PROPAGATE_REPL  Send command to salves if it modified the dataset</span></div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment"> *                          or if the client flags are forcing propagation.</span></div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment"> * CMD_CALL_PROPAGATE   Alias for PROPAGATE_AOF|PROPAGATE_REPL.</span></div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment"> * CMD_CALL_FULL        Alias for SLOWLOG|STATS|PROPAGATE.</span></div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment"> * The exact propagation behavior depends on the client flags.</span></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment"> * Specifically:</span></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment"> * 1. If the client flags CLIENT_FORCE_AOF or CLIENT_FORCE_REPL are set</span></div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment"> *    and assuming the corresponding CMD_CALL_PROPAGATE_AOF/REPL is set</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment"> *    in the call flags, then the command is propagated even if the</span></div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="comment"> *    dataset was not affected by the command.</span></div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment"> * 2. If the client flags CLIENT_PREVENT_REPL_PROP or CLIENT_PREVENT_AOF_PROP</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment"> *    are set, the propagation into AOF or to slaves is not performed even</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment"> *    if the command modified the dataset.</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment"> * Note that regardless of the client flags, if CMD_CALL_PROPAGATE_AOF</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment"> * or CMD_CALL_PROPAGATE_REPL are not set, then respectively AOF or</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment"> * slaves propagation will never occur.</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment"> * Client flags are modified by the implementation of a given command</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment"> * using the following API:</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment"> * forceCommandPropagation(client *c, int flags);</span></div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment"> * preventCommandPropagation(client *c);</span></div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment"> * preventCommandAOF(client *c);</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="comment"> * preventCommandReplication(client *c);</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02410"></a><span class="lineno"><a class="line" href="server_8h.html#a227dd14edf2254d7b12b8ce656ce1439"> 2410</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a227dd14edf2254d7b12b8ce656ce1439">call</a>(<a class="code" href="structclient.html">client</a> *c, <span class="keywordtype">int</span> <a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>) {</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> dirty, start, duration;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;    <span class="keywordtype">int</span> client_old_flags = c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *real_cmd = c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="comment">/* Sent the command to clients in MONITOR mode, only if the commands are</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment">     * not generated from reading an AOF. */</span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#adafbaec515301e4446949c48a2670a84">monitors</a>) &amp;&amp;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        !<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; (<a class="code" href="server_8h.html#a43e2aecb49a88a6cd4e56bfa971bdc71">CMD_SKIP_MONITOR</a>|<a class="code" href="server_8h.html#a1917805ea3942a4784ec806c33bc6033">CMD_ADMIN</a>)))</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    {</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <a class="code" href="replication_8c.html#a210b8e82fb1482b1655f23bac2b09509">replicationFeedMonitors</a>(c,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#adafbaec515301e4446949c48a2670a84">monitors</a>,c-&gt;<a class="code" href="structclient.html#a9bee04e09635a42fef289e42a89f5502">db</a>-&gt;<a class="code" href="structredis_db.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>,c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    }</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    <span class="comment">/* Initialization: clear the flags that must be set by the command on</span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">     * demand, and initialize the array for additional commands propagation. */</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp;= ~(<a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>|<a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>|<a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="structredis_op_array.html">redisOpArray</a> prev_also_propagate = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <a class="code" href="server_8c.html#ac6c49554ad3b252a11f7736b4d2e1d79">redisOpArrayInit</a>(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>);</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment">/* Call the command. */</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    dirty = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">dirty</a>;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    start = <a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>();</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a>(c);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    duration = <a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>()-start;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    dirty = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">dirty</a>-dirty;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <span class="keywordflow">if</span> (dirty &lt; 0) dirty = 0;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="comment">/* When EVAL is called loading the AOF we don&#39;t want commands called</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">     * from Lua to go into the slowlog or to populate statistics. */</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp; c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#af9d0b0f45ef2c1fd29ac714a300de706">CLIENT_LUA</a>)</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        flags &amp;= ~(<a class="code" href="server_8h.html#a934cea7b13db05a29264146cd5b14064">CMD_CALL_SLOWLOG</a> | <a class="code" href="server_8h.html#a7b1d9cf5be21e4808da0c16f03155973">CMD_CALL_STATS</a>);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="comment">/* If the caller is Lua, we want to force the EVAL caller to propagate</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;<span class="comment">     * the script if the command flag or client flag are forcing the</span></div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="comment">     * propagation. */</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#af9d0b0f45ef2c1fd29ac714a300de706">CLIENT_LUA</a> &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a358f45ac0e9b0130b7bef78e34537106">lua_caller</a>) {</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a358f45ac0e9b0130b7bef78e34537106">lua_caller</a>-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>)</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a358f45ac0e9b0130b7bef78e34537106">lua_caller</a>-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    }</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="comment">/* Log the command into the Slow log if needed, and populate the</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;<span class="comment">     * per-command statistics that we show in INFO commandstats. */</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a934cea7b13db05a29264146cd5b14064">CMD_CALL_SLOWLOG</a> &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a>) {</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        <span class="keywordtype">char</span> *latency_event = (c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#ae21dc0d9c0dcdefa14ca1054c48f252f">CMD_FAST</a>) ?</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                              <span class="stringliteral">&quot;fast-command&quot;</span> : <span class="stringliteral">&quot;command&quot;</span>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        <a class="code" href="latency_8h.html#a77922ab34035890c90f98831a9071359">latencyAddSampleIfNeeded</a>(latency_event,duration/1000);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <a class="code" href="slowlog_8c.html#a61d4ecda7c04939cade4011b30c4fad0">slowlogPushEntryIfNeeded</a>(c,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>,c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>,duration);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    }</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a7b1d9cf5be21e4808da0c16f03155973">CMD_CALL_STATS</a>) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <span class="comment">/* use the real command that was executed (cmd and lastamc) may be</span></div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="comment">         * different, in case of MULTI-EXEC or re-written commands such as</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;<span class="comment">         * EXPIRE, GEOADD, etc. */</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        real_cmd-&gt;<a class="code" href="structredis_command.html#a89a6c4af7ebda470a83c3b01d01dcb14">microseconds</a> += duration;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        real_cmd-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a>++;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    }</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="comment">/* Propagate the command into the AOF and replication link */</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a6ee9ed603f975d0d2b6ae44f1907565f">CMD_CALL_PROPAGATE</a> &amp;&amp;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>) != <a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>)</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    {</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordtype">int</span> propagate_flags = <a class="code" href="server_8h.html#a0c7409da047d754c0adeb001025acc03">PROPAGATE_NONE</a>;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        <span class="comment">/* Check if the command operated changes in the data set. If so</span></div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;<span class="comment">         * set for replication / AOF propagation. */</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="keywordflow">if</span> (dirty) propagate_flags |= (<a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>|<a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="comment">/* If the client forced AOF / replication of the command, set</span></div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;<span class="comment">         * the flags regardless of the command effects on the data set. */</span></div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>) propagate_flags |= <a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>) propagate_flags |= <a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <span class="comment">/* However prevent AOF / replication propagation if the command</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="comment">         * implementations called preventCommandPropagation() or similar,</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="comment">         * or if we don&#39;t have the call() flags to do so. */</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a01c18c16bc758787b5cfc287eb7b089e">CLIENT_PREVENT_REPL_PROP</a> ||</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;            !(flags &amp; <a class="code" href="server_8h.html#a69e4a8fdb26588e1028deb20fd51424a">CMD_CALL_PROPAGATE_REPL</a>))</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;                propagate_flags &amp;= ~<a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a9948ae3a2778b5a06b704231b921e7fa">CLIENT_PREVENT_AOF_PROP</a> ||</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;            !(flags &amp; <a class="code" href="server_8h.html#a3ca848c94df18641ac372c58fca0e236">CMD_CALL_PROPAGATE_AOF</a>))</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                propagate_flags &amp;= ~<a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;        <span class="comment">/* Call propagate() only if at least one of AOF / replication</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="comment">         * propagation is needed. Note that modules commands handle replication</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="comment">         * in an explicit way, so we never replicate them automatically. */</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;        <span class="keywordflow">if</span> (propagate_flags != <a class="code" href="server_8h.html#a0c7409da047d754c0adeb001025acc03">PROPAGATE_NONE</a> &amp;&amp; !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#accabd32f20281543986166c219124f9e">CMD_MODULE</a>))</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;            <a class="code" href="server_8c.html#aa0eb79342e9715fd0886aa33c657409d">propagate</a>(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>,c-&gt;<a class="code" href="structclient.html#a9bee04e09635a42fef289e42a89f5502">db</a>-&gt;<a class="code" href="structredis_db.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>,c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>,propagate_flags);</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    }</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="comment">/* Restore the old replication flags, since call() can be executed</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="comment">     * recursively. */</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp;= ~(<a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>|<a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>|<a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= client_old_flags &amp;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        (<a class="code" href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a>|<a class="code" href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a>|<a class="code" href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a>);</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="comment">/* Handle the alsoPropagate() API to handle commands that want to propagate</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;<span class="comment">     * multiple separated commands. Note that alsoPropagate() is not affected</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">     * by CLIENT_PREVENT_PROP flag. */</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>.<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;        <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="structredis_op.html">redisOp</a> *rop;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        <span class="keywordflow">if</span> (flags &amp; <a class="code" href="server_8h.html#a6ee9ed603f975d0d2b6ae44f1907565f">CMD_CALL_PROPAGATE</a>) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>.<a class="code" href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">numops</a>; j++) {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                rop = &amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>.<a class="code" href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">ops</a>[j];</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                <span class="keywordtype">int</span> target = rop-&gt;<a class="code" href="structredis_op.html#ae8aa5cb4faa95420993aad5d4f2e839f">target</a>;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                <span class="comment">/* Whatever the command wish is, we honor the call() flags. */</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                <span class="keywordflow">if</span> (!(flags&amp;<a class="code" href="server_8h.html#a3ca848c94df18641ac372c58fca0e236">CMD_CALL_PROPAGATE_AOF</a>)) target &amp;= ~<a class="code" href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a>;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                <span class="keywordflow">if</span> (!(flags&amp;<a class="code" href="server_8h.html#a69e4a8fdb26588e1028deb20fd51424a">CMD_CALL_PROPAGATE_REPL</a>)) target &amp;= ~<a class="code" href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                <span class="keywordflow">if</span> (target)</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                    <a class="code" href="server_8c.html#aa0eb79342e9715fd0886aa33c657409d">propagate</a>(rop-&gt;<a class="code" href="structredis_op.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>,rop-&gt;<a class="code" href="structredis_op.html#adc62368127157e2b3ff9cabe77f4f337">dbid</a>,rop-&gt;<a class="code" href="structredis_op.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>,rop-&gt;<a class="code" href="structredis_op.html#ad1447518f4372828b8435ae82e48499e">argc</a>,target);</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;            }</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        }</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <a class="code" href="server_8c.html#a68e6e5295ed738c87d1559060b0110e9">redisOpArrayFree</a>(&amp;<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    }</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">also_propagate</a> = prev_also_propagate;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa818a00bded05cbfc242fbd30a51bd06">stat_numcommands</a>++;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;}</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="comment">/* If this function gets called we already read a whole</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment"> * command, arguments are in the client argv/argc fields.</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="comment"> * processCommand() execute the command or prepare the</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="comment"> * server for a bulk read from the client.</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="comment"> * If C_OK is returned the client is still alive and valid and</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="comment"> * other operations can be performed by the caller. Otherwise</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="comment"> * if C_ERR is returned the client was destroyed (i.e. after QUIT). */</span></div><div class="line"><a name="l02539"></a><span class="lineno"><a class="line" href="server_8h.html#ae3e53748117462645bfdc717830e9a00"> 2539</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#ae3e53748117462645bfdc717830e9a00">processCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="comment">/* The QUIT command is handled separately. Normal command procs will</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="comment">     * go through checking for replication and QUIT will cause trouble</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="comment">     * when FORCE_REPLICATION is enabled and would be implemented in</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment">     * a regular command proc. */</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordflow">if</span> (!strcasecmp(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[0]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,<span class="stringliteral">&quot;quit&quot;</span>)) {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#adf30e1960aaa30991c8cc6f5d1b8f1f5">ok</a>);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;        c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= <a class="code" href="server_8h.html#a8cff2154afcc2e87ac85bdbbe2814091">CLIENT_CLOSE_AFTER_REPLY</a>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    }</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <span class="comment">/* Now lookup the command and check ASAP about trivial error conditions</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="comment">     * such as wrong arity, bad command name and so forth. */</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a> = c-&gt;<a class="code" href="structclient.html#a81d89da91093b6bd8a49acf4a58d47b4">lastcmd</a> = <a class="code" href="server_8c.html#ae0246c16fba26f65782c698060d394b6">lookupCommand</a>(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[0]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>) {</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> args = <a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>();</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="keywordflow">for</span> (i=1; i &lt; c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> &amp;&amp; sdslen(args) &lt; 128; i++)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;            args = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(args, <span class="stringliteral">&quot;`%.*s`, &quot;</span>, 128-(<span class="keywordtype">int</span>)sdslen(args), (<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[i]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <a class="code" href="networking_8c.html#aff850095b7516e77667d7a8396c17e9a">addReplyErrorFormat</a>(c,<span class="stringliteral">&quot;unknown command `%s`, with args beginning with: %s&quot;</span>,</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;            (<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[0]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, args);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <a class="code" href="sds_8c.html#a4d9266a6b2d5a98f0df0ac62f51324fd">sdsfree</a>(args);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a> &gt; 0 &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a> != c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>) ||</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;               (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> &lt; -c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a>)) {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <a class="code" href="networking_8c.html#aff850095b7516e77667d7a8396c17e9a">addReplyErrorFormat</a>(c,<span class="stringliteral">&quot;wrong number of arguments for &#39;%s&#39; command&quot;</span>,</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    }</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="comment">/* Check if the user is authenticated */</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0ba0e84624d22e52e900533adf7d9ba8">requirepass</a> &amp;&amp; !c-&gt;<a class="code" href="structclient.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a> &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="server_8c.html#a102476624bc170decc56549ae0932703">authCommand</a>)</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    {</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a6af65e1a894c290efe8a917e9a318d65">noautherr</a>);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="comment">/* If cluster is enabled perform the cluster redirection here.</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">     * However we don&#39;t perform the redirection if:</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment">     * 1) The sender of this command is our master.</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="comment">     * 2) The command has no key arguments. */</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a> &amp;&amp;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a>) &amp;&amp;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#af9d0b0f45ef2c1fd29ac714a300de706">CLIENT_LUA</a> &amp;&amp;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;          <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a358f45ac0e9b0130b7bef78e34537106">lua_caller</a>-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a>) &amp;&amp;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a871d4aede11ef92c86b3c64c2a5477c0">getkeys_proc</a> == NULL &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#aeb16776f95a4f73f9c6768fbbec9a038">firstkey</a> == 0 &amp;&amp;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;          c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a>))</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    {</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        <span class="keywordtype">int</span> hashslot;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        <span class="keywordtype">int</span> error_code;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <a class="code" href="structcluster_node.html">clusterNode</a> *n = <a class="code" href="cluster_8c.html#aaf79a84dde9b9c47378566b043bcf4b6">getNodeByQuery</a>(c,c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>,c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>,</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                                        &amp;hashslot,&amp;error_code);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;        <span class="keywordflow">if</span> (n == NULL || n != <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a99f21f2f011d0994a31c20057fe79a72">cluster</a>-&gt;<a class="code" href="structcluster_state.html#aff69bee08a3a0a58166a9f85acf12d56">myself</a>) {</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> == <a class="code" href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a>) {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                <a class="code" href="multi_8c.html#a915c7468a9f49fcbbaf3a54e65c12e56">discardTransaction</a>(c);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;            }</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            <a class="code" href="cluster_8c.html#a173a8e877d27a3850ad4072489e7a44b">clusterRedirectClient</a>(c,n,hashslot,error_code);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        }</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="comment">/* Handle the maxmemory directive.</span></div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">     * First we try to free some memory if possible (if there are volatile</span></div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">     * keys in the dataset). If there are not the only thing we can do</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment">     * is returning an error.</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">     * Note that we do not want to reclaim memory if we are here re-entering</span></div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment">     * the event loop since there is a busy Lua script running in timeout</span></div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment">     * condition, to avoid mixing the propagation of scripts with the propagation</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment">     * of DELs due to eviction. */</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> &amp;&amp; !<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afce7261d2fd1519a835614d28df5afb5">lua_timedout</a>) {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        <span class="keywordtype">int</span> out_of_memory = <a class="code" href="evict_8c.html#a1b2dc1c43909a5f4f192343765ed8183">freeMemoryIfNeeded</a>() == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        <span class="comment">/* freeMemoryIfNeeded may flush slave output buffers. This may result</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">         * into a slave, that may be the active client, to be freed. */</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6997b24b6b724923db5756c39f5e0662">current_client</a> == NULL) <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;        <span class="comment">/* It was impossible to free enough memory, and the command the client</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">         * is trying to execute is denied during OOM conditions? Error. */</span></div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        <span class="keywordflow">if</span> ((c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#aef97c640ad8dfdaca21eb67d4c37e447">CMD_DENYOOM</a>) &amp;&amp; out_of_memory) {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;            <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a04d6600ef1fe2b894f70764a861e41ff">oomerr</a>);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        }</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    }</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="comment">/* Don&#39;t accept write commands if there are problems persisting on disk</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">     * and if this is a master instance. */</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <span class="keywordtype">int</span> deny_write_type = <a class="code" href="server_8c.html#a1eb41b14cb13e6dd5edd3125af3073da">writeCommandsDeniedByDiskError</a>();</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <span class="keywordflow">if</span> (deny_write_type != <a class="code" href="server_8h.html#a3fb164a493199fe584c0f9a1f44d7896">DISK_ERROR_TYPE_NONE</a> &amp;&amp;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> == NULL &amp;&amp;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        (c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a> ||</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;         c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> == <a class="code" href="server_8c.html#ae1066bde6904041087bdf3efa2bde1e7">pingCommand</a>))</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;    {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">if</span> (deny_write_type == <a class="code" href="server_8h.html#a6115eb959ba9affed34e840901a5b11b">DISK_ERROR_TYPE_RDB</a>)</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;            <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a8e60666fa4a7bb1814cfc4734c9504d9">bgsaveerr</a>);</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <a class="code" href="networking_8c.html#a9da76a225d7993a0a3f3ede650478508">addReplySds</a>(c,</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(<a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>(),</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;                <span class="stringliteral">&quot;-MISCONF Errors writing to the AOF file: %s\r\n&quot;</span>,</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                strerror(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad47f78d56e1b3866a1a31c4389fc753e">aof_last_write_errno</a>)));</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    }</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="comment">/* Don&#39;t accept write commands if there are not enough good slaves and</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">     * user configured the min-slaves-to-write option. */</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> == NULL &amp;&amp;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2948a0fa6ec92b071befb3e78fd57b2f">repl_min_slaves_to_write</a> &amp;&amp;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3b224fc091bae066a03314069adf205">repl_min_slaves_max_lag</a> &amp;&amp;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a> &amp;&amp;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a1716a96025de1fff867e1af23329e9">repl_good_slaves_count</a> &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2948a0fa6ec92b071befb3e78fd57b2f">repl_min_slaves_to_write</a>)</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af5c9958d2aef90751637972126ea441d">noreplicaserr</a>);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    }</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="comment">/* Don&#39;t accept write commands if this is a read only slave. But</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="comment">     * accept write commands if this is our master. */</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a297743fec342702645d8b174a4877e3b">repl_slave_ro</a> &amp;&amp;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a>) &amp;&amp;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a>)</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    {</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a332bfc8ddfe9e7c0ecfbef5f85a9014a">roslaveerr</a>);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="comment">/* Only allow SUBSCRIBE and UNSUBSCRIBE in the context of Pub/Sub */</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a20f2f5380db97cd09013118ffc9411cc">CLIENT_PUBSUB</a> &amp;&amp;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="server_8c.html#ae1066bde6904041087bdf3efa2bde1e7">pingCommand</a> &amp;&amp;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="pubsub_8c.html#a7322700796b561a34a18723b5d1b754a">subscribeCommand</a> &amp;&amp;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="pubsub_8c.html#a472428e32d6dddf29790796d3388e135">unsubscribeCommand</a> &amp;&amp;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="pubsub_8c.html#adc25a077e0766a1a45816ff2c280a247">psubscribeCommand</a> &amp;&amp;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="pubsub_8c.html#acb5aa2733bb6ecb41cf96fa248454697">punsubscribeCommand</a>) {</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;only (P)SUBSCRIBE / (P)UNSUBSCRIBE / PING / QUIT allowed in this context&quot;</span>);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    }</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="comment">/* Only allow commands with flag &quot;t&quot;, such as INFO, SLAVEOF and so on,</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">     * when slave-serve-stale-data is no and we are a slave with a broken</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment">     * link with master. */</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> != <a class="code" href="server_8h.html#aed693b3a9cdfc05cf5ab7551a8c86fbe">REPL_STATE_CONNECTED</a> &amp;&amp;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac57f30da06fd89c76b8dd1f93ea0083f">repl_serve_stale_data</a> == 0 &amp;&amp;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#acf1f58ff0b6790cd8d0e3edf1a7e599f">CMD_STALE</a>))</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    {</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a98b0919e4d91db1f0737099903c2d020">masterdownerr</a>);</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    }</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="comment">/* Loading DB? Return an error if the command has not the</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="comment">     * CMD_LOADING flag. */</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp; !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a5327d118cf467e77d8bb0cebdce3c0ce">CMD_LOADING</a>)) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#ab0049b4891325314ab168a96180f8500">loadingerr</a>);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    }</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="comment">/* Lua script too slow? Only allow a limited number of commands. */</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afce7261d2fd1519a835614d28df5afb5">lua_timedout</a> &amp;&amp;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;          c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="server_8c.html#a102476624bc170decc56549ae0932703">authCommand</a> &amp;&amp;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;          c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="replication_8c.html#a6f8585370e62320875abea412e5c8a9a">replconfCommand</a> &amp;&amp;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> == <a class="code" href="db_8c.html#a30e4f224a138ea036bb4ecc024796be0">shutdownCommand</a> &amp;&amp;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;          c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 2 &amp;&amp;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;          tolower(((<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>)[0]) == <span class="charliteral">&#39;n&#39;</span>) &amp;&amp;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        !(c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> == <a class="code" href="scripting_8c.html#a9e2aac4d91cc39a7634cc42a8acea80b">scriptCommand</a> &amp;&amp;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;          c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 2 &amp;&amp;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;          tolower(((<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>)[0]) == <span class="charliteral">&#39;k&#39;</span>))</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    {</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        <a class="code" href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a>(c);</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#abc68d5d846335b9ca10130c196268b67">slowscripterr</a>);</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    }</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="comment">/* Exec the command */</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a7f61f783f429419f8c593291a509b03a">CLIENT_MULTI</a> &amp;&amp;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a> &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a754eaefc6b7bfb8177b8a239a8d4168f">discardCommand</a> &amp;&amp;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;        c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a31af7ae891c458efa31333f98aa0129a">multiCommand</a> &amp;&amp; c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">proc</a> != <a class="code" href="multi_8c.html#a48749bd23a226514aaae95894ba8d51e">watchCommand</a>)</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    {</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;        <a class="code" href="multi_8c.html#aff077de006c62e609c789acee26a830c">queueMultiCommand</a>(c);</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#af1169abbaa153a574db3ad92b5a62dec">queued</a>);</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        <a class="code" href="server_8c.html#a227dd14edf2254d7b12b8ce656ce1439">call</a>(c,<a class="code" href="server_8h.html#a7e92e38a9fe5f713cace24d63184273e">CMD_CALL_FULL</a>);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;        c-&gt;<a class="code" href="structclient.html#af59577028441c0e9c8361e112706e6c5">woff</a> = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ba0eb500edf919e115c9d159b991cd1">master_repl_offset</a>;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7a707c2da0ace2b0eb8a278960c34f7a">ready_keys</a>))</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;            <a class="code" href="blocked_8c.html#a0a72a8d4066dc960cc7807ce1e57cb3d">handleClientsBlockedOnKeys</a>();</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    }</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;}</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">/*================================== Shutdown =============================== */</span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment">/* Close listening sockets. Also unlink the unix domain socket if</span></div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment"> * unlink_unix_socket is non-zero. */</span></div><div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="server_8h.html#a414bd8f2a71956983015b78836134525"> 2738</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a414bd8f2a71956983015b78836134525">closeListeningSockets</a>(<span class="keywordtype">int</span> unlink_unix_socket) {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a>; j++) close(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a396e19fe18c6bdeb9a1ac2a342323b6f">ipfd</a>[j]);</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> != -1) close(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a>);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>)</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a902c2c73c0b20af987cc22e032044e29">cfd_count</a>; j++) close(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a78645cb094289da318fa90b1cf3ad692">cfd</a>[j]);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    <span class="keywordflow">if</span> (unlink_unix_socket &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a>) {</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Removing the unix socket file.&quot;</span>);</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        unlink(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a>); <span class="comment">/* don&#39;t care if this fails */</span></div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    }</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;}</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;</div><div class="line"><a name="l02751"></a><span class="lineno"><a class="line" href="server_8c.html#a052960af9fbd487bc866d61c2f0cc996"> 2751</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a052960af9fbd487bc866d61c2f0cc996">prepareForShutdown</a>(<span class="keywordtype">int</span> <a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>) {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordtype">int</span> save = flags &amp; <a class="code" href="server_8h.html#ada761b94960fa20ff86d56b403b26861">SHUTDOWN_SAVE</a>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="keywordtype">int</span> nosave = flags &amp; <a class="code" href="server_8h.html#a834b7e50f783a1eeaa1feea05fce199e">SHUTDOWN_NOSAVE</a>;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;User requested shutdown...&quot;</span>);</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="comment">/* Kill all the Lua debugger forked sessions. */</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="scripting_8c.html#a9dc47cd5c53302d2fe6132c86241c4ee">ldbKillForkedSessions</a>();</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    <span class="comment">/* Kill the saving child if there is a background saving in progress.</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment">       We want to avoid race conditions, for instance our saving child may</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">       overwrite the synchronous saving did by SHUTDOWN. */</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> != -1) {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;There is a child saving an .rdb. Killing it!&quot;</span>);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;        kill(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a>,SIGUSR1);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;        <a class="code" href="rdb_8c.html#a17fb24fcbbe9ff8228fa7b24430fea7b">rdbRemoveTempFile</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> != <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a>) {</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <span class="comment">/* Kill the AOF saving child as the AOF we already have may be longer</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="comment">         * but contains the full dataset anyway. */</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> != -1) {</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;            <span class="comment">/* If we have AOF enabled but haven&#39;t written the AOF yet, don&#39;t</span></div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="comment">             * shutdown or else the dataset will be lost. */</span></div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> == <a class="code" href="server_8h.html#a7d4b86c89be4d951fbf048130431a16a">AOF_WAIT_REWRITE</a>) {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Writing initial AOF, can&#39;t exit.&quot;</span>);</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            }</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                <span class="stringliteral">&quot;There is a child rewriting the AOF. Killing it!&quot;</span>);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;            kill(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a>,SIGUSR1);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        }</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <span class="comment">/* Append only file: flush buffers and fsync() the AOF at exit */</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Calling fsync() on the AOF file.&quot;</span>);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <a class="code" href="aof_8c.html#a85f34d09b65dafc802c9eb3c6a344d37">flushAppendOnlyFile</a>(1);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <a class="code" href="config_8h.html#a2772a97b4cc2a57992e8f3f8a6ef0ad7">redis_fsync</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1499cec4d5dc7a8bda9c061289c7a500">aof_fd</a>);</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    }</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <span class="comment">/* Create a new RDB file before exiting. */</span></div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad4654cdc5b77789a9175000290abc831">saveparamslen</a> &gt; 0 &amp;&amp; !nosave) || save) {</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Saving the final RDB snapshot before exiting.&quot;</span>);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        <span class="comment">/* Snapshotting. Perform a SYNC SAVE and exit */</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        <a class="code" href="structrdb_save_info.html">rdbSaveInfo</a> rsi, *rsiptr;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;        rsiptr = <a class="code" href="rdb_8c.html#a4838759ceeea9016784d256d85dc04ea">rdbPopulateSaveInfo</a>(&amp;rsi);</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="rdb_8c.html#a7903dab7103f5acfd30d5f27fdc8cf60">rdbSave</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">rdb_filename</a>,rsiptr) != <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;            <span class="comment">/* Ooops.. error saving! The best we can do is to continue</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment">             * operating. Note that if there was a background saving process,</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment">             * in the next cron() Redis will be notified that the background</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">             * saving aborted, handling special stuff like slaves pending for</span></div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="comment">             * synchronization... */</span></div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Error trying to save the DB, can&#39;t exit.&quot;</span>);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        }</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    }</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;    <span class="comment">/* Remove the pid file if possible and needed. */</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa2339b21f98abccd12533a54d5f9d712">daemonize</a> || <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>) {</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Removing the pid file.&quot;</span>);</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;        unlink(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>);</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    }</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="comment">/* Best effort flush of slave output buffers, so that we hopefully</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="comment">     * send them pending writes. */</span></div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    <a class="code" href="networking_8c.html#ab4f02ccd74d72cbd5aa3f5cd42bea2c1">flushSlavesOutputBuffers</a>();</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="comment">/* Close the listening sockets. Apparently this allows faster restarts. */</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <a class="code" href="server_8c.html#a414bd8f2a71956983015b78836134525">closeListeningSockets</a>(1);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;%s is now ready to exit, bye bye...&quot;</span>,</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a> ? <span class="stringliteral">&quot;Sentinel&quot;</span> : <span class="stringliteral">&quot;Redis&quot;</span>);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;}</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;<span class="comment">/*================================== Commands =============================== */</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;<span class="comment">/* Sometimes Redis cannot accept write commands because there is a perstence</span></div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;<span class="comment"> * error with the RDB or AOF file, and Redis is configured in order to stop</span></div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;<span class="comment"> * accepting writes in such situation. This function returns if such a</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;<span class="comment"> * condition is active, and the type of the condition.</span></div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="comment"> * Function return values:</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="comment"> * DISK_ERROR_TYPE_NONE:    No problems, we can accept writes.</span></div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;<span class="comment"> * DISK_ERROR_TYPE_AOF:     Don&#39;t accept writes: AOF errors.</span></div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="comment"> * DISK_ERROR_TYPE_RDB:     Don&#39;t accept writes: RDB errors.</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02836"></a><span class="lineno"><a class="line" href="server_8h.html#a1eb41b14cb13e6dd5edd3125af3073da"> 2836</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a1eb41b14cb13e6dd5edd3125af3073da">writeCommandsDeniedByDiskError</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a74b48fc7843d6cfaf61b0e49a47e2be1">stop_writes_on_bgsave_err</a> &amp;&amp;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad4654cdc5b77789a9175000290abc831">saveparamslen</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">lastbgsave_status</a> == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>)</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a6115eb959ba9affed34e840901a5b11b">DISK_ERROR_TYPE_RDB</a>;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> != <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a> &amp;&amp;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;               <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa67a20f0faa8ffcc2abcb42b15d4b3d0">aof_last_write_status</a> == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>)</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#acbe9368b6ceb2b55421bf34d4df808cf">DISK_ERROR_TYPE_AOF</a>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8h.html#a3fb164a493199fe584c0f9a1f44d7896">DISK_ERROR_TYPE_NONE</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    }</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;}</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="comment">/* Return zero if strings are the same, non-zero if they are not.</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment"> * The comparison is performed in a way that prevents an attacker to obtain</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment"> * information about the nature of the strings just monitoring the execution</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="comment"> * time of the function.</span></div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="comment"> * Note that limiting the comparison length to strings up to 512 bytes we</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="comment"> * can avoid leaking any information about the password length and any</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment"> * possible branch misprediction related leak.</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02860"></a><span class="lineno"><a class="line" href="server_8c.html#a26f5f7d1708111165c38a2a6ed698107"> 2860</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a26f5f7d1708111165c38a2a6ed698107">time_independent_strcmp</a>(<span class="keywordtype">char</span> *a, <span class="keywordtype">char</span> *b) {</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordtype">char</span> bufa[<a class="code" href="server_8h.html#a8e9d7cd814b95c2cbd17701efe1374f2">CONFIG_AUTHPASS_MAX_LEN</a>], bufb[<a class="code" href="server_8h.html#a8e9d7cd814b95c2cbd17701efe1374f2">CONFIG_AUTHPASS_MAX_LEN</a>];</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <span class="comment">/* The above two strlen perform len(a) + len(b) operations where either</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment">     * a or b are fixed (our password) length, and the difference is only</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment">     * relative to the length of the user provided string, so no information</span></div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="comment">     * leak is possible in the following two lines of code. */</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> alen = strlen(a);</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> blen = strlen(b);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    <span class="keywordtype">int</span> diff = 0;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="comment">/* We can&#39;t compare strings longer than our static buffers.</span></div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;<span class="comment">     * Note that this will never pass the first test in practical circumstances</span></div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;<span class="comment">     * so there is no info leak. */</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">if</span> (alen &gt; <span class="keyword">sizeof</span>(bufa) || blen &gt; <span class="keyword">sizeof</span>(bufb)) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    memset(bufa,0,<span class="keyword">sizeof</span>(bufa));        <span class="comment">/* Constant time. */</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    memset(bufb,0,<span class="keyword">sizeof</span>(bufb));        <span class="comment">/* Constant time. */</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="comment">/* Again the time of the following two copies is proportional to</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="comment">     * len(a) + len(b) so no info is leaked. */</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    memcpy(bufa,a,alen);</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    memcpy(bufb,b,blen);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <span class="comment">/* Always compare all the chars in the two buffers without</span></div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="comment">     * conditional expressions. */</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; <span class="keyword">sizeof</span>(bufa); j++) {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;        diff |= (bufa[j] ^ bufb[j]);</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    }</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="comment">/* Length must be equal as well. */</span></div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    diff |= alen ^ blen;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    <span class="keywordflow">return</span> diff; <span class="comment">/* If zero strings are the same. */</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;}</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;</div><div class="line"><a name="l02893"></a><span class="lineno"><a class="line" href="server_8h.html#a102476624bc170decc56549ae0932703"> 2893</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a102476624bc170decc56549ae0932703">authCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0ba0e84624d22e52e900533adf7d9ba8">requirepass</a>) {</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;Client sent AUTH, but no password is set&quot;</span>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a26f5f7d1708111165c38a2a6ed698107">time_independent_strcmp</a>(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a0ba0e84624d22e52e900533adf7d9ba8">requirepass</a>)) {</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      c-&gt;<a class="code" href="structclient.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a> = 1;</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#adf30e1960aaa30991c8cc6f5d1b8f1f5">ok</a>);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      c-&gt;<a class="code" href="structclient.html#a29e86d0f6d62ef1edac10a46e4c92095">authenticated</a> = 0;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;invalid password&quot;</span>);</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;    }</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;}</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;<span class="comment">/* The PING command. It works in a different way if the client is in</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="comment"> * in Pub/Sub mode. */</span></div><div class="line"><a name="l02907"></a><span class="lineno"><a class="line" href="server_8h.html#ae1066bde6904041087bdf3efa2bde1e7"> 2907</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ae1066bde6904041087bdf3efa2bde1e7">pingCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="comment">/* The command takes zero or one arguments. */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> &gt; 2) {</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        <a class="code" href="networking_8c.html#aff850095b7516e77667d7a8396c17e9a">addReplyErrorFormat</a>(c,<span class="stringliteral">&quot;wrong number of arguments for &#39;%s&#39; command&quot;</span>,</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            c-&gt;<a class="code" href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">cmd</a>-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    }</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a20f2f5380db97cd09013118ffc9411cc">CLIENT_PUBSUB</a>) {</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a5ba04845895cc30f8583215e1b1bfd32">mbulkhdr</a>[2]);</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <a class="code" href="networking_8c.html#a90fadee8eeb3d0332e0a77fef134ebee">addReplyBulkCBuffer</a>(c,<span class="stringliteral">&quot;pong&quot;</span>,4);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 1)</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;            <a class="code" href="networking_8c.html#a90fadee8eeb3d0332e0a77fef134ebee">addReplyBulkCBuffer</a>(c,<span class="stringliteral">&quot;&quot;</span>,0);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;            <a class="code" href="networking_8c.html#aef8354683c0ba556a8a8d6a909059950">addReplyBulk</a>(c,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]);</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 1)</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a0d9dc084f22782d4cf6740dca7c606f5">pong</a>);</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;            <a class="code" href="networking_8c.html#aef8354683c0ba556a8a8d6a909059950">addReplyBulk</a>(c,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;    }</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;}</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"><a class="line" href="server_8h.html#aace7644d1202bfaf862c6bb1eeacb119"> 2930</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#aace7644d1202bfaf862c6bb1eeacb119">echoCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <a class="code" href="networking_8c.html#aef8354683c0ba556a8a8d6a909059950">addReplyBulk</a>(c,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]);</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;}</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;</div><div class="line"><a name="l02934"></a><span class="lineno"><a class="line" href="server_8h.html#ae485b0f848c19fbea1b4673053553028"> 2934</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ae485b0f848c19fbea1b4673053553028">timeCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="comment">/* gettimeofday() can only fail if &amp;tv is a bad address so we</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;<span class="comment">     * don&#39;t check for errors. */</span></div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    gettimeofday(&amp;tv,NULL);</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;    <a class="code" href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a>(c,2);</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <a class="code" href="networking_8c.html#a581521b1a7fce1f3bc7f4794bcb58eab">addReplyBulkLongLong</a>(c,tv.tv_sec);</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="networking_8c.html#a581521b1a7fce1f3bc7f4794bcb58eab">addReplyBulkLongLong</a>(c,tv.tv_usec);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;}</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="comment">/* Helper function for addReplyCommand() to output flags. */</span></div><div class="line"><a name="l02946"></a><span class="lineno"><a class="line" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6"> 2946</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(<a class="code" href="structclient.html">client</a> *c, <span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a> *cmd, <span class="keywordtype">int</span> f, <span class="keywordtype">char</span> *reply) {</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordflow">if</span> (cmd-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; f) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        <a class="code" href="networking_8c.html#a11a0fdd832018a4dc969f71a44afe407">addReplyStatus</a>(c, reply);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    }</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;}</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment">/* Output the representation of a Redis command. Used by the COMMAND command. */</span></div><div class="line"><a name="l02955"></a><span class="lineno"><a class="line" href="server_8c.html#a89a0f14b85c7fb6f4e42fc2df8fa7f6c"> 2955</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a89a0f14b85c7fb6f4e42fc2df8fa7f6c">addReplyCommand</a>(<a class="code" href="structclient.html">client</a> *c, <span class="keyword">struct</span> <a class="code" href="structredis_command.html">redisCommand</a> *cmd) {</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c, <a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#a9b39b9335155d55eb2e631def6827b82">nullbulk</a>);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <span class="comment">/* We are adding: command name, arg count, flags, first, last, offset */</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <a class="code" href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a>(c, 6);</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <a class="code" href="networking_8c.html#acebfaa11c5c3aa617fcc3679a58e6f17">addReplyBulkCString</a>(c, cmd-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <a class="code" href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a>(c, cmd-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a>);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        <span class="keywordtype">int</span> flagcount = 0;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        <span class="keywordtype">void</span> *flaglen = <a class="code" href="networking_8c.html#a8e3606ae521f6d1786660767dfe6b903">addDeferredMultiBulkLength</a>(c);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a>, <span class="stringliteral">&quot;write&quot;</span>);</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a7e9c728f228e1c82ae1e22173375abcf">CMD_READONLY</a>, <span class="stringliteral">&quot;readonly&quot;</span>);</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#aef97c640ad8dfdaca21eb67d4c37e447">CMD_DENYOOM</a>, <span class="stringliteral">&quot;denyoom&quot;</span>);</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a1917805ea3942a4784ec806c33bc6033">CMD_ADMIN</a>, <span class="stringliteral">&quot;admin&quot;</span>);</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a201d97fc457fe5bd58cb863b4ac7a0cc">CMD_PUBSUB</a>, <span class="stringliteral">&quot;pubsub&quot;</span>);</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#aaf26ba9b59589bc7701e36fb440a0fbe">CMD_NOSCRIPT</a>, <span class="stringliteral">&quot;noscript&quot;</span>);</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a9f6608fefa355981c2a865ef3d44f196">CMD_RANDOM</a>, <span class="stringliteral">&quot;random&quot;</span>);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a819ad39aa4aef302c4421c3cd910252d">CMD_SORT_FOR_SCRIPT</a>,<span class="stringliteral">&quot;sort_for_script&quot;</span>);</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a5327d118cf467e77d8bb0cebdce3c0ce">CMD_LOADING</a>, <span class="stringliteral">&quot;loading&quot;</span>);</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#acf1f58ff0b6790cd8d0e3edf1a7e599f">CMD_STALE</a>, <span class="stringliteral">&quot;stale&quot;</span>);</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#a43e2aecb49a88a6cd4e56bfa971bdc71">CMD_SKIP_MONITOR</a>, <span class="stringliteral">&quot;skip_monitor&quot;</span>);</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#af0b13ef0f1dabe404fd7d904cb66b548">CMD_ASKING</a>, <span class="stringliteral">&quot;asking&quot;</span>);</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        flagcount += <a class="code" href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a>(c,cmd,<a class="code" href="server_8h.html#ae21dc0d9c0dcdefa14ca1054c48f252f">CMD_FAST</a>, <span class="stringliteral">&quot;fast&quot;</span>);</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        <span class="keywordflow">if</span> ((cmd-&gt;<a class="code" href="structredis_command.html#a871d4aede11ef92c86b3c64c2a5477c0">getkeys_proc</a> &amp;&amp; !(cmd-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#accabd32f20281543986166c219124f9e">CMD_MODULE</a>)) ||</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;            cmd-&gt;<a class="code" href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#a612a8681d1a25cd86faf4139d161316a">CMD_MODULE_GETKEYS</a>)</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;        {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;            <a class="code" href="networking_8c.html#a11a0fdd832018a4dc969f71a44afe407">addReplyStatus</a>(c, <span class="stringliteral">&quot;movablekeys&quot;</span>);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;            flagcount += 1;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;        }</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;        <a class="code" href="networking_8c.html#a196bf9c2087770b40bfd9f4000544a67">setDeferredMultiBulkLength</a>(c, flaglen, flagcount);</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <a class="code" href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a>(c, cmd-&gt;<a class="code" href="structredis_command.html#aeb16776f95a4f73f9c6768fbbec9a038">firstkey</a>);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;        <a class="code" href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a>(c, cmd-&gt;<a class="code" href="structredis_command.html#a908850c7f5d5cd51f3287973a5c385a5">lastkey</a>);</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;        <a class="code" href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a>(c, cmd-&gt;<a class="code" href="structredis_command.html#ac9fe07eb07b7322aa691ae2fca8f0875">keystep</a>);</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    }</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="comment">/* COMMAND &lt;subcommand&gt; &lt;args&gt; */</span></div><div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="server_8h.html#a13ee06265ca4b39a89d55522e52e6cf0"> 2994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a13ee06265ca4b39a89d55522e52e6cf0">commandCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <a class="code" href="structdict_iterator.html">dictIterator</a> *di;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <a class="code" href="structdict_entry.html">dictEntry</a> *de;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 2 &amp;&amp; !strcasecmp(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,<span class="stringliteral">&quot;help&quot;</span>)) {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *help[] = {</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;<span class="stringliteral">&quot;(no subcommand) -- Return details about all Redis commands.&quot;</span>,</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="stringliteral">&quot;COUNT -- Return the total number of commands in this Redis server.&quot;</span>,</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;<span class="stringliteral">&quot;GETKEYS &lt;full-command&gt; -- Return the keys from a full Redis command.&quot;</span>,</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;<span class="stringliteral">&quot;INFO [command-name ...] -- Return details about multiple Redis commands.&quot;</span>,</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;NULL</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;        };</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;        <a class="code" href="networking_8c.html#a1212877b63a97d8b0e209e441d998704">addReplyHelp</a>(c, help);</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 1) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        <a class="code" href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a>(c, <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>));</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        di = <a class="code" href="dict_8c.html#a63b2ad9054199271795e33d67fb6d6da">dictGetIterator</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        <span class="keywordflow">while</span> ((de = <a class="code" href="dict_8c.html#ab51f7613d1fe7b63edecd24efbcc7d2b">dictNext</a>(di)) != NULL) {</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;            <a class="code" href="server_8c.html#a89a0f14b85c7fb6f4e42fc2df8fa7f6c">addReplyCommand</a>(c, <a class="code" href="dict_8h.html#ae8d2cc391873b2bea2b87c4f80f43120">dictGetVal</a>(de));</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        }</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        <a class="code" href="dict_8c.html#a8bfc6c2908c66772c09a1315c078bf06">dictReleaseIterator</a>(di);</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, <span class="stringliteral">&quot;info&quot;</span>)) {</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;        <span class="keywordtype">int</span> i;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        <a class="code" href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a>(c, c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>-2);</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        <span class="keywordflow">for</span> (i = 2; i &lt; c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>; i++) {</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;            <a class="code" href="server_8c.html#a89a0f14b85c7fb6f4e42fc2df8fa7f6c">addReplyCommand</a>(c, <a class="code" href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>, c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[i]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>));</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;        }</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, <span class="stringliteral">&quot;count&quot;</span>) &amp;&amp; c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 2) {</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <a class="code" href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a>(c, <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>));</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,<span class="stringliteral">&quot;getkeys&quot;</span>) &amp;&amp; c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> &gt;= 3) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *cmd = <a class="code" href="server_8c.html#ae0246c16fba26f65782c698060d394b6">lookupCommand</a>(c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[2]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="keywordtype">int</span> *<a class="code" href="redis-check-rdb_8c.html#a1f3b6698ca8496c05e0c9c0d56cb36ac">keys</a>, numkeys, j;</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;        <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;            <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;Invalid command specified&quot;</span>);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd-&gt;<a class="code" href="structredis_command.html#a871d4aede11ef92c86b3c64c2a5477c0">getkeys_proc</a> == NULL &amp;&amp; cmd-&gt;<a class="code" href="structredis_command.html#aeb16776f95a4f73f9c6768fbbec9a038">firstkey</a> == 0) {</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;The command has no key arguments&quot;</span>);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((cmd-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a> &gt; 0 &amp;&amp; cmd-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a> != c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>-2) ||</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                   ((c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>-2) &lt; -cmd-&gt;<a class="code" href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">arity</a>))</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;        {</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;            <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;Invalid number of arguments specified for command&quot;</span>);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        }</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        keys = <a class="code" href="db_8c.html#a4d8a653f39ee873ef606c418acb95821">getKeysFromCommand</a>(cmd,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>+2,c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a>-2,&amp;numkeys);</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;        <span class="keywordflow">if</span> (!keys) {</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;            <a class="code" href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a>(c,<span class="stringliteral">&quot;Invalid arguments specified for command&quot;</span>);</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;            <a class="code" href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a>(c,numkeys);</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; numkeys; j++) <a class="code" href="networking_8c.html#aef8354683c0ba556a8a8d6a909059950">addReplyBulk</a>(c,c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[keys[j]+2]);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;            <a class="code" href="db_8c.html#ade65b95b0eb5517a9af03b8aecc3b64d">getKeysFreeResult</a>(keys);</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        }</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <a class="code" href="networking_8c.html#a366061d66aea3d3d043f1a49af18ffcc">addReplySubcommandSyntaxError</a>(c);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    }</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;}</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;<span class="comment">/* Convert an amount of bytes into a human readable string in the form</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment"> * of 100B, 2G, 100M, 4K, and so forth. */</span></div><div class="line"><a name="l03054"></a><span class="lineno"><a class="line" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed"> 3054</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(<span class="keywordtype">char</span> *s, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> n) {</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordtype">double</span> d;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="keywordflow">if</span> (n &lt; 1024) {</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        <span class="comment">/* Bytes */</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%lluB&quot;</span>,n);</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; (1024*1024)) {</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;        d = (double)n/(1024);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%.2fK&quot;</span>,d);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; (1024LL*1024*1024)) {</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;        d = (double)n/(1024*1024);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%.2fM&quot;</span>,d);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; (1024LL*1024*1024*1024)) {</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;        d = (double)n/(1024LL*1024*1024);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%.2fG&quot;</span>,d);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; (1024LL*1024*1024*1024*1024)) {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;        d = (double)n/(1024LL*1024*1024*1024);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%.2fT&quot;</span>,d);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; (1024LL*1024*1024*1024*1024*1024)) {</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        d = (double)n/(1024LL*1024*1024*1024*1024);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%.2fP&quot;</span>,d);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        <span class="comment">/* Let&#39;s hope we never need this */</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        sprintf(s,<span class="stringliteral">&quot;%lluB&quot;</span>,n);</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    }</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;}</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;<span class="comment">/* Create the string returned by the INFO command. This is decoupled</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="comment"> * by the INFO command itself as we need to report the same information</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;<span class="comment"> * on memory corruption problems. */</span></div><div class="line"><a name="l03084"></a><span class="lineno"><a class="line" href="server_8h.html#a956bcbb62ab56e4fe9d63c0a38b6cb76"> 3084</a></span>&#160;<a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> <a class="code" href="server_8c.html#a956bcbb62ab56e4fe9d63c0a38b6cb76">genRedisInfoString</a>(<span class="keywordtype">char</span> *section) {</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> info = <a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>();</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    time_t uptime = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2e6bd1e4e734c677e1a73aa12931b8d2">stat_starttime</a>;</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    <span class="keyword">struct </span>rusage self_ru, c_ru;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="keywordtype">int</span> allsections = 0, defsections = 0;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordtype">int</span> sections = 0;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="keywordflow">if</span> (section == NULL) section = <span class="stringliteral">&quot;default&quot;</span>;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    allsections = strcasecmp(section,<span class="stringliteral">&quot;all&quot;</span>) == 0;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    defsections = strcasecmp(section,<span class="stringliteral">&quot;default&quot;</span>) == 0;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    getrusage(RUSAGE_SELF, &amp;self_ru);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;    getrusage(RUSAGE_CHILDREN, &amp;c_ru);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="comment">/* Server */</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;server&quot;</span>)) {</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> call_uname = 1;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <span class="keyword">static</span> <span class="keyword">struct </span>utsname name;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;        <span class="keywordtype">char</span> *mode;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) mode = <span class="stringliteral">&quot;cluster&quot;</span>;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) mode = <span class="stringliteral">&quot;sentinel&quot;</span>;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;        <span class="keywordflow">else</span> mode = <span class="stringliteral">&quot;standalone&quot;</span>;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        <span class="keywordflow">if</span> (call_uname) {</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;            <span class="comment">/* Uname can be slow and is always the same output. Cache it. */</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;            uname(&amp;name);</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;            call_uname = 0;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        }</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lruclock;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <a class="code" href="atomicvar_8h.html#a57b17e058ecff6871debb3d1d4f3031a">atomicGet</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a99c6b6e30b43c077eb30507d7c1d0813">lruclock</a>,lruclock);</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;            <span class="stringliteral">&quot;# Server\r\n&quot;</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;            <span class="stringliteral">&quot;redis_version:%s\r\n&quot;</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;            <span class="stringliteral">&quot;redis_git_sha1:%s\r\n&quot;</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;            <span class="stringliteral">&quot;redis_git_dirty:%d\r\n&quot;</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;            <span class="stringliteral">&quot;redis_build_id:%llx\r\n&quot;</span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;            <span class="stringliteral">&quot;redis_mode:%s\r\n&quot;</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;            <span class="stringliteral">&quot;os:%s %s %s\r\n&quot;</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;            <span class="stringliteral">&quot;arch_bits:%d\r\n&quot;</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;            <span class="stringliteral">&quot;multiplexing_api:%s\r\n&quot;</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;            <span class="stringliteral">&quot;atomicvar_api:%s\r\n&quot;</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;            <span class="stringliteral">&quot;gcc_version:%d.%d.%d\r\n&quot;</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            <span class="stringliteral">&quot;process_id:%ld\r\n&quot;</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            <span class="stringliteral">&quot;run_id:%s\r\n&quot;</span></div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;            <span class="stringliteral">&quot;tcp_port:%d\r\n&quot;</span></div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            <span class="stringliteral">&quot;uptime_in_seconds:%jd\r\n&quot;</span></div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <span class="stringliteral">&quot;uptime_in_days:%jd\r\n&quot;</span></div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;            <span class="stringliteral">&quot;hz:%d\r\n&quot;</span></div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;            <span class="stringliteral">&quot;configured_hz:%d\r\n&quot;</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;            <span class="stringliteral">&quot;lru_clock:%ld\r\n&quot;</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;            <span class="stringliteral">&quot;executable:%s\r\n&quot;</span></div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;            <span class="stringliteral">&quot;config_file:%s\r\n&quot;</span>,</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <a class="code" href="version_8h.html#a357a0d302ef7fbb42bf2db0632b9f7fe">REDIS_VERSION</a>,</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;            <a class="code" href="redis-cli_8c.html#a598b97b058f3470583dd1b6fc6498102">redisGitSHA1</a>(),</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            strtol(<a class="code" href="redis-cli_8c.html#a1dc767d40b8708fecbc214aafd78fd71">redisGitDirty</a>(),NULL,10) &gt; 0,</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="release_8c.html#a84fd80c6f31a9376af5fc92bf5565044">redisBuildId</a>(),</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            mode,</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            name.sysname, name.release, name.machine,</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4fa04e8ede4efc50a4eae5a4ee94be15">arch_bits</a>,</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;            <a class="code" href="ae_8c.html#a0203d90fa536ccaf3287c2b72bda1c8b">aeGetApiName</a>(),</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            <a class="code" href="atomicvar_8h.html#ae3aa976bb329a4a554a853c5770c3e3d">REDIS_ATOMIC_API</a>,</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;#ifdef __GNUC__</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;#<span class="keywordflow">else</span></div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            0,0,0,</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;#endif</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            (<span class="keywordtype">long</span>) getpid(),</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3bd69064f36a186f0a83bbe22cee41d2">runid</a>,</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;            (intmax_t)uptime,</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            (intmax_t)(uptime/(3600*24)),</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a873124c5659edc141c67aab7999e314a">hz</a>,</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aeae2d40a88ece004cc0fa4bc228077a8">config_hz</a>,</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) lruclock,</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a> ? <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a> ? <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    }</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <span class="comment">/* Clients */</span></div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;clients&quot;</span>)) {</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;        <span class="keywordtype">size_t</span> maxin, maxout;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;        <a class="code" href="server_8c.html#a1ab599246a3e9b664768ebb0c33d4cce">getExpansiveClientsInfo</a>(&amp;maxin,&amp;maxout);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;            <span class="stringliteral">&quot;# Clients\r\n&quot;</span></div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;            <span class="stringliteral">&quot;connected_clients:%lu\r\n&quot;</span></div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;            <span class="stringliteral">&quot;client_recent_max_input_buffer:%zu\r\n&quot;</span></div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;            <span class="stringliteral">&quot;client_recent_max_output_buffer:%zu\r\n&quot;</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;            <span class="stringliteral">&quot;blocked_clients:%d\r\n&quot;</span>,</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;            <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">clients</a>)-<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>),</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;            maxin, maxout,</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa58813aba5328ff8194bcf2c2326dda7">blocked_clients</a>);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    }</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="comment">/* Memory */</span></div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;memory&quot;</span>)) {</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;        <span class="keywordtype">char</span> hmem[64];</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <span class="keywordtype">char</span> peak_hmem[64];</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <span class="keywordtype">char</span> total_system_hmem[64];</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        <span class="keywordtype">char</span> used_memory_lua_hmem[64];</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        <span class="keywordtype">char</span> used_memory_scripts_hmem[64];</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;        <span class="keywordtype">char</span> used_memory_rss_hmem[64];</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;        <span class="keywordtype">char</span> maxmemory_hmem[64];</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        <span class="keywordtype">size_t</span> zmalloc_used = <a class="code" href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a>();</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;        <span class="keywordtype">size_t</span> total_system_mem = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ee3dc3ba57fc269a2becfe29fdc8d42">system_memory_size</a>;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *evict_policy = <a class="code" href="config_8c.html#ade7b94fca323078af462a663522e6e95">evictPolicyToString</a>();</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;        <span class="keywordtype">long</span> <span class="keywordtype">long</span> memory_lua = (<span class="keywordtype">long</span> long)lua_gc(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab44819023af4734d6f559d7f4e3d18bb">lua</a>,LUA_GCCOUNT,0)*1024;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;        <span class="keyword">struct </span><a class="code" href="structredis_mem_overhead.html">redisMemOverhead</a> *mh = <a class="code" href="object_8c.html#a1032572b4b3b6e9425744bb86d98ec15">getMemoryOverheadData</a>();</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <span class="comment">/* Peak memory is updated from time to time by serverCron() so it</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;<span class="comment">         * may happen that the instantaneous value is slightly bigger than</span></div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="comment">         * the peak value. This may confuse users, so we update the peak</span></div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;<span class="comment">         * if found smaller than the current memory usage. */</span></div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;        <span class="keywordflow">if</span> (zmalloc_used &gt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a>)</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a> = zmalloc_used;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(hmem,zmalloc_used);</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(peak_hmem,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a>);</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(total_system_hmem,total_system_mem);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(used_memory_lua_hmem,memory_lua);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(used_memory_scripts_hmem,mh-&gt;<a class="code" href="structredis_mem_overhead.html#aede1fc4f53c4e19111df241fe70fb77c">lua_caches</a>);</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(used_memory_rss_hmem,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">process_rss</a>);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        <a class="code" href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a>(maxmemory_hmem,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a>);</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;            <span class="stringliteral">&quot;# Memory\r\n&quot;</span></div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;            <span class="stringliteral">&quot;used_memory:%zu\r\n&quot;</span></div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            <span class="stringliteral">&quot;used_memory_human:%s\r\n&quot;</span></div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;            <span class="stringliteral">&quot;used_memory_rss:%zu\r\n&quot;</span></div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            <span class="stringliteral">&quot;used_memory_rss_human:%s\r\n&quot;</span></div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;            <span class="stringliteral">&quot;used_memory_peak:%zu\r\n&quot;</span></div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;            <span class="stringliteral">&quot;used_memory_peak_human:%s\r\n&quot;</span></div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;            <span class="stringliteral">&quot;used_memory_peak_perc:%.2f%%\r\n&quot;</span></div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;            <span class="stringliteral">&quot;used_memory_overhead:%zu\r\n&quot;</span></div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;            <span class="stringliteral">&quot;used_memory_startup:%zu\r\n&quot;</span></div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            <span class="stringliteral">&quot;used_memory_dataset:%zu\r\n&quot;</span></div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            <span class="stringliteral">&quot;used_memory_dataset_perc:%.2f%%\r\n&quot;</span></div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;            <span class="stringliteral">&quot;allocator_allocated:%zu\r\n&quot;</span></div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            <span class="stringliteral">&quot;allocator_active:%zu\r\n&quot;</span></div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;            <span class="stringliteral">&quot;allocator_resident:%zu\r\n&quot;</span></div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;            <span class="stringliteral">&quot;total_system_memory:%lu\r\n&quot;</span></div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;            <span class="stringliteral">&quot;total_system_memory_human:%s\r\n&quot;</span></div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;            <span class="stringliteral">&quot;used_memory_lua:%lld\r\n&quot;</span></div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;            <span class="stringliteral">&quot;used_memory_lua_human:%s\r\n&quot;</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;            <span class="stringliteral">&quot;used_memory_scripts:%lld\r\n&quot;</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <span class="stringliteral">&quot;used_memory_scripts_human:%s\r\n&quot;</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;            <span class="stringliteral">&quot;number_of_cached_scripts:%lu\r\n&quot;</span></div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;            <span class="stringliteral">&quot;maxmemory:%lld\r\n&quot;</span></div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;            <span class="stringliteral">&quot;maxmemory_human:%s\r\n&quot;</span></div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;            <span class="stringliteral">&quot;maxmemory_policy:%s\r\n&quot;</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;            <span class="stringliteral">&quot;allocator_frag_ratio:%.2f\r\n&quot;</span></div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;            <span class="stringliteral">&quot;allocator_frag_bytes:%zu\r\n&quot;</span></div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;            <span class="stringliteral">&quot;allocator_rss_ratio:%.2f\r\n&quot;</span></div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;            <span class="stringliteral">&quot;allocator_rss_bytes:%zu\r\n&quot;</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;            <span class="stringliteral">&quot;rss_overhead_ratio:%.2f\r\n&quot;</span></div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;            <span class="stringliteral">&quot;rss_overhead_bytes:%zu\r\n&quot;</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;            <span class="stringliteral">&quot;mem_fragmentation_ratio:%.2f\r\n&quot;</span></div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;            <span class="stringliteral">&quot;mem_fragmentation_bytes:%zu\r\n&quot;</span></div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;            <span class="stringliteral">&quot;mem_not_counted_for_evict:%zu\r\n&quot;</span></div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <span class="stringliteral">&quot;mem_replication_backlog:%zu\r\n&quot;</span></div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <span class="stringliteral">&quot;mem_clients_slaves:%zu\r\n&quot;</span></div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            <span class="stringliteral">&quot;mem_clients_normal:%zu\r\n&quot;</span></div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <span class="stringliteral">&quot;mem_aof_buffer:%zu\r\n&quot;</span></div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;            <span class="stringliteral">&quot;mem_allocator:%s\r\n&quot;</span></div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;            <span class="stringliteral">&quot;active_defrag_running:%d\r\n&quot;</span></div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;            <span class="stringliteral">&quot;lazyfree_pending_objects:%zu\r\n&quot;</span>,</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;            zmalloc_used,</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;            hmem,</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">process_rss</a>,</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            used_memory_rss_hmem,</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">stat_peak_memory</a>,</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;            peak_hmem,</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ab748e7839b4db27ca41f802fb4deb3e1">peak_perc</a>,</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a2a959b51b26f4ced3ab179af23f19fba">overhead_total</a>,</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a0e982a0e14543ef6e17073a6d4afe191">startup_allocated</a>,</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a8747868103d88dad18f00837aaeca24a">dataset</a>,</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ad413cc014759c00757b5fda0d4c94c2e">dataset_perc</a>,</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">allocator_allocated</a>,</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">allocator_active</a>,</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">cron_malloc_stats</a>.<a class="code" href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">allocator_resident</a>,</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)total_system_mem,</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;            total_system_hmem,</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;            memory_lua,</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;            used_memory_lua_hmem,</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;            (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) mh-&gt;<a class="code" href="structredis_mem_overhead.html#aede1fc4f53c4e19111df241fe70fb77c">lua_caches</a>,</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            used_memory_scripts_hmem,</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f3d3d90cccad86c685008f3f02492fe">lua_scripts</a>),</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a>,</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;            maxmemory_hmem,</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;            evict_policy,</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a6191ede96ce40757b7eb73d4bcc597f0">allocator_frag</a>,</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a7dcfd2bdf329730a992f30f52b145dbb">allocator_frag_bytes</a>,</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a213b026c5bb4a2421289b34e620eb4ef">allocator_rss</a>,</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a988880d896f03571a137a828ef96531a">allocator_rss_bytes</a>,</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ae1d7b7b42904d9ebb1698ab3ac79a2e9">rss_extra</a>,</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a9cafe99c292b52f795f9ceef838f4249">rss_extra_bytes</a>,</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ac8bdd246c25c91aa5ae7af8362ff9188">total_frag</a>, <span class="comment">/* this is the total RSS overhead, including fragmentation, */</span></div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a5e5705378e7ceb2bcfa33b637a7a6fd2">total_frag_bytes</a>, <span class="comment">/* named so for backwards compatibility */</span></div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;            <a class="code" href="evict_8c.html#a8b0e1c4c2c1ccf81e6deb77ae8b974b9">freeMemoryGetNotCountedMemory</a>(),</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#a4377a6a963ee32e22c7c7f14180a4a31">repl_backlog</a>,</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ace2b062189925c36433d3a8e68062d6e">clients_slaves</a>,</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#af21382aaf8f931d992586bbfe5f8aca2">clients_normal</a>,</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;            mh-&gt;<a class="code" href="structredis_mem_overhead.html#ad441a7ae10a5fee32c6d0b0dbfc92791">aof_buffer</a>,</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;            <a class="code" href="zmalloc_8h.html#a374c6d7cf6c9817e1243093e03df7319">ZMALLOC_LIB</a>,</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe0f85c6013794d585451f21440f5982">active_defrag_running</a>,</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;            <a class="code" href="lazyfree_8c.html#a3e9b6c8fa1b461d094e096637f0cf3cf">lazyfreeGetPendingObjectsCount</a>()</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        );</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        <a class="code" href="object_8c.html#ab09baeae3f0b14d5e0f36b7a8af2bdcf">freeMemoryOverheadData</a>(mh);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;    }</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;    <span class="comment">/* Persistence */</span></div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;persistence&quot;</span>)) {</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            <span class="stringliteral">&quot;# Persistence\r\n&quot;</span></div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;            <span class="stringliteral">&quot;loading:%d\r\n&quot;</span></div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="stringliteral">&quot;rdb_changes_since_last_save:%lld\r\n&quot;</span></div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <span class="stringliteral">&quot;rdb_bgsave_in_progress:%d\r\n&quot;</span></div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;            <span class="stringliteral">&quot;rdb_last_save_time:%jd\r\n&quot;</span></div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;            <span class="stringliteral">&quot;rdb_last_bgsave_status:%s\r\n&quot;</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;            <span class="stringliteral">&quot;rdb_last_bgsave_time_sec:%jd\r\n&quot;</span></div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;            <span class="stringliteral">&quot;rdb_current_bgsave_time_sec:%jd\r\n&quot;</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;            <span class="stringliteral">&quot;rdb_last_cow_size:%zu\r\n&quot;</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;            <span class="stringliteral">&quot;aof_enabled:%d\r\n&quot;</span></div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;            <span class="stringliteral">&quot;aof_rewrite_in_progress:%d\r\n&quot;</span></div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            <span class="stringliteral">&quot;aof_rewrite_scheduled:%d\r\n&quot;</span></div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;            <span class="stringliteral">&quot;aof_last_rewrite_time_sec:%jd\r\n&quot;</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;            <span class="stringliteral">&quot;aof_current_rewrite_time_sec:%jd\r\n&quot;</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;            <span class="stringliteral">&quot;aof_last_bgrewrite_status:%s\r\n&quot;</span></div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;            <span class="stringliteral">&quot;aof_last_write_status:%s\r\n&quot;</span></div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;            <span class="stringliteral">&quot;aof_last_cow_size:%zu\r\n&quot;</span>,</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>,</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">dirty</a>,</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> != -1,</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            (intmax_t)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae08caa5f869e19e94cd95d1a2edea4b2">lastsave</a>,</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;            (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">lastbgsave_status</a> == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) ? <span class="stringliteral">&quot;ok&quot;</span> : <span class="stringliteral">&quot;err&quot;</span>,</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;            (intmax_t)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae6262935d09c243040d0a767dc4781d9">rdb_save_time_last</a>,</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;            (intmax_t)((<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">rdb_child_pid</a> == -1) ?</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;                -1 : time(NULL)-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a94be71fb61af4310e0bef804992da1ed">rdb_save_time_start</a>),</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a23a0a2cb99e43742881408116b2fbd08">stat_rdb_cow_bytes</a>,</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> != <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a>,</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> != -1,</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aab840164dbc88da9dd9f21004b92e3ea">aof_rewrite_scheduled</a>,</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            (intmax_t)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ace9d6cef9af1e3feb31816a30a017a7c">aof_rewrite_time_last</a>,</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;            (intmax_t)((<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">aof_child_pid</a> == -1) ?</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                -1 : time(NULL)-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af6832f23d61ee1b6d41ec93f837aa9d5">aof_rewrite_time_start</a>),</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;            (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af53a8a16d14d100894cab6431a4622d9">aof_lastbgrewrite_status</a> == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) ? <span class="stringliteral">&quot;ok&quot;</span> : <span class="stringliteral">&quot;err&quot;</span>,</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;            (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa67a20f0faa8ffcc2abcb42b15d4b3d0">aof_last_write_status</a> == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) ? <span class="stringliteral">&quot;ok&quot;</span> : <span class="stringliteral">&quot;err&quot;</span>,</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab89dd03338e3ba557ce26478c4edcdc4">stat_aof_cow_bytes</a>);</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> != <a class="code" href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a>) {</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;                <span class="stringliteral">&quot;aof_current_size:%lld\r\n&quot;</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;                <span class="stringliteral">&quot;aof_base_size:%lld\r\n&quot;</span></div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;                <span class="stringliteral">&quot;aof_pending_rewrite:%d\r\n&quot;</span></div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                <span class="stringliteral">&quot;aof_buffer_length:%zu\r\n&quot;</span></div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                <span class="stringliteral">&quot;aof_rewrite_buffer_length:%lu\r\n&quot;</span></div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                <span class="stringliteral">&quot;aof_pending_bio_fsync:%llu\r\n&quot;</span></div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                <span class="stringliteral">&quot;aof_delayed_fsync:%lu\r\n&quot;</span>,</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a144bfd85a66513e2cba147e3329c6e0d">aof_current_size</a>,</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a44b41e9adbd5c3f5d46df203b79d987a">aof_rewrite_base_size</a>,</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aab840164dbc88da9dd9f21004b92e3ea">aof_rewrite_scheduled</a>,</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                sdslen(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4546e03b0256d4d50b71681b6cd45f52">aof_buf</a>),</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                <a class="code" href="aof_8c.html#ac13e9eab03e6ba37d7567e805b54e12f">aofRewriteBufferSize</a>(),</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                <a class="code" href="bio_8c.html#aaa7c819608423673bf1da5f9b2c39eda">bioPendingJobsOfType</a>(<a class="code" href="bio_8h.html#a5d03c967316addafc61b7ed5d957984f">BIO_AOF_FSYNC</a>),</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a187b658f1e959f3f46ec5caa22b782cd">aof_delayed_fsync</a>);</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        }</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;            <span class="keywordtype">double</span> perc;</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;            time_t eta, elapsed;</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;            off_t remaining_bytes = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa44041d261395c51536c5db7da288874">loading_total_bytes</a>-</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;                                    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8537de4289165760c3c21814b6c0841d">loading_loaded_bytes</a>;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;            perc = ((double)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8537de4289165760c3c21814b6c0841d">loading_loaded_bytes</a> /</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;                   (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa44041d261395c51536c5db7da288874">loading_total_bytes</a>+1)) * 100;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;            elapsed = time(NULL)-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1c3272cd13cdd1159cf7a804264b6d46">loading_start_time</a>;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            <span class="keywordflow">if</span> (elapsed == 0) {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;                eta = 1; <span class="comment">/* A fake 1 second figure if we don&#39;t have</span></div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;<span class="comment">                            enough info */</span></div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;                eta = (elapsed*remaining_bytes)/(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8537de4289165760c3c21814b6c0841d">loading_loaded_bytes</a>+1);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;            }</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                <span class="stringliteral">&quot;loading_start_time:%jd\r\n&quot;</span></div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;                <span class="stringliteral">&quot;loading_total_bytes:%llu\r\n&quot;</span></div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;                <span class="stringliteral">&quot;loading_loaded_bytes:%llu\r\n&quot;</span></div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;                <span class="stringliteral">&quot;loading_loaded_perc:%.2f\r\n&quot;</span></div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;                <span class="stringliteral">&quot;loading_eta_seconds:%jd\r\n&quot;</span>,</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;                (intmax_t) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1c3272cd13cdd1159cf7a804264b6d46">loading_start_time</a>,</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa44041d261395c51536c5db7da288874">loading_total_bytes</a>,</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8537de4289165760c3c21814b6c0841d">loading_loaded_bytes</a>,</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;                perc,</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;                (intmax_t)eta</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;            );</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        }</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    }</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="comment">/* Stats */</span></div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;stats&quot;</span>)) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            <span class="stringliteral">&quot;# Stats\r\n&quot;</span></div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            <span class="stringliteral">&quot;total_connections_received:%lld\r\n&quot;</span></div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            <span class="stringliteral">&quot;total_commands_processed:%lld\r\n&quot;</span></div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;            <span class="stringliteral">&quot;instantaneous_ops_per_sec:%lld\r\n&quot;</span></div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            <span class="stringliteral">&quot;total_net_input_bytes:%lld\r\n&quot;</span></div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            <span class="stringliteral">&quot;total_net_output_bytes:%lld\r\n&quot;</span></div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <span class="stringliteral">&quot;instantaneous_input_kbps:%.2f\r\n&quot;</span></div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;            <span class="stringliteral">&quot;instantaneous_output_kbps:%.2f\r\n&quot;</span></div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;            <span class="stringliteral">&quot;rejected_connections:%lld\r\n&quot;</span></div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;            <span class="stringliteral">&quot;sync_full:%lld\r\n&quot;</span></div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;            <span class="stringliteral">&quot;sync_partial_ok:%lld\r\n&quot;</span></div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            <span class="stringliteral">&quot;sync_partial_err:%lld\r\n&quot;</span></div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;            <span class="stringliteral">&quot;expired_keys:%lld\r\n&quot;</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;            <span class="stringliteral">&quot;expired_stale_perc:%.2f\r\n&quot;</span></div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            <span class="stringliteral">&quot;expired_time_cap_reached_count:%lld\r\n&quot;</span></div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            <span class="stringliteral">&quot;evicted_keys:%lld\r\n&quot;</span></div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            <span class="stringliteral">&quot;keyspace_hits:%lld\r\n&quot;</span></div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;            <span class="stringliteral">&quot;keyspace_misses:%lld\r\n&quot;</span></div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            <span class="stringliteral">&quot;pubsub_channels:%ld\r\n&quot;</span></div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;            <span class="stringliteral">&quot;pubsub_patterns:%lu\r\n&quot;</span></div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;            <span class="stringliteral">&quot;latest_fork_usec:%lld\r\n&quot;</span></div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;            <span class="stringliteral">&quot;migrate_cached_sockets:%ld\r\n&quot;</span></div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;            <span class="stringliteral">&quot;slave_expires_tracked_keys:%zu\r\n&quot;</span></div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;            <span class="stringliteral">&quot;active_defrag_hits:%lld\r\n&quot;</span></div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;            <span class="stringliteral">&quot;active_defrag_misses:%lld\r\n&quot;</span></div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            <span class="stringliteral">&quot;active_defrag_key_hits:%lld\r\n&quot;</span></div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;            <span class="stringliteral">&quot;active_defrag_key_misses:%lld\r\n&quot;</span>,</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afcaf03ea9071943ef74fc499a34f364c">stat_numconnections</a>,</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa818a00bded05cbfc242fbd30a51bd06">stat_numcommands</a>,</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;            <a class="code" href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">getInstantaneousMetric</a>(<a class="code" href="server_8h.html#ac8d50898802f96b76479bc975e1bbbf3">STATS_METRIC_COMMAND</a>),</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe1289d87c7c7b12540c36b93d1bdb25">stat_net_input_bytes</a>,</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0e3c35b8ea641cec0a4afb2658bccb9">stat_net_output_bytes</a>,</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;            (<span class="keywordtype">float</span>)<a class="code" href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">getInstantaneousMetric</a>(<a class="code" href="server_8h.html#a6d217560ae714ab8d0cc21832b210e0b">STATS_METRIC_NET_INPUT</a>)/1024,</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;            (<span class="keywordtype">float</span>)<a class="code" href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">getInstantaneousMetric</a>(<a class="code" href="server_8h.html#a3885f356f3a4cef22eb96fbfcc406333">STATS_METRIC_NET_OUTPUT</a>)/1024,</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afbe16be5f4b41cc85b8952c52f8afae0">stat_rejected_conn</a>,</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a75b9c0bc4b9974b3880f057a519c8cac">stat_sync_full</a>,</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a426c3298fab0d00a17cb6f35c5f607b0">stat_sync_partial_ok</a>,</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afae1b2ee523b006366dbe18ce9dae2e1">stat_sync_partial_err</a>,</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a898017f30dfd6e8b25edf9ace36b175a">stat_expiredkeys</a>,</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a908fb5c9a872cac4539382205fec357b">stat_expired_stale_perc</a>*100,</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a3cd30a9c8ce282f08de3c733d1ccd19d">stat_expired_time_cap_reached_count</a>,</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a45229d2d3b593513143c5a9871a2be10">stat_evictedkeys</a>,</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad7d881fd1df3221d80a749be2e66d0d0">stat_keyspace_hits</a>,</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad5efcac8b7288ed40db68e69b9ff306b">stat_keyspace_misses</a>,</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;            <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac6c18a3bf3ec4d85777ca2db7d4a9b47">pubsub_channels</a>),</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;            <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aced844471ea20e757a4bc7bdee34d930">pubsub_patterns</a>),</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4cdd4eed3d7fac9da3b95c1f6fe29de8">stat_fork_time</a>,</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;            <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abc582fb4bb1c2a826e1fe27280a716e7">migrate_cached_sockets</a>),</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            <a class="code" href="expire_8c.html#a2718ceb87eb05fc1e03382c5444cf4da">getSlaveKeyWithExpireCount</a>(),</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acf21ed827000471af091d6f7f2820843">stat_active_defrag_hits</a>,</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2cfe978a155a9359c774048dd502afc3">stat_active_defrag_misses</a>,</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a67834c6012b1d5912befb42573b3138f">stat_active_defrag_key_hits</a>,</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a88f7d67b743022ba822fd5c7b6ea6964">stat_active_defrag_key_misses</a>);</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    }</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="comment">/* Replication */</span></div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;replication&quot;</span>)) {</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;            <span class="stringliteral">&quot;# Replication\r\n&quot;</span></div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;            <span class="stringliteral">&quot;role:%s\r\n&quot;</span>,</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> == NULL ? <span class="stringliteral">&quot;master&quot;</span> : <span class="stringliteral">&quot;slave&quot;</span>);</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a>) {</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;            <span class="keywordtype">long</span> <span class="keywordtype">long</span> slave_repl_offset = 1;</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">master</a>)</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                slave_repl_offset = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">master</a>-&gt;<a class="code" href="structclient.html#a3ceb1598320b93accc65299b5ccf10d7">reploff</a>;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa6d326e1db1991e81cd897babf52ea8d">cached_master</a>)</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;                slave_repl_offset = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa6d326e1db1991e81cd897babf52ea8d">cached_master</a>-&gt;<a class="code" href="structclient.html#a3ceb1598320b93accc65299b5ccf10d7">reploff</a>;</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;                <span class="stringliteral">&quot;master_host:%s\r\n&quot;</span></div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                <span class="stringliteral">&quot;master_port:%d\r\n&quot;</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;                <span class="stringliteral">&quot;master_link_status:%s\r\n&quot;</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;                <span class="stringliteral">&quot;master_last_io_seconds_ago:%d\r\n&quot;</span></div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;                <span class="stringliteral">&quot;master_sync_in_progress:%d\r\n&quot;</span></div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;                <span class="stringliteral">&quot;slave_repl_offset:%lld\r\n&quot;</span></div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;                ,<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a>,</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a8310dd417853e8153b749f1be9afe9b0">masterport</a>,</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> == <a class="code" href="server_8h.html#aed693b3a9cdfc05cf5ab7551a8c86fbe">REPL_STATE_CONNECTED</a>) ?</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                    <span class="stringliteral">&quot;up&quot;</span> : <span class="stringliteral">&quot;down&quot;</span>,</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">master</a> ?</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;                ((<span class="keywordtype">int</span>)(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">master</a>-&gt;<a class="code" href="structclient.html#a08c13433165f221a86bc5c3160f17c82">lastinteraction</a>)) : -1,</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> == <a class="code" href="server_8h.html#a1d27594a2d9c8d24e4ed5a2e88d1113e">REPL_STATE_TRANSFER</a>,</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;                slave_repl_offset</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;            );</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> == <a class="code" href="server_8h.html#a1d27594a2d9c8d24e4ed5a2e88d1113e">REPL_STATE_TRANSFER</a>) {</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;                info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;                    <span class="stringliteral">&quot;master_sync_left_bytes:%lld\r\n&quot;</span></div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                    <span class="stringliteral">&quot;master_sync_last_io_seconds_ago:%d\r\n&quot;</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                    , (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                        (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a31c9cafcb063d450af2fa2a760f7b6c9">repl_transfer_size</a> - <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a159af50e60cf5a0b6b06ab72332a4fb8">repl_transfer_read</a>),</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                    (<span class="keywordtype">int</span>)(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a15d293cf510cec1fc1fe3310ea74506e">repl_transfer_lastio</a>)</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;                );</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;            }</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">repl_state</a> != <a class="code" href="server_8h.html#aed693b3a9cdfc05cf5ab7551a8c86fbe">REPL_STATE_CONNECTED</a>) {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;                info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;                    <span class="stringliteral">&quot;master_link_down_since_seconds:%jd\r\n&quot;</span>,</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;                    (intmax_t)<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">unixtime</a>-<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe6a14c37b00e7e4ace95e04b1c2ded7">repl_down_since</a>);</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;            }</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;                <span class="stringliteral">&quot;slave_priority:%d\r\n&quot;</span></div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                <span class="stringliteral">&quot;slave_read_only:%d\r\n&quot;</span>,</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaf81cefb84c292ee7dee2cbf749595fb">slave_priority</a>,</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a297743fec342702645d8b174a4877e3b">repl_slave_ro</a>);</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;        }</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            <span class="stringliteral">&quot;connected_slaves:%lu\r\n&quot;</span>,</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;            <a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>));</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;        <span class="comment">/* If min-slaves-to-write is active, write the number of slaves</span></div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;<span class="comment">         * currently considered &#39;good&#39;. */</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2948a0fa6ec92b071befb3e78fd57b2f">repl_min_slaves_to_write</a> &amp;&amp;</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad3b224fc091bae066a03314069adf205">repl_min_slaves_max_lag</a>) {</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;                <span class="stringliteral">&quot;min_slaves_good_slaves:%d\r\n&quot;</span>,</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a1716a96025de1fff867e1af23329e9">repl_good_slaves_count</a>);</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;        }</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>)) {</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;            <span class="keywordtype">int</span> slaveid = 0;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;            <a class="code" href="structlist_node.html">listNode</a> *ln;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;            <a class="code" href="structlist_iter.html">listIter</a> li;</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;            <a class="code" href="adlist_8c.html#ae35a3ee8d5580afa77f9f5430837d8a4">listRewind</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">slaves</a>,&amp;li);</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;            <span class="keywordflow">while</span>((ln = <a class="code" href="adlist_8c.html#a722ffca86d8746e6c68a146359683dfa">listNext</a>(&amp;li))) {</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;                <a class="code" href="structclient.html">client</a> *slave = <a class="code" href="adlist_8h.html#af84cae230e7180ebcda1e2736fce9f65">listNodeValue</a>(ln);</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;                <span class="keywordtype">char</span> *state = NULL;</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;                <span class="keywordtype">char</span> ip[<a class="code" href="server_8h.html#ad97c5405ed22a94e9fcc10fba577d6c0">NET_IP_STR_LEN</a>], *slaveip = slave-&gt;<a class="code" href="structclient.html#a73588a64f8187aee0fd21f4c4d228052">slave_ip</a>;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;                <span class="keywordtype">int</span> port;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;                <span class="keywordtype">long</span> lag = 0;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                <span class="keywordflow">if</span> (slaveip[0] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="anet_8c.html#aa92006f87d38700c23c7f0b7b43ad521">anetPeerToString</a>(slave-&gt;<a class="code" href="structclient.html#a6f8059414f0228f0256115e024eeed4b">fd</a>,ip,<span class="keyword">sizeof</span>(ip),&amp;port) == -1)</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                    slaveip = ip;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;                }</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;                <span class="keywordflow">switch</span>(slave-&gt;<a class="code" href="structclient.html#abccae535b39fffe81ee57f696b14a218">replstate</a>) {</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="server_8h.html#a170ee2dd8cfefaf0d112edcc3152f8d7">SLAVE_STATE_WAIT_BGSAVE_START</a>:</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="server_8h.html#a2a1b586e8f326f831f6ab466c8c3f38a">SLAVE_STATE_WAIT_BGSAVE_END</a>:</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;                    state = <span class="stringliteral">&quot;wait_bgsave&quot;</span>;</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="server_8h.html#ada38427ad2d0c09875081868a53cc51f">SLAVE_STATE_SEND_BULK</a>:</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                    state = <span class="stringliteral">&quot;send_bulk&quot;</span>;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="server_8h.html#ad895fdf16e5ed5275d19ddf8578b900f">SLAVE_STATE_ONLINE</a>:</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;                    state = <span class="stringliteral">&quot;online&quot;</span>;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;                }</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;                <span class="keywordflow">if</span> (state == NULL) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;                <span class="keywordflow">if</span> (slave-&gt;<a class="code" href="structclient.html#abccae535b39fffe81ee57f696b14a218">replstate</a> == <a class="code" href="server_8h.html#ad895fdf16e5ed5275d19ddf8578b900f">SLAVE_STATE_ONLINE</a>)</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;                    lag = time(NULL) - slave-&gt;<a class="code" href="structclient.html#aca5279911d8623c8a01999fda40f1e4c">repl_ack_time</a>;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;                info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;                    <span class="stringliteral">&quot;slave%d:ip=%s,port=%d,state=%s,&quot;</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                    <span class="stringliteral">&quot;offset=%lld,lag=%ld\r\n&quot;</span>,</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                    slaveid,slaveip,slave-&gt;<a class="code" href="structclient.html#a287c6c69470388ee449924e3a8f7933b">slave_listening_port</a>,state,</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                    slave-&gt;<a class="code" href="structclient.html#a4df1332c1e98088733ea290c8b617de5">repl_ack_off</a>, lag);</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;                slaveid++;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;            }</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        }</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            <span class="stringliteral">&quot;master_replid:%s\r\n&quot;</span></div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            <span class="stringliteral">&quot;master_replid2:%s\r\n&quot;</span></div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;            <span class="stringliteral">&quot;master_repl_offset:%lld\r\n&quot;</span></div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;            <span class="stringliteral">&quot;second_repl_offset:%lld\r\n&quot;</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;            <span class="stringliteral">&quot;repl_backlog_active:%d\r\n&quot;</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;            <span class="stringliteral">&quot;repl_backlog_size:%lld\r\n&quot;</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            <span class="stringliteral">&quot;repl_backlog_first_byte_offset:%lld\r\n&quot;</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;            <span class="stringliteral">&quot;repl_backlog_histlen:%lld\r\n&quot;</span>,</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a467ab80673fbca31b4729a65effc8362">replid</a>,</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a06df01ff396d99c1b22692272de940d7">replid2</a>,</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ba0eb500edf919e115c9d159b991cd1">master_repl_offset</a>,</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa63d306ce9b3447e242ab5eafab120a5">second_replid_offset</a>,</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#acabb38054cd6d1d619d7c19d3e57bf28">repl_backlog</a> != NULL,</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a036a70cd5499d31b3b3964aeb182cd97">repl_backlog_size</a>,</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa215648deded4376d85651aa4e999815">repl_backlog_off</a>,</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad76d83545056feccc5ff262ed29488c6">repl_backlog_histlen</a>);</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;    }</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;    <span class="comment">/* CPU */</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;cpu&quot;</span>)) {</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;        <span class="stringliteral">&quot;# CPU\r\n&quot;</span></div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;        <span class="stringliteral">&quot;used_cpu_sys:%ld.%06ld\r\n&quot;</span></div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;        <span class="stringliteral">&quot;used_cpu_user:%ld.%06ld\r\n&quot;</span></div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;        <span class="stringliteral">&quot;used_cpu_sys_children:%ld.%06ld\r\n&quot;</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <span class="stringliteral">&quot;used_cpu_user_children:%ld.%06ld\r\n&quot;</span>,</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;        (<span class="keywordtype">long</span>)self_ru.ru_stime.tv_sec, (<span class="keywordtype">long</span>)self_ru.ru_stime.tv_usec,</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;        (<span class="keywordtype">long</span>)self_ru.ru_utime.tv_sec, (<span class="keywordtype">long</span>)self_ru.ru_utime.tv_usec,</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        (<span class="keywordtype">long</span>)c_ru.ru_stime.tv_sec, (<span class="keywordtype">long</span>)c_ru.ru_stime.tv_usec,</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        (<span class="keywordtype">long</span>)c_ru.ru_utime.tv_sec, (<span class="keywordtype">long</span>)c_ru.ru_utime.tv_usec);</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;    }</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;    <span class="comment">/* Command statistics */</span></div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;    <span class="keywordflow">if</span> (allsections || !strcasecmp(section,<span class="stringliteral">&quot;commandstats&quot;</span>)) {</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info, <span class="stringliteral">&quot;# Commandstats\r\n&quot;</span>);</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *c;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        <a class="code" href="structdict_entry.html">dictEntry</a> *de;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        <a class="code" href="structdict_iterator.html">dictIterator</a> *di;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;        di = <a class="code" href="dict_8c.html#aad268687a4d34aab2c051233348a04c7">dictGetSafeIterator</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">commands</a>);</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        <span class="keywordflow">while</span>((de = <a class="code" href="dict_8c.html#ab51f7613d1fe7b63edecd24efbcc7d2b">dictNext</a>(di)) != NULL) {</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;            c = (<span class="keyword">struct </span><a class="code" href="structredis_command.html">redisCommand</a> *) <a class="code" href="dict_8h.html#ae8d2cc391873b2bea2b87c4f80f43120">dictGetVal</a>(de);</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;            <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a>) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;            info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                <span class="stringliteral">&quot;cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\r\n&quot;</span>,</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                c-&gt;<a class="code" href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">name</a>, c-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a>, c-&gt;<a class="code" href="structredis_command.html#a89a6c4af7ebda470a83c3b01d01dcb14">microseconds</a>,</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                (c-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a> == 0) ? 0 : ((<span class="keywordtype">float</span>)c-&gt;<a class="code" href="structredis_command.html#a89a6c4af7ebda470a83c3b01d01dcb14">microseconds</a>/c-&gt;<a class="code" href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">calls</a>));</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;        }</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;        <a class="code" href="dict_8c.html#a8bfc6c2908c66772c09a1315c078bf06">dictReleaseIterator</a>(di);</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    }</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;    <span class="comment">/* Cluster */</span></div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;cluster&quot;</span>)) {</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        <span class="stringliteral">&quot;# Cluster\r\n&quot;</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        <span class="stringliteral">&quot;cluster_enabled:%d\r\n&quot;</span>,</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>);</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    }</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="comment">/* Key space */</span></div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    <span class="keywordflow">if</span> (allsections || defsections || !strcasecmp(section,<span class="stringliteral">&quot;keyspace&quot;</span>)) {</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <span class="keywordflow">if</span> (sections++) info = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(info,<span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info, <span class="stringliteral">&quot;# Keyspace\r\n&quot;</span>);</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">dbnum</a>; j++) {</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;            <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="redis-check-rdb_8c.html#a1f3b6698ca8496c05e0c9c0d56cb36ac">keys</a>, vkeys;</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;            keys = <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">dict</a>);</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;            vkeys = <a class="code" href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">expires</a>);</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            <span class="keywordflow">if</span> (keys || vkeys) {</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;                info = <a class="code" href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a>(info,</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;                    <span class="stringliteral">&quot;db%d:keys=%lld,expires=%lld,avg_ttl=%lld\r\n&quot;</span>,</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;                    j, keys, vkeys, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">db</a>[j].<a class="code" href="structredis_db.html#a605ade426dd43b0de7ea393efa17d337">avg_ttl</a>);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;            }</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;        }</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;    }</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;    <span class="keywordflow">return</span> info;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;}</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div><div class="line"><a name="l03640"></a><span class="lineno"><a class="line" href="server_8h.html#a2275257c1c0bbf34821270d4e169c0b8"> 3640</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a2275257c1c0bbf34821270d4e169c0b8">infoCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    <span class="keywordtype">char</span> *section = c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> == 2 ? c-&gt;<a class="code" href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">argv</a>[1]-&gt;<a class="code" href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> : <span class="stringliteral">&quot;default&quot;</span>;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ad1447518f4372828b8435ae82e48499e">argc</a> &gt; 2) {</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;        <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#aff4b27537592388d89ec9788325cc134">syntaxerr</a>);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    }</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;    <a class="code" href="networking_8c.html#aa9a8085743464110cd10338fa89d22cd">addReplyBulkSds</a>(c, <a class="code" href="server_8c.html#a956bcbb62ab56e4fe9d63c0a38b6cb76">genRedisInfoString</a>(section));</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;}</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div><div class="line"><a name="l03650"></a><span class="lineno"><a class="line" href="server_8h.html#acb9a010d69d43d85f665f6238bfc3164"> 3650</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#acb9a010d69d43d85f665f6238bfc3164">monitorCommand</a>(<a class="code" href="structclient.html">client</a> *c) {</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    <span class="comment">/* ignore MONITOR if already slave or in monitor mode */</span></div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; <a class="code" href="server_8h.html#ae9f6995948253652bc9454d79a72f4a7">CLIENT_SLAVE</a>) <span class="keywordflow">return</span>;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    c-&gt;<a class="code" href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> |= (<a class="code" href="server_8h.html#ae9f6995948253652bc9454d79a72f4a7">CLIENT_SLAVE</a>|<a class="code" href="server_8h.html#a7724350e4f0ddbf1c80740699fac78be">CLIENT_MONITOR</a>);</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <a class="code" href="adlist_8c.html#aa759866ec59eca7e24746233740453fe">listAddNodeTail</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#adafbaec515301e4446949c48a2670a84">monitors</a>,c);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <a class="code" href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a>(c,<a class="code" href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a>.<a class="code" href="structshared_objects_struct.html#adf30e1960aaa30991c8cc6f5d1b8f1f5">ok</a>);</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;}</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;<span class="comment">/* =================================== Main! ================================ */</span></div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;<span class="preprocessor">#ifdef __linux__</span></div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="keywordtype">int</span> linuxOvercommitMemoryValue(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;    FILE *fp = fopen(<span class="stringliteral">&quot;/proc/sys/vm/overcommit_memory&quot;</span>,<span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <span class="keywordtype">char</span> buf[64];</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="keywordflow">if</span> (!fp) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;    <span class="keywordflow">if</span> (fgets(buf,64,fp) == NULL) {</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;        fclose(fp);</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    }</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    fclose(fp);</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;    <span class="keywordflow">return</span> atoi(buf);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;}</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="keywordtype">void</span> linuxMemoryWarnings(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="keywordflow">if</span> (linuxOvercommitMemoryValue() == 0) {</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory=1&#39; for this to take effect.&quot;</span>);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    }</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="latency_8h.html#a57a542a709b21e9654b0b297303c966c">THPIsEnabled</a>()) {</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.&quot;</span>);</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    }</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;}</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __linux__ */</span><span class="preprocessor"></span></div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03686"></a><span class="lineno"><a class="line" href="server_8c.html#a569a855cbd6e2df036f5ecc967d792c1"> 3686</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a569a855cbd6e2df036f5ecc967d792c1">createPidFile</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;    <span class="comment">/* If pidfile requested, but no pidfile defined, use</span></div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;<span class="comment">     * default pidfile path */</span></div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a> = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8h.html#ad0a549a4ce81a4436199706f3513bbc2">CONFIG_DEFAULT_PID_FILE</a>);</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;    <span class="comment">/* Try to write the pid file in a best-effort way. */</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;    FILE *fp = fopen(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>,<span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;    <span class="keywordflow">if</span> (fp) {</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;        fprintf(fp,<span class="stringliteral">&quot;%d\n&quot;</span>,(<span class="keywordtype">int</span>)getpid());</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        fclose(fp);</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;}</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;</div><div class="line"><a name="l03699"></a><span class="lineno"><a class="line" href="server_8c.html#a29b0af1da2432bcc90721c0b62f4e660"> 3699</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a29b0af1da2432bcc90721c0b62f4e660">daemonize</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="keywordflow">if</span> (fork() != 0) exit(0); <span class="comment">/* parent exits */</span></div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    setsid(); <span class="comment">/* create a new session */</span></div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    <span class="comment">/* Every output goes to /dev/null. If Redis is daemonized but</span></div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;<span class="comment">     * the &#39;logfile&#39; is set to &#39;stdout&#39; in the configuration file</span></div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;<span class="comment">     * it will not log at all. */</span></div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;    <span class="keywordflow">if</span> ((fd = open(<span class="stringliteral">&quot;/dev/null&quot;</span>, O_RDWR, 0)) != -1) {</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        dup2(fd, STDIN_FILENO);</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;        dup2(fd, STDOUT_FILENO);</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        dup2(fd, STDERR_FILENO);</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <span class="keywordflow">if</span> (fd &gt; STDERR_FILENO) close(fd);</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    }</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;}</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;</div><div class="line"><a name="l03716"></a><span class="lineno"><a class="line" href="server_8c.html#af986bd0575ec9b913dfab4b8422509ae"> 3716</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#af986bd0575ec9b913dfab4b8422509ae">version</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    printf(<span class="stringliteral">&quot;Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\n&quot;</span>,</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        <a class="code" href="version_8h.html#a357a0d302ef7fbb42bf2db0632b9f7fe">REDIS_VERSION</a>,</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;        <a class="code" href="redis-cli_8c.html#a598b97b058f3470583dd1b6fc6498102">redisGitSHA1</a>(),</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        atoi(<a class="code" href="redis-cli_8c.html#a1dc767d40b8708fecbc214aafd78fd71">redisGitDirty</a>()) &gt; 0,</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;        <a class="code" href="zmalloc_8h.html#a374c6d7cf6c9817e1243093e03df7319">ZMALLOC_LIB</a>,</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;        <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>) == 4 ? 32 : 64,</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="release_8c.html#a84fd80c6f31a9376af5fc92bf5565044">redisBuildId</a>());</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    exit(0);</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;}</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;</div><div class="line"><a name="l03727"></a><span class="lineno"><a class="line" href="server_8h.html#ae8605e2b78cd4a81b6c6b5c30cb7366a"> 3727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;Usage: ./redis-server [/path/to/redis.conf] [options]\n&quot;</span>);</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server - (read config from stdin)\n&quot;</span>);</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server -v or --version\n&quot;</span>);</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server -h or --help\n&quot;</span>);</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server --test-memory &lt;megabytes&gt;\n\n&quot;</span>);</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;Examples:\n&quot;</span>);</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server (run the server with default conf)\n&quot;</span>);</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server /etc/redis/6379.conf\n&quot;</span>);</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server --port 7777\n&quot;</span>);</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server --port 7777 --replicaof 127.0.0.1 8888\n&quot;</span>);</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server /etc/myredis.conf --loglevel verbose\n\n&quot;</span>);</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;Sentinel mode:\n&quot;</span>);</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;    fprintf(stderr,<span class="stringliteral">&quot;       ./redis-server /etc/sentinel.conf --sentinel\n&quot;</span>);</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    exit(1);</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;}</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;</div><div class="line"><a name="l03744"></a><span class="lineno"><a class="line" href="server_8c.html#ae5be777467e4b7f3b1ba21bdeba4a43e"> 3744</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ae5be777467e4b7f3b1ba21bdeba4a43e">redisAsciiArt</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="asciilogo_8h.html">asciilogo.h</a>&quot;</span></div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <span class="keywordtype">char</span> *buf = <a class="code" href="zmalloc_8c.html#a879ee0956348fd24dc2ac69c2d4f220b">zmalloc</a>(1024*16);</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    <span class="keywordtype">char</span> *mode;</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) mode = <span class="stringliteral">&quot;cluster&quot;</span>;</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) mode = <span class="stringliteral">&quot;sentinel&quot;</span>;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="keywordflow">else</span> mode = <span class="stringliteral">&quot;standalone&quot;</span>;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="comment">/* Show the ASCII logo if: log file is stdout AND stdout is a</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;<span class="comment">     * tty AND syslog logging is disabled. Also show logo if the user</span></div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;<span class="comment">     * forced us to do so via redis.conf. */</span></div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    <span class="keywordtype">int</span> show_logo = ((!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a1e234838fd4211781e47a97ca8dd03cc">syslog_enabled</a> &amp;&amp;</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;                      <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">logfile</a>[0] == <span class="charliteral">&#39;\0&#39;</span> &amp;&amp;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;                      isatty(fileno(stdout))) ||</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;                     <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7dff68985c6f97d270358d27472972e2">always_show_logo</a>);</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    <span class="keywordflow">if</span> (!show_logo) {</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;            <span class="stringliteral">&quot;Running mode=%s, port=%d.&quot;</span>,</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            mode, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a></div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;        );</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;        snprintf(buf,1024*16,<a class="code" href="asciilogo_8h.html#af382f985e59f9f89952a4eadbeb3cbdc">ascii_logo</a>,</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;            <a class="code" href="version_8h.html#a357a0d302ef7fbb42bf2db0632b9f7fe">REDIS_VERSION</a>,</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;            <a class="code" href="redis-cli_8c.html#a598b97b058f3470583dd1b6fc6498102">redisGitSHA1</a>(),</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;            strtol(<a class="code" href="redis-cli_8c.html#a1dc767d40b8708fecbc214aafd78fd71">redisGitDirty</a>(),NULL,10) &gt; 0,</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;            (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span>) == 8) ? <span class="stringliteral">&quot;64&quot;</span> : <span class="stringliteral">&quot;32&quot;</span>,</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;            mode, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            (<span class="keywordtype">long</span>) getpid()</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;        );</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;        <a class="code" href="server_8c.html#a9438694faedfc9ba62643c59c414b3dc">serverLogRaw</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>|<a class="code" href="server_8h.html#a6b3768a4d2dfb3ac580b8d999baa9350">LL_RAW</a>,buf);</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    }</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(buf);</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;}</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> sigShutdownHandler(<span class="keywordtype">int</span> sig) {</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <span class="keywordtype">char</span> *msg;</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;    <span class="keywordflow">switch</span> (sig) {</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <span class="keywordflow">case</span> SIGINT:</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        msg = <span class="stringliteral">&quot;Received SIGINT scheduling shutdown...&quot;</span>;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    <span class="keywordflow">case</span> SIGTERM:</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;        msg = <span class="stringliteral">&quot;Received SIGTERM scheduling shutdown...&quot;</span>;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;        msg = <span class="stringliteral">&quot;Received shutdown signal, scheduling shutdown...&quot;</span>;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    };</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;    <span class="comment">/* SIGINT is often delivered via Ctrl+C in an interactive session.</span></div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;<span class="comment">     * If we receive the signal the second time, we interpret this as</span></div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;<span class="comment">     * the user really wanting to quit ASAP without waiting to persist</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;<span class="comment">     * on disk. */</span></div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">shutdown_asap</a> &amp;&amp; sig == SIGINT) {</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;        <a class="code" href="server_8c.html#af29037e986e1377d7a74a9c95df0f1e0">serverLogFromHandler</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;You insist... exiting now.&quot;</span>);</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        <a class="code" href="rdb_8c.html#a17fb24fcbbe9ff8228fa7b24430fea7b">rdbRemoveTempFile</a>(getpid());</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;        exit(1); <span class="comment">/* Exit with an error since this was not a clean shutdown. */</span></div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;        exit(0);</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    }</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    <a class="code" href="server_8c.html#af29037e986e1377d7a74a9c95df0f1e0">serverLogFromHandler</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, msg);</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">shutdown_asap</a> = 1;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;}</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;</div><div class="line"><a name="l03810"></a><span class="lineno"><a class="line" href="server_8h.html#acdd4d8214a1a0cf660e5d3a48d576344"> 3810</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#acdd4d8214a1a0cf660e5d3a48d576344">setupSignalHandlers</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="keyword">struct </span>sigaction act;</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;    <span class="comment">/* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction is used.</span></div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;<span class="comment">     * Otherwise, sa_handler is used. */</span></div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    sigemptyset(&amp;act.sa_mask);</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    act.sa_flags = 0;</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;    act.sa_handler = sigShutdownHandler;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    sigaction(SIGTERM, &amp;act, NULL);</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    sigaction(SIGINT, &amp;act, NULL);</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;<span class="preprocessor">#ifdef HAVE_BACKTRACE</span></div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    sigemptyset(&amp;act.sa_mask);</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    act.sa_sigaction = <a class="code" href="server_8h.html#abfb23271eba8a355b644875b440d5144">sigsegvHandler</a>;</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    sigaction(SIGSEGV, &amp;act, NULL);</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    sigaction(SIGBUS, &amp;act, NULL);</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;    sigaction(SIGFPE, &amp;act, NULL);</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    sigaction(SIGILL, &amp;act, NULL);</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;}</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#a83ed68d11467f1c48f83b2d5033f16f7">memtest</a>(<span class="keywordtype">size_t</span> megabytes, <span class="keywordtype">int</span> passes);</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;<span class="comment">/* Returns 1 if there is --sentinel among the arguments or if</span></div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="comment"> * argv[0] contains &quot;redis-sentinel&quot;. */</span></div><div class="line"><a name="l03837"></a><span class="lineno"><a class="line" href="server_8c.html#ac3e56d0fcda06804db751a0a519f22cd"> 3837</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#ac3e56d0fcda06804db751a0a519f22cd">checkForSentinelMode</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="keywordflow">if</span> (strstr(argv[0],<span class="stringliteral">&quot;redis-sentinel&quot;</span>) != NULL) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;    <span class="keywordflow">for</span> (j = 1; j &lt; argc; j++)</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;        <span class="keywordflow">if</span> (!strcmp(argv[j],<span class="stringliteral">&quot;--sentinel&quot;</span>)) <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;}</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;<span class="comment">/* Function called at startup to load RDB or AOF file in memory. */</span></div><div class="line"><a name="l03847"></a><span class="lineno"><a class="line" href="server_8c.html#ab8d3fd6e5cef698cc6a7d670ed0e468d"> 3847</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#ab8d3fd6e5cef698cc6a7d670ed0e468d">loadDataFromDisk</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <span class="keywordtype">long</span> <span class="keywordtype">long</span> start = <a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>();</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9142dcad31984d994f392be24e91daff">aof_state</a> == <a class="code" href="server_8h.html#af6b151c9dced28e94c19479197113a83">AOF_ON</a>) {</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="aof_8c.html#a7c8ba26d0e1ea2c7c34d6b2bca2d4a53">loadAppendOnlyFile</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9bdcedcc3282626ac99ee15091d20586">aof_filename</a>) == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>)</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;DB loaded from append only file: %.3f seconds&quot;</span>,(<span class="keywordtype">float</span>)(<a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>()-start)/1000000);</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;        <a class="code" href="structrdb_save_info.html">rdbSaveInfo</a> rsi = <a class="code" href="server_8h.html#a694b5ed5268bee8c50cc5b38fbec99ce">RDB_SAVE_INFO_INIT</a>;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="rdb_8c.html#ad37871274c208110029a2a99daeba18d">rdbLoad</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">rdb_filename</a>,&amp;rsi) == <a class="code" href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a>) {</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;DB loaded from disk: %.3f seconds&quot;</span>,</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;                (<span class="keywordtype">float</span>)(<a class="code" href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a>()-start)/1000000);</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;            <span class="comment">/* Restore the replication ID / offset from the RDB file. */</span></div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">masterhost</a> &amp;&amp;</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                rsi.<a class="code" href="structrdb_save_info.html#aaceb90ef64847700ff5b9c91df9d7bf5">repl_id_is_set</a> &amp;&amp;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;                rsi.<a class="code" href="structrdb_save_info.html#acaaa973071b682ff89c70991a2d3ce7a">repl_offset</a> != -1 &amp;&amp;</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;                <span class="comment">/* Note that older implementations may save a repl_stream_db</span></div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;<span class="comment">                 * of -1 inside the RDB file in a wrong way, see more information</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment">                 * in function rdbPopulateSaveInfo. */</span></div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                rsi.<a class="code" href="structrdb_save_info.html#a839a288ca668f38e63ba0fd17f6ae8c5">repl_stream_db</a> != -1)</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;            {</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;                memcpy(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a467ab80673fbca31b4729a65effc8362">replid</a>,rsi.<a class="code" href="structrdb_save_info.html#af57b6e90af7dbfc2dd62eb2d903437bf">repl_id</a>,<span class="keyword">sizeof</span>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a467ab80673fbca31b4729a65effc8362">replid</a>));</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;                <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ba0eb500edf919e115c9d159b991cd1">master_repl_offset</a> = rsi.<a class="code" href="structrdb_save_info.html#acaaa973071b682ff89c70991a2d3ce7a">repl_offset</a>;</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;                <span class="comment">/* If we are a slave, create a cached master from this</span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;<span class="comment">                 * information, in order to allow partial resynchronizations</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;<span class="comment">                 * with masters. */</span></div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;                <a class="code" href="replication_8c.html#a61c860bc8a13a585b4864358faf305f3">replicationCacheMasterUsingMyself</a>();</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                <a class="code" href="db_8c.html#ae0275c60dde397ac9fe73946abd6d972">selectDb</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa6d326e1db1991e81cd897babf52ea8d">cached_master</a>,rsi.<a class="code" href="structrdb_save_info.html#a839a288ca668f38e63ba0fd17f6ae8c5">repl_stream_db</a>);</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;            }</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (errno != ENOENT) {</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Fatal error loading the DB: %s. Exiting.&quot;</span>,strerror(errno));</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;            exit(1);</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;        }</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    }</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;}</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;</div><div class="line"><a name="l03882"></a><span class="lineno"><a class="line" href="server_8c.html#acdbdba9cef241dcf2f3b6104db42229a"> 3882</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#acdbdba9cef241dcf2f3b6104db42229a">redisOutOfMemoryHandler</a>(<span class="keywordtype">size_t</span> allocation_size) {</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Out Of Memory allocating %zu bytes!&quot;</span>,</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;        allocation_size);</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;    <a class="code" href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a>(<span class="stringliteral">&quot;Redis aborting for OUT OF MEMORY&quot;</span>);</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;}</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;</div><div class="line"><a name="l03888"></a><span class="lineno"><a class="line" href="server_8h.html#aaac83f850dd4d037f1ece1af0b689899"> 3888</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="server_8c.html#aaac83f850dd4d037f1ece1af0b689899">redisSetProcTitle</a>(<span class="keywordtype">char</span> *title) {</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="preprocessor">#ifdef USE_SETPROCTITLE</span></div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <span class="keywordtype">char</span> *server_mode = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) server_mode = <span class="stringliteral">&quot; [cluster]&quot;</span>;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) server_mode = <span class="stringliteral">&quot; [sentinel]&quot;</span>;</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    setproctitle(<span class="stringliteral">&quot;%s %s:%d%s&quot;</span>,</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;        title,</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa0e3099c4f00ad746e97d1bc7685f95">bindaddr_count</a> ? <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">bindaddr</a>[0] : <span class="stringliteral">&quot;*&quot;</span>,</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">port</a>,</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        server_mode);</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    <a class="code" href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a>(title);</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;}</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;<span class="comment"> * Check whether systemd or upstart have been used to start redis.</span></div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"><a class="line" href="server_8c.html#a964cda115a27998e37c5d3711ea6b676"> 3908</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a964cda115a27998e37c5d3711ea6b676">redisSupervisedUpstart</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *upstart_job = getenv(<span class="stringliteral">&quot;UPSTART_JOB&quot;</span>);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    <span class="keywordflow">if</span> (!upstart_job) {</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                <span class="stringliteral">&quot;upstart supervision requested, but UPSTART_JOB not found&quot;</span>);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    }</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>, <span class="stringliteral">&quot;supervised by upstart, will stop to signal readiness&quot;</span>);</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <span class="keyword">raise</span>(SIGSTOP);</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    unsetenv(<span class="stringliteral">&quot;UPSTART_JOB&quot;</span>);</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;}</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"><a class="line" href="server_8c.html#ace9629379ec546cb6be393e1302a4ea9"> 3923</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#ace9629379ec546cb6be393e1302a4ea9">redisSupervisedSystemd</a>(<span class="keywordtype">void</span>) {</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *notify_socket = getenv(<span class="stringliteral">&quot;NOTIFY_SOCKET&quot;</span>);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <span class="keywordtype">int</span> fd = 1;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <span class="keyword">struct </span>sockaddr_un su;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="keyword">struct </span>iovec iov;</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keyword">struct </span>msghdr hdr;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    <span class="keywordtype">int</span> sendto_flags = 0;</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;    <span class="keywordflow">if</span> (!notify_socket) {</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;                <span class="stringliteral">&quot;systemd supervision requested, but NOTIFY_SOCKET not found&quot;</span>);</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    }</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <span class="keywordflow">if</span> ((strchr(<span class="stringliteral">&quot;@/&quot;</span>, notify_socket[0])) == NULL || strlen(notify_socket) &lt; 2) {</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    }</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>, <span class="stringliteral">&quot;supervised by systemd, will signal readiness&quot;</span>);</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    <span class="keywordflow">if</span> ((fd = socket(AF_UNIX, SOCK_DGRAM, 0)) == -1) {</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;                <span class="stringliteral">&quot;Can&#39;t connect to systemd socket %s&quot;</span>, notify_socket);</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    }</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    memset(&amp;su, 0, <span class="keyword">sizeof</span>(su));</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    su.sun_family = AF_UNIX;</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    strncpy (su.sun_path, notify_socket, <span class="keyword">sizeof</span>(su.sun_path) -1);</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    su.sun_path[<span class="keyword">sizeof</span>(su.sun_path) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    <span class="keywordflow">if</span> (notify_socket[0] == <span class="charliteral">&#39;@&#39;</span>)</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        su.sun_path[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    memset(&amp;iov, 0, <span class="keyword">sizeof</span>(iov));</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    iov.iov_base = <span class="stringliteral">&quot;READY=1&quot;</span>;</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    iov.iov_len = strlen(<span class="stringliteral">&quot;READY=1&quot;</span>);</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    memset(&amp;hdr, 0, <span class="keyword">sizeof</span>(hdr));</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    hdr.msg_name = &amp;su;</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    hdr.msg_namelen = offsetof(<span class="keyword">struct</span> sockaddr_un, sun_path) +</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        strlen(notify_socket);</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    hdr.msg_iov = &amp;iov;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;    hdr.msg_iovlen = 1;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    unsetenv(<span class="stringliteral">&quot;NOTIFY_SOCKET&quot;</span>);</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;<span class="preprocessor">#ifdef HAVE_MSG_NOSIGNAL</span></div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    sendto_flags |= MSG_NOSIGNAL;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="keywordflow">if</span> (sendmsg(fd, &amp;hdr, sendto_flags) &lt; 0) {</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t send notification to systemd&quot;</span>);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;        close(fd);</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    }</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    close(fd);</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;}</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;</div><div class="line"><a name="l03980"></a><span class="lineno"><a class="line" href="server_8c.html#ae45e596c457c337b249e553a27375edd"> 3980</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#ae45e596c457c337b249e553a27375edd">redisIsSupervised</a>(<span class="keywordtype">int</span> mode) {</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;    <span class="keywordflow">if</span> (mode == <a class="code" href="server_8h.html#a7b2b1d1fd04a4f2c1a141e0976dd479b">SUPERVISED_AUTODETECT</a>) {</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *upstart_job = getenv(<span class="stringliteral">&quot;UPSTART_JOB&quot;</span>);</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *notify_socket = getenv(<span class="stringliteral">&quot;NOTIFY_SOCKET&quot;</span>);</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;        <span class="keywordflow">if</span> (upstart_job) {</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            <a class="code" href="server_8c.html#a964cda115a27998e37c5d3711ea6b676">redisSupervisedUpstart</a>();</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (notify_socket) {</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;            <a class="code" href="server_8c.html#ace9629379ec546cb6be393e1302a4ea9">redisSupervisedSystemd</a>();</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;        }</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == <a class="code" href="server_8h.html#ae34bdafb8c6d3cc58fc6b319e623b604">SUPERVISED_UPSTART</a>) {</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8c.html#a964cda115a27998e37c5d3711ea6b676">redisSupervisedUpstart</a>();</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == <a class="code" href="server_8h.html#aea7b4966d78f67f5ab89f38f0e1bde74">SUPERVISED_SYSTEMD</a>) {</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="server_8c.html#ace9629379ec546cb6be393e1302a4ea9">redisSupervisedSystemd</a>();</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;    }</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;}</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;</div><div class="line"><a name="l04000"></a><span class="lineno"><a class="line" href="server_8c.html#a3c04138a5bfe5d72780bb7e82a18e627"> 4000</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="server_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;    <span class="keywordtype">int</span> j;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;<span class="preprocessor">#ifdef REDIS_TEST</span></div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;    <span class="keywordflow">if</span> (argc == 3 &amp;&amp; !strcasecmp(argv[1], <span class="stringliteral">&quot;test&quot;</span>)) {</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;ziplist&quot;</span>)) {</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;            <span class="keywordflow">return</span> ziplistTest(argc, argv);</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;quicklist&quot;</span>)) {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;            quicklistTest(argc, argv);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;intset&quot;</span>)) {</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            <span class="keywordflow">return</span> intsetTest(argc, argv);</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;zipmap&quot;</span>)) {</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;            <span class="keywordflow">return</span> zipmapTest(argc, argv);</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;sha1test&quot;</span>)) {</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            <span class="keywordflow">return</span> sha1Test(argc, argv);</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;util&quot;</span>)) {</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            <span class="keywordflow">return</span> utilTest(argc, argv);</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;sds&quot;</span>)) {</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            <span class="keywordflow">return</span> sdsTest(argc, argv);</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;endianconv&quot;</span>)) {</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;            <span class="keywordflow">return</span> endianconvTest(argc, argv);</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;crc64&quot;</span>)) {</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;            <span class="keywordflow">return</span> crc64Test(argc, argv);</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(argv[2], <span class="stringliteral">&quot;zmalloc&quot;</span>)) {</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;            <span class="keywordflow">return</span> zmalloc_test(argc, argv);</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;        }</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;        <span class="keywordflow">return</span> -1; <span class="comment">/* test not found */</span></div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    }</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;    <span class="comment">/* We need to initialize our libraries, and the server configuration. */</span></div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;<span class="preprocessor">#ifdef INIT_SETPROCTITLE_REPLACEMENT</span></div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    spt_init(argc, argv);</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    setlocale(LC_COLLATE,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    tzset(); <span class="comment">/* Populates &#39;timezone&#39; global. */</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    <a class="code" href="zmalloc_8c.html#a5e22556717107aec50cc1d5659777cf2">zmalloc_set_oom_handler</a>(<a class="code" href="server_8c.html#acdbdba9cef241dcf2f3b6104db42229a">redisOutOfMemoryHandler</a>);</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;    srand(time(NULL)^getpid());</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    gettimeofday(&amp;tv,NULL);</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    <span class="keywordtype">char</span> hashseed[16];</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;    <a class="code" href="server_8h.html#a293669fbc8a97f4cdb8a8de87e9a6911">getRandomHexChars</a>(hashseed,<span class="keyword">sizeof</span>(hashseed));</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    <a class="code" href="dict_8c.html#a26682701255962f65ed1699803025e1b">dictSetHashFunctionSeed</a>((uint8_t*)hashseed);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a> = <a class="code" href="server_8c.html#ac3e56d0fcda06804db751a0a519f22cd">checkForSentinelMode</a>(argc,argv);</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    <a class="code" href="server_8c.html#ad708a8be8ec0172827f3006e9237f840">initServerConfig</a>();</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    <a class="code" href="module_8c.html#a07cab1398067dfd4635997b40d30074d">moduleInitModulesSystem</a>();</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;    <span class="comment">/* Store the executable path and arguments in a safe place in order</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;<span class="comment">     * to be able to restart the server later. */</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">executable</a> = <a class="code" href="util_8c.html#a57b6fa0683401c727ce1b85077d6bc74">getAbsolutePath</a>(argv[0]);</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a> = <a class="code" href="zmalloc_8c.html#a879ee0956348fd24dc2ac69c2d4f220b">zmalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*)*(argc+1));</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[argc] = NULL;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; argc; j++) <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[j] = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(argv[j]);</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;    <span class="comment">/* We need to init sentinel right now as parsing the configuration file</span></div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;<span class="comment">     * in sentinel mode will have the effect of populating the sentinel</span></div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;<span class="comment">     * data structures with master nodes to monitor. */</span></div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) {</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;        <a class="code" href="sentinel_8c.html#ad230f7009b18d03daae7ba2daec27222">initSentinelConfig</a>();</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;        <a class="code" href="sentinel_8c.html#a8737702d09faad605816655d77a11920">initSentinel</a>();</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    }</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="comment">/* Check if we need to start in redis-check-rdb/aof mode. We just execute</span></div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="comment">     * the program main. However the program is part of the Redis executable</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="comment">     * so that we can easily execute an RDB check on loading errors. */</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <span class="keywordflow">if</span> (strstr(argv[0],<span class="stringliteral">&quot;redis-check-rdb&quot;</span>) != NULL)</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;        <a class="code" href="redis-check-rdb_8c.html#ac45f6a1c394687c26b8f0261661006e3">redis_check_rdb_main</a>(argc,argv,NULL);</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(argv[0],<span class="stringliteral">&quot;redis-check-aof&quot;</span>) != NULL)</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;        <a class="code" href="redis-check-aof_8c.html#a4cf4c173fb3690dd908cd74f72847972">redis_check_aof_main</a>(argc,argv);</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordflow">if</span> (argc &gt;= 2) {</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;        j = 1; <span class="comment">/* First option to parse in argv[] */</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        <a class="code" href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a> options = <a class="code" href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a>();</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;        <span class="keywordtype">char</span> *configfile = NULL;</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;        <span class="comment">/* Handle special options --help and --version */</span></div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        <span class="keywordflow">if</span> (strcmp(argv[1], <span class="stringliteral">&quot;-v&quot;</span>) == 0 ||</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            strcmp(argv[1], <span class="stringliteral">&quot;--version&quot;</span>) == 0) <a class="code" href="server_8c.html#af986bd0575ec9b913dfab4b8422509ae">version</a>();</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;        <span class="keywordflow">if</span> (strcmp(argv[1], <span class="stringliteral">&quot;--help&quot;</span>) == 0 ||</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            strcmp(argv[1], <span class="stringliteral">&quot;-h&quot;</span>) == 0) <a class="code" href="server_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a>();</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;        <span class="keywordflow">if</span> (strcmp(argv[1], <span class="stringliteral">&quot;--test-memory&quot;</span>) == 0) {</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            <span class="keywordflow">if</span> (argc == 3) {</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;                <a class="code" href="server_8c.html#a83ed68d11467f1c48f83b2d5033f16f7">memtest</a>(atoi(argv[2]),50);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;                exit(0);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;                fprintf(stderr,<span class="stringliteral">&quot;Please specify the amount of memory to test in megabytes.\n&quot;</span>);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;                fprintf(stderr,<span class="stringliteral">&quot;Example: ./redis-server --test-memory 4096\n\n&quot;</span>);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;                exit(1);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;            }</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;        }</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;        <span class="comment">/* First argument is the config file name? */</span></div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;        <span class="keywordflow">if</span> (argv[j][0] != <span class="charliteral">&#39;-&#39;</span> || argv[j][1] != <span class="charliteral">&#39;-&#39;</span>) {</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;            configfile = argv[j];</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a> = <a class="code" href="util_8c.html#a57b6fa0683401c727ce1b85077d6bc74">getAbsolutePath</a>(configfile);</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;            <span class="comment">/* Replace the config file in server.exec_argv with</span></div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;<span class="comment">             * its absolute path. */</span></div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;            <a class="code" href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[j]);</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;            <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">exec_argv</a>[j] = <a class="code" href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">configfile</a>);</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;            j++;</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;        }</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;        <span class="comment">/* All the other options are parsed and conceptually appended to the</span></div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;<span class="comment">         * configuration file. For instance --port 6380 will generate the</span></div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;<span class="comment">         * string &quot;port 6380\n&quot; to be parsed after the actual file name</span></div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;<span class="comment">         * is parsed, if any. */</span></div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;        <span class="keywordflow">while</span>(j != argc) {</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;            <span class="keywordflow">if</span> (argv[j][0] == <span class="charliteral">&#39;-&#39;</span> &amp;&amp; argv[j][1] == <span class="charliteral">&#39;-&#39;</span>) {</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;                <span class="comment">/* Option name */</span></div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;                <span class="keywordflow">if</span> (!strcmp(argv[j], <span class="stringliteral">&quot;--check-rdb&quot;</span>)) {</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;                    <span class="comment">/* Argument has no options, need to skip for parsing. */</span></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;                    j++;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;                }</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;                <span class="keywordflow">if</span> (sdslen(options)) options = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(options,<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;                options = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(options,argv[j]+2);</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;                options = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(options,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;                <span class="comment">/* Option argument */</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;                options = <a class="code" href="sds_8c.html#a4e7207cc9002b072f67a0766fedbc7fb">sdscatrepr</a>(options,argv[j],strlen(argv[j]));</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;                options = <a class="code" href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a>(options,<span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;            }</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;            j++;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;        }</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a> &amp;&amp; configfile &amp;&amp; *configfile == <span class="charliteral">&#39;-&#39;</span>) {</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;                <span class="stringliteral">&quot;Sentinel config from STDIN not allowed.&quot;</span>);</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;                <span class="stringliteral">&quot;Sentinel needs config file on disk to save state.  Exiting...&quot;</span>);</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;            exit(1);</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        }</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;        <a class="code" href="config_8c.html#a99594147f9c18590b474b8a2dfb812c8">resetServerSaveParams</a>();</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;        <a class="code" href="config_8c.html#a43c6b5fe507fc33990a75da2e4778b92">loadServerConfig</a>(configfile,options);</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;        <a class="code" href="sds_8c.html#a4d9266a6b2d5a98f0df0ac62f51324fd">sdsfree</a>(options);</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    }</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo&quot;</span>);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;        <span class="stringliteral">&quot;Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started&quot;</span>,</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;            <a class="code" href="version_8h.html#a357a0d302ef7fbb42bf2db0632b9f7fe">REDIS_VERSION</a>,</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;            (<span class="keyword">sizeof</span>(<span class="keywordtype">long</span>) == 8) ? 64 : 32,</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;            <a class="code" href="redis-cli_8c.html#a598b97b058f3470583dd1b6fc6498102">redisGitSHA1</a>(),</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;            strtol(<a class="code" href="redis-cli_8c.html#a1dc767d40b8708fecbc214aafd78fd71">redisGitDirty</a>(),NULL,10) &gt; 0,</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;            (<span class="keywordtype">int</span>)getpid());</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    <span class="keywordflow">if</span> (argc == 1) {</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf&quot;</span>, argv[0], <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a> ? <span class="stringliteral">&quot;sentinel&quot;</span> : <span class="stringliteral">&quot;redis&quot;</span>);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>, <span class="stringliteral">&quot;Configuration loaded&quot;</span>);</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;    }</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae4d226836f4e8579243896d2ad72c8fd">supervised</a> = <a class="code" href="server_8c.html#ae45e596c457c337b249e553a27375edd">redisIsSupervised</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a2be7aa4385144f8fb0d9b18f0a7a63b9">supervised_mode</a>);</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    <span class="keywordtype">int</span> background = <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#aa2339b21f98abccd12533a54d5f9d712">daemonize</a> &amp;&amp; !<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ae4d226836f4e8579243896d2ad72c8fd">supervised</a>;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="keywordflow">if</span> (background) <a class="code" href="server_8c.html#a29b0af1da2432bcc90721c0b62f4e660">daemonize</a>();</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <a class="code" href="server_8c.html#ad21e41fa09dce3d1a3b91503b755b7a2">initServer</a>();</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    <span class="keywordflow">if</span> (background || <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>) <a class="code" href="server_8c.html#a569a855cbd6e2df036f5ecc967d792c1">createPidFile</a>();</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <a class="code" href="server_8c.html#aaac83f850dd4d037f1ece1af0b689899">redisSetProcTitle</a>(argv[0]);</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    <a class="code" href="server_8c.html#ae5be777467e4b7f3b1ba21bdeba4a43e">redisAsciiArt</a>();</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    <a class="code" href="server_8c.html#a4ca74222ae99615dd8eaa8ca5050046d">checkTcpBacklogSettings</a>();</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">sentinel_mode</a>) {</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;        <span class="comment">/* Things not needed when running in Sentinel mode. */</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;Server initialized&quot;</span>);</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;<span class="preprocessor">    #ifdef __linux__</span></div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        linuxMemoryWarnings();</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;<span class="preprocessor">    #endif</span></div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;        <a class="code" href="module_8c.html#a75e4d2949ecfbec4159d7388d4b83e6f">moduleLoadFromQueue</a>();</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        <a class="code" href="server_8c.html#ab8d3fd6e5cef698cc6a7d670ed0e468d">loadDataFromDisk</a>();</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">cluster_enabled</a>) {</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cluster_8c.html#ac0cb91ed72fe935f5fc0bace6047a779">verifyClusterConfigWithData</a>() == <a class="code" href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a>) {</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;                    <span class="stringliteral">&quot;You can&#39;t have keys in a DB different than DB 0 when in &quot;</span></div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;                    <span class="stringliteral">&quot;Cluster mode. Exiting.&quot;</span>);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;                exit(1);</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;            }</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        }</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">ipfd_count</a> &gt; 0)</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;Ready to accept connections&quot;</span>);</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">sofd</a> &gt; 0)</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;            <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a>,<span class="stringliteral">&quot;The server is now ready to accept connections at %s&quot;</span>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">unixsocket</a>);</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <a class="code" href="sentinel_8c.html#add06eed88f7d0694a1fa9eac5f349d45">sentinelIsRunning</a>();</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    }</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    <span class="comment">/* Warning the user about suspicious maxmemory setting. */</span></div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> &gt; 0 &amp;&amp; <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a> &lt; 1024*1024) {</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;        <a class="code" href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a>(<a class="code" href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a>,<span class="stringliteral">&quot;WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?&quot;</span>, <a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">maxmemory</a>);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    }</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;    <a class="code" href="ae_8c.html#ab2fbbafc0540b40bcc9a13477c512e4d">aeSetBeforeSleepProc</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>,<a class="code" href="server_8c.html#a1e6f24a15ad04b8e16084190fb05cc42">beforeSleep</a>);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;    <a class="code" href="ae_8c.html#a531efa3444e61c200b8b7a64d0e3789c">aeSetAfterSleepProc</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>,<a class="code" href="server_8c.html#a5baf7e76a67bcd855a187fae72c2d3bf">afterSleep</a>);</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    <a class="code" href="ae_8c.html#a2909fa15dc2d667ec824904fef9df3d8">aeMain</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>);</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    <a class="code" href="ae_8c.html#a13cfb20cd4911e655db460fedb5daf1d">aeDeleteEventLoop</a>(<a class="code" href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a>.<a class="code" href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">el</a>);</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;}</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;<span class="comment">/* The End */</span></div><div class="ttc" id="structredis_server_html_ae410e7aa29b3cb4a15ab178f573e6fa2"><div class="ttname"><a href="structredis_server.html#ae410e7aa29b3cb4a15ab178f573e6fa2">redisServer::cluster_slave_validity_factor</a></div><div class="ttdeci">int cluster_slave_validity_factor</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01229">server.h:1229</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a6191ede96ce40757b7eb73d4bcc597f0"><div class="ttname"><a href="structredis_mem_overhead.html#a6191ede96ce40757b7eb73d4bcc597f0">redisMemOverhead::allocator_frag</a></div><div class="ttdeci">float allocator_frag</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00868">server.h:868</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ad413cc014759c00757b5fda0d4c94c2e"><div class="ttname"><a href="structredis_mem_overhead.html#ad413cc014759c00757b5fda0d4c94c2e">redisMemOverhead::dataset_perc</a></div><div class="ttdeci">float dataset_perc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00864">server.h:864</a></div></div>
<div class="ttc" id="geo_8c_html_a543609a8c18d15f679a23355a8fb66f6"><div class="ttname"><a href="geo_8c.html#a543609a8c18d15f679a23355a8fb66f6">georadiusbymemberCommand</a></div><div class="ttdeci">void georadiusbymemberCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00681">geo.c:681</a></div></div>
<div class="ttc" id="server_8h_html_a547664770d2cec2d58d144a2f5afbbd8"><div class="ttname"><a href="server_8h.html#a547664770d2cec2d58d144a2f5afbbd8">CONFIG_DEFAULT_MIN_SLAVES_MAX_LAG</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MIN_SLAVES_MAX_LAG</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00150">server.h:150</a></div></div>
<div class="ttc" id="server_8h_html_acbe9368b6ceb2b55421bf34d4df808cf"><div class="ttname"><a href="server_8h.html#acbe9368b6ceb2b55421bf34d4df808cf">DISK_ERROR_TYPE_AOF</a></div><div class="ttdeci">#define DISK_ERROR_TYPE_AOF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01606">server.h:1606</a></div></div>
<div class="ttc" id="structredis_server_html_ac106a3df3840507040d96398c5872311"><div class="ttname"><a href="structredis_server.html#ac106a3df3840507040d96398c5872311">redisServer::aof_rewrite_perc</a></div><div class="ttdeci">int aof_rewrite_perc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01057">server.h:1057</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a988880d896f03571a137a828ef96531a"><div class="ttname"><a href="structredis_mem_overhead.html#a988880d896f03571a137a828ef96531a">redisMemOverhead::allocator_rss_bytes</a></div><div class="ttdeci">size_t allocator_rss_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00871">server.h:871</a></div></div>
<div class="ttc" id="structredis_server_html_af5cd250e4dc688a3d3db7ea6844efb8c"><div class="ttname"><a href="structredis_server.html#af5cd250e4dc688a3d3db7ea6844efb8c">redisServer::aof_load_truncated</a></div><div class="ttdeci">int aof_load_truncated</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01077">server.h:1077</a></div></div>
<div class="ttc" id="structredis_server_html_ac781bc597dbf0ec72337e6c648a55817"><div class="ttname"><a href="structredis_server.html#ac781bc597dbf0ec72337e6c648a55817">redisServer::cron_malloc_stats</a></div><div class="ttdeci">struct malloc_stats cron_malloc_stats</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01021">server.h:1021</a></div></div>
<div class="ttc" id="structredis_server_html_ac9f201a49ff1edc5864a68753ef8bf6d"><div class="ttname"><a href="structredis_server.html#ac9f201a49ff1edc5864a68753ef8bf6d">redisServer::expireCommand</a></div><div class="ttdeci">struct redisCommand * expireCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structredis_server_html_a873124c5659edc141c67aab7999e314a"><div class="ttname"><a href="structredis_server.html#a873124c5659edc141c67aab7999e314a">redisServer::hz</a></div><div class="ttdeci">int hz</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00936">server.h:936</a></div></div>
<div class="ttc" id="server_8h_html_a7b1d9cf5be21e4808da0c16f03155973"><div class="ttname"><a href="server_8h.html#a7b1d9cf5be21e4808da0c16f03155973">CMD_CALL_STATS</a></div><div class="ttdeci">#define CMD_CALL_STATS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00415">server.h:415</a></div></div>
<div class="ttc" id="server_8h_html_a3fb164a493199fe584c0f9a1f44d7896"><div class="ttname"><a href="server_8h.html#a3fb164a493199fe584c0f9a1f44d7896">DISK_ERROR_TYPE_NONE</a></div><div class="ttdeci">#define DISK_ERROR_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01608">server.h:1608</a></div></div>
<div class="ttc" id="structredis_server_html_ae6262935d09c243040d0a767dc4781d9"><div class="ttname"><a href="structredis_server.html#ae6262935d09c243040d0a767dc4781d9">redisServer::rdb_save_time_last</a></div><div class="ttdeci">time_t rdb_save_time_last</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01100">server.h:1100</a></div></div>
<div class="ttc" id="structredis_object_html"><div class="ttname"><a href="structredis_object.html">redisObject</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00603">server.h:603</a></div></div>
<div class="ttc" id="server_8h_html_a7bc03a080189821c8c88b31027281d4b"><div class="ttname"><a href="server_8h.html#a7bc03a080189821c8c88b31027281d4b">CONFIG_DEFAULT_ACTIVE_DEFRAG</a></div><div class="ttdeci">#define CONFIG_DEFAULT_ACTIVE_DEFRAG</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00161">server.h:161</a></div></div>
<div class="ttc" id="server_8c_html_ae3e53748117462645bfdc717830e9a00"><div class="ttname"><a href="server_8c.html#ae3e53748117462645bfdc717830e9a00">processCommand</a></div><div class="ttdeci">int processCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02539">server.c:2539</a></div></div>
<div class="ttc" id="structredis_server_html_a3ec18fc81887ca7248668fd8151956c3"><div class="ttname"><a href="structredis_server.html#a3ec18fc81887ca7248668fd8151956c3">redisServer::repl_slave_ignore_maxmemory</a></div><div class="ttdeci">int repl_slave_ignore_maxmemory</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01163">server.h:1163</a></div></div>
<div class="ttc" id="dict_8c_html_a8bfc6c2908c66772c09a1315c078bf06"><div class="ttname"><a href="dict_8c.html#a8bfc6c2908c66772c09a1315c078bf06">dictReleaseIterator</a></div><div class="ttdeci">void dictReleaseIterator(dictIterator *iter)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00597">dict.c:597</a></div></div>
<div class="ttc" id="multi_8c_html_a31af7ae891c458efa31333f98aa0129a"><div class="ttname"><a href="multi_8c.html#a31af7ae891c458efa31333f98aa0129a">multiCommand</a></div><div class="ttdeci">void multiCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00086">multi.c:86</a></div></div>
<div class="ttc" id="structredis_server_html_aa215648deded4376d85651aa4e999815"><div class="ttname"><a href="structredis_server.html#aa215648deded4376d85651aa4e999815">redisServer::repl_backlog_off</a></div><div class="ttdeci">long long repl_backlog_off</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01134">server.h:1134</a></div></div>
<div class="ttc" id="server_8h_html_a9d350e3ba0a6a560b3731f9cce78ca2a"><div class="ttname"><a href="server_8h.html#a9d350e3ba0a6a560b3731f9cce78ca2a">getrangeCommand</a></div><div class="ttdeci">void getrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00244">t_string.c:244</a></div></div>
<div class="ttc" id="server_8c_html_aba16001cc1e4c8d9a92c584492ea9a40"><div class="ttname"><a href="server_8c.html#aba16001cc1e4c8d9a92c584492ea9a40">redisOpArrayAppend</a></div><div class="ttdeci">int redisOpArrayAppend(redisOpArray *oa, struct redisCommand *cmd, int dbid, robj **argv, int argc, int target)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02241">server.c:2241</a></div></div>
<div class="ttc" id="server_8h_html_a819ad39aa4aef302c4421c3cd910252d"><div class="ttname"><a href="server_8h.html#a819ad39aa4aef302c4421c3cd910252d">CMD_SORT_FOR_SCRIPT</a></div><div class="ttdeci">#define CMD_SORT_FOR_SCRIPT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00213">server.h:213</a></div></div>
<div class="ttc" id="server_8h_html_ac1f765315b576de4c0ea2beb7e37ae02"><div class="ttname"><a href="server_8h.html#ac1f765315b576de4c0ea2beb7e37ae02">CONFIG_DEFAULT_LAZYFREE_LAZY_SERVER_DEL</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LAZYFREE_LAZY_SERVER_DEL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00159">server.h:159</a></div></div>
<div class="ttc" id="structredis_server_html_ad5efcac8b7288ed40db68e69b9ff306b"><div class="ttname"><a href="structredis_server.html#ad5efcac8b7288ed40db68e69b9ff306b">redisServer::stat_keyspace_misses</a></div><div class="ttdeci">long long stat_keyspace_misses</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01004">server.h:1004</a></div></div>
<div class="ttc" id="server_8h_html_a685b89e1976480e5eab98f110b12af93"><div class="ttname"><a href="server_8h.html#a685b89e1976480e5eab98f110b12af93">srandmemberCommand</a></div><div class="ttdeci">void srandmemberCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00749">t_set.c:749</a></div></div>
<div class="ttc" id="server_8h_html_a542fb79924ca427c866fd63632f60777"><div class="ttname"><a href="server_8h.html#a542fb79924ca427c866fd63632f60777">PROPAGATE_AOF</a></div><div class="ttdeci">#define PROPAGATE_AOF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00423">server.h:423</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a487e5c6040610ebb13a617cadfd2ffe1"><div class="ttname"><a href="structshared_objects_struct.html#a487e5c6040610ebb13a617cadfd2ffe1">sharedObjectsStruct::outofrangeerr</a></div><div class="ttdeci">robj * outofrangeerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_a407337e4d193cc8fc965938b7a247240"><div class="ttname"><a href="server_8h.html#a407337e4d193cc8fc965938b7a247240">CONFIG_DEFAULT_VERBOSITY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_VERBOSITY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00338">server.h:338</a></div></div>
<div class="ttc" id="pubsub_8c_html_abf8fab747aad35233c8ad6f2b537d691"><div class="ttname"><a href="pubsub_8c.html#abf8fab747aad35233c8ad6f2b537d691">freePubsubPattern</a></div><div class="ttdeci">void freePubsubPattern(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00036">pubsub.c:36</a></div></div>
<div class="ttc" id="geo_8c_html_a421ca0fe58969d4979d1dea40559b641"><div class="ttname"><a href="geo_8c.html#a421ca0fe58969d4979d1dea40559b641">geoposCommand</a></div><div class="ttdeci">void geoposCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00753">geo.c:753</a></div></div>
<div class="ttc" id="server_8h_html_ac6a3926cde6ff160a3fd378af151fa3a"><div class="ttname"><a href="server_8h.html#ac6a3926cde6ff160a3fd378af151fa3a">zscoreCommand</a></div><div class="ttdeci">void zscoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03074">t_zset.c:3074</a></div></div>
<div class="ttc" id="server_8c_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="server_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l04000">server.c:4000</a></div></div>
<div class="ttc" id="server_8h_html_a5327d118cf467e77d8bb0cebdce3c0ce"><div class="ttname"><a href="server_8h.html#a5327d118cf467e77d8bb0cebdce3c0ce">CMD_LOADING</a></div><div class="ttdeci">#define CMD_LOADING</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00214">server.h:214</a></div></div>
<div class="ttc" id="server_8h_html_abc22c5bbf656d114e74df1ab353c8906"><div class="ttname"><a href="server_8h.html#abc22c5bbf656d114e74df1ab353c8906">smoveCommand</a></div><div class="ttdeci">void smoveCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00318">t_set.c:318</a></div></div>
<div class="ttc" id="sentinel_8c_html_ad230f7009b18d03daae7ba2daec27222"><div class="ttname"><a href="sentinel_8c.html#ad230f7009b18d03daae7ba2daec27222">initSentinelConfig</a></div><div class="ttdeci">void initSentinelConfig(void)</div><div class="ttdef"><b>Definition:</b> <a href="sentinel_8c_source.html#l00460">sentinel.c:460</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ace2b062189925c36433d3a8e68062d6e"><div class="ttname"><a href="structredis_mem_overhead.html#ace2b062189925c36433d3a8e68062d6e">redisMemOverhead::clients_slaves</a></div><div class="ttdeci">size_t clients_slaves</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00856">server.h:856</a></div></div>
<div class="ttc" id="server_8h_html_a451c1542a74f0181600d043df3f1b19a"><div class="ttname"><a href="server_8h.html#a451c1542a74f0181600d043df3f1b19a">CLIENT_FORCE_AOF</a></div><div class="ttdeci">#define CLIENT_FORCE_AOF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00243">server.h:243</a></div></div>
<div class="ttc" id="structclient_html_ad1447518f4372828b8435ae82e48499e"><div class="ttname"><a href="structclient.html#ad1447518f4372828b8435ae82e48499e">client::argc</a></div><div class="ttdeci">int argc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00721">server.h:721</a></div></div>
<div class="ttc" id="structredis_server_html_a6997b24b6b724923db5756c39f5e0662"><div class="ttname"><a href="structredis_server.html#a6997b24b6b724923db5756c39f5e0662">redisServer::current_client</a></div><div class="ttdeci">client * current_client</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00975">server.h:975</a></div></div>
<div class="ttc" id="object_8c_html_a082ea922419a3d6fe58a9b369e89f359"><div class="ttname"><a href="object_8c.html#a082ea922419a3d6fe58a9b369e89f359">memoryCommand</a></div><div class="ttdeci">void memoryCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l01287">object.c:1287</a></div></div>
<div class="ttc" id="evict_8c_html_ac541840357c3d2acaf8b83b1d85fad02"><div class="ttname"><a href="evict_8c.html#ac541840357c3d2acaf8b83b1d85fad02">getLRUClock</a></div><div class="ttdeci">unsigned int getLRUClock(void)</div><div class="ttdef"><b>Definition:</b> <a href="evict_8c_source.html#l00070">evict.c:70</a></div></div>
<div class="ttc" id="structredis_server_html_a5f87bbf8bd892d1459c39ae55c19bdec"><div class="ttname"><a href="structredis_server.html#a5f87bbf8bd892d1459c39ae55c19bdec">redisServer::clients_waiting_acks</a></div><div class="ttdeci">list * clients_waiting_acks</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01180">server.h:1180</a></div></div>
<div class="ttc" id="structredis_server_html_a1e234838fd4211781e47a97ca8dd03cc"><div class="ttname"><a href="structredis_server.html#a1e234838fd4211781e47a97ca8dd03cc">redisServer::syslog_enabled</a></div><div class="ttdeci">int syslog_enabled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01119">server.h:1119</a></div></div>
<div class="ttc" id="structredis_server_html_aeb9ca9dc2e5a71a7d964e2389d48678f"><div class="ttname"><a href="structredis_server.html#aeb9ca9dc2e5a71a7d964e2389d48678f">redisServer::next_client_id</a></div><div class="ttdeci">uint64_t next_client_id</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00981">server.h:981</a></div></div>
<div class="ttc" id="networking_8c_html_a366061d66aea3d3d043f1a49af18ffcc"><div class="ttname"><a href="networking_8c.html#a366061d66aea3d3d043f1a49af18ffcc">addReplySubcommandSyntaxError</a></div><div class="ttdeci">void addReplySubcommandSyntaxError(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00628">networking.c:628</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a332bfc8ddfe9e7c0ecfbef5f85a9014a"><div class="ttname"><a href="structshared_objects_struct.html#a332bfc8ddfe9e7c0ecfbef5f85a9014a">sharedObjectsStruct::roslaveerr</a></div><div class="ttdeci">robj * roslaveerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_a51f312f9239789ab90069710fa720bf1"><div class="ttname"><a href="structredis_server.html#a51f312f9239789ab90069710fa720bf1">redisServer::stream_node_max_entries</a></div><div class="ttdeci">int64_t stream_node_max_entries</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01209">server.h:1209</a></div></div>
<div class="ttc" id="structredis_server_html_a0ee11cd40096c9b2be4753c10113db7d"><div class="ttname"><a href="structredis_server.html#a0ee11cd40096c9b2be4753c10113db7d">redisServer::lua_time_limit</a></div><div class="ttdeci">mstime_t lua_time_limit</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01247">server.h:1247</a></div></div>
<div class="ttc" id="server_8h_html_a549382a72b7490f18a44f03e2dbe5568"><div class="ttname"><a href="server_8h.html#a549382a72b7490f18a44f03e2dbe5568">CONFIG_DEFAULT_RDB_CHECKSUM</a></div><div class="ttdeci">#define CONFIG_DEFAULT_RDB_CHECKSUM</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00128">server.h:128</a></div></div>
<div class="ttc" id="bitops_8c_html_ab1ad23ed68457dde6acc8392449ddd23"><div class="ttname"><a href="bitops_8c.html#ab1ad23ed68457dde6acc8392449ddd23">bitposCommand</a></div><div class="ttdeci">void bitposCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00818">bitops.c:818</a></div></div>
<div class="ttc" id="server_8h_html_a077401d3a9f810d535c00725ef6c6532"><div class="ttname"><a href="server_8h.html#a077401d3a9f810d535c00725ef6c6532">SHUTDOWN_NOFLAGS</a></div><div class="ttdeci">#define SHUTDOWN_NOFLAGS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00407">server.h:407</a></div></div>
<div class="ttc" id="server_8h_html_a5496312872886690751d1e4a248026e9"><div class="ttname"><a href="server_8h.html#a5496312872886690751d1e4a248026e9">CONFIG_DEFAULT_REPL_PING_SLAVE_PERIOD</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_PING_SLAVE_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00107">server.h:107</a></div></div>
<div class="ttc" id="server_8h_html_a68661cd596afb7595059264beee63dc7"><div class="ttname"><a href="server_8h.html#a68661cd596afb7595059264beee63dc7">CONFIG_DEFAULT_MIN_SLAVES_TO_WRITE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MIN_SLAVES_TO_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00149">server.h:149</a></div></div>
<div class="ttc" id="server_8h_html_a746ad828ffb5e77f774223ae18849b09"><div class="ttname"><a href="server_8h.html#a746ad828ffb5e77f774223ae18849b09">brpoplpushCommand</a></div><div class="ttdeci">void brpoplpushCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00750">t_list.c:750</a></div></div>
<div class="ttc" id="structredis_server_html_a45229d2d3b593513143c5a9871a2be10"><div class="ttname"><a href="structredis_server.html#a45229d2d3b593513143c5a9871a2be10">redisServer::stat_evictedkeys</a></div><div class="ttdeci">long long stat_evictedkeys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01002">server.h:1002</a></div></div>
<div class="ttc" id="server_8c_html_ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8"><div class="ttname"><a href="server_8c.html#ad92fdd9d5f8f9dbf3a0e0ca9848b6eb8">shared</a></div><div class="ttdeci">struct sharedObjectsStruct shared</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00061">server.c:61</a></div></div>
<div class="ttc" id="replication_8c_html_a37d4584ae9eb714716d84482498a1fe6"><div class="ttname"><a href="replication_8c.html#a37d4584ae9eb714716d84482498a1fe6">clearReplicationId2</a></div><div class="ttdeci">void clearReplicationId2(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l01015">replication.c:1015</a></div></div>
<div class="ttc" id="server_8h_html_a6700d1c92ae982f7b80c74e743312a0f"><div class="ttname"><a href="server_8h.html#a6700d1c92ae982f7b80c74e743312a0f">zinterstoreCommand</a></div><div class="ttdeci">void zinterstoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02409">t_zset.c:2409</a></div></div>
<div class="ttc" id="structredis_server_html_aeae2d40a88ece004cc0fa4bc228077a8"><div class="ttname"><a href="structredis_server.html#aeae2d40a88ece004cc0fa4bc228077a8">redisServer::config_hz</a></div><div class="ttdeci">int config_hz</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00933">server.h:933</a></div></div>
<div class="ttc" id="structredis_server_html_a33ae086151bbbc7e1930cd04c3a58ed0"><div class="ttname"><a href="structredis_server.html#a33ae086151bbbc7e1930cd04c3a58ed0">redisServer::samples</a></div><div class="ttdeci">long long samples[STATS_METRIC_SAMPLES]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01031">server.h:1031</a></div></div>
<div class="ttc" id="server_8h_html_a38e65004c240be8a04ab492731c7da50"><div class="ttname"><a href="server_8h.html#a38e65004c240be8a04ab492731c7da50">CONFIG_DEFAULT_MAXMEMORY_SAMPLES</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MAXMEMORY_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00139">server.h:139</a></div></div>
<div class="ttc" id="structredis_server_html_a98ae4963dfd94a8a552ec143cbd04ccb"><div class="ttname"><a href="structredis_server.html#a98ae4963dfd94a8a552ec143cbd04ccb">redisServer::clients_paused</a></div><div class="ttdeci">int clients_paused</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00977">server.h:977</a></div></div>
<div class="ttc" id="server_8h_html_a11cc378e7778a830b41240578de3b204"><div class="ttname"><a href="server_8h.html#a11cc378e7778a830b41240578de3b204">serverPanic</a></div><div class="ttdeci">#define serverPanic(...)</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00457">server.h:457</a></div></div>
<div class="ttc" id="server_8c_html_afdc383c06704fe8b2095158efc389ebe"><div class="ttname"><a href="server_8c.html#afdc383c06704fe8b2095158efc389ebe">replScriptCacheDictType</a></div><div class="ttdeci">dictType replScriptCacheDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00721">server.c:721</a></div></div>
<div class="ttc" id="server_8h_html_add7103c0a8afae48dd4d6912675dfa1e"><div class="ttname"><a href="server_8h.html#add7103c0a8afae48dd4d6912675dfa1e">sunionCommand</a></div><div class="ttdeci">void sunionCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l01091">t_set.c:1091</a></div></div>
<div class="ttc" id="structredis_server_html_a5e2c040b399186b37bf289ea387c55e2"><div class="ttname"><a href="structredis_server.html#a5e2c040b399186b37bf289ea387c55e2">redisServer::set_max_intset_entries</a></div><div class="ttdeci">size_t set_max_intset_entries</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01204">server.h:1204</a></div></div>
<div class="ttc" id="structredis_server_html_a185612136a48819bd307781e32e7b3a9"><div class="ttname"><a href="structredis_server.html#a185612136a48819bd307781e32e7b3a9">redisServer::repl_state</a></div><div class="ttdeci">int repl_state</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01153">server.h:1153</a></div></div>
<div class="ttc" id="db_8c_html_a30e4f224a138ea036bb4ecc024796be0"><div class="ttname"><a href="db_8c.html#a30e4f224a138ea036bb4ecc024796be0">shutdownCommand</a></div><div class="ttdeci">void shutdownCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00835">db.c:835</a></div></div>
<div class="ttc" id="server_8c_html_ada0bb13a034f3ab2ac57be6e27f1bf7e"><div class="ttname"><a href="server_8c.html#ada0bb13a034f3ab2ac57be6e27f1bf7e">dictSdsCaseHash</a></div><div class="ttdeci">uint64_t dictSdsCaseHash(const void *key)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00524">server.c:524</a></div></div>
<div class="ttc" id="server_8h_html_a7e9c728f228e1c82ae1e22173375abcf"><div class="ttname"><a href="server_8h.html#a7e9c728f228e1c82ae1e22173375abcf">CMD_READONLY</a></div><div class="ttdeci">#define CMD_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00206">server.h:206</a></div></div>
<div class="ttc" id="pubsub_8c_html_acb5aa2733bb6ecb41cf96fa248454697"><div class="ttname"><a href="pubsub_8c.html#acb5aa2733bb6ecb41cf96fa248454697">punsubscribeCommand</a></div><div class="ttdeci">void punsubscribeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00305">pubsub.c:305</a></div></div>
<div class="ttc" id="db_8c_html_a0c7c021fa3d11ac6772baed2c41f96af"><div class="ttname"><a href="db_8c.html#a0c7c021fa3d11ac6772baed2c41f96af">existsCommand</a></div><div class="ttdeci">void existsCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00490">db.c:490</a></div></div>
<div class="ttc" id="module_8c_html_a5f5b1031fe4849990705d6e879d126db"><div class="ttname"><a href="module_8c.html#a5f5b1031fe4849990705d6e879d126db">moduleBlockedClientPipeReadable</a></div><div class="ttdeci">void moduleBlockedClientPipeReadable(aeEventLoop *el, int fd, void *privdata, int mask)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l03472">module.c:3472</a></div></div>
<div class="ttc" id="server_8h_html_a479b60032f8da6d8ad72e1a9d0809950"><div class="ttname"><a href="server_8h.html#a479b60032f8da6d8ad72e1a9d0809950">LL_VERBOSE</a></div><div class="ttdeci">#define LL_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00334">server.h:334</a></div></div>
<div class="ttc" id="release_8c_html_a84fd80c6f31a9376af5fc92bf5565044"><div class="ttname"><a href="release_8c.html#a84fd80c6f31a9376af5fc92bf5565044">redisBuildId</a></div><div class="ttdeci">uint64_t redisBuildId(void)</div><div class="ttdef"><b>Definition:</b> <a href="release_8c_source.html#l00048">release.c:48</a></div></div>
<div class="ttc" id="zmalloc_8c_html_a5e22556717107aec50cc1d5659777cf2"><div class="ttname"><a href="zmalloc_8c.html#a5e22556717107aec50cc1d5659777cf2">zmalloc_set_oom_handler</a></div><div class="ttdeci">void zmalloc_set_oom_handler(void(*oom_handler)(size_t))</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00222">zmalloc.c:222</a></div></div>
<div class="ttc" id="server_8h_html_a5226306fbcebcb6d5d02e0fef3c213c2"><div class="ttname"><a href="server_8h.html#a5226306fbcebcb6d5d02e0fef3c213c2">AOF_OFF</a></div><div class="ttdeci">#define AOF_OFF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00223">server.h:223</a></div></div>
<div class="ttc" id="server_8h_html_a2f9e724916a15106d599c92f2008aa3d"><div class="ttname"><a href="server_8h.html#a2f9e724916a15106d599c92f2008aa3d">xgroupCommand</a></div><div class="ttdeci">void xgroupCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01690">t_stream.c:1690</a></div></div>
<div class="ttc" id="scripting_8c_html_a9dc47cd5c53302d2fe6132c86241c4ee"><div class="ttname"><a href="scripting_8c.html#a9dc47cd5c53302d2fe6132c86241c4ee">ldbKillForkedSessions</a></div><div class="ttdeci">void ldbKillForkedSessions(void)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01756">scripting.c:1756</a></div></div>
<div class="ttc" id="server_8h_html_aa6529c6ba7143b1ec4aa15d8a96b2154"><div class="ttname"><a href="server_8h.html#aa6529c6ba7143b1ec4aa15d8a96b2154">CONFIG_DEFAULT_LAZYFREE_LAZY_EVICTION</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LAZYFREE_LAZY_EVICTION</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00157">server.h:157</a></div></div>
<div class="ttc" id="server_8h_html_abc5ff12d4e9b662f85d2cb11a0220926"><div class="ttname"><a href="server_8h.html#abc5ff12d4e9b662f85d2cb11a0220926">CONFIG_DEFAULT_DBNUM</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DBNUM</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00089">server.h:89</a></div></div>
<div class="ttc" id="cluster_8c_html_a5cc13836303811438b984932f6fc1b1b"><div class="ttname"><a href="cluster_8c.html#a5cc13836303811438b984932f6fc1b1b">migrateCommand</a></div><div class="ttdeci">void migrateCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05061">cluster.c:5061</a></div></div>
<div class="ttc" id="networking_8c_html_aef8354683c0ba556a8a8d6a909059950"><div class="ttname"><a href="networking_8c.html#aef8354683c0ba556a8a8d6a909059950">addReplyBulk</a></div><div class="ttdeci">void addReplyBulk(client *c, robj *obj)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00567">networking.c:567</a></div></div>
<div class="ttc" id="evict_8c_html_a8b0e1c4c2c1ccf81e6deb77ae8b974b9"><div class="ttname"><a href="evict_8c.html#a8b0e1c4c2c1ccf81e6deb77ae8b974b9">freeMemoryGetNotCountedMemory</a></div><div class="ttdeci">size_t freeMemoryGetNotCountedMemory(void)</div><div class="ttdef"><b>Definition:</b> <a href="evict_8c_source.html#l00352">evict.c:352</a></div></div>
<div class="ttc" id="server_8h_html_af3bada72076c951a9d5959e73456635a"><div class="ttname"><a href="server_8h.html#af3bada72076c951a9d5959e73456635a">CONFIG_DEFAULT_AOF_FILENAME</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_FILENAME</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00142">server.h:142</a></div></div>
<div class="ttc" id="structredis_server_html_a9153369284c79d6fcf505c5882ec29ab"><div class="ttname"><a href="structredis_server.html#a9153369284c79d6fcf505c5882ec29ab">redisServer::stat_peak_memory</a></div><div class="ttdeci">size_t stat_peak_memory</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01010">server.h:1010</a></div></div>
<div class="ttc" id="server_8h_html_a6b3768a4d2dfb3ac580b8d999baa9350"><div class="ttname"><a href="server_8h.html#a6b3768a4d2dfb3ac580b8d999baa9350">LL_RAW</a></div><div class="ttdeci">#define LL_RAW</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00337">server.h:337</a></div></div>
<div class="ttc" id="cluster_8c_html_aaf79a84dde9b9c47378566b043bcf4b6"><div class="ttname"><a href="cluster_8c.html#aaf79a84dde9b9c47378566b043bcf4b6">getNodeByQuery</a></div><div class="ttdeci">clusterNode * getNodeByQuery(client *c, struct redisCommand *cmd, robj **argv, int argc, int *hashslot, int *error_code)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05443">cluster.c:5443</a></div></div>
<div class="ttc" id="server_8c_html_ae708fe45da0f49045474eef570a9c94b"><div class="ttname"><a href="server_8c.html#ae708fe45da0f49045474eef570a9c94b">clusterNodesDictType</a></div><div class="ttdeci">dictType clusterNodesDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00675">server.c:675</a></div></div>
<div class="ttc" id="structredis_command_html_a90feddf92dfbfdf42f3a4165c996f6f0"><div class="ttname"><a href="structredis_command.html#a90feddf92dfbfdf42f3a4165c996f6f0">redisCommand::proc</a></div><div class="ttdeci">redisCommandProc * proc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01292">server.h:1292</a></div></div>
<div class="ttc" id="server_8h_html_a9b588e3803fff7fe515f20d7bc4aa8e6"><div class="ttname"><a href="server_8h.html#a9b588e3803fff7fe515f20d7bc4aa8e6">CONFIG_DEFAULT_AOF_NO_FSYNC_ON_REWRITE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_NO_FSYNC_ON_REWRITE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00143">server.h:143</a></div></div>
<div class="ttc" id="dict_8c_html_aa912fa4994a15258d2ba9fd8879e41a9"><div class="ttname"><a href="dict_8c.html#aa912fa4994a15258d2ba9fd8879e41a9">dictRehashMilliseconds</a></div><div class="ttdeci">int dictRehashMilliseconds(dict *d, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00241">dict.c:241</a></div></div>
<div class="ttc" id="db_8c_html_a8fa1120506d50175d9faec8e9807bff3"><div class="ttname"><a href="db_8c.html#a8fa1120506d50175d9faec8e9807bff3">flushallCommand</a></div><div class="ttdeci">void flushallCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00438">db.c:438</a></div></div>
<div class="ttc" id="aof_8c_html_a7c8ba26d0e1ea2c7c34d6b2bca2d4a53"><div class="ttname"><a href="aof_8c.html#a7c8ba26d0e1ea2c7c34d6b2bca2d4a53">loadAppendOnlyFile</a></div><div class="ttdeci">int loadAppendOnlyFile(char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l00673">aof.c:673</a></div></div>
<div class="ttc" id="server_8h_html_a47ec8c745e852fad013870aa64e84188"><div class="ttname"><a href="server_8h.html#a47ec8c745e852fad013870aa64e84188">MAX_CLIENTS_PER_CLOCK_TICK</a></div><div class="ttdeci">#define MAX_CLIENTS_PER_CLOCK_TICK</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00085">server.h:85</a></div></div>
<div class="ttc" id="server_8h_html_aed693b3a9cdfc05cf5ab7551a8c86fbe"><div class="ttname"><a href="server_8h.html#aed693b3a9cdfc05cf5ab7551a8c86fbe">REPL_STATE_CONNECTED</a></div><div class="ttdeci">#define REPL_STATE_CONNECTED</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00304">server.h:304</a></div></div>
<div class="ttc" id="server_8c_html_a7e6e3fe0b3bdb1bb7eb4d9e511054fa6"><div class="ttname"><a href="server_8c.html#a7e6e3fe0b3bdb1bb7eb4d9e511054fa6">alsoPropagate</a></div><div class="ttdeci">void alsoPropagate(struct redisCommand *cmd, int dbid, robj **argv, int argc, int target)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02332">server.c:2332</a></div></div>
<div class="ttc" id="server_8h_html_a3d9bb3651349ff303085988d23117fd1"><div class="ttname"><a href="server_8h.html#a3d9bb3651349ff303085988d23117fd1">hdelCommand</a></div><div class="ttdeci">void hdelCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00702">t_hash.c:702</a></div></div>
<div class="ttc" id="structshared_objects_struct_html"><div class="ttname"><a href="structshared_objects_struct.html">sharedObjectsStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00779">server.h:779</a></div></div>
<div class="ttc" id="server_8h_html_a17ef8e7bb0aa527068a2667fc9c77a40"><div class="ttname"><a href="server_8h.html#a17ef8e7bb0aa527068a2667fc9c77a40">decrbyCommand</a></div><div class="ttdeci">void decrbyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00394">t_string.c:394</a></div></div>
<div class="ttc" id="replication_8c_html_a952c0abc9ec545a730536aa35c5a1ee2"><div class="ttname"><a href="replication_8c.html#a952c0abc9ec545a730536aa35c5a1ee2">replicationScriptCacheInit</a></div><div class="ttdeci">void replicationScriptCacheInit(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02299">replication.c:2299</a></div></div>
<div class="ttc" id="server_8c_html_aace7644d1202bfaf862c6bb1eeacb119"><div class="ttname"><a href="server_8c.html#aace7644d1202bfaf862c6bb1eeacb119">echoCommand</a></div><div class="ttdeci">void echoCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02930">server.c:2930</a></div></div>
<div class="ttc" id="server_8h_html_a2ba95c8ef6fe16363dde79a7c31ab363"><div class="ttname"><a href="server_8h.html#a2ba95c8ef6fe16363dde79a7c31ab363">zlexcountCommand</a></div><div class="ttdeci">void zlexcountCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02800">t_zset.c:2800</a></div></div>
<div class="ttc" id="server_8h_html_ada38427ad2d0c09875081868a53cc51f"><div class="ttname"><a href="server_8h.html#ada38427ad2d0c09875081868a53cc51f">SLAVE_STATE_SEND_BULK</a></div><div class="ttdeci">#define SLAVE_STATE_SEND_BULK</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00312">server.h:312</a></div></div>
<div class="ttc" id="cluster_8h_html_acb94b0516dcfb9814e13dfe97f3ad6b1"><div class="ttname"><a href="cluster_8h.html#acb94b0516dcfb9814e13dfe97f3ad6b1">CLUSTER_DEFAULT_NODE_TIMEOUT</a></div><div class="ttdeci">#define CLUSTER_DEFAULT_NODE_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00016">cluster.h:16</a></div></div>
<div class="ttc" id="structcluster_node_html"><div class="ttname"><a href="structcluster_node.html">clusterNode</a></div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00116">cluster.h:116</a></div></div>
<div class="ttc" id="db_8c_html_a47c215eb1db99539269323838e931217"><div class="ttname"><a href="db_8c.html#a47c215eb1db99539269323838e931217">evalGetKeys</a></div><div class="ttdeci">int * evalGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01277">db.c:1277</a></div></div>
<div class="ttc" id="structredis_server_html_a99f21f2f011d0994a31c20057fe79a72"><div class="ttname"><a href="structredis_server.html#a99f21f2f011d0994a31c20057fe79a72">redisServer::cluster</a></div><div class="ttdeci">struct clusterState * cluster</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01227">server.h:1227</a></div></div>
<div class="ttc" id="structredis_server_html_ad4fa040bb64cd95458a6d5c959daa380"><div class="ttname"><a href="structredis_server.html#ad4fa040bb64cd95458a6d5c959daa380">redisServer::rpopCommand</a></div><div class="ttdeci">struct redisCommand * rpopCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structredis_server_html_afa0e3099c4f00ad746e97d1bc7685f95"><div class="ttname"><a href="structredis_server.html#afa0e3099c4f00ad746e97d1bc7685f95">redisServer::bindaddr_count</a></div><div class="ttdeci">int bindaddr_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00963">server.h:963</a></div></div>
<div class="ttc" id="structredis_server_html_a187b658f1e959f3f46ec5caa22b782cd"><div class="ttname"><a href="structredis_server.html#a187b658f1e959f3f46ec5caa22b782cd">redisServer::aof_delayed_fsync</a></div><div class="ttdeci">unsigned long aof_delayed_fsync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01072">server.h:1072</a></div></div>
<div class="ttc" id="redis-check-rdb_8c_html_a1f3b6698ca8496c05e0c9c0d56cb36ac"><div class="ttname"><a href="redis-check-rdb_8c.html#a1f3b6698ca8496c05e0c9c0d56cb36ac">keys</a></div><div class="ttdeci">unsigned long keys</div><div class="ttdef"><b>Definition:</b> <a href="redis-check-rdb_8c_source.html#l00043">redis-check-rdb.c:43</a></div></div>
<div class="ttc" id="server_8h_html_a6ba1a78f4a4238c9f31b103562690e80"><div class="ttname"><a href="server_8h.html#a6ba1a78f4a4238c9f31b103562690e80">zrevrankCommand</a></div><div class="ttdeci">void zrevrankCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03111">t_zset.c:3111</a></div></div>
<div class="ttc" id="rdb_8c_html_a3ff628b60acf9fd10c77c462417e4d98"><div class="ttname"><a href="rdb_8c.html#a3ff628b60acf9fd10c77c462417e4d98">saveCommand</a></div><div class="ttdeci">void saveCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l02386">rdb.c:2386</a></div></div>
<div class="ttc" id="version_8h_html_a357a0d302ef7fbb42bf2db0632b9f7fe"><div class="ttname"><a href="version_8h.html#a357a0d302ef7fbb42bf2db0632b9f7fe">REDIS_VERSION</a></div><div class="ttdeci">#define REDIS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="version_8h_source.html#l00001">version.h:1</a></div></div>
<div class="ttc" id="server_8h_html_ab85c155ec2652313a561af139fdb5575"><div class="ttname"><a href="server_8h.html#ab85c155ec2652313a561af139fdb5575">CONFIG_DEFAULT_TCP_BACKLOG</a></div><div class="ttdeci">#define CONFIG_DEFAULT_TCP_BACKLOG</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00087">server.h:87</a></div></div>
<div class="ttc" id="zmalloc_8c_html_a16542aef4062c19198acc9231406bd0f"><div class="ttname"><a href="zmalloc_8c.html#a16542aef4062c19198acc9231406bd0f">zmalloc_used_memory</a></div><div class="ttdeci">size_t zmalloc_used_memory(void)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00216">zmalloc.c:216</a></div></div>
<div class="ttc" id="server_8h_html_a65f143a5917f723c20d209d56f2f909c"><div class="ttname"><a href="server_8h.html#a65f143a5917f723c20d209d56f2f909c">hincrbyCommand</a></div><div class="ttdeci">void hincrbyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00559">t_hash.c:559</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ab748e7839b4db27ca41f802fb4deb3e1"><div class="ttname"><a href="structredis_mem_overhead.html#ab748e7839b4db27ca41f802fb4deb3e1">redisMemOverhead::peak_perc</a></div><div class="ttdeci">float peak_perc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00865">server.h:865</a></div></div>
<div class="ttc" id="structredis_server_html_a4db97e483512d8067f0527e75efac10b"><div class="ttname"><a href="structredis_server.html#a4db97e483512d8067f0527e75efac10b">redisServer::rdb_save_incremental_fsync</a></div><div class="ttdeci">int rdb_save_incremental_fsync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01074">server.h:1074</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a2000cee710e5ba495f272e3f5a76a06d"><div class="ttname"><a href="structshared_objects_struct.html#a2000cee710e5ba495f272e3f5a76a06d">sharedObjectsStruct::emptybulk</a></div><div class="ttdeci">robj * emptybulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_a5b4e7d9ab981c793773240b967e69b35"><div class="ttname"><a href="structredis_server.html#a5b4e7d9ab981c793773240b967e69b35">redisServer::last_sample_count</a></div><div class="ttdeci">long long last_sample_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01030">server.h:1030</a></div></div>
<div class="ttc" id="networking_8c_html_ac47c2cfd2a6d524fcbfefa9a18e3a9a3"><div class="ttname"><a href="networking_8c.html#ac47c2cfd2a6d524fcbfefa9a18e3a9a3">addReply</a></div><div class="ttdeci">void addReply(client *c, robj *obj)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00297">networking.c:297</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_adf30e1960aaa30991c8cc6f5d1b8f1f5"><div class="ttname"><a href="structshared_objects_struct.html#adf30e1960aaa30991c8cc6f5d1b8f1f5">sharedObjectsStruct::ok</a></div><div class="ttdeci">robj * ok</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="db_8c_html_a8bf3b20b3cdff120e5e34249d659b5fd"><div class="ttname"><a href="db_8c.html#a8bf3b20b3cdff120e5e34249d659b5fd">keysCommand</a></div><div class="ttdeci">void keysCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00530">db.c:530</a></div></div>
<div class="ttc" id="server_8c_html_ac3e56d0fcda06804db751a0a519f22cd"><div class="ttname"><a href="server_8c.html#ac3e56d0fcda06804db751a0a519f22cd">checkForSentinelMode</a></div><div class="ttdeci">int checkForSentinelMode(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03837">server.c:3837</a></div></div>
<div class="ttc" id="server_8c_html_ac350c29f63271e4d5766b02997733738"><div class="ttname"><a href="server_8c.html#ac350c29f63271e4d5766b02997733738">dictSdsKeyCaseCompare</a></div><div class="ttdeci">int dictSdsKeyCaseCompare(void *privdata, const void *key1, const void *key2)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00485">server.c:485</a></div></div>
<div class="ttc" id="server_8c_html_acb612fbd4d2085a8dad448365f5c6d61"><div class="ttname"><a href="server_8c.html#acb612fbd4d2085a8dad448365f5c6d61">R_NegInf</a></div><div class="ttdeci">double R_NegInf</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00067">server.c:67</a></div></div>
<div class="ttc" id="structredis_server_html_a7d1f8a07982c1093e48e8dcb120fcf2f"><div class="ttname"><a href="structredis_server.html#a7d1f8a07982c1093e48e8dcb120fcf2f">redisServer::dirty</a></div><div class="ttdeci">long long dirty</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01090">server.h:1090</a></div></div>
<div class="ttc" id="replication_8c_html_a61c860bc8a13a585b4864358faf305f3"><div class="ttname"><a href="replication_8c.html#a61c860bc8a13a585b4864358faf305f3">replicationCacheMasterUsingMyself</a></div><div class="ttdeci">void replicationCacheMasterUsingMyself(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02181">replication.c:2181</a></div></div>
<div class="ttc" id="server_8h_html_a3ca848c94df18641ac372c58fca0e236"><div class="ttname"><a href="server_8h.html#a3ca848c94df18641ac372c58fca0e236">CMD_CALL_PROPAGATE_AOF</a></div><div class="ttdeci">#define CMD_CALL_PROPAGATE_AOF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00416">server.h:416</a></div></div>
<div class="ttc" id="structredis_server_html_a03c39bc68938b334e9c4722f34ca097d"><div class="ttname"><a href="structredis_server.html#a03c39bc68938b334e9c4722f34ca097d">redisServer::child_info_pipe</a></div><div class="ttdeci">int child_info_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01109">server.h:1109</a></div></div>
<div class="ttc" id="structredis_server_html_a7dfb65e4690d5e3ddf6689e030c624c4"><div class="ttname"><a href="structredis_server.html#a7dfb65e4690d5e3ddf6689e030c624c4">redisServer::maxmemory_samples</a></div><div class="ttdeci">int maxmemory_samples</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01186">server.h:1186</a></div></div>
<div class="ttc" id="server_8h_html_a314eacfa28e22254ee8cc05f2b257281"><div class="ttname"><a href="server_8h.html#a314eacfa28e22254ee8cc05f2b257281">CONFIG_DEFAULT_MAXMEMORY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MAXMEMORY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00138">server.h:138</a></div></div>
<div class="ttc" id="server_8c_html_acdbdba9cef241dcf2f3b6104db42229a"><div class="ttname"><a href="server_8c.html#acdbdba9cef241dcf2f3b6104db42229a">redisOutOfMemoryHandler</a></div><div class="ttdeci">void redisOutOfMemoryHandler(size_t allocation_size)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03882">server.c:3882</a></div></div>
<div class="ttc" id="structredis_server_html_ae0efb08252c56c2e14f08027b256b705"><div class="ttname"><a href="structredis_server.html#ae0efb08252c56c2e14f08027b256b705">redisServer::bindaddr</a></div><div class="ttdeci">char * bindaddr[CONFIG_BINDADDR_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00962">server.h:962</a></div></div>
<div class="ttc" id="blocked_8c_html_a0a72a8d4066dc960cc7807ce1e57cb3d"><div class="ttname"><a href="blocked_8c.html#a0a72a8d4066dc960cc7807ce1e57cb3d">handleClientsBlockedOnKeys</a></div><div class="ttdeci">void handleClientsBlockedOnKeys(void)</div><div class="ttdef"><b>Definition:</b> <a href="blocked_8c_source.html#l00246">blocked.c:246</a></div></div>
<div class="ttc" id="sds_8c_html_a8633545cba735b390afad7bf8b5a9833"><div class="ttname"><a href="sds_8c.html#a8633545cba735b390afad7bf8b5a9833">sdsAllocSize</a></div><div class="ttdeci">size_t sdsAllocSize(sds s)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00295">sds.c:295</a></div></div>
<div class="ttc" id="structredis_server_html_ab46270ee7e6852c96471da3aae7a3a02"><div class="ttname"><a href="structredis_server.html#ab46270ee7e6852c96471da3aae7a3a02">redisServer::ipfd_count</a></div><div class="ttdeci">int ipfd_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00967">server.h:967</a></div></div>
<div class="ttc" id="server_8h_html_a7e92e38a9fe5f713cace24d63184273e"><div class="ttname"><a href="server_8h.html#a7e92e38a9fe5f713cace24d63184273e">CMD_CALL_FULL</a></div><div class="ttdeci">#define CMD_CALL_FULL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00419">server.h:419</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a18e82c193f4ef2d57caf0eb697679596"><div class="ttname"><a href="structshared_objects_struct.html#a18e82c193f4ef2d57caf0eb697679596">sharedObjectsStruct::punsubscribebulk</a></div><div class="ttdeci">robj * punsubscribebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_db_html"><div class="ttname"><a href="structredis_db.html">redisDb</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00636">server.h:636</a></div></div>
<div class="ttc" id="structredis_server_html_a1a4fb70d4b90d928d032e1be232c4566"><div class="ttname"><a href="structredis_server.html#a1a4fb70d4b90d928d032e1be232c4566">redisServer::lfu_log_factor</a></div><div class="ttdeci">int lfu_log_factor</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01187">server.h:1187</a></div></div>
<div class="ttc" id="server_8h_html_a950a6acbe9809f9e3dc541e8175b7b44"><div class="ttname"><a href="server_8h.html#a950a6acbe9809f9e3dc541e8175b7b44">PROTO_SHARED_SELECT_CMDS</a></div><div class="ttdeci">#define PROTO_SHARED_SELECT_CMDS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00093">server.h:93</a></div></div>
<div class="ttc" id="structredis_server_html_abb5ed4e0e888f5378c38ea3667cec956"><div class="ttname"><a href="structredis_server.html#abb5ed4e0e888f5378c38ea3667cec956">redisServer::active_defrag_cycle_max</a></div><div class="ttdeci">int active_defrag_cycle_max</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01044">server.h:1044</a></div></div>
<div class="ttc" id="structredis_server_html_a88f7d67b743022ba822fd5c7b6ea6964"><div class="ttname"><a href="structredis_server.html#a88f7d67b743022ba822fd5c7b6ea6964">redisServer::stat_active_defrag_key_misses</a></div><div class="ttdeci">long long stat_active_defrag_key_misses</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01008">server.h:1008</a></div></div>
<div class="ttc" id="server_8h_html_a21661a6f516b424b56400fabb5ed3600"><div class="ttname"><a href="server_8h.html#a21661a6f516b424b56400fabb5ed3600">zremrangebylexCommand</a></div><div class="ttdeci">void zremrangebylexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01804">t_zset.c:1804</a></div></div>
<div class="ttc" id="structredis_server_html_a07a4e0373efa220e37c571db92057029"><div class="ttname"><a href="structredis_server.html#a07a4e0373efa220e37c571db92057029">redisServer::get_ack_from_slaves</a></div><div class="ttdeci">int get_ack_from_slaves</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01181">server.h:1181</a></div></div>
<div class="ttc" id="server_8c_html_ae0246c16fba26f65782c698060d394b6"><div class="ttname"><a href="server_8c.html#ae0246c16fba26f65782c698060d394b6">lookupCommand</a></div><div class="ttdeci">struct redisCommand * lookupCommand(sds name)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02273">server.c:2273</a></div></div>
<div class="ttc" id="structredis_db_html_ae22579f2281ceefa3099ad028f0c6260"><div class="ttname"><a href="structredis_db.html#ae22579f2281ceefa3099ad028f0c6260">redisDb::defrag_later</a></div><div class="ttdeci">list * defrag_later</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00644">server.h:644</a></div></div>
<div class="ttc" id="object_8c_html_af4babb9f5d489b16aebeafedfa0ee244"><div class="ttname"><a href="object_8c.html#af4babb9f5d489b16aebeafedfa0ee244">objectCommand</a></div><div class="ttdeci">void objectCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l01238">object.c:1238</a></div></div>
<div class="ttc" id="server_8c_html_a096a91daf3af60dbaccb4de8aa3ca7b2"><div class="ttname"><a href="server_8c.html#a096a91daf3af60dbaccb4de8aa3ca7b2">nolocks_localtime</a></div><div class="ttdeci">void nolocks_localtime(struct tm *tmp, time_t t, time_t tz, int dst)</div><div class="ttdef"><b>Definition:</b> <a href="localtime_8c_source.html#l00059">localtime.c:59</a></div></div>
<div class="ttc" id="server_8h_html_a9aa38ab80a6a76dcb9edc0c24332d65b"><div class="ttname"><a href="server_8h.html#a9aa38ab80a6a76dcb9edc0c24332d65b">hincrbyfloatCommand</a></div><div class="ttdeci">void hincrbyfloatCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00594">t_hash.c:594</a></div></div>
<div class="ttc" id="server_8c_html_aeef51ee58c906c0eb51ccb8fc523337f"><div class="ttname"><a href="server_8c.html#aeef51ee58c906c0eb51ccb8fc523337f">objectKeyHeapPointerValueDictType</a></div><div class="ttdeci">dictType objectKeyHeapPointerValueDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00582">server.c:582</a></div></div>
<div class="ttc" id="server_8c_html_a4e8fb07372f94fa524c781db04cf3b20"><div class="ttname"><a href="server_8c.html#a4e8fb07372f94fa524c781db04cf3b20">preventCommandPropagation</a></div><div class="ttdeci">void preventCommandPropagation(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02359">server.c:2359</a></div></div>
<div class="ttc" id="server_8c_html_adc3302e933fbaf19d474d99cd0bba5f3"><div class="ttname"><a href="server_8c.html#adc3302e933fbaf19d474d99cd0bba5f3">ClientsPeakMemInput</a></div><div class="ttdeci">size_t ClientsPeakMemInput[CLIENTS_PEAK_MEM_USAGE_SLOTS]</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00904">server.c:904</a></div></div>
<div class="ttc" id="structredis_server_html_a32598da1cf7182e823ebf3d440038455"><div class="ttname"><a href="structredis_server.html#a32598da1cf7182e823ebf3d440038455">redisServer::shutdown_asap</a></div><div class="ttdeci">int shutdown_asap</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00942">server.h:942</a></div></div>
<div class="ttc" id="server_8h_html_ab343786c44a1885885a1ac254b724317"><div class="ttname"><a href="server_8h.html#ab343786c44a1885885a1ac254b724317">CONFIG_DEFAULT_LFU_LOG_FACTOR</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LFU_LOG_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00140">server.h:140</a></div></div>
<div class="ttc" id="adlist_8h_html_afde0ab079f934670e82119b43120e94b"><div class="ttname"><a href="adlist_8h.html#afde0ab079f934670e82119b43120e94b">listLength</a></div><div class="ttdeci">#define listLength(l)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00057">adlist.h:57</a></div></div>
<div class="ttc" id="structredis_server_html_a2073b64fc7793a03e76ed750a46dd25e"><div class="ttname"><a href="structredis_server.html#a2073b64fc7793a03e76ed750a46dd25e">redisServer::exec_argv</a></div><div class="ttdeci">char ** exec_argv</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00931">server.h:931</a></div></div>
<div class="ttc" id="server_8h_html_abcea50457e3de849eab11d0ba5d81d08"><div class="ttname"><a href="server_8h.html#abcea50457e3de849eab11d0ba5d81d08">CONFIG_MIN_RESERVED_FDS</a></div><div class="ttdeci">#define CONFIG_MIN_RESERVED_FDS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00154">server.h:154</a></div></div>
<div class="ttc" id="rdb_8c_html_a7903dab7103f5acfd30d5f27fdc8cf60"><div class="ttname"><a href="rdb_8c.html#a7903dab7103f5acfd30d5f27fdc8cf60">rdbSave</a></div><div class="ttdeci">int rdbSave(char *filename, rdbSaveInfo *rsi)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l01219">rdb.c:1219</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_af5c9958d2aef90751637972126ea441d"><div class="ttname"><a href="structshared_objects_struct.html#af5c9958d2aef90751637972126ea441d">sharedObjectsStruct::noreplicaserr</a></div><div class="ttdeci">robj * noreplicaserr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_ad76d83545056feccc5ff262ed29488c6"><div class="ttname"><a href="structredis_server.html#ad76d83545056feccc5ff262ed29488c6">redisServer::repl_backlog_histlen</a></div><div class="ttdeci">long long repl_backlog_histlen</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01131">server.h:1131</a></div></div>
<div class="ttc" id="server_8h_html_a473aaa83d89c486a3f5431be9aaef783"><div class="ttname"><a href="server_8h.html#a473aaa83d89c486a3f5431be9aaef783">zrangebyscoreCommand</a></div><div class="ttdeci">void zrangebyscoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02715">t_zset.c:2715</a></div></div>
<div class="ttc" id="structredis_server_html_a96b12a6138b1998b70ecb702f40735e8"><div class="ttname"><a href="structredis_server.html#a96b12a6138b1998b70ecb702f40735e8">redisServer::list_max_ziplist_size</a></div><div class="ttdeci">int list_max_ziplist_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01211">server.h:1211</a></div></div>
<div class="ttc" id="structclient_html_af59577028441c0e9c8361e112706e6c5"><div class="ttname"><a href="structclient.html#af59577028441c0e9c8361e112706e6c5">client::woff</a></div><div class="ttdeci">long long woff</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00756">server.h:756</a></div></div>
<div class="ttc" id="adlist_8h_html_af84cae230e7180ebcda1e2736fce9f65"><div class="ttname"><a href="adlist_8h.html#af84cae230e7180ebcda1e2736fce9f65">listNodeValue</a></div><div class="ttdeci">#define listNodeValue(n)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00062">adlist.h:62</a></div></div>
<div class="ttc" id="structredis_server_html_a67834c6012b1d5912befb42573b3138f"><div class="ttname"><a href="structredis_server.html#a67834c6012b1d5912befb42573b3138f">redisServer::stat_active_defrag_key_hits</a></div><div class="ttdeci">long long stat_active_defrag_key_hits</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01007">server.h:1007</a></div></div>
<div class="ttc" id="server_8c_html_a1f8ea185286a42da74f3cb080e90fff1"><div class="ttname"><a href="server_8c.html#a1f8ea185286a42da74f3cb080e90fff1">dictObjKeyCompare</a></div><div class="ttdeci">int dictObjKeyCompare(void *privdata, const void *key1, const void *key2)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00508">server.c:508</a></div></div>
<div class="ttc" id="structredis_server_html_a08654d4e800966822ca48a08cf86deac"><div class="ttname"><a href="structredis_server.html#a08654d4e800966822ca48a08cf86deac">redisServer::magic</a></div><div class="ttdeci">unsigned long long magic</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01113">server.h:1113</a></div></div>
<div class="ttc" id="config_8c_html_a9d52f141a2c829da9047255e87482a16"><div class="ttname"><a href="config_8c.html#a9d52f141a2c829da9047255e87482a16">appendServerSaveParams</a></div><div class="ttdeci">void appendServerSaveParams(time_t seconds, int changes)</div><div class="ttdef"><b>Definition:</b> <a href="config_8c_source.html#l00145">config.c:145</a></div></div>
<div class="ttc" id="config_8c_html_af90f93ddb3d2f22813cd4d72f960ee3c"><div class="ttname"><a href="config_8c.html#af90f93ddb3d2f22813cd4d72f960ee3c">clientBufferLimitsDefaults</a></div><div class="ttdeci">clientBufferLimitsConfig clientBufferLimitsDefaults[CLIENT_TYPE_OBUF_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="config_8c_source.html#l00095">config.c:95</a></div></div>
<div class="ttc" id="server_8h_html_ab42b23884952f9887529b6efbf0d4ac6"><div class="ttname"><a href="server_8h.html#ab42b23884952f9887529b6efbf0d4ac6">CONFIG_DEFAULT_SLAVE_SERVE_STALE_DATA</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_SERVE_STALE_DATA</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00132">server.h:132</a></div></div>
<div class="ttc" id="structredis_server_html_a6e58fa4905fbaedc73bcc1c128f34f68"><div class="ttname"><a href="structredis_server.html#a6e58fa4905fbaedc73bcc1c128f34f68">redisServer::aof_selected_db</a></div><div class="ttdeci">int aof_selected_db</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01066">server.h:1066</a></div></div>
<div class="ttc" id="structlist_node_html"><div class="ttname"><a href="structlist_node.html">listNode</a></div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00036">adlist.h:36</a></div></div>
<div class="ttc" id="server_8h_html_ac8f41381de6a73069064befd66482b57"><div class="ttname"><a href="server_8h.html#ac8f41381de6a73069064befd66482b57">setexCommand</a></div><div class="ttdeci">void setexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00147">t_string.c:147</a></div></div>
<div class="ttc" id="structredis_server_html_abe6a14c37b00e7e4ace95e04b1c2ded7"><div class="ttname"><a href="structredis_server.html#abe6a14c37b00e7e4ace95e04b1c2ded7">redisServer::repl_down_since</a></div><div class="ttdeci">time_t repl_down_since</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01164">server.h:1164</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_abc68d5d846335b9ca10130c196268b67"><div class="ttname"><a href="structshared_objects_struct.html#abc68d5d846335b9ca10130c196268b67">sharedObjectsStruct::slowscripterr</a></div><div class="ttdeci">robj * slowscripterr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_aa58c7aa9d28d027fbcecca9fc4443e40"><div class="ttname"><a href="server_8h.html#aa58c7aa9d28d027fbcecca9fc4443e40">hlenCommand</a></div><div class="ttdeci">void hlenCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00730">t_hash.c:730</a></div></div>
<div class="ttc" id="server_8c_html_acb9a010d69d43d85f665f6238bfc3164"><div class="ttname"><a href="server_8c.html#acb9a010d69d43d85f665f6238bfc3164">monitorCommand</a></div><div class="ttdeci">void monitorCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03650">server.c:3650</a></div></div>
<div class="ttc" id="server_8h_html_a6ac9f9314c1788f7cc8549ea40d4efb1"><div class="ttname"><a href="server_8h.html#a6ac9f9314c1788f7cc8549ea40d4efb1">hscanCommand</a></div><div class="ttdeci">void hscanCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00817">t_hash.c:817</a></div></div>
<div class="ttc" id="object_8c_html_a58bf6fb802750d04c587b4d13a2f3c0a"><div class="ttname"><a href="object_8c.html#a58bf6fb802750d04c587b4d13a2f3c0a">createStringObject</a></div><div class="ttdeci">robj * createStringObject(const char *ptr, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00119">object.c:119</a></div></div>
<div class="ttc" id="structredis_server_html_a99c6b6e30b43c077eb30507d7c1d0813"><div class="ttname"><a href="structredis_server.html#a99c6b6e30b43c077eb30507d7c1d0813">redisServer::lruclock</a></div><div class="ttdeci">unsigned int lruclock</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00941">server.h:941</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a55aac59c6e764de00683477c4a760ed2"><div class="ttname"><a href="structshared_objects_struct.html#a55aac59c6e764de00683477c4a760ed2">sharedObjectsStruct::subscribebulk</a></div><div class="ttdeci">robj * subscribebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a0d713384337b0a7271f1208cd5f10795"><div class="ttname"><a href="server_8c.html#a0d713384337b0a7271f1208cd5f10795">restartServer</a></div><div class="ttdeci">int restartServer(int flags, mstime_t delay)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01746">server.c:1746</a></div></div>
<div class="ttc" id="bitops_8c_html_a21071498ba2aeb06395aee8293e7e527"><div class="ttname"><a href="bitops_8c.html#a21071498ba2aeb06395aee8293e7e527">getbitCommand</a></div><div class="ttdeci">void getbitCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00564">bitops.c:564</a></div></div>
<div class="ttc" id="server_8c_html_aa006daaf11f1e2e45a6ababaf463212b"><div class="ttname"><a href="server_8c.html#aa006daaf11f1e2e45a6ababaf463212b">environ</a></div><div class="ttdeci">char ** environ</div></div>
<div class="ttc" id="server_8h_html_a2c47065029081b2deb64cf58fa07459f"><div class="ttname"><a href="server_8h.html#a2c47065029081b2deb64cf58fa07459f">rpopCommand</a></div><div class="ttdeci">void rpopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00394">t_list.c:394</a></div></div>
<div class="ttc" id="structredis_server_html_a15d293cf510cec1fc1fe3310ea74506e"><div class="ttname"><a href="structredis_server.html#a15d293cf510cec1fc1fe3310ea74506e">redisServer::repl_transfer_lastio</a></div><div class="ttdeci">time_t repl_transfer_lastio</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01160">server.h:1160</a></div></div>
<div class="ttc" id="structredis_server_html_a3d9da20a74aeccf932f6dccaef7075a6"><div class="ttname"><a href="structredis_server.html#a3d9da20a74aeccf932f6dccaef7075a6">redisServer::master_initial_offset</a></div><div class="ttdeci">long long master_initial_offset</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01173">server.h:1173</a></div></div>
<div class="ttc" id="aof_8c_html_aca13d71d381248c8a1ef6caeb82c9244"><div class="ttname"><a href="aof_8c.html#aca13d71d381248c8a1ef6caeb82c9244">feedAppendOnlyFile</a></div><div class="ttdeci">void feedAppendOnlyFile(struct redisCommand *cmd, int dictid, robj **argv, int argc)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l00555">aof.c:555</a></div></div>
<div class="ttc" id="server_8c_html_a0a74d6229ebb2e89cd8d282bb2d57cd2"><div class="ttname"><a href="server_8c.html#a0a74d6229ebb2e89cd8d282bb2d57cd2">R_Nan</a></div><div class="ttdeci">double R_Nan</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00067">server.c:67</a></div></div>
<div class="ttc" id="server_8h_html_a49cf2ef5d30cb3b0e51cc801342c11d3"><div class="ttname"><a href="server_8h.html#a49cf2ef5d30cb3b0e51cc801342c11d3">zcountCommand</a></div><div class="ttdeci">void zcountCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02723">t_zset.c:2723</a></div></div>
<div class="ttc" id="server_8h_html_a2f51c1df6c64bff1fc4156bbab9557b5"><div class="ttname"><a href="server_8h.html#a2f51c1df6c64bff1fc4156bbab9557b5">LIMIT_PENDING_QUERYBUF</a></div><div class="ttdeci">#define LIMIT_PENDING_QUERYBUF</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00192">server.h:192</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a8e86d7d4a75a99a34dbd2a92d4b72f7b"><div class="ttname"><a href="structshared_objects_struct.html#a8e86d7d4a75a99a34dbd2a92d4b72f7b">sharedObjectsStruct::crlf</a></div><div class="ttdeci">robj * crlf</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_a2cfe978a155a9359c774048dd502afc3"><div class="ttname"><a href="structredis_server.html#a2cfe978a155a9359c774048dd502afc3">redisServer::stat_active_defrag_misses</a></div><div class="ttdeci">long long stat_active_defrag_misses</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01006">server.h:1006</a></div></div>
<div class="ttc" id="server_8h_html_a21029b37e9d0139bd20c77751e99795a"><div class="ttname"><a href="server_8h.html#a21029b37e9d0139bd20c77751e99795a">sinterstoreCommand</a></div><div class="ttdeci">void sinterstoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00923">t_set.c:923</a></div></div>
<div class="ttc" id="server_8h_html_a6ee9ed603f975d0d2b6ae44f1907565f"><div class="ttname"><a href="server_8h.html#a6ee9ed603f975d0d2b6ae44f1907565f">CMD_CALL_PROPAGATE</a></div><div class="ttdeci">#define CMD_CALL_PROPAGATE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00418">server.h:418</a></div></div>
<div class="ttc" id="ae_8h_html_aa16dcf7effdf8f8df97f51b1cb51a9df"><div class="ttname"><a href="ae_8h.html#aa16dcf7effdf8f8df97f51b1cb51a9df">AE_ERR</a></div><div class="ttdeci">#define AE_ERR</div><div class="ttdef"><b>Definition:</b> <a href="ae_8h_source.html#l00039">ae.h:39</a></div></div>
<div class="ttc" id="structclient_html_a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9"><div class="ttname"><a href="structclient.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">client::argv</a></div><div class="ttdeci">robj ** argv</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00722">server.h:722</a></div></div>
<div class="ttc" id="networking_8c_html_a34d1a0858eea45e7d588959840490a7d"><div class="ttname"><a href="networking_8c.html#a34d1a0858eea45e7d588959840490a7d">freeClient</a></div><div class="ttdeci">void freeClient(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00829">networking.c:829</a></div></div>
<div class="ttc" id="server_8c_html_aa0eb79342e9715fd0886aa33c657409d"><div class="ttname"><a href="server_8c.html#aa0eb79342e9715fd0886aa33c657409d">propagate</a></div><div class="ttdeci">void propagate(struct redisCommand *cmd, int dbid, robj **argv, int argc, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02311">server.c:2311</a></div></div>
<div class="ttc" id="structredis_server_html_a1c3272cd13cdd1159cf7a804264b6d46"><div class="ttname"><a href="structredis_server.html#a1c3272cd13cdd1159cf7a804264b6d46">redisServer::loading_start_time</a></div><div class="ttdeci">time_t loading_start_time</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00987">server.h:987</a></div></div>
<div class="ttc" id="dict_8h_html_aa6e4917a6a32fdf47180e03ed8969e02"><div class="ttname"><a href="dict_8h.html#aa6e4917a6a32fdf47180e03ed8969e02">dictIsRehashing</a></div><div class="ttdeci">#define dictIsRehashing(d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00148">dict.h:148</a></div></div>
<div class="ttc" id="scripting_8c_html_ad44734ccd422e1268dd69670cde0d1bc"><div class="ttname"><a href="scripting_8c.html#ad44734ccd422e1268dd69670cde0d1bc">evalShaCommand</a></div><div class="ttdeci">void evalShaCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01468">scripting.c:1468</a></div></div>
<div class="ttc" id="networking_8c_html_a581521b1a7fce1f3bc7f4794bcb58eab"><div class="ttname"><a href="networking_8c.html#a581521b1a7fce1f3bc7f4794bcb58eab">addReplyBulkLongLong</a></div><div class="ttdeci">void addReplyBulkLongLong(client *c, long long ll)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00597">networking.c:597</a></div></div>
<div class="ttc" id="structredis_server_html_ad3d5e16b8c8e1f62d71cf49c41c89b9d"><div class="ttname"><a href="structredis_server.html#ad3d5e16b8c8e1f62d71cf49c41c89b9d">redisServer::rdb_child_pid</a></div><div class="ttdeci">pid_t rdb_child_pid</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01092">server.h:1092</a></div></div>
<div class="ttc" id="structredis_server_html_a6da0c59bbc902ce083758c4498893a65"><div class="ttname"><a href="structredis_server.html#a6da0c59bbc902ce083758c4498893a65">redisServer::active_defrag_max_scan_fields</a></div><div class="ttdeci">unsigned long active_defrag_max_scan_fields</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01045">server.h:1045</a></div></div>
<div class="ttc" id="server_8h_html_a69e4a8fdb26588e1028deb20fd51424a"><div class="ttname"><a href="server_8h.html#a69e4a8fdb26588e1028deb20fd51424a">CMD_CALL_PROPAGATE_REPL</a></div><div class="ttdeci">#define CMD_CALL_PROPAGATE_REPL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00417">server.h:417</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a74ff42ea3b15dd3271cf5e060e68d2fd"><div class="ttname"><a href="structshared_objects_struct.html#a74ff42ea3b15dd3271cf5e060e68d2fd">sharedObjectsStruct::lpush</a></div><div class="ttdeci">robj * lpush</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_ae1066bde6904041087bdf3efa2bde1e7"><div class="ttname"><a href="server_8c.html#ae1066bde6904041087bdf3efa2bde1e7">pingCommand</a></div><div class="ttdeci">void pingCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02907">server.c:2907</a></div></div>
<div class="ttc" id="networking_8c_html_ada74196bbcb069635697ca0d3183e183"><div class="ttname"><a href="networking_8c.html#ada74196bbcb069635697ca0d3183e183">getClientOutputBufferMemoryUsage</a></div><div class="ttdeci">unsigned long getClientOutputBufferMemoryUsage(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l02019">networking.c:2019</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a336652c82ce06dac863197d50697ffe2"><div class="ttname"><a href="structshared_objects_struct.html#a336652c82ce06dac863197d50697ffe2">sharedObjectsStruct::emptyscan</a></div><div class="ttdeci">robj * emptyscan</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structrdb_save_info_html_aaceb90ef64847700ff5b9c91df9d7bf5"><div class="ttname"><a href="structrdb_save_info.html#aaceb90ef64847700ff5b9c91df9d7bf5">rdbSaveInfo::repl_id_is_set</a></div><div class="ttdeci">int repl_id_is_set</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00895">server.h:895</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_add3893894b8fb0a0f7d3a4c182ef4e9e"><div class="ttname"><a href="structshared_objects_struct.html#add3893894b8fb0a0f7d3a4c182ef4e9e">sharedObjectsStruct::psubscribebulk</a></div><div class="ttdeci">robj * psubscribebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a1cc981bc44bbef251951374538c489fd"><div class="ttname"><a href="server_8c.html#a1cc981bc44bbef251951374538c489fd">dictEncObjKeyCompare</a></div><div class="ttdeci">int dictEncObjKeyCompare(void *privdata, const void *key1, const void *key2)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00528">server.c:528</a></div></div>
<div class="ttc" id="db_8c_html_a19e7751e41c41f29de69cf2cdedd3b2f"><div class="ttname"><a href="db_8c.html#a19e7751e41c41f29de69cf2cdedd3b2f">delCommand</a></div><div class="ttdeci">void delCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00480">db.c:480</a></div></div>
<div class="ttc" id="zmalloc_8c_html_ac9df23b6d142ed3a10bfea258759a3ff"><div class="ttname"><a href="zmalloc_8c.html#ac9df23b6d142ed3a10bfea258759a3ff">zmalloc_get_rss</a></div><div class="ttdeci">size_t zmalloc_get_rss(void)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00294">zmalloc.c:294</a></div></div>
<div class="ttc" id="structredis_db_html_acf93a40c69ba9e3938f50aa3b1087abc"><div class="ttname"><a href="structredis_db.html#acf93a40c69ba9e3938f50aa3b1087abc">redisDb::watched_keys</a></div><div class="ttdeci">dict * watched_keys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00641">server.h:641</a></div></div>
<div class="ttc" id="structredis_db_html_a439ca8f8cd0c2a19b8d2e0fe0044160d"><div class="ttname"><a href="structredis_db.html#a439ca8f8cd0c2a19b8d2e0fe0044160d">redisDb::blocking_keys</a></div><div class="ttdeci">dict * blocking_keys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00639">server.h:639</a></div></div>
<div class="ttc" id="structredis_server_html_a4546e03b0256d4d50b71681b6cd45f52"><div class="ttname"><a href="structredis_server.html#a4546e03b0256d4d50b71681b6cd45f52">redisServer::aof_buf</a></div><div class="ttdeci">sds aof_buf</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01064">server.h:1064</a></div></div>
<div class="ttc" id="latency_8h_html_a77922ab34035890c90f98831a9071359"><div class="ttname"><a href="latency_8h.html#a77922ab34035890c90f98831a9071359">latencyAddSampleIfNeeded</a></div><div class="ttdeci">#define latencyAddSampleIfNeeded(event, var)</div><div class="ttdef"><b>Definition:</b> <a href="latency_8h_source.html#l00084">latency.h:84</a></div></div>
<div class="ttc" id="server_8h_html_a694b5ed5268bee8c50cc5b38fbec99ce"><div class="ttname"><a href="server_8h.html#a694b5ed5268bee8c50cc5b38fbec99ce">RDB_SAVE_INFO_INIT</a></div><div class="ttdeci">#define RDB_SAVE_INFO_INIT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00900">server.h:900</a></div></div>
<div class="ttc" id="server_8c_html_aafd0e9fb24b81530f828fd4ec609eedd"><div class="ttname"><a href="server_8c.html#aafd0e9fb24b81530f828fd4ec609eedd">dictObjectDestructor</a></div><div class="ttdeci">void dictObjectDestructor(void *privdata, void *val)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00493">server.c:493</a></div></div>
<div class="ttc" id="networking_8c_html_ad30dc7b4a28c489b672535b1a47c7612"><div class="ttname"><a href="networking_8c.html#ad30dc7b4a28c489b672535b1a47c7612">clientsArePaused</a></div><div class="ttdeci">int clientsArePaused(void)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l02177">networking.c:2177</a></div></div>
<div class="ttc" id="server_8h_html_a356d1b1e39a75671cc55fdaf64be3a85"><div class="ttname"><a href="server_8h.html#a356d1b1e39a75671cc55fdaf64be3a85">CONFIG_DEFAULT_AOF_REWRITE_INCREMENTAL_FSYNC</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_REWRITE_INCREMENTAL_FSYNC</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00147">server.h:147</a></div></div>
<div class="ttc" id="server_8h_html_ad24e9bc40b2e7ebcb22efaca39b0f4ee"><div class="ttname"><a href="server_8h.html#ad24e9bc40b2e7ebcb22efaca39b0f4ee">lpushCommand</a></div><div class="ttdeci">void lpushCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00226">t_list.c:226</a></div></div>
<div class="ttc" id="structredis_server_html_aca3e40a81aabd234727f99625efdd84c"><div class="ttname"><a href="structredis_server.html#aca3e40a81aabd234727f99625efdd84c">redisServer::repl_syncio_timeout</a></div><div class="ttdeci">int repl_syncio_timeout</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01152">server.h:1152</a></div></div>
<div class="ttc" id="server_8h_html_ae34bdafb8c6d3cc58fc6b319e623b604"><div class="ttname"><a href="server_8h.html#ae34bdafb8c6d3cc58fc6b319e623b604">SUPERVISED_UPSTART</a></div><div class="ttdeci">#define SUPERVISED_UPSTART</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00344">server.h:344</a></div></div>
<div class="ttc" id="server_8c_html_a3807ad9bc88bdbbf3d7e02e214d56d02"><div class="ttname"><a href="server_8c.html#a3807ad9bc88bdbbf3d7e02e214d56d02">databasesCron</a></div><div class="ttdeci">void databasesCron(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01000">server.c:1000</a></div></div>
<div class="ttc" id="server_8h_html_af6b151c9dced28e94c19479197113a83"><div class="ttname"><a href="server_8h.html#af6b151c9dced28e94c19479197113a83">AOF_ON</a></div><div class="ttdeci">#define AOF_ON</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00224">server.h:224</a></div></div>
<div class="ttc" id="server_8h_html_a503ad979164a52f0f5e2a63e4c7da3a0"><div class="ttname"><a href="server_8h.html#a503ad979164a52f0f5e2a63e4c7da3a0">CLIENT_BLOCKED</a></div><div class="ttdeci">#define CLIENT_BLOCKED</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00232">server.h:232</a></div></div>
<div class="ttc" id="db_8c_html_ae1c2d1b29aae61e4ee80b6e026239668"><div class="ttname"><a href="db_8c.html#ae1c2d1b29aae61e4ee80b6e026239668">selectCommand</a></div><div class="ttdeci">void selectCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00500">db.c:500</a></div></div>
<div class="ttc" id="server_8h_html_a522e62025050d3c5e38754dd89bff308"><div class="ttname"><a href="server_8h.html#a522e62025050d3c5e38754dd89bff308">xreadCommand</a></div><div class="ttdeci">void xreadCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01320">t_stream.c:1320</a></div></div>
<div class="ttc" id="server_8h_html_a63842e277a2ccef80f42cbae07c9f5d8"><div class="ttname"><a href="server_8h.html#a63842e277a2ccef80f42cbae07c9f5d8">OBJ_HASH_MAX_ZIPLIST_VALUE</a></div><div class="ttdeci">#define OBJ_HASH_MAX_ZIPLIST_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00360">server.h:360</a></div></div>
<div class="ttc" id="networking_8c_html_aff850095b7516e77667d7a8396c17e9a"><div class="ttname"><a href="networking_8c.html#aff850095b7516e77667d7a8396c17e9a">addReplyErrorFormat</a></div><div class="ttdeci">void addReplyErrorFormat(client *c, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00388">networking.c:388</a></div></div>
<div class="ttc" id="server_8h_html_ad0681f6bc16125fa278c2e1e1405d624"><div class="ttname"><a href="server_8h.html#ad0681f6bc16125fa278c2e1e1405d624">xdelCommand</a></div><div class="ttdeci">void xdelCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l02293">t_stream.c:2293</a></div></div>
<div class="ttc" id="module_8c_html_a07cab1398067dfd4635997b40d30074d"><div class="ttname"><a href="module_8c.html#a07cab1398067dfd4635997b40d30074d">moduleInitModulesSystem</a></div><div class="ttdeci">void moduleInitModulesSystem(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l04653">module.c:4653</a></div></div>
<div class="ttc" id="server_8h_html_a0ff1c70665289eef5bc6f530c8fecf0a"><div class="ttname"><a href="server_8h.html#a0ff1c70665289eef5bc6f530c8fecf0a">getsetCommand</a></div><div class="ttdeci">void getsetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00176">t_string.c:176</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a0e982a0e14543ef6e17073a6d4afe191"><div class="ttname"><a href="structredis_mem_overhead.html#a0e982a0e14543ef6e17073a6d4afe191">redisMemOverhead::startup_allocated</a></div><div class="ttdeci">size_t startup_allocated</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00854">server.h:854</a></div></div>
<div class="ttc" id="server_8h_html_a24a132a96a693133fc057a491080aebf"><div class="ttname"><a href="server_8h.html#a24a132a96a693133fc057a491080aebf">CONFIG_DEFAULT_LFU_DECAY_TIME</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LFU_DECAY_TIME</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00141">server.h:141</a></div></div>
<div class="ttc" id="server_8c_html_a8e2fb79c351be966917f2cf717ed3543"><div class="ttname"><a href="server_8c.html#a8e2fb79c351be966917f2cf717ed3543">mstime</a></div><div class="ttdeci">mstime_t mstime(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00437">server.c:437</a></div></div>
<div class="ttc" id="server_8h_html_a86d6a82bc81e718079728c3cb6c8c5b4"><div class="ttname"><a href="server_8h.html#a86d6a82bc81e718079728c3cb6c8c5b4">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_BUS_PORT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_CLUSTER_ANNOUNCE_BUS_PORT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00119">server.h:119</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ac63a0c4f6733ddf45a05ffe9069213fd"><div class="ttname"><a href="structshared_objects_struct.html#ac63a0c4f6733ddf45a05ffe9069213fd">sharedObjectsStruct::rpoplpush</a></div><div class="ttdeci">robj * rpoplpush</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="aof_8c_html_aa2e5539b40259eac08d1612822ebcf9c"><div class="ttname"><a href="aof_8c.html#aa2e5539b40259eac08d1612822ebcf9c">rewriteAppendOnlyFileBackground</a></div><div class="ttdeci">int rewriteAppendOnlyFileBackground(void)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l01532">aof.c:1532</a></div></div>
<div class="ttc" id="server_8c_html_aa06cb110ba3d25c232fd1241979cbd3e"><div class="ttname"><a href="server_8c.html#aa06cb110ba3d25c232fd1241979cbd3e">incrementallyRehash</a></div><div class="ttdeci">int incrementallyRehash(int dbid)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00755">server.c:755</a></div></div>
<div class="ttc" id="server_8c_html_ae485b0f848c19fbea1b4673053553028"><div class="ttname"><a href="server_8c.html#ae485b0f848c19fbea1b4673053553028">timeCommand</a></div><div class="ttdeci">void timeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02934">server.c:2934</a></div></div>
<div class="ttc" id="ae_8h_html_a7a9a2162d007d09739955b4e55c65bf3"><div class="ttname"><a href="ae_8h.html#a7a9a2162d007d09739955b4e55c65bf3">AE_READABLE</a></div><div class="ttdeci">#define AE_READABLE</div><div class="ttdef"><b>Definition:</b> <a href="ae_8h_source.html#l00042">ae.h:42</a></div></div>
<div class="ttc" id="structclient_html_ade2d291613f86ad81abd9b32a331c97d"><div class="ttname"><a href="structclient.html#ade2d291613f86ad81abd9b32a331c97d">client::bpop</a></div><div class="ttdeci">blockingState bpop</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00755">server.h:755</a></div></div>
<div class="ttc" id="ae_8c_html_ab2fbbafc0540b40bcc9a13477c512e4d"><div class="ttname"><a href="ae_8c.html#ab2fbbafc0540b40bcc9a13477c512e4d">aeSetBeforeSleepProc</a></div><div class="ttdeci">void aeSetBeforeSleepProc(aeEventLoop *eventLoop, aeBeforeSleepProc *beforesleep)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00509">ae.c:509</a></div></div>
<div class="ttc" id="structredis_server_html_a6b891047e7daea5f7d603218e0249b7e"><div class="ttname"><a href="structredis_server.html#a6b891047e7daea5f7d603218e0249b7e">redisServer::cluster_announce_bus_port</a></div><div class="ttdeci">int cluster_announce_bus_port</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01236">server.h:1236</a></div></div>
<div class="ttc" id="server_8h_html_a8801ccf1a973c132e7aaca2a55dadbc2"><div class="ttname"><a href="server_8h.html#a8801ccf1a973c132e7aaca2a55dadbc2">sdiffstoreCommand</a></div><div class="ttdeci">void sdiffstoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l01103">t_set.c:1103</a></div></div>
<div class="ttc" id="structredis_server_html_a6b2bc45f4e219cd3c7f1dbc717ad88ea"><div class="ttname"><a href="structredis_server.html#a6b2bc45f4e219cd3c7f1dbc717ad88ea">redisServer::watchdog_period</a></div><div class="ttdeci">int watchdog_period</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01272">server.h:1272</a></div></div>
<div class="ttc" id="structredis_server_html_ae4a6e447ef5fbc09a9765fa2da7c51d7"><div class="ttname"><a href="structredis_server.html#ae4a6e447ef5fbc09a9765fa2da7c51d7">redisServer::syslog_ident</a></div><div class="ttdeci">char * syslog_ident</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01120">server.h:1120</a></div></div>
<div class="ttc" id="structredis_server_html_a0fd4dc9c26fc4a70bfbfe3e97a6c4295"><div class="ttname"><a href="structredis_server.html#a0fd4dc9c26fc4a70bfbfe3e97a6c4295">redisServer::activerehashing</a></div><div class="ttdeci">int activerehashing</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00943">server.h:943</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a5bb2a1ee7cb13a791280fa3f6f4fb49d"><div class="ttname"><a href="structshared_objects_struct.html#a5bb2a1ee7cb13a791280fa3f6f4fb49d">sharedObjectsStruct::err</a></div><div class="ttdeci">robj * err</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="bio_8h_html"><div class="ttname"><a href="bio_8h.html">bio.h</a></div></div>
<div class="ttc" id="defrag_8c_html_ae8a66e28d3034eb320bc9ac3df9e4a1f"><div class="ttname"><a href="defrag_8c.html#ae8a66e28d3034eb320bc9ac3df9e4a1f">activeDefragCycle</a></div><div class="ttdeci">void activeDefragCycle(void)</div><div class="ttdef"><b>Definition:</b> <a href="defrag_8c_source.html#l01136">defrag.c:1136</a></div></div>
<div class="ttc" id="ae_8c_html_a06456e32738f0ccb40a4bb7f7f6c6f75"><div class="ttname"><a href="ae_8c.html#a06456e32738f0ccb40a4bb7f7f6c6f75">aeCreateEventLoop</a></div><div class="ttdeci">aeEventLoop * aeCreateEventLoop(int setsize)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00063">ae.c:63</a></div></div>
<div class="ttc" id="zmalloc_8h_html_a374c6d7cf6c9817e1243093e03df7319"><div class="ttname"><a href="zmalloc_8h.html#a374c6d7cf6c9817e1243093e03df7319">ZMALLOC_LIB</a></div><div class="ttdeci">#define ZMALLOC_LIB</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8h_source.html#l00065">zmalloc.h:65</a></div></div>
<div class="ttc" id="server_8h_html_ae21dc0d9c0dcdefa14ca1054c48f252f"><div class="ttname"><a href="server_8h.html#ae21dc0d9c0dcdefa14ca1054c48f252f">CMD_FAST</a></div><div class="ttdeci">#define CMD_FAST</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00218">server.h:218</a></div></div>
<div class="ttc" id="server_8h_html_a68ad9c6e5f817d58fa51c1b2e88e83e0"><div class="ttname"><a href="server_8h.html#a68ad9c6e5f817d58fa51c1b2e88e83e0">CONFIG_REPL_SYNCIO_TIMEOUT</a></div><div class="ttdeci">#define CONFIG_REPL_SYNCIO_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00321">server.h:321</a></div></div>
<div class="ttc" id="structsaveparam_html_a428798c15a127930411bd3af43e3cdc7"><div class="ttname"><a href="structsaveparam.html#a428798c15a127930411bd3af43e3cdc7">saveparam::changes</a></div><div class="ttdeci">int changes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00770">server.h:770</a></div></div>
<div class="ttc" id="structredis_server_html_a75c9adc095d3d8e9670249063267c1e4"><div class="ttname"><a href="structredis_server.html#a75c9adc095d3d8e9670249063267c1e4">redisServer::cluster_require_full_coverage</a></div><div class="ttdeci">int cluster_require_full_coverage</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01230">server.h:1230</a></div></div>
<div class="ttc" id="structredis_server_html_a41f877042e8ddc732d1aecbf4e2a472b"><div class="ttname"><a href="structredis_server.html#a41f877042e8ddc732d1aecbf4e2a472b">redisServer::xgroupCommand</a></div><div class="ttdeci">struct redisCommand * xgroupCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="sds_8h_html_ad69abac3df4532879db9642c95f5ef6f"><div class="ttname"><a href="sds_8h.html#ad69abac3df4532879db9642c95f5ef6f">sds</a></div><div class="ttdeci">char * sds</div><div class="ttdef"><b>Definition:</b> <a href="sds_8h_source.html#l00043">sds.h:43</a></div></div>
<div class="ttc" id="rdb_8c_html_a17fb24fcbbe9ff8228fa7b24430fea7b"><div class="ttname"><a href="rdb_8c.html#a17fb24fcbbe9ff8228fa7b24430fea7b">rdbRemoveTempFile</a></div><div class="ttdeci">void rdbRemoveTempFile(pid_t childpid)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l01335">rdb.c:1335</a></div></div>
<div class="ttc" id="structredis_server_html_ac6c18a3bf3ec4d85777ca2db7d4a9b47"><div class="ttname"><a href="structredis_server.html#ac6c18a3bf3ec4d85777ca2db7d4a9b47">redisServer::pubsub_channels</a></div><div class="ttdeci">dict * pubsub_channels</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01219">server.h:1219</a></div></div>
<div class="ttc" id="networking_8c_html_a1212877b63a97d8b0e209e441d998704"><div class="ttname"><a href="networking_8c.html#a1212877b63a97d8b0e209e441d998704">addReplyHelp</a></div><div class="ttdeci">void addReplyHelp(client *c, const char **help)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00609">networking.c:609</a></div></div>
<div class="ttc" id="structredis_server_html_a7f900ab67c16f474082be15af9380a78"><div class="ttname"><a href="structredis_server.html#a7f900ab67c16f474082be15af9380a78">redisServer::maxmemory</a></div><div class="ttdeci">unsigned long long maxmemory</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01184">server.h:1184</a></div></div>
<div class="ttc" id="server_8h_html_a2a2565f607ffdd4c544e7acae798073e"><div class="ttname"><a href="server_8h.html#a2a2565f607ffdd4c544e7acae798073e">zrangeCommand</a></div><div class="ttdeci">void zrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02515">t_zset.c:2515</a></div></div>
<div class="ttc" id="server_8c_html_a6d37ca075aa0bff83305ecd2823ef744"><div class="ttname"><a href="server_8c.html#a6d37ca075aa0bff83305ecd2823ef744">setDictType</a></div><div class="ttdeci">dictType setDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00592">server.c:592</a></div></div>
<div class="ttc" id="structredis_server_html_a73ce15b906abae61ce26fda115af09e4"><div class="ttname"><a href="structredis_server.html#a73ce15b906abae61ce26fda115af09e4">redisServer::latency_monitor_threshold</a></div><div class="ttdeci">long long latency_monitor_threshold</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01265">server.h:1265</a></div></div>
<div class="ttc" id="asciilogo_8h_html_af382f985e59f9f89952a4eadbeb3cbdc"><div class="ttname"><a href="asciilogo_8h.html#af382f985e59f9f89952a4eadbeb3cbdc">ascii_logo</a></div><div class="ttdeci">char * ascii_logo</div><div class="ttdef"><b>Definition:</b> <a href="asciilogo_8h_source.html#l00030">asciilogo.h:30</a></div></div>
<div class="ttc" id="structredis_server_html_aaf81cefb84c292ee7dee2cbf749595fb"><div class="ttname"><a href="structredis_server.html#aaf81cefb84c292ee7dee2cbf749595fb">redisServer::slave_priority</a></div><div class="ttdeci">int slave_priority</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01166">server.h:1166</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a5ba04845895cc30f8583215e1b1bfd32"><div class="ttname"><a href="structshared_objects_struct.html#a5ba04845895cc30f8583215e1b1bfd32">sharedObjectsStruct::mbulkhdr</a></div><div class="ttdeci">robj * mbulkhdr[OBJ_SHARED_BULKHDR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="cluster_8c_html_a173a8e877d27a3850ad4072489e7a44b"><div class="ttname"><a href="cluster_8c.html#a173a8e877d27a3850ad4072489e7a44b">clusterRedirectClient</a></div><div class="ttdeci">void clusterRedirectClient(client *c, clusterNode *n, int hashslot, int error_code)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05622">cluster.c:5622</a></div></div>
<div class="ttc" id="server_8h_html_a4c87bb6cabee0992ae46e8ce3a4617f7"><div class="ttname"><a href="server_8h.html#a4c87bb6cabee0992ae46e8ce3a4617f7">brpopCommand</a></div><div class="ttdeci">void brpopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00746">t_list.c:746</a></div></div>
<div class="ttc" id="structredis_server_html_a25bdcbb11f0d80bf9a7df68456b425b5"><div class="ttname"><a href="structredis_server.html#a25bdcbb11f0d80bf9a7df68456b425b5">redisServer::module_blocked_pipe</a></div><div class="ttdeci">int module_blocked_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00956">server.h:956</a></div></div>
<div class="ttc" id="structredis_server_html_a3cdc960c3fc022e4c1d7a92aafc7ae2f"><div class="ttname"><a href="structredis_server.html#a3cdc960c3fc022e4c1d7a92aafc7ae2f">redisServer::aof_no_fsync_on_rewrite</a></div><div class="ttdeci">int aof_no_fsync_on_rewrite</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01056">server.h:1056</a></div></div>
<div class="ttc" id="server_8c_html_a98d0c07d94ea748cb852feb8001cba41"><div class="ttname"><a href="server_8c.html#a98d0c07d94ea748cb852feb8001cba41">clientsCron</a></div><div class="ttdeci">void clientsCron(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00962">server.c:962</a></div></div>
<div class="ttc" id="server_8c_html_ad21e41fa09dce3d1a3b91503b755b7a2"><div class="ttname"><a href="server_8c.html#ad21e41fa09dce3d1a3b91503b755b7a2">initServer</a></div><div class="ttdeci">void initServer(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02009">server.c:2009</a></div></div>
<div class="ttc" id="bitops_8c_html_ac8ff2376b5058730e205cf6694eb3e1c"><div class="ttname"><a href="bitops_8c.html#ac8ff2376b5058730e205cf6694eb3e1c">bitopCommand</a></div><div class="ttdeci">void bitopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00591">bitops.c:591</a></div></div>
<div class="ttc" id="db_8c_html_a3b1be63f398af051a20563fbe81a2694"><div class="ttname"><a href="db_8c.html#a3b1be63f398af051a20563fbe81a2694">migrateGetKeys</a></div><div class="ttdeci">int * migrateGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01347">db.c:1347</a></div></div>
<div class="ttc" id="structredis_server_html_a2ef075c5a1090a6b39536909cd779787"><div class="ttname"><a href="structredis_server.html#a2ef075c5a1090a6b39536909cd779787">redisServer::saveparams</a></div><div class="ttdeci">struct saveparam * saveparams</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01093">server.h:1093</a></div></div>
<div class="ttc" id="structredis_command_html_a908850c7f5d5cd51f3287973a5c385a5"><div class="ttname"><a href="structredis_command.html#a908850c7f5d5cd51f3287973a5c385a5">redisCommand::lastkey</a></div><div class="ttdeci">int lastkey</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01301">server.h:1301</a></div></div>
<div class="ttc" id="server_8c_html_ab55a5573159f65b2989a00724b2c18d2"><div class="ttname"><a href="server_8c.html#ab55a5573159f65b2989a00724b2c18d2">modulesDictType</a></div><div class="ttdeci">dictType modulesDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00699">server.c:699</a></div></div>
<div class="ttc" id="server_8c_html_aea8cebd9dfbf66ea44e4a8c66b95b9bc"><div class="ttname"><a href="server_8c.html#aea8cebd9dfbf66ea44e4a8c66b95b9bc">dictSdsKeyCompare</a></div><div class="ttdeci">int dictSdsKeyCompare(void *privdata, const void *key1, const void *key2)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00471">server.c:471</a></div></div>
<div class="ttc" id="server_8h_html_afd035a2d3cedcd2b9f6cbf968f45ef2e"><div class="ttname"><a href="server_8h.html#afd035a2d3cedcd2b9f6cbf968f45ef2e">sdiffCommand</a></div><div class="ttdeci">void sdiffCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l01099">t_set.c:1099</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ac83914f3396175fb89619333b752fc41"><div class="ttname"><a href="structshared_objects_struct.html#ac83914f3396175fb89619333b752fc41">sharedObjectsStruct::zpopmax</a></div><div class="ttdeci">robj * zpopmax</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structmalloc__stats_html_a78e452f18e74cbf8be28858f49c0ff0b"><div class="ttname"><a href="structmalloc__stats.html#a78e452f18e74cbf8be28858f49c0ff0b">malloc_stats::allocator_active</a></div><div class="ttdeci">size_t allocator_active</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00906">server.h:906</a></div></div>
<div class="ttc" id="server_8h_html_a7b2b1d1fd04a4f2c1a141e0976dd479b"><div class="ttname"><a href="server_8h.html#a7b2b1d1fd04a4f2c1a141e0976dd479b">SUPERVISED_AUTODETECT</a></div><div class="ttdeci">#define SUPERVISED_AUTODETECT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00342">server.h:342</a></div></div>
<div class="ttc" id="structredis_server_html_afbe16be5f4b41cc85b8952c52f8afae0"><div class="ttname"><a href="structredis_server.html#afbe16be5f4b41cc85b8952c52f8afae0">redisServer::stat_rejected_conn</a></div><div class="ttdeci">long long stat_rejected_conn</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01013">server.h:1013</a></div></div>
<div class="ttc" id="server_8h_html_a395b1661b661c1dd3983e856955e3a75"><div class="ttname"><a href="server_8h.html#a395b1661b661c1dd3983e856955e3a75">decrCommand</a></div><div class="ttdeci">void decrCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00383">t_string.c:383</a></div></div>
<div class="ttc" id="server_8h_html_a59c6e025b4ed85642a0472fc3e73e298"><div class="ttname"><a href="server_8h.html#a59c6e025b4ed85642a0472fc3e73e298">PROPAGATE_REPL</a></div><div class="ttdeci">#define PROPAGATE_REPL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00424">server.h:424</a></div></div>
<div class="ttc" id="structclient_html_abccae535b39fffe81ee57f696b14a218"><div class="ttname"><a href="structclient.html#abccae535b39fffe81ee57f696b14a218">client::replstate</a></div><div class="ttdeci">int replstate</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00736">server.h:736</a></div></div>
<div class="ttc" id="server_8c_html_a1ab599246a3e9b664768ebb0c33d4cce"><div class="ttname"><a href="server_8c.html#a1ab599246a3e9b664768ebb0c33d4cce">getExpansiveClientsInfo</a></div><div class="ttdeci">void getExpansiveClientsInfo(size_t *in_usage, size_t *out_usage)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00936">server.c:936</a></div></div>
<div class="ttc" id="structredis_server_html_a3171edf0e16ac5d2f1284e46c20762a3"><div class="ttname"><a href="structredis_server.html#a3171edf0e16ac5d2f1284e46c20762a3">redisServer::lastbgsave_status</a></div><div class="ttdeci">int lastbgsave_status</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01104">server.h:1104</a></div></div>
<div class="ttc" id="server_8c_html_a1e6f24a15ad04b8e16084190fb05cc42"><div class="ttname"><a href="server_8c.html#a1e6f24a15ad04b8e16084190fb05cc42">beforeSleep</a></div><div class="ttdeci">void beforeSleep(struct aeEventLoop *eventLoop)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01358">server.c:1358</a></div></div>
<div class="ttc" id="server_8h_html_a486eb6d6b0e44a772877112dbd928494"><div class="ttname"><a href="server_8h.html#a486eb6d6b0e44a772877112dbd928494">CONFIG_DEFAULT_UNIX_SOCKET_PERM</a></div><div class="ttdeci">#define CONFIG_DEFAULT_UNIX_SOCKET_PERM</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00121">server.h:121</a></div></div>
<div class="ttc" id="structclient_html_a73588a64f8187aee0fd21f4c4d228052"><div class="ttname"><a href="structclient.html#a73588a64f8187aee0fd21f4c4d228052">client::slave_ip</a></div><div class="ttdeci">char slave_ip[NET_IP_STR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00751">server.h:751</a></div></div>
<div class="ttc" id="geo_8c_html_a72b8d1b78f421a4b45cf1d5f512f222d"><div class="ttname"><a href="geo_8c.html#a72b8d1b78f421a4b45cf1d5f512f222d">georadiusCommand</a></div><div class="ttdeci">void georadiusCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00676">geo.c:676</a></div></div>
<div class="ttc" id="server_8h_html_a31229b9334bba7d6be2a72970967a14b"><div class="ttname"><a href="server_8h.html#a31229b9334bba7d6be2a72970967a14b">LL_WARNING</a></div><div class="ttdeci">#define LL_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00336">server.h:336</a></div></div>
<div class="ttc" id="structredis_server_html_a2f5a9f08effdaba922ea7a432c753175"><div class="ttname"><a href="structredis_server.html#a2f5a9f08effdaba922ea7a432c753175">redisServer::repl_diskless_sync_delay</a></div><div class="ttdeci">int repl_diskless_sync_delay</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01144">server.h:1144</a></div></div>
<div class="ttc" id="structredis_server_html_a660205d2332ba1f32771cb13b9e829cf"><div class="ttname"><a href="structredis_server.html#a660205d2332ba1f32771cb13b9e829cf">redisServer::inst_metric</a></div><div class="ttdeci">struct redisServer::@13 inst_metric[STATS_METRIC_COUNT]</div></div>
<div class="ttc" id="server_8h_html_accabd32f20281543986166c219124f9e"><div class="ttname"><a href="server_8h.html#accabd32f20281543986166c219124f9e">CMD_MODULE</a></div><div class="ttdeci">#define CMD_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00208">server.h:208</a></div></div>
<div class="ttc" id="server_8c_html_a2eb31143e51e5ff4255f8cf6cf814c88"><div class="ttname"><a href="server_8c.html#a2eb31143e51e5ff4255f8cf6cf814c88">dictEncObjHash</a></div><div class="ttdeci">uint64_t dictEncObjHash(const void *key)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00546">server.c:546</a></div></div>
<div class="ttc" id="server_8h_html_ac55c8423c202c1f0b4e786eb70adefb3"><div class="ttname"><a href="server_8h.html#ac55c8423c202c1f0b4e786eb70adefb3">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_PORT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_CLUSTER_ANNOUNCE_PORT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00118">server.h:118</a></div></div>
<div class="ttc" id="server_8c_html_af9f969928d06fbe9a2fb63f13cb4c801"><div class="ttname"><a href="server_8c.html#af9f969928d06fbe9a2fb63f13cb4c801">updateDictResizePolicy</a></div><div class="ttdeci">void updateDictResizePolicy(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00775">server.c:775</a></div></div>
<div class="ttc" id="server_8c_html_afe9ec6263163ba1c2234d5fafafd3305"><div class="ttname"><a href="server_8c.html#afe9ec6263163ba1c2234d5fafafd3305">keyptrDictType</a></div><div class="ttdeci">dictType keyptrDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00632">server.c:632</a></div></div>
<div class="ttc" id="server_8h_html_a50ebe1be63a259b7c9b0583a0790e15b"><div class="ttname"><a href="server_8h.html#a50ebe1be63a259b7c9b0583a0790e15b">ltrimCommand</a></div><div class="ttdeci">void ltrimCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00444">t_list.c:444</a></div></div>
<div class="ttc" id="structredis_server_html_aa80c0c1c323f199611105d43a6e5ed28"><div class="ttname"><a href="structredis_server.html#aa80c0c1c323f199611105d43a6e5ed28">redisServer::cronloops</a></div><div class="ttdeci">int cronloops</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00948">server.h:948</a></div></div>
<div class="ttc" id="structredis_server_html_ab23a754e7d3bd832810530b360eabd91"><div class="ttname"><a href="structredis_server.html#ab23a754e7d3bd832810530b360eabd91">redisServer::lastbgsave_try</a></div><div class="ttdeci">time_t lastbgsave_try</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01099">server.h:1099</a></div></div>
<div class="ttc" id="structrdb_save_info_html_a839a288ca668f38e63ba0fd17f6ae8c5"><div class="ttname"><a href="structrdb_save_info.html#a839a288ca668f38e63ba0fd17f6ae8c5">rdbSaveInfo::repl_stream_db</a></div><div class="ttdeci">int repl_stream_db</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00892">server.h:892</a></div></div>
<div class="ttc" id="module_8c_html_a000fda557883aa7629f70616614a979f"><div class="ttname"><a href="module_8c.html#a000fda557883aa7629f70616614a979f">moduleCommand</a></div><div class="ttdeci">void moduleCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l04824">module.c:4824</a></div></div>
<div class="ttc" id="db_8c_html_ae0275c60dde397ac9fe73946abd6d972"><div class="ttname"><a href="db_8c.html#ae0275c60dde397ac9fe73946abd6d972">selectDb</a></div><div class="ttdeci">int selectDb(client *c, int id)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00373">db.c:373</a></div></div>
<div class="ttc" id="multi_8c_html_ab05ace69b1f1564a8fa6fe826793806d"><div class="ttname"><a href="multi_8c.html#ab05ace69b1f1564a8fa6fe826793806d">flagTransaction</a></div><div class="ttdeci">void flagTransaction(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00081">multi.c:81</a></div></div>
<div class="ttc" id="redis-check-aof_8c_html_a4cf4c173fb3690dd908cd74f72847972"><div class="ttname"><a href="redis-check-aof_8c.html#a4cf4c173fb3690dd908cd74f72847972">redis_check_aof_main</a></div><div class="ttdeci">int redis_check_aof_main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="redis-check-aof_8c_source.html#l00144">redis-check-aof.c:144</a></div></div>
<div class="ttc" id="slowlog_8c_html_a09b465bea2c8178bf67b7910b5c9cd80"><div class="ttname"><a href="slowlog_8c.html#a09b465bea2c8178bf67b7910b5c9cd80">slowlogCommand</a></div><div class="ttdeci">void slowlogCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="slowlog_8c_source.html#l00142">slowlog.c:142</a></div></div>
<div class="ttc" id="server_8h_html_a71a6d7c46b8e717e82d80cb49744fcb2"><div class="ttname"><a href="server_8h.html#a71a6d7c46b8e717e82d80cb49744fcb2">xclaimCommand</a></div><div class="ttdeci">void xclaimCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l02108">t_stream.c:2108</a></div></div>
<div class="ttc" id="hyperloglog_8c_html_a6fb9b8776b74679f421d3fc3ade798b8"><div class="ttname"><a href="hyperloglog_8c.html#a6fb9b8776b74679f421d3fc3ade798b8">pfcountCommand</a></div><div class="ttdeci">void pfcountCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="hyperloglog_8c_source.html#l01214">hyperloglog.c:1214</a></div></div>
<div class="ttc" id="server_8c_html_a5116862ff029d61bef6506eb58b354eb"><div class="ttname"><a href="server_8c.html#a5116862ff029d61bef6506eb58b354eb">hashDictType</a></div><div class="ttdeci">dictType hashDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00652">server.c:652</a></div></div>
<div class="ttc" id="db_8c_html_a8f6e1f834a16c0f5489c82beb4385ac5"><div class="ttname"><a href="db_8c.html#a8f6e1f834a16c0f5489c82beb4385ac5">moveCommand</a></div><div class="ttdeci">void moveCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00913">db.c:913</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a7757d2719322989b2b8a084f06d5410a"><div class="ttname"><a href="structshared_objects_struct.html#a7757d2719322989b2b8a084f06d5410a">sharedObjectsStruct::colon</a></div><div class="ttdeci">robj * colon</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_a7391deb9c3a262ded3e186e94eb884e2"><div class="ttname"><a href="server_8h.html#a7391deb9c3a262ded3e186e94eb884e2">CMD_WRITE</a></div><div class="ttdeci">#define CMD_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00205">server.h:205</a></div></div>
<div class="ttc" id="dict_8c_html_a26682701255962f65ed1699803025e1b"><div class="ttname"><a href="dict_8c.html#a26682701255962f65ed1699803025e1b">dictSetHashFunctionSeed</a></div><div class="ttdeci">void dictSetHashFunctionSeed(uint8_t *seed)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00076">dict.c:76</a></div></div>
<div class="ttc" id="server_8h_html_a5c06e803ad12cd034a808a885bc342cf"><div class="ttname"><a href="server_8h.html#a5c06e803ad12cd034a808a885bc342cf">mgetCommand</a></div><div class="ttdeci">void mgetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00285">t_string.c:285</a></div></div>
<div class="ttc" id="structredis_server_html_a2282515ee7614e17de7aeae0db6ea65b"><div class="ttname"><a href="structredis_server.html#a2282515ee7614e17de7aeae0db6ea65b">redisServer::orig_commands</a></div><div class="ttdeci">dict * orig_commands</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00939">server.h:939</a></div></div>
<div class="ttc" id="structredis_server_html_a6ee3dc3ba57fc269a2becfe29fdc8d42"><div class="ttname"><a href="structredis_server.html#a6ee3dc3ba57fc269a2becfe29fdc8d42">redisServer::system_memory_size</a></div><div class="ttdeci">size_t system_memory_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01274">server.h:1274</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a0d9dc084f22782d4cf6740dca7c606f5"><div class="ttname"><a href="structshared_objects_struct.html#a0d9dc084f22782d4cf6740dca7c606f5">sharedObjectsStruct::pong</a></div><div class="ttdeci">robj * pong</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_ad2bce729f21c3a876e4f5527c16a93ff"><div class="ttname"><a href="structredis_server.html#ad2bce729f21c3a876e4f5527c16a93ff">redisServer::client_obuf_limits</a></div><div class="ttdeci">clientBufferLimitsConfig client_obuf_limits[CLIENT_TYPE_OBUF_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01051">server.h:1051</a></div></div>
<div class="ttc" id="structredis_db_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="structredis_db.html#a7441ef0865bcb3db9b8064dd7375c1ea">redisDb::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00642">server.h:642</a></div></div>
<div class="ttc" id="evict_8c_html_a30986a11358949941022bb52ca7e56cd"><div class="ttname"><a href="evict_8c.html#a30986a11358949941022bb52ca7e56cd">evictionPoolAlloc</a></div><div class="ttdeci">void evictionPoolAlloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="evict_8c_source.html#l00139">evict.c:139</a></div></div>
<div class="ttc" id="dict_8h_html_aca9596be4bcc2caa07c17dd8cebcceec"><div class="ttname"><a href="dict_8h.html#aca9596be4bcc2caa07c17dd8cebcceec">dictSlots</a></div><div class="ttdeci">#define dictSlots(d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00146">dict.h:146</a></div></div>
<div class="ttc" id="structredis_server_html_acf21ed827000471af091d6f7f2820843"><div class="ttname"><a href="structredis_server.html#acf21ed827000471af091d6f7f2820843">redisServer::stat_active_defrag_hits</a></div><div class="ttdeci">long long stat_active_defrag_hits</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01005">server.h:1005</a></div></div>
<div class="ttc" id="server_8h_html_a9d1d54e41ab48c620621b01e07f8459c"><div class="ttname"><a href="server_8h.html#a9d1d54e41ab48c620621b01e07f8459c">zpopmaxCommand</a></div><div class="ttdeci">void zpopmaxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03246">t_zset.c:3246</a></div></div>
<div class="ttc" id="server_8h_html_a77b2d655d5c957841a27588a991a6d0c"><div class="ttname"><a href="server_8h.html#a77b2d655d5c957841a27588a991a6d0c">zaddCommand</a></div><div class="ttdeci">void zaddCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01657">t_zset.c:1657</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_aad9ef4e12438584f8b4a1ea055ba1d9c"><div class="ttname"><a href="structshared_objects_struct.html#aad9ef4e12438584f8b4a1ea055ba1d9c">sharedObjectsStruct::bulkhdr</a></div><div class="ttdeci">robj * bulkhdr[OBJ_SHARED_BULKHDR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="networking_8c_html_a9da76a225d7993a0a3f3ede650478508"><div class="ttname"><a href="networking_8c.html#a9da76a225d7993a0a3f3ede650478508">addReplySds</a></div><div class="ttdeci">void addReplySds(client *c, sds s)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00318">networking.c:318</a></div></div>
<div class="ttc" id="server_8c_html_a2d93ba9c39a98eab24092115fc7840e9"><div class="ttname"><a href="server_8c.html#a2d93ba9c39a98eab24092115fc7840e9">ClientsPeakMemOutput</a></div><div class="ttdeci">size_t ClientsPeakMemOutput[CLIENTS_PEAK_MEM_USAGE_SLOTS]</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00905">server.c:905</a></div></div>
<div class="ttc" id="structredis_server_html_a9bdcedcc3282626ac99ee15091d20586"><div class="ttname"><a href="structredis_server.html#a9bdcedcc3282626ac99ee15091d20586">redisServer::aof_filename</a></div><div class="ttdeci">char * aof_filename</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01055">server.h:1055</a></div></div>
<div class="ttc" id="structredis_server_html_a5d8345cb446035f33a1ff2c093870f35"><div class="ttname"><a href="structredis_server.html#a5d8345cb446035f33a1ff2c093870f35">redisServer::slaveseldb</a></div><div class="ttdeci">int slaveseldb</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01127">server.h:1127</a></div></div>
<div class="ttc" id="redis-check-rdb_8c_html_adc0ee0ed345db513fb6fac27511be4f1"><div class="ttname"><a href="redis-check-rdb_8c.html#adc0ee0ed345db513fb6fac27511be4f1">key</a></div><div class="ttdeci">robj * key</div><div class="ttdef"><b>Definition:</b> <a href="redis-check-rdb_8c_source.html#l00041">redis-check-rdb.c:41</a></div></div>
<div class="ttc" id="structredis_server_html_a4cdd4eed3d7fac9da3b95c1f6fe29de8"><div class="ttname"><a href="structredis_server.html#a4cdd4eed3d7fac9da3b95c1f6fe29de8">redisServer::stat_fork_time</a></div><div class="ttdeci">long long stat_fork_time</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01011">server.h:1011</a></div></div>
<div class="ttc" id="server_8h_html_a418e5a222cf659c003df77830f1ae343"><div class="ttname"><a href="server_8h.html#a418e5a222cf659c003df77830f1ae343">MAXMEMORY_NO_EVICTION</a></div><div class="ttdeci">#define MAXMEMORY_NO_EVICTION</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00395">server.h:395</a></div></div>
<div class="ttc" id="server_8h_html_a7f42e15eaa12457ce5e5dc897fb0ad83"><div class="ttname"><a href="server_8h.html#a7f42e15eaa12457ce5e5dc897fb0ad83">xsetidCommand</a></div><div class="ttdeci">void xsetidCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01819">t_stream.c:1819</a></div></div>
<div class="ttc" id="server_8h_html_abfb23271eba8a355b644875b440d5144"><div class="ttname"><a href="server_8h.html#abfb23271eba8a355b644875b440d5144">sigsegvHandler</a></div><div class="ttdeci">void sigsegvHandler(int sig, siginfo_t *info, void *secret)</div></div>
<div class="ttc" id="structredis_server_html"><div class="ttname"><a href="structredis_server.html">redisServer</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00926">server.h:926</a></div></div>
<div class="ttc" id="server_8h_html_af98ac28d5f4d23d7ed5985188e6fb7d1"><div class="ttname"><a href="server_8h.html#af98ac28d5f4d23d7ed5985188e6fb7d1">C_ERR</a></div><div class="ttdeci">#define C_ERR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00078">server.h:78</a></div></div>
<div class="ttc" id="cluster_8c_html_a194aa6e002b5b8eb055233a6f3f8cb3a"><div class="ttname"><a href="cluster_8c.html#a194aa6e002b5b8eb055233a6f3f8cb3a">clusterBeforeSleep</a></div><div class="ttdeci">void clusterBeforeSleep(void)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l03593">cluster.c:3593</a></div></div>
<div class="ttc" id="structredis_server_html_a396e19fe18c6bdeb9a1ac2a342323b6f"><div class="ttname"><a href="structredis_server.html#a396e19fe18c6bdeb9a1ac2a342323b6f">redisServer::ipfd</a></div><div class="ttdeci">int ipfd[CONFIG_BINDADDR_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00966">server.h:966</a></div></div>
<div class="ttc" id="cluster_8h_html_aa27e3466414a1464e6f2721b8872827d"><div class="ttname"><a href="cluster_8h.html#aa27e3466414a1464e6f2721b8872827d">CLUSTER_DEFAULT_REQUIRE_FULL_COVERAGE</a></div><div class="ttdeci">#define CLUSTER_DEFAULT_REQUIRE_FULL_COVERAGE</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00018">cluster.h:18</a></div></div>
<div class="ttc" id="server_8h_html_a6490bfa0bdbbc119ec4534f4941c5f58"><div class="ttname"><a href="server_8h.html#a6490bfa0bdbbc119ec4534f4941c5f58">xackCommand</a></div><div class="ttdeci">void xackCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01859">t_stream.c:1859</a></div></div>
<div class="ttc" id="server_8c_html_ae5be777467e4b7f3b1ba21bdeba4a43e"><div class="ttname"><a href="server_8c.html#ae5be777467e4b7f3b1ba21bdeba4a43e">redisAsciiArt</a></div><div class="ttdeci">void redisAsciiArt(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03744">server.c:3744</a></div></div>
<div class="ttc" id="server_8h_html_a80bd8dd11b207cae4f5e77f2cd77f467"><div class="ttname"><a href="server_8h.html#a80bd8dd11b207cae4f5e77f2cd77f467">zcardCommand</a></div><div class="ttdeci">void zcardCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03064">t_zset.c:3064</a></div></div>
<div class="ttc" id="server_8h_html_acf1f58ff0b6790cd8d0e3edf1a7e599f"><div class="ttname"><a href="server_8h.html#acf1f58ff0b6790cd8d0e3edf1a7e599f">CMD_STALE</a></div><div class="ttdeci">#define CMD_STALE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00215">server.h:215</a></div></div>
<div class="ttc" id="ae_8c_html_a531efa3444e61c200b8b7a64d0e3789c"><div class="ttname"><a href="ae_8c.html#a531efa3444e61c200b8b7a64d0e3789c">aeSetAfterSleepProc</a></div><div class="ttdeci">void aeSetAfterSleepProc(aeEventLoop *eventLoop, aeBeforeSleepProc *aftersleep)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00513">ae.c:513</a></div></div>
<div class="ttc" id="structredis_server_html_aa24c62412daaae8c6a8356c85524b7c7"><div class="ttname"><a href="structredis_server.html#aa24c62412daaae8c6a8356c85524b7c7">redisServer::repl_no_slaves_since</a></div><div class="ttdeci">time_t repl_no_slaves_since</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01138">server.h:1138</a></div></div>
<div class="ttc" id="structredis_server_html_aa6d326e1db1991e81cd897babf52ea8d"><div class="ttname"><a href="structredis_server.html#aa6d326e1db1991e81cd897babf52ea8d">redisServer::cached_master</a></div><div class="ttdeci">client * cached_master</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01151">server.h:1151</a></div></div>
<div class="ttc" id="bitops_8c_html_ae66b442041f4beefc834a1ab5e84adbb"><div class="ttname"><a href="bitops_8c.html#ae66b442041f4beefc834a1ab5e84adbb">setbitCommand</a></div><div class="ttdeci">void setbitCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00525">bitops.c:525</a></div></div>
<div class="ttc" id="structredis_db_html_a06ae0ac6a04c866ce83ece29d9a44073"><div class="ttname"><a href="structredis_db.html#a06ae0ac6a04c866ce83ece29d9a44073">redisDb::ready_keys</a></div><div class="ttdeci">dict * ready_keys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00640">server.h:640</a></div></div>
<div class="ttc" id="structredis_server_html_a3227752cf5245878455863e34d768180"><div class="ttname"><a href="structredis_server.html#a3227752cf5245878455863e34d768180">redisServer::zpopmaxCommand</a></div><div class="ttdeci">struct redisCommand * zpopmaxCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structredis_server_html_a1499cec4d5dc7a8bda9c061289c7a500"><div class="ttname"><a href="structredis_server.html#a1499cec4d5dc7a8bda9c061289c7a500">redisServer::aof_fd</a></div><div class="ttdeci">int aof_fd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01065">server.h:1065</a></div></div>
<div class="ttc" id="networking_8c_html_aa9a8085743464110cd10338fa89d22cd"><div class="ttname"><a href="networking_8c.html#aa9a8085743464110cd10338fa89d22cd">addReplyBulkSds</a></div><div class="ttdeci">void addReplyBulkSds(client *c, sds s)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00581">networking.c:581</a></div></div>
<div class="ttc" id="util_8c_html_a0ec291923d3b4034b8200ac45b97d1b6"><div class="ttname"><a href="util_8c.html#a0ec291923d3b4034b8200ac45b97d1b6">ll2string</a></div><div class="ttdeci">int ll2string(char *dst, size_t dstlen, long long svalue)</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00277">util.c:277</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_aede1fc4f53c4e19111df241fe70fb77c"><div class="ttname"><a href="structredis_mem_overhead.html#aede1fc4f53c4e19111df241fe70fb77c">redisMemOverhead::lua_caches</a></div><div class="ttdeci">size_t lua_caches</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00859">server.h:859</a></div></div>
<div class="ttc" id="structdict_html"><div class="ttname"><a href="structdict.html">dict</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00076">dict.h:76</a></div></div>
<div class="ttc" id="server_8c_html_a8d73c25eebeb3e3656b34e7807cb15b4"><div class="ttname"><a href="server_8c.html#a8d73c25eebeb3e3656b34e7807cb15b4">server</a></div><div class="ttdeci">struct redisServer server</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00072">server.c:72</a></div></div>
<div class="ttc" id="structredis_server_html_a792473f9197291c19d0c522011b09630"><div class="ttname"><a href="structredis_server.html#a792473f9197291c19d0c522011b09630">redisServer::neterr</a></div><div class="ttdeci">char neterr[ANET_ERR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00979">server.h:979</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a6af65e1a894c290efe8a917e9a318d65"><div class="ttname"><a href="structshared_objects_struct.html#a6af65e1a894c290efe8a917e9a318d65">sharedObjectsStruct::noautherr</a></div><div class="ttdeci">robj * noautherr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="zmalloc_8c_html_aaaf399486273cd011db2b875759e01a5"><div class="ttname"><a href="zmalloc_8c.html#aaaf399486273cd011db2b875759e01a5">zstrdup</a></div><div class="ttdeci">char * zstrdup(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00208">zmalloc.c:208</a></div></div>
<div class="ttc" id="latency_8h_html"><div class="ttname"><a href="latency_8h.html">latency.h</a></div></div>
<div class="ttc" id="server_8c_html_a546f229eed7911e7315e4b3f6a48ffe7"><div class="ttname"><a href="server_8c.html#a546f229eed7911e7315e4b3f6a48ffe7">trackInstantaneousMetric</a></div><div class="ttdeci">void trackInstantaneousMetric(int metric, long long current_reading)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00785">server.c:785</a></div></div>
<div class="ttc" id="server_8h_html_a189bf86d6a43bf93596b169db47b5528"><div class="ttname"><a href="server_8h.html#a189bf86d6a43bf93596b169db47b5528">hgetCommand</a></div><div class="ttdeci">void hgetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00675">t_hash.c:675</a></div></div>
<div class="ttc" id="networking_8c_html_a6e45692aca887ad07ad4e9351b862314"><div class="ttname"><a href="networking_8c.html#a6e45692aca887ad07ad4e9351b862314">acceptTcpHandler</a></div><div class="ttdeci">void acceptTcpHandler(aeEventLoop *el, int fd, void *privdata, int mask)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00726">networking.c:726</a></div></div>
<div class="ttc" id="structredis_server_html_ab052b1f4d90e418f3ebca7f25debec8d"><div class="ttname"><a href="structredis_server.html#ab052b1f4d90e418f3ebca7f25debec8d">redisServer::also_propagate</a></div><div class="ttdeci">redisOpArray also_propagate</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01116">server.h:1116</a></div></div>
<div class="ttc" id="sentinel_8c_html_add06eed88f7d0694a1fa9eac5f349d45"><div class="ttname"><a href="sentinel_8c.html#add06eed88f7d0694a1fa9eac5f349d45">sentinelIsRunning</a></div><div class="ttdeci">void sentinelIsRunning(void)</div><div class="ttdef"><b>Definition:</b> <a href="sentinel_8c_source.html#l00496">sentinel.c:496</a></div></div>
<div class="ttc" id="server_8h_html_a395f766c5962e4ee2da01dee43600f7a"><div class="ttname"><a href="server_8h.html#a395f766c5962e4ee2da01dee43600f7a">PROTO_MAX_QUERYBUF_LEN</a></div><div class="ttdeci">#define PROTO_MAX_QUERYBUF_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00184">server.h:184</a></div></div>
<div class="ttc" id="structredis_op_html"><div class="ttname"><a href="structredis_op.html">redisOp</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00831">server.h:831</a></div></div>
<div class="ttc" id="structredis_server_html_a15ca1e9689b70a0f66fe2ccc7ae435cb"><div class="ttname"><a href="structredis_server.html#a15ca1e9689b70a0f66fe2ccc7ae435cb">redisServer::rdb_bgsave_scheduled</a></div><div class="ttdeci">int rdb_bgsave_scheduled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01102">server.h:1102</a></div></div>
<div class="ttc" id="server_8h_html_a7724350e4f0ddbf1c80740699fac78be"><div class="ttname"><a href="server_8h.html#a7724350e4f0ddbf1c80740699fac78be">CLIENT_MONITOR</a></div><div class="ttdeci">#define CLIENT_MONITOR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00230">server.h:230</a></div></div>
<div class="ttc" id="structclient_html_a9bee04e09635a42fef289e42a89f5502"><div class="ttname"><a href="structclient.html#a9bee04e09635a42fef289e42a89f5502">client::db</a></div><div class="ttdeci">redisDb * db</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00712">server.h:712</a></div></div>
<div class="ttc" id="structredis_server_html_ae0463703f3899cad4e931faefe7b591b"><div class="ttname"><a href="structredis_server.html#ae0463703f3899cad4e931faefe7b591b">redisServer::stat_fork_rate</a></div><div class="ttdeci">double stat_fork_rate</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01012">server.h:1012</a></div></div>
<div class="ttc" id="structredis_server_html_a036a70cd5499d31b3b3964aeb182cd97"><div class="ttname"><a href="structredis_server.html#a036a70cd5499d31b3b3964aeb182cd97">redisServer::repl_backlog_size</a></div><div class="ttdeci">long long repl_backlog_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01130">server.h:1130</a></div></div>
<div class="ttc" id="anet_8c_html_aa92006f87d38700c23c7f0b7b43ad521"><div class="ttname"><a href="anet_8c.html#aa92006f87d38700c23c7f0b7b43ad521">anetPeerToString</a></div><div class="ttdeci">int anetPeerToString(int fd, char *ip, size_t ip_len, int *port)</div><div class="ttdef"><b>Definition:</b> <a href="anet_8c_source.html#l00577">anet.c:577</a></div></div>
<div class="ttc" id="structredis_server_html_ad3b224fc091bae066a03314069adf205"><div class="ttname"><a href="structredis_server.html#ad3b224fc091bae066a03314069adf205">redisServer::repl_min_slaves_max_lag</a></div><div class="ttdeci">int repl_min_slaves_max_lag</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01141">server.h:1141</a></div></div>
<div class="ttc" id="structredis_server_html_a2e6bd1e4e734c677e1a73aa12931b8d2"><div class="ttname"><a href="structredis_server.html#a2e6bd1e4e734c677e1a73aa12931b8d2">redisServer::stat_starttime</a></div><div class="ttdeci">time_t stat_starttime</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00996">server.h:996</a></div></div>
<div class="ttc" id="adlist_8c_html_aa759866ec59eca7e24746233740453fe"><div class="ttname"><a href="adlist_8c.html#aa759866ec59eca7e24746233740453fe">listAddNodeTail</a></div><div class="ttdeci">list * listAddNodeTail(list *list, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00114">adlist.c:114</a></div></div>
<div class="ttc" id="structredis_server_html_a6174bec3505236755e0fde7aae802526"><div class="ttname"><a href="structredis_server.html#a6174bec3505236755e0fde7aae802526">redisServer::last_sample_time</a></div><div class="ttdeci">long long last_sample_time</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01029">server.h:1029</a></div></div>
<div class="ttc" id="server_8h_html_af07bcc4b15ed4f7aed3f6efcb483b75b"><div class="ttname"><a href="server_8h.html#af07bcc4b15ed4f7aed3f6efcb483b75b">CONFIG_DEFAULT_AOF_FSYNC</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_FSYNC</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00356">server.h:356</a></div></div>
<div class="ttc" id="scripting_8c_html_aeb3cfb52752189eb4d68ed4cafb9ebbf"><div class="ttname"><a href="scripting_8c.html#aeb3cfb52752189eb4d68ed4cafb9ebbf">ldbPendingChildren</a></div><div class="ttdeci">int ldbPendingChildren(void)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01751">scripting.c:1751</a></div></div>
<div class="ttc" id="server_8h_html_a333fe7f520eb6f33cd1c88e4691de3ed"><div class="ttname"><a href="server_8h.html#a333fe7f520eb6f33cd1c88e4691de3ed">OBJ_SET_MAX_INTSET_ENTRIES</a></div><div class="ttdeci">#define OBJ_SET_MAX_INTSET_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00361">server.h:361</a></div></div>
<div class="ttc" id="structredis_server_html_a19a694ea86bc8d8418f366392c0d8bdb"><div class="ttname"><a href="structredis_server.html#a19a694ea86bc8d8418f366392c0d8bdb">redisServer::xclaimCommand</a></div><div class="ttdeci">struct redisCommand * xclaimCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a068ba9c2967d8f0f639a27df62d9122d"><div class="ttname"><a href="structshared_objects_struct.html#a068ba9c2967d8f0f639a27df62d9122d">sharedObjectsStruct::zpopmin</a></div><div class="ttdeci">robj * zpopmin</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_aba6794fa3ee28f85165eaed93190f1df"><div class="ttname"><a href="server_8h.html#aba6794fa3ee28f85165eaed93190f1df">CONFIG_RUN_ID_SIZE</a></div><div class="ttdeci">#define CONFIG_RUN_ID_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00108">server.h:108</a></div></div>
<div class="ttc" id="asciilogo_8h_html"><div class="ttname"><a href="asciilogo_8h.html">asciilogo.h</a></div></div>
<div class="ttc" id="cluster_8c_html_a9f6e0de4535394fe6602e3d061055d5a"><div class="ttname"><a href="cluster_8c.html#a9f6e0de4535394fe6602e3d061055d5a">readonlyCommand</a></div><div class="ttdeci">void readonlyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05396">cluster.c:5396</a></div></div>
<div class="ttc" id="structredis_server_html_a9319f4233d0597188c3119f4dc7b3f0f"><div class="ttname"><a href="structredis_server.html#a9319f4233d0597188c3119f4dc7b3f0f">redisServer::pidfile</a></div><div class="ttdeci">char * pidfile</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00946">server.h:946</a></div></div>
<div class="ttc" id="server_8h_html_a33f4fa5acb60b7b09f8e977eb97c8d90"><div class="ttname"><a href="server_8h.html#a33f4fa5acb60b7b09f8e977eb97c8d90">bzpopmaxCommand</a></div><div class="ttdeci">void bzpopmaxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03301">t_zset.c:3301</a></div></div>
<div class="ttc" id="server_8c_html_a7c3f256ff87d31f4c736b141d15649ba"><div class="ttname"><a href="server_8c.html#a7c3f256ff87d31f4c736b141d15649ba">migrateCacheDictType</a></div><div class="ttdeci">dictType migrateCacheDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00709">server.c:709</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_af489983c57174cb5b97002fc2cd1e0d5"><div class="ttname"><a href="structshared_objects_struct.html#af489983c57174cb5b97002fc2cd1e0d5">sharedObjectsStruct::unlink</a></div><div class="ttdeci">robj * unlink</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_a27e00ebd25c04beef22fabf61ea0b5ea"><div class="ttname"><a href="server_8h.html#a27e00ebd25c04beef22fabf61ea0b5ea">CONFIG_BGSAVE_RETRY_DELAY</a></div><div class="ttdeci">#define CONFIG_BGSAVE_RETRY_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00113">server.h:113</a></div></div>
<div class="ttc" id="server_8h_html_a303769ef1065076e68731584e758d3e1"><div class="ttname"><a href="server_8h.html#a303769ef1065076e68731584e758d3e1">C_OK</a></div><div class="ttdeci">#define C_OK</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00077">server.h:77</a></div></div>
<div class="ttc" id="structredis_server_html_aaa33ecfb95959d1b06853cc81e176ac2"><div class="ttname"><a href="structredis_server.html#aaa33ecfb95959d1b06853cc81e176ac2">redisServer::hash_max_ziplist_entries</a></div><div class="ttdeci">size_t hash_max_ziplist_entries</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01202">server.h:1202</a></div></div>
<div class="ttc" id="structredis_op_html_ad1447518f4372828b8435ae82e48499e"><div class="ttname"><a href="structredis_op.html#ad1447518f4372828b8435ae82e48499e">redisOp::argc</a></div><div class="ttdeci">int argc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00833">server.h:833</a></div></div>
<div class="ttc" id="dict_8c_html_a9e6309bcf1537c2ea46b8205dbf5c79c"><div class="ttname"><a href="dict_8c.html#a9e6309bcf1537c2ea46b8205dbf5c79c">dictGenCaseHashFunction</a></div><div class="ttdeci">uint64_t dictGenCaseHashFunction(const unsigned char *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00094">dict.c:94</a></div></div>
<div class="ttc" id="structredis_server_html_a1fc70c8161cd5f19a076dc119c7cf0af"><div class="ttname"><a href="structredis_server.html#a1fc70c8161cd5f19a076dc119c7cf0af">redisServer::aof_rewrite_min_size</a></div><div class="ttdeci">off_t aof_rewrite_min_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01058">server.h:1058</a></div></div>
<div class="ttc" id="structredis_server_html_af53a8a16d14d100894cab6431a4622d9"><div class="ttname"><a href="structredis_server.html#af53a8a16d14d100894cab6431a4622d9">redisServer::aof_lastbgrewrite_status</a></div><div class="ttdeci">int aof_lastbgrewrite_status</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01071">server.h:1071</a></div></div>
<div class="ttc" id="server_8h_html_ac29d7218c448fac5b27039cf0d73fde2"><div class="ttname"><a href="server_8h.html#ac29d7218c448fac5b27039cf0d73fde2">OBJ_ZSET_MAX_ZIPLIST_ENTRIES</a></div><div class="ttdeci">#define OBJ_ZSET_MAX_ZIPLIST_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00362">server.h:362</a></div></div>
<div class="ttc" id="pubsub_8c_html_a1bf715db9fa019cbdd2f6fe6422867a9"><div class="ttname"><a href="pubsub_8c.html#a1bf715db9fa019cbdd2f6fe6422867a9">pubsubCommand</a></div><div class="ttdeci">void pubsubCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00327">pubsub.c:327</a></div></div>
<div class="ttc" id="server_8h_html_ace54c14c3b13acbf1d7a6d6e893cdfd3"><div class="ttname"><a href="server_8h.html#ace54c14c3b13acbf1d7a6d6e893cdfd3">CONFIG_DEFAULT_SLAVE_LAZY_FLUSH</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_LAZY_FLUSH</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00156">server.h:156</a></div></div>
<div class="ttc" id="structredis_server_html_a8128d183929124046c3411691de82b0a"><div class="ttname"><a href="structredis_server.html#a8128d183929124046c3411691de82b0a">redisServer::cluster_announce_port</a></div><div class="ttdeci">int cluster_announce_port</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01235">server.h:1235</a></div></div>
<div class="ttc" id="module_8c_html_ad77ba8d952365687cc72a35ccc5e0b3c"><div class="ttname"><a href="module_8c.html#ad77ba8d952365687cc72a35ccc5e0b3c">moduleCount</a></div><div class="ttdeci">size_t moduleCount(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l04889">module.c:4889</a></div></div>
<div class="ttc" id="structredis_command_html_ac9fe07eb07b7322aa691ae2fca8f0875"><div class="ttname"><a href="structredis_command.html#ac9fe07eb07b7322aa691ae2fca8f0875">redisCommand::keystep</a></div><div class="ttdeci">int keystep</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01302">server.h:1302</a></div></div>
<div class="ttc" id="atomicvar_8h_html_ae3aa976bb329a4a554a853c5770c3e3d"><div class="ttname"><a href="atomicvar_8h.html#ae3aa976bb329a4a554a853c5770c3e3d">REDIS_ATOMIC_API</a></div><div class="ttdeci">#define REDIS_ATOMIC_API</div><div class="ttdef"><b>Definition:</b> <a href="atomicvar_8h_source.html#l00130">atomicvar.h:130</a></div></div>
<div class="ttc" id="structredis_object_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="structredis_object.html#add9af9569af79ec26dd741fb226b38ba">redisObject::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00610">server.h:610</a></div></div>
<div class="ttc" id="adlist_8c_html_a722ffca86d8746e6c68a146359683dfa"><div class="ttname"><a href="adlist_8c.html#a722ffca86d8746e6c68a146359683dfa">listNext</a></div><div class="ttdeci">listNode * listNext(listIter *iter)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00229">adlist.c:229</a></div></div>
<div class="ttc" id="structredis_server_html_a8273ca89328d272782c8aed13b137526"><div class="ttname"><a href="structredis_server.html#a8273ca89328d272782c8aed13b137526">redisServer::cluster_announce_ip</a></div><div class="ttdeci">char * cluster_announce_ip</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01234">server.h:1234</a></div></div>
<div class="ttc" id="structredis_server_html_a297743fec342702645d8b174a4877e3b"><div class="ttname"><a href="structredis_server.html#a297743fec342702645d8b174a4877e3b">redisServer::repl_slave_ro</a></div><div class="ttdeci">int repl_slave_ro</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01162">server.h:1162</a></div></div>
<div class="ttc" id="server_8h_html_af563e9454f9a1ef49de787e4fc66c448"><div class="ttname"><a href="server_8h.html#af563e9454f9a1ef49de787e4fc66c448">CONFIG_DEFAULT_RDB_FILENAME</a></div><div class="ttdeci">#define CONFIG_DEFAULT_RDB_FILENAME</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00129">server.h:129</a></div></div>
<div class="ttc" id="structredis_server_html_af73bffcc3e30fc85b9d48a90ac28adb1"><div class="ttname"><a href="structredis_server.html#af73bffcc3e30fc85b9d48a90ac28adb1">redisServer::aof_child_pid</a></div><div class="ttdeci">pid_t aof_child_pid</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01062">server.h:1062</a></div></div>
<div class="ttc" id="structredis_server_html_a7a707c2da0ace2b0eb8a278960c34f7a"><div class="ttname"><a href="structredis_server.html#a7a707c2da0ace2b0eb8a278960c34f7a">redisServer::ready_keys</a></div><div class="ttdeci">list * ready_keys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01194">server.h:1194</a></div></div>
<div class="ttc" id="scripting_8c_html_a2cdaa68c50caa976607eca0c95a038a8"><div class="ttname"><a href="scripting_8c.html#a2cdaa68c50caa976607eca0c95a038a8">evalCommand</a></div><div class="ttdeci">void evalCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01461">scripting.c:1461</a></div></div>
<div class="ttc" id="networking_8c_html_a77d66bf68cf67c87521b97d59bd2fb84"><div class="ttname"><a href="networking_8c.html#a77d66bf68cf67c87521b97d59bd2fb84">addReplyLongLong</a></div><div class="ttdeci">void addReplyLongLong(client *c, long long ll)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00524">networking.c:524</a></div></div>
<div class="ttc" id="server_8h_html_a8ec453137b40be876e779a605a0c5177"><div class="ttname"><a href="server_8h.html#a8ec453137b40be876e779a605a0c5177">zremCommand</a></div><div class="ttdeci">void zremCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01665">t_zset.c:1665</a></div></div>
<div class="ttc" id="structredis_server_html_a577bbf6b03a99e785eed8ea6ebd4a665"><div class="ttname"><a href="structredis_server.html#a577bbf6b03a99e785eed8ea6ebd4a665">redisServer::delCommand</a></div><div class="ttdeci">struct redisCommand * delCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="server_8c_html_a5d44be26238d998d662a5d38e4d3e52c"><div class="ttname"><a href="server_8c.html#a5d44be26238d998d662a5d38e4d3e52c">serverLog</a></div><div class="ttdeci">void serverLog(int level, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00384">server.c:384</a></div></div>
<div class="ttc" id="server_8h_html_a7f01b7200b32817202b3fe357b74dbc5"><div class="ttname"><a href="server_8h.html#a7f01b7200b32817202b3fe357b74dbc5">lpopCommand</a></div><div class="ttdeci">void lpopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00390">t_list.c:390</a></div></div>
<div class="ttc" id="structredis_server_html_aa96405b85d2082e0f231cb462e821a54"><div class="ttname"><a href="structredis_server.html#aa96405b85d2082e0f231cb462e821a54">redisServer::child_info_data</a></div><div class="ttdeci">struct redisServer::@14 child_info_data</div></div>
<div class="ttc" id="structredis_server_html_aadc46c1e937463532712d5cf6579eaa8"><div class="ttname"><a href="structredis_server.html#aadc46c1e937463532712d5cf6579eaa8">redisServer::unixsocketperm</a></div><div class="ttdeci">mode_t unixsocketperm</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00965">server.h:965</a></div></div>
<div class="ttc" id="server_8h_html_a6115eb959ba9affed34e840901a5b11b"><div class="ttname"><a href="server_8h.html#a6115eb959ba9affed34e840901a5b11b">DISK_ERROR_TYPE_RDB</a></div><div class="ttdeci">#define DISK_ERROR_TYPE_RDB</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01607">server.h:1607</a></div></div>
<div class="ttc" id="server_8h_html_a4dba63a3cf60c2e23d5dffa26fb3c8bc"><div class="ttname"><a href="server_8h.html#a4dba63a3cf60c2e23d5dffa26fb3c8bc">appendCommand</a></div><div class="ttdeci">void appendCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00435">t_string.c:435</a></div></div>
<div class="ttc" id="dict_8c_html_a9207bfc4adb969486d70c098a1a5892e"><div class="ttname"><a href="dict_8c.html#a9207bfc4adb969486d70c098a1a5892e">dictResize</a></div><div class="ttdeci">int dictResize(dict *d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00135">dict.c:135</a></div></div>
<div class="ttc" id="server_8c_html_af0b4e72e76f0b16f5b43f1d03879b750"><div class="ttname"><a href="server_8c.html#af0b4e72e76f0b16f5b43f1d03879b750">dictSdsDestructor</a></div><div class="ttdeci">void dictSdsDestructor(void *privdata, void *val)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00501">server.c:501</a></div></div>
<div class="ttc" id="server_8h_html_a311fc8b18b93af94e1ad418f1386b519"><div class="ttname"><a href="server_8h.html#a311fc8b18b93af94e1ad418f1386b519">OBJ_SHARED_INTEGERS</a></div><div class="ttdeci">#define OBJ_SHARED_INTEGERS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00094">server.h:94</a></div></div>
<div class="ttc" id="redis-cli_8c_html_a598b97b058f3470583dd1b6fc6498102"><div class="ttname"><a href="redis-cli_8c.html#a598b97b058f3470583dd1b6fc6498102">redisGitSHA1</a></div><div class="ttdeci">char * redisGitSHA1(void)</div><div class="ttdef"><b>Definition:</b> <a href="release_8c_source.html#l00040">release.c:40</a></div></div>
<div class="ttc" id="structredis_server_html_a761e2c812e0a5ab3b7afcbb2586d4012"><div class="ttname"><a href="structredis_server.html#a761e2c812e0a5ab3b7afcbb2586d4012">redisServer::configfile</a></div><div class="ttdeci">char * configfile</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00929">server.h:929</a></div></div>
<div class="ttc" id="adlist_8h_html_a3dac429a545f8def9a2bf9077eb66ddc"><div class="ttname"><a href="adlist_8h.html#a3dac429a545f8def9a2bf9077eb66ddc">listSetMatchMethod</a></div><div class="ttdeci">#define listSetMatchMethod(l, m)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00066">adlist.h:66</a></div></div>
<div class="ttc" id="server_8h_html_aca61db3dff4f6e864b3e49d3f087fb51"><div class="ttname"><a href="server_8h.html#aca61db3dff4f6e864b3e49d3f087fb51">CONFIG_DEFAULT_SLAVE_ANNOUNCE_IP</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_ANNOUNCE_IP</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00135">server.h:135</a></div></div>
<div class="ttc" id="structredis_server_html_a75b9c0bc4b9974b3880f057a519c8cac"><div class="ttname"><a href="structredis_server.html#a75b9c0bc4b9974b3880f057a519c8cac">redisServer::stat_sync_full</a></div><div class="ttdeci">long long stat_sync_full</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01014">server.h:1014</a></div></div>
<div class="ttc" id="dict_8c_html_ab8ad4f6b3eb651aa1de68061c7ed4ca6"><div class="ttname"><a href="dict_8c.html#ab8ad4f6b3eb651aa1de68061c7ed4ca6">dictEnableResize</a></div><div class="ttdeci">void dictEnableResize(void)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00995">dict.c:995</a></div></div>
<div class="ttc" id="networking_8c_html_a90fadee8eeb3d0332e0a77fef134ebee"><div class="ttname"><a href="networking_8c.html#a90fadee8eeb3d0332e0a77fef134ebee">addReplyBulkCBuffer</a></div><div class="ttdeci">void addReplyBulkCBuffer(client *c, const void *p, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00574">networking.c:574</a></div></div>
<div class="ttc" id="server_8h_html_a0301682a02368c940035f9e5d9616450"><div class="ttname"><a href="server_8h.html#a0301682a02368c940035f9e5d9616450">CONFIG_DEFAULT_PROTO_MAX_BULK_LEN</a></div><div class="ttdeci">#define CONFIG_DEFAULT_PROTO_MAX_BULK_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00168">server.h:168</a></div></div>
<div class="ttc" id="server_8h_html_a7668b4e80446fce88c9d14ea64bd7b1a"><div class="ttname"><a href="server_8h.html#a7668b4e80446fce88c9d14ea64bd7b1a">sortCommand</a></div><div class="ttdeci">void sortCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="sort_8c_source.html#l00189">sort.c:189</a></div></div>
<div class="ttc" id="server_8c_html_ad82e385bd0bd86e560c48bd2d0f67478"><div class="ttname"><a href="server_8c.html#ad82e385bd0bd86e560c48bd2d0f67478">objectKeyPointerValueDictType</a></div><div class="ttdeci">dictType objectKeyPointerValueDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00571">server.c:571</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a72d93f8c752cbe76e225113137ac21ec"><div class="ttname"><a href="structshared_objects_struct.html#a72d93f8c752cbe76e225113137ac21ec">sharedObjectsStruct::wrongtypeerr</a></div><div class="ttdeci">robj * wrongtypeerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="object_8c_html_a42d455241ac5e34b9db676b6e7a23cef"><div class="ttname"><a href="object_8c.html#a42d455241ac5e34b9db676b6e7a23cef">getDecodedObject</a></div><div class="ttdeci">robj * getDecodedObject(robj *o)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00499">object.c:499</a></div></div>
<div class="ttc" id="structredis_command_html"><div class="ttname"><a href="structredis_command.html">redisCommand</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01290">server.h:1290</a></div></div>
<div class="ttc" id="server_8h_html_a0698b50ff7fe51afd74cf20a72b75e1b"><div class="ttname"><a href="server_8h.html#a0698b50ff7fe51afd74cf20a72b75e1b">CONFIG_DEFAULT_LOGFILE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LOGFILE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00124">server.h:124</a></div></div>
<div class="ttc" id="server_8h_html_a7f53193adb63ba79f34d39439fcf9621"><div class="ttname"><a href="server_8h.html#a7f53193adb63ba79f34d39439fcf9621">rpushxCommand</a></div><div class="ttdeci">void rpushxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00260">t_list.c:260</a></div></div>
<div class="ttc" id="server_8h_html_a1aaa4bc76dc063da787c63d40dec5930"><div class="ttname"><a href="server_8h.html#a1aaa4bc76dc063da787c63d40dec5930">sunionstoreCommand</a></div><div class="ttdeci">void sunionstoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l01095">t_set.c:1095</a></div></div>
<div class="ttc" id="adlist_8h_html_aa8dc514bbe217bb2e87c1c77cfa84690"><div class="ttname"><a href="adlist_8h.html#aa8dc514bbe217bb2e87c1c77cfa84690">listFirst</a></div><div class="ttdeci">#define listFirst(l)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00058">adlist.h:58</a></div></div>
<div class="ttc" id="structredis_server_html_af6832f23d61ee1b6d41ec93f837aa9d5"><div class="ttname"><a href="structredis_server.html#af6832f23d61ee1b6d41ec93f837aa9d5">redisServer::aof_rewrite_time_start</a></div><div class="ttdeci">time_t aof_rewrite_time_start</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01070">server.h:1070</a></div></div>
<div class="ttc" id="expire_8c_html_a007647f9fe6b994df961341a7d8690aa"><div class="ttname"><a href="expire_8c.html#a007647f9fe6b994df961341a7d8690aa">pexpireCommand</a></div><div class="ttdeci">void pexpireCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00463">expire.c:463</a></div></div>
<div class="ttc" id="server_8h_html_a0a62e324503ec3accad9680554df26d0"><div class="ttname"><a href="server_8h.html#a0a62e324503ec3accad9680554df26d0">hexistsCommand</a></div><div class="ttdeci">void hexistsCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00809">t_hash.c:809</a></div></div>
<div class="ttc" id="structredis_server_html_aaa854fe2fafd385073db1c59dfbffc9d"><div class="ttname"><a href="structredis_server.html#aaa854fe2fafd385073db1c59dfbffc9d">redisServer::commands</a></div><div class="ttdeci">dict * commands</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00938">server.h:938</a></div></div>
<div class="ttc" id="structredis_server_html_a59696a740cc848c44be295172dc0e052"><div class="ttname"><a href="structredis_server.html#a59696a740cc848c44be295172dc0e052">redisServer::list_compress_depth</a></div><div class="ttdeci">int list_compress_depth</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01212">server.h:1212</a></div></div>
<div class="ttc" id="db_8c_html_a74b968fe09cf52976e47f672988c3802"><div class="ttname"><a href="db_8c.html#a74b968fe09cf52976e47f672988c3802">typeCommand</a></div><div class="ttdeci">void typeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00810">db.c:810</a></div></div>
<div class="ttc" id="structredis_command_html_aeb16776f95a4f73f9c6768fbbec9a038"><div class="ttname"><a href="structredis_command.html#aeb16776f95a4f73f9c6768fbbec9a038">redisCommand::firstkey</a></div><div class="ttdeci">int firstkey</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01300">server.h:1300</a></div></div>
<div class="ttc" id="server_8c_html_ace9629379ec546cb6be393e1302a4ea9"><div class="ttname"><a href="server_8c.html#ace9629379ec546cb6be393e1302a4ea9">redisSupervisedSystemd</a></div><div class="ttdeci">int redisSupervisedSystemd(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03923">server.c:3923</a></div></div>
<div class="ttc" id="structredis_server_html_acabb38054cd6d1d619d7c19d3e57bf28"><div class="ttname"><a href="structredis_server.html#acabb38054cd6d1d619d7c19d3e57bf28">redisServer::repl_backlog</a></div><div class="ttdeci">char * repl_backlog</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01129">server.h:1129</a></div></div>
<div class="ttc" id="server_8h_html_ae914a718cc003a40862eeb3b4301ed57"><div class="ttname"><a href="server_8h.html#ae914a718cc003a40862eeb3b4301ed57">zpopminCommand</a></div><div class="ttdeci">void zpopminCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03236">t_zset.c:3236</a></div></div>
<div class="ttc" id="module_8c_html_a75e4d2949ecfbec4159d7388d4b83e6f"><div class="ttname"><a href="module_8c.html#a75e4d2949ecfbec4159d7388d4b83e6f">moduleLoadFromQueue</a></div><div class="ttdeci">void moduleLoadFromQueue(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l04692">module.c:4692</a></div></div>
<div class="ttc" id="server_8h_html_a9d23ea1ff80f9db5faef6f5aca6f76aa"><div class="ttname"><a href="server_8h.html#a9d23ea1ff80f9db5faef6f5aca6f76aa">CONFIG_DEFAULT_DEFRAG_THRESHOLD_LOWER</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_THRESHOLD_LOWER</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00162">server.h:162</a></div></div>
<div class="ttc" id="debug_8c_html_ac04bd45c841516e4eed2861b7be626ab"><div class="ttname"><a href="debug_8c.html#ac04bd45c841516e4eed2861b7be626ab">debugCommand</a></div><div class="ttdeci">void debugCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00285">debug.c:285</a></div></div>
<div class="ttc" id="blocked_8c_html_aa898365761ea14b64094f6c41bfac1cc"><div class="ttname"><a href="blocked_8c.html#aa898365761ea14b64094f6c41bfac1cc">unblockClient</a></div><div class="ttdeci">void unblockClient(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="blocked_8c_source.html#l00162">blocked.c:162</a></div></div>
<div class="ttc" id="server_8h_html_aef97c640ad8dfdaca21eb67d4c37e447"><div class="ttname"><a href="server_8h.html#aef97c640ad8dfdaca21eb67d4c37e447">CMD_DENYOOM</a></div><div class="ttdeci">#define CMD_DENYOOM</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00207">server.h:207</a></div></div>
<div class="ttc" id="multi_8c_html_a754eaefc6b7bfb8177b8a239a8d4168f"><div class="ttname"><a href="multi_8c.html#a754eaefc6b7bfb8177b8a239a8d4168f">discardCommand</a></div><div class="ttdeci">void discardCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00095">multi.c:95</a></div></div>
<div class="ttc" id="server_8c_html_abf11672cc702adce676d41c162b20345"><div class="ttname"><a href="server_8c.html#abf11672cc702adce676d41c162b20345">dictSdsHash</a></div><div class="ttdeci">uint64_t dictSdsHash(const void *key)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00520">server.c:520</a></div></div>
<div class="ttc" id="structredis_server_html_afc193ee38ed3ebcc1aa1bee7a506c0f9"><div class="ttname"><a href="structredis_server.html#afc193ee38ed3ebcc1aa1bee7a506c0f9">redisServer::clients_to_close</a></div><div class="ttdeci">list * clients_to_close</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00972">server.h:972</a></div></div>
<div class="ttc" id="server_8h_html_a85f5870a07f58d1679988f7eb84ca995"><div class="ttname"><a href="server_8h.html#a85f5870a07f58d1679988f7eb84ca995">AOF_REWRITE_PERC</a></div><div class="ttdeci">#define AOF_REWRITE_PERC</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00097">server.h:97</a></div></div>
<div class="ttc" id="structredis_op_html_adc62368127157e2b3ff9cabe77f4f337"><div class="ttname"><a href="structredis_op.html#adc62368127157e2b3ff9cabe77f4f337">redisOp::dbid</a></div><div class="ttdeci">int dbid</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00833">server.h:833</a></div></div>
<div class="ttc" id="structredis_command_html_af326e6907d82b48a7952eb2d099ac2f4"><div class="ttname"><a href="structredis_command.html#af326e6907d82b48a7952eb2d099ac2f4">redisCommand::calls</a></div><div class="ttdeci">long long calls</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01303">server.h:1303</a></div></div>
<div class="ttc" id="sds_8c_html_a4d9266a6b2d5a98f0df0ac62f51324fd"><div class="ttname"><a href="sds_8c.html#a4d9266a6b2d5a98f0df0ac62f51324fd">sdsfree</a></div><div class="ttdeci">void sdsfree(sds s)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00165">sds.c:165</a></div></div>
<div class="ttc" id="structredis_op_array_html_aa2e11274504033ec9d5501c462f9fbaa"><div class="ttname"><a href="structredis_op_array.html#aa2e11274504033ec9d5501c462f9fbaa">redisOpArray::numops</a></div><div class="ttdeci">int numops</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00846">server.h:846</a></div></div>
<div class="ttc" id="structredis_server_html_a78645cb094289da318fa90b1cf3ad692"><div class="ttname"><a href="structredis_server.html#a78645cb094289da318fa90b1cf3ad692">redisServer::cfd</a></div><div class="ttdeci">int cfd[CONFIG_BINDADDR_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00969">server.h:969</a></div></div>
<div class="ttc" id="server_8h_html_a050e337ffdb94f18e190cc6d6d851196"><div class="ttname"><a href="server_8h.html#a050e337ffdb94f18e190cc6d6d851196">CONFIG_DEFAULT_STOP_WRITES_ON_BGSAVE_ERROR</a></div><div class="ttdeci">#define CONFIG_DEFAULT_STOP_WRITES_ON_BGSAVE_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00126">server.h:126</a></div></div>
<div class="ttc" id="structredis_op_array_html_a8a0d6869823f5a12e276fe2f7473f60f"><div class="ttname"><a href="structredis_op_array.html#a8a0d6869823f5a12e276fe2f7473f60f">redisOpArray::ops</a></div><div class="ttdeci">redisOp * ops</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00845">server.h:845</a></div></div>
<div class="ttc" id="server_8c_html_a28856a2957d6f48c684d877c9189fc18"><div class="ttname"><a href="server_8c.html#a28856a2957d6f48c684d877c9189fc18">redisCommandTable</a></div><div class="ttdeci">struct redisCommand redisCommandTable[]</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00127">server.c:127</a></div></div>
<div class="ttc" id="bitops_8c_html_a0b0771537df6eefbc289d48ff7aac77a"><div class="ttname"><a href="bitops_8c.html#a0b0771537df6eefbc289d48ff7aac77a">bitfieldCommand</a></div><div class="ttdeci">void bitfieldCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00914">bitops.c:914</a></div></div>
<div class="ttc" id="server_8h_html_a452e0a39c42c68759c8cdd072b5336cd"><div class="ttname"><a href="server_8h.html#a452e0a39c42c68759c8cdd072b5336cd">strlenCommand</a></div><div class="ttdeci">void strlenCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00468">t_string.c:468</a></div></div>
<div class="ttc" id="structredis_server_html_a6f19e371db996c707abef6d06c6231c2"><div class="ttname"><a href="structredis_server.html#a6f19e371db996c707abef6d06c6231c2">redisServer::blocked_clients_by_type</a></div><div class="ttdeci">unsigned int blocked_clients_by_type[BLOCKED_NUM]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01192">server.h:1192</a></div></div>
<div class="ttc" id="structclient_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="structclient.html#ac8bf36fe0577cba66bccda3a6f7e80a4">client::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00734">server.h:734</a></div></div>
<div class="ttc" id="server_8h_html_afafdd9e48fdc75907e57ac5910729a04"><div class="ttname"><a href="server_8h.html#afafdd9e48fdc75907e57ac5910729a04">CONFIG_DEFAULT_RDB_SAVE_INCREMENTAL_FSYNC</a></div><div class="ttdeci">#define CONFIG_DEFAULT_RDB_SAVE_INCREMENTAL_FSYNC</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00148">server.h:148</a></div></div>
<div class="ttc" id="server_8h_html_aff2f6e62c729d3f8b119d761818be317"><div class="ttname"><a href="server_8h.html#aff2f6e62c729d3f8b119d761818be317">OBJ_SHARED_BULKHDR_LEN</a></div><div class="ttdeci">#define OBJ_SHARED_BULKHDR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00095">server.h:95</a></div></div>
<div class="ttc" id="structredis_server_html_a4a08cd2c8856e15a14b0ebcff7305a6e"><div class="ttname"><a href="structredis_server.html#a4a08cd2c8856e15a14b0ebcff7305a6e">redisServer::cluster_migration_barrier</a></div><div class="ttdeci">int cluster_migration_barrier</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01228">server.h:1228</a></div></div>
<div class="ttc" id="server_8c_html_a17053b73c765fbf5a627fdf984dfa5b5"><div class="ttname"><a href="server_8c.html#a17053b73c765fbf5a627fdf984dfa5b5">dbDictType</a></div><div class="ttdeci">dictType dbDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00612">server.c:612</a></div></div>
<div class="ttc" id="server_8c_html_acfaf49811894b77d8a4b8984b2fb6cbf"><div class="ttname"><a href="server_8c.html#acfaf49811894b77d8a4b8984b2fb6cbf">dictListDestructor</a></div><div class="ttdeci">void dictListDestructor(void *privdata, void *val)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00465">server.c:465</a></div></div>
<div class="ttc" id="aof_8c_html_a85f34d09b65dafc802c9eb3c6a344d37"><div class="ttname"><a href="aof_8c.html#a85f34d09b65dafc802c9eb3c6a344d37">flushAppendOnlyFile</a></div><div class="ttdeci">void flushAppendOnlyFile(int force)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l00331">aof.c:331</a></div></div>
<div class="ttc" id="server_8c_html_aaac83f850dd4d037f1ece1af0b689899"><div class="ttname"><a href="server_8c.html#aaac83f850dd4d037f1ece1af0b689899">redisSetProcTitle</a></div><div class="ttdeci">void redisSetProcTitle(char *title)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03888">server.c:3888</a></div></div>
<div class="ttc" id="networking_8c_html_a11a0fdd832018a4dc969f71a44afe407"><div class="ttname"><a href="networking_8c.html#a11a0fdd832018a4dc969f71a44afe407">addReplyStatus</a></div><div class="ttdeci">void addReplyStatus(client *c, const char *status)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00410">networking.c:410</a></div></div>
<div class="ttc" id="server_8h_html_a7d57bb74515d8874cf4f25a7b4c85a30"><div class="ttname"><a href="server_8h.html#a7d57bb74515d8874cf4f25a7b4c85a30">hgetallCommand</a></div><div class="ttdeci">void hgetallCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00805">t_hash.c:805</a></div></div>
<div class="ttc" id="structredis_server_html_abb9634da7f2c5db97777a636828a4638"><div class="ttname"><a href="structredis_server.html#abb9634da7f2c5db97777a636828a4638">redisServer::tcp_backlog</a></div><div class="ttdeci">int tcp_backlog</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00961">server.h:961</a></div></div>
<div class="ttc" id="server_8h_html_aeea566aab7e8f14c691429404c4452f6"><div class="ttname"><a href="server_8h.html#aeea566aab7e8f14c691429404c4452f6">zunionstoreCommand</a></div><div class="ttdeci">void zunionstoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02405">t_zset.c:2405</a></div></div>
<div class="ttc" id="structredis_server_html_ad8b9c110356e88c74267accd345b669d"><div class="ttname"><a href="structredis_server.html#ad8b9c110356e88c74267accd345b669d">redisServer::proto_max_bulk_len</a></div><div class="ttdeci">long long proto_max_bulk_len</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01189">server.h:1189</a></div></div>
<div class="ttc" id="object_8c_html_ab09baeae3f0b14d5e0f36b7a8af2bdcf"><div class="ttname"><a href="object_8c.html#ab09baeae3f0b14d5e0f36b7a8af2bdcf">freeMemoryOverheadData</a></div><div class="ttdeci">void freeMemoryOverheadData(struct redisMemOverhead *mh)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00935">object.c:935</a></div></div>
<div class="ttc" id="server_8h_html_a201d97fc457fe5bd58cb863b4ac7a0cc"><div class="ttname"><a href="server_8h.html#a201d97fc457fe5bd58cb863b4ac7a0cc">CMD_PUBSUB</a></div><div class="ttdeci">#define CMD_PUBSUB</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00210">server.h:210</a></div></div>
<div class="ttc" id="structredis_server_html_a959bf5f04d138a3af6b360b20d5d25bd"><div class="ttname"><a href="structredis_server.html#a959bf5f04d138a3af6b360b20d5d25bd">redisServer::repl_backlog_time_limit</a></div><div class="ttdeci">time_t repl_backlog_time_limit</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01136">server.h:1136</a></div></div>
<div class="ttc" id="structredis_server_html_ae14e3c2d101f572b27b06e1f23613000"><div class="ttname"><a href="structredis_server.html#ae14e3c2d101f572b27b06e1f23613000">redisServer::bug_report_start</a></div><div class="ttdeci">int bug_report_start</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01271">server.h:1271</a></div></div>
<div class="ttc" id="server_8h_html_ad9887134ab0f5a756b866adf77ed93b3"><div class="ttname"><a href="server_8h.html#ad9887134ab0f5a756b866adf77ed93b3">lremCommand</a></div><div class="ttdeci">void lremCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00490">t_list.c:490</a></div></div>
<div class="ttc" id="structclient_html"><div class="ttname"><a href="structclient.html">client</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00709">server.h:709</a></div></div>
<div class="ttc" id="server_8h_html_a7a804fd4614bb512d4a04bf4c9ed0ce3"><div class="ttname"><a href="server_8h.html#a7a804fd4614bb512d4a04bf4c9ed0ce3">lsetCommand</a></div><div class="ttdeci">void lsetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00341">t_list.c:341</a></div></div>
<div class="ttc" id="server_8h_html_aee54cf0e2819c8b96136987f0f8ef0b8"><div class="ttname"><a href="server_8h.html#aee54cf0e2819c8b96136987f0f8ef0b8">CONFIG_DEFAULT_REPL_DISKLESS_SYNC_DELAY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_DISKLESS_SYNC_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00131">server.h:131</a></div></div>
<div class="ttc" id="structredis_server_html_ad28a95e9b6cd31f5feb7ebe5a8a8992a"><div class="ttname"><a href="structredis_server.html#ad28a95e9b6cd31f5feb7ebe5a8a8992a">redisServer::repl_diskless_sync</a></div><div class="ttdeci">int repl_diskless_sync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01143">server.h:1143</a></div></div>
<div class="ttc" id="zmalloc_8c_html_ae6638523882220721b9e7cdc7b2cd58d"><div class="ttname"><a href="zmalloc_8c.html#ae6638523882220721b9e7cdc7b2cd58d">zfree</a></div><div class="ttdeci">void zfree(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00190">zmalloc.c:190</a></div></div>
<div class="ttc" id="db_8c_html_a8f01d577acb7acd9df43669b691b83f6"><div class="ttname"><a href="db_8c.html#a8f01d577acb7acd9df43669b691b83f6">randomkeyCommand</a></div><div class="ttdeci">void randomkeyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00518">db.c:518</a></div></div>
<div class="ttc" id="structredis_server_html_a4a1716a96025de1fff867e1af23329e9"><div class="ttname"><a href="structredis_server.html#a4a1716a96025de1fff867e1af23329e9">redisServer::repl_good_slaves_count</a></div><div class="ttdeci">int repl_good_slaves_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01142">server.h:1142</a></div></div>
<div class="ttc" id="server_8h_html_a170ee2dd8cfefaf0d112edcc3152f8d7"><div class="ttname"><a href="server_8h.html#a170ee2dd8cfefaf0d112edcc3152f8d7">SLAVE_STATE_WAIT_BGSAVE_START</a></div><div class="ttdeci">#define SLAVE_STATE_WAIT_BGSAVE_START</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00310">server.h:310</a></div></div>
<div class="ttc" id="db_8c_html_a7887c9791609e331185f3113ce763c98"><div class="ttname"><a href="db_8c.html#a7887c9791609e331185f3113ce763c98">zunionInterGetKeys</a></div><div class="ttdeci">int * zunionInterGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01248">db.c:1248</a></div></div>
<div class="ttc" id="sds_8c_html_a8924a4a105d0f6dc359685357ceaef57"><div class="ttname"><a href="sds_8c.html#a8924a4a105d0f6dc359685357ceaef57">sdsnew</a></div><div class="ttdeci">sds sdsnew(const char *init)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00154">sds.c:154</a></div></div>
<div class="ttc" id="networking_8c_html_abe873add36c720d962820c00176f7490"><div class="ttname"><a href="networking_8c.html#abe873add36c720d962820c00176f7490">addReplyMultiBulkLen</a></div><div class="ttdeci">void addReplyMultiBulkLen(client *c, long length)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00533">networking.c:533</a></div></div>
<div class="ttc" id="server_8h_html_a26b127b9f676a82e78c29694e284cc73"><div class="ttname"><a href="server_8h.html#a26b127b9f676a82e78c29694e284cc73">incrCommand</a></div><div class="ttdeci">void incrCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00379">t_string.c:379</a></div></div>
<div class="ttc" id="server_8c_html_a2926d1d3245c14f1014cc11d673d0416"><div class="ttname"><a href="server_8c.html#a2926d1d3245c14f1014cc11d673d0416">forceCommandPropagation</a></div><div class="ttdeci">void forceCommandPropagation(client *c, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02351">server.c:2351</a></div></div>
<div class="ttc" id="lazyfree_8c_html_a3e9b6c8fa1b461d094e096637f0cf3cf"><div class="ttname"><a href="lazyfree_8c.html#a3e9b6c8fa1b461d094e096637f0cf3cf">lazyfreeGetPendingObjectsCount</a></div><div class="ttdeci">size_t lazyfreeGetPendingObjectsCount(void)</div><div class="ttdef"><b>Definition:</b> <a href="lazyfree_8c_source.html#l00010">lazyfree.c:10</a></div></div>
<div class="ttc" id="object_8c_html_a1032572b4b3b6e9425744bb86d98ec15"><div class="ttname"><a href="object_8c.html#a1032572b4b3b6e9425744bb86d98ec15">getMemoryOverheadData</a></div><div class="ttdeci">struct redisMemOverhead * getMemoryOverheadData(void)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00943">object.c:943</a></div></div>
<div class="ttc" id="slowlog_8h_html"><div class="ttname"><a href="slowlog_8h.html">slowlog.h</a></div></div>
<div class="ttc" id="server_8h_html_ab430d96c57f42f9856a1db7400eaadcb"><div class="ttname"><a href="server_8h.html#ab430d96c57f42f9856a1db7400eaadcb">hvalsCommand</a></div><div class="ttdeci">void hvalsCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00801">t_hash.c:801</a></div></div>
<div class="ttc" id="server_8c_html_a1eb41b14cb13e6dd5edd3125af3073da"><div class="ttname"><a href="server_8c.html#a1eb41b14cb13e6dd5edd3125af3073da">writeCommandsDeniedByDiskError</a></div><div class="ttdeci">int writeCommandsDeniedByDiskError(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02836">server.c:2836</a></div></div>
<div class="ttc" id="server_8h_html"><div class="ttname"><a href="server_8h.html">server.h</a></div></div>
<div class="ttc" id="server_8h_html_a81bfa438480da1127e7338b44596ac01"><div class="ttname"><a href="server_8h.html#a81bfa438480da1127e7338b44596ac01">saddCommand</a></div><div class="ttdeci">void saddCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00264">t_set.c:264</a></div></div>
<div class="ttc" id="structredis_db_html_a605ade426dd43b0de7ea393efa17d337"><div class="ttname"><a href="structredis_db.html#a605ade426dd43b0de7ea393efa17d337">redisDb::avg_ttl</a></div><div class="ttdeci">long long avg_ttl</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00643">server.h:643</a></div></div>
<div class="ttc" id="server_8h_html_aea3bfee2e140aed0fc93bf087026f9a3"><div class="ttname"><a href="server_8h.html#aea3bfee2e140aed0fc93bf087026f9a3">CLIENT_PREVENT_PROP</a></div><div class="ttdeci">#define CLIENT_PREVENT_PROP</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00250">server.h:250</a></div></div>
<div class="ttc" id="structredis_server_html_ad96648ad6e6ace0d086d5d599a0dba60"><div class="ttname"><a href="structredis_server.html#ad96648ad6e6ace0d086d5d599a0dba60">redisServer::active_defrag_threshold_upper</a></div><div class="ttdeci">int active_defrag_threshold_upper</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01042">server.h:1042</a></div></div>
<div class="ttc" id="structredis_server_html_a096ccc623839d9ec2ce7b80cf9d1b4a2"><div class="ttname"><a href="structredis_server.html#a096ccc623839d9ec2ce7b80cf9d1b4a2">redisServer::cluster_node_timeout</a></div><div class="ttdeci">mstime_t cluster_node_timeout</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01225">server.h:1225</a></div></div>
<div class="ttc" id="structredis_server_html_ae0f9ff421f7264992c5857ea7f03fb50"><div class="ttname"><a href="structredis_server.html#ae0f9ff421f7264992c5857ea7f03fb50">redisServer::assert_line</a></div><div class="ttdeci">int assert_line</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01270">server.h:1270</a></div></div>
<div class="ttc" id="structredis_server_html_ab89dd03338e3ba557ce26478c4edcdc4"><div class="ttname"><a href="structredis_server.html#ab89dd03338e3ba557ce26478c4edcdc4">redisServer::stat_aof_cow_bytes</a></div><div class="ttdeci">size_t stat_aof_cow_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01025">server.h:1025</a></div></div>
<div class="ttc" id="server_8h_html_a7f61f783f429419f8c593291a509b03a"><div class="ttname"><a href="server_8h.html#a7f61f783f429419f8c593291a509b03a">CLIENT_MULTI</a></div><div class="ttdeci">#define CLIENT_MULTI</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00231">server.h:231</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_af21382aaf8f931d992586bbfe5f8aca2"><div class="ttname"><a href="structredis_mem_overhead.html#af21382aaf8f931d992586bbfe5f8aca2">redisMemOverhead::clients_normal</a></div><div class="ttdeci">size_t clients_normal</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00857">server.h:857</a></div></div>
<div class="ttc" id="server_8c_html_a26f5f7d1708111165c38a2a6ed698107"><div class="ttname"><a href="server_8c.html#a26f5f7d1708111165c38a2a6ed698107">time_independent_strcmp</a></div><div class="ttdeci">int time_independent_strcmp(char *a, char *b)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02860">server.c:2860</a></div></div>
<div class="ttc" id="pubsub_8c_html_a472428e32d6dddf29790796d3388e135"><div class="ttname"><a href="pubsub_8c.html#a472428e32d6dddf29790796d3388e135">unsubscribeCommand</a></div><div class="ttdeci">void unsubscribeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00285">pubsub.c:285</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a77c06a595d2361dac7f9850206edd65d"><div class="ttname"><a href="structshared_objects_struct.html#a77c06a595d2361dac7f9850206edd65d">sharedObjectsStruct::pmessagebulk</a></div><div class="ttdeci">robj * pmessagebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_a5b0c46fd63529819e2c0189003d72122"><div class="ttname"><a href="server_8h.html#a5b0c46fd63529819e2c0189003d72122">CONFIG_DEFAULT_CLUSTER_CONFIG_FILE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_CLUSTER_CONFIG_FILE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00116">server.h:116</a></div></div>
<div class="ttc" id="structredis_server_html_a55d43de23d27c946ee397eb185bd8e98"><div class="ttname"><a href="structredis_server.html#a55d43de23d27c946ee397eb185bd8e98">redisServer::cluster_module_flags</a></div><div class="ttdeci">int cluster_module_flags</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01237">server.h:1237</a></div></div>
<div class="ttc" id="replication_8c_html_af842a6430c5f5a08a39d5e2112041a85"><div class="ttname"><a href="replication_8c.html#af842a6430c5f5a08a39d5e2112041a85">changeReplicationId</a></div><div class="ttdeci">void changeReplicationId(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l01007">replication.c:1007</a></div></div>
<div class="ttc" id="server_8h_html_aaab0790ee1a625276dce078a9dbbe075"><div class="ttname"><a href="server_8h.html#aaab0790ee1a625276dce078a9dbbe075">CRON_DBS_PER_CALL</a></div><div class="ttdeci">#define CRON_DBS_PER_CALL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00091">server.h:91</a></div></div>
<div class="ttc" id="hyperloglog_8c_html_a3cc766564e1420433a9c1e4b59e2ba51"><div class="ttname"><a href="hyperloglog_8c.html#a3cc766564e1420433a9c1e4b59e2ba51">pfmergeCommand</a></div><div class="ttdeci">void pfmergeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="hyperloglog_8c_source.html#l01304">hyperloglog.c:1304</a></div></div>
<div class="ttc" id="server_8c_html_a4ca74222ae99615dd8eaa8ca5050046d"><div class="ttname"><a href="server_8c.html#a4ca74222ae99615dd8eaa8ca5050046d">checkTcpBacklogSettings</a></div><div class="ttdeci">void checkTcpBacklogSettings(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01880">server.c:1880</a></div></div>
<div class="ttc" id="structrdb_save_info_html_acaaa973071b682ff89c70991a2d3ce7a"><div class="ttname"><a href="structrdb_save_info.html#acaaa973071b682ff89c70991a2d3ce7a">rdbSaveInfo::repl_offset</a></div><div class="ttdeci">long long repl_offset</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00897">server.h:897</a></div></div>
<div class="ttc" id="server_8h_html_a521a4712dde25cca82bef5a42a48e7dd"><div class="ttname"><a href="server_8h.html#a521a4712dde25cca82bef5a42a48e7dd">hmgetCommand</a></div><div class="ttdeci">void hmgetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00684">t_hash.c:684</a></div></div>
<div class="ttc" id="server_8h_html_a6725c1ff5b6a17f930627263f484d107"><div class="ttname"><a href="server_8h.html#a6725c1ff5b6a17f930627263f484d107">CONFIG_FDSET_INCR</a></div><div class="ttdeci">#define CONFIG_FDSET_INCR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00198">server.h:198</a></div></div>
<div class="ttc" id="replication_8c_html_a513fcda284bfbf4e1cebe298c3e1f8a8"><div class="ttname"><a href="replication_8c.html#a513fcda284bfbf4e1cebe298c3e1f8a8">roleCommand</a></div><div class="ttdeci">void roleCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02046">replication.c:2046</a></div></div>
<div class="ttc" id="server_8h_html_a51d6f5ebca3a951559c2f96900981238"><div class="ttname"><a href="server_8h.html#a51d6f5ebca3a951559c2f96900981238">bzpopminCommand</a></div><div class="ttdeci">void bzpopminCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03296">t_zset.c:3296</a></div></div>
<div class="ttc" id="server_8h_html_ada761b94960fa20ff86d56b403b26861"><div class="ttname"><a href="server_8h.html#ada761b94960fa20ff86d56b403b26861">SHUTDOWN_SAVE</a></div><div class="ttdeci">#define SHUTDOWN_SAVE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00408">server.h:408</a></div></div>
<div class="ttc" id="anet_8c_html_a0ffab7741e0d2152c02a6af6f3048cae"><div class="ttname"><a href="anet_8c.html#a0ffab7741e0d2152c02a6af6f3048cae">anetNonBlock</a></div><div class="ttdeci">int anetNonBlock(char *err, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="anet_8c_source.html#l00084">anet.c:84</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a7dcfd2bdf329730a992f30f52b145dbb"><div class="ttname"><a href="structredis_mem_overhead.html#a7dcfd2bdf329730a992f30f52b145dbb">redisMemOverhead::allocator_frag_bytes</a></div><div class="ttdeci">size_t allocator_frag_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00869">server.h:869</a></div></div>
<div class="ttc" id="latency_8c_html_a7f4b4d18fb9666b1ecd84b944ca3cc8f"><div class="ttname"><a href="latency_8c.html#a7f4b4d18fb9666b1ecd84b944ca3cc8f">latencyMonitorInit</a></div><div class="ttdeci">void latencyMonitorInit(void)</div><div class="ttdef"><b>Definition:</b> <a href="latency_8c_source.html#l00090">latency.c:90</a></div></div>
<div class="ttc" id="structredis_server_html_ab3c25439f27c5b8411020804ffe59b51"><div class="ttname"><a href="structredis_server.html#ab3c25439f27c5b8411020804ffe59b51">redisServer::next_client_id_mutex</a></div><div class="ttdeci">pthread_mutex_t next_client_id_mutex</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01279">server.h:1279</a></div></div>
<div class="ttc" id="server_8h_html_a43e2aecb49a88a6cd4e56bfa971bdc71"><div class="ttname"><a href="server_8h.html#a43e2aecb49a88a6cd4e56bfa971bdc71">CMD_SKIP_MONITOR</a></div><div class="ttdeci">#define CMD_SKIP_MONITOR</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00216">server.h:216</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a04d6600ef1fe2b894f70764a861e41ff"><div class="ttname"><a href="structshared_objects_struct.html#a04d6600ef1fe2b894f70764a861e41ff">sharedObjectsStruct::oomerr</a></div><div class="ttdeci">robj * oomerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a569a855cbd6e2df036f5ecc967d792c1"><div class="ttname"><a href="server_8c.html#a569a855cbd6e2df036f5ecc967d792c1">createPidFile</a></div><div class="ttdeci">void createPidFile(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03686">server.c:3686</a></div></div>
<div class="ttc" id="config_8c_html_ade7b94fca323078af462a663522e6e95"><div class="ttname"><a href="config_8c.html#ade7b94fca323078af462a663522e6e95">evictPolicyToString</a></div><div class="ttdeci">const char * evictPolicyToString(void)</div><div class="ttdef"><b>Definition:</b> <a href="config_8c_source.html#l00131">config.c:131</a></div></div>
<div class="ttc" id="structredis_server_html_a6825c9e12c2d5353c1741e71fbe29fc0"><div class="ttname"><a href="structredis_server.html#a6825c9e12c2d5353c1741e71fbe29fc0">redisServer::loading</a></div><div class="ttdeci">int loading</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00984">server.h:984</a></div></div>
<div class="ttc" id="server_8h_html_aa84cedc4d9e3da82d28324a85626a666"><div class="ttname"><a href="server_8h.html#aa84cedc4d9e3da82d28324a85626a666">CONFIG_DEFAULT_PROTECTED_MODE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_PROTECTED_MODE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00123">server.h:123</a></div></div>
<div class="ttc" id="server_8c_html_a9438694faedfc9ba62643c59c414b3dc"><div class="ttname"><a href="server_8c.html#a9438694faedfc9ba62643c59c414b3dc">serverLogRaw</a></div><div class="ttdeci">void serverLogRaw(int level, const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00338">server.c:338</a></div></div>
<div class="ttc" id="structclient_html_a8ed6c4d0c6382ad1787b32d10db25c5e"><div class="ttname"><a href="structclient.html#a8ed6c4d0c6382ad1787b32d10db25c5e">client::cmd</a></div><div class="ttdeci">struct redisCommand * cmd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00723">server.h:723</a></div></div>
<div class="ttc" id="server_8c_html_a414bd8f2a71956983015b78836134525"><div class="ttname"><a href="server_8c.html#a414bd8f2a71956983015b78836134525">closeListeningSockets</a></div><div class="ttdeci">void closeListeningSockets(int unlink_unix_socket)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02738">server.c:2738</a></div></div>
<div class="ttc" id="structmalloc__stats_html_a35a8adbf64bc20a4ab20cf3872ea5e54"><div class="ttname"><a href="structmalloc__stats.html#a35a8adbf64bc20a4ab20cf3872ea5e54">malloc_stats::allocator_allocated</a></div><div class="ttdeci">size_t allocator_allocated</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00905">server.h:905</a></div></div>
<div class="ttc" id="server_8h_html_aaf7d188f844d86576cfc9c1fdb31fdee"><div class="ttname"><a href="server_8h.html#aaf7d188f844d86576cfc9c1fdb31fdee">OBJ_STREAM_NODE_MAX_BYTES</a></div><div class="ttdeci">#define OBJ_STREAM_NODE_MAX_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00364">server.h:364</a></div></div>
<div class="ttc" id="sds_8c_html_af0bb695d269439f719caca4129989090"><div class="ttname"><a href="sds_8c.html#af0bb695d269439f719caca4129989090">sdsempty</a></div><div class="ttdeci">sds sdsempty(void)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00149">sds.c:149</a></div></div>
<div class="ttc" id="structredis_server_html_afae1b2ee523b006366dbe18ce9dae2e1"><div class="ttname"><a href="structredis_server.html#afae1b2ee523b006366dbe18ce9dae2e1">redisServer::stat_sync_partial_err</a></div><div class="ttdeci">long long stat_sync_partial_err</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01016">server.h:1016</a></div></div>
<div class="ttc" id="server_8h_html_a20a7f934b2eceae8fdbb1ac112a783c3"><div class="ttname"><a href="server_8h.html#a20a7f934b2eceae8fdbb1ac112a783c3">CONFIG_DEFAULT_LATENCY_MONITOR_THRESHOLD</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LATENCY_MONITOR_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00155">server.h:155</a></div></div>
<div class="ttc" id="anet_8c_html_ad7d02bffdb97772cda66cc6abe791a76"><div class="ttname"><a href="anet_8c.html#ad7d02bffdb97772cda66cc6abe791a76">anetUnixServer</a></div><div class="ttdeci">int anetUnixServer(char *err, char *path, mode_t perm, int backlog)</div><div class="ttdef"><b>Definition:</b> <a href="anet_8c_source.html#l00513">anet.c:513</a></div></div>
<div class="ttc" id="rdb_8c_html_a08638ef1294c6584df5b54b0ef109a95"><div class="ttname"><a href="rdb_8c.html#a08638ef1294c6584df5b54b0ef109a95">backgroundSaveDoneHandler</a></div><div class="ttdeci">void backgroundSaveDoneHandler(int exitcode, int bysignal)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l02211">rdb.c:2211</a></div></div>
<div class="ttc" id="server_8h_html_a41a8473748a5eeafbd30b20f22177c51"><div class="ttname"><a href="server_8h.html#a41a8473748a5eeafbd30b20f22177c51">OBJ_HASH_MAX_ZIPLIST_ENTRIES</a></div><div class="ttdeci">#define OBJ_HASH_MAX_ZIPLIST_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00359">server.h:359</a></div></div>
<div class="ttc" id="server_8h_html_a6d217560ae714ab8d0cc21832b210e0b"><div class="ttname"><a href="server_8h.html#a6d217560ae714ab8d0cc21832b210e0b">STATS_METRIC_NET_INPUT</a></div><div class="ttdeci">#define STATS_METRIC_NET_INPUT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00179">server.h:179</a></div></div>
<div class="ttc" id="aof_8c_html_a55a176249cd6ec3d89f7115527622f36"><div class="ttname"><a href="aof_8c.html#a55a176249cd6ec3d89f7115527622f36">aofRewriteBufferReset</a></div><div class="ttdeci">void aofRewriteBufferReset(void)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l00070">aof.c:70</a></div></div>
<div class="ttc" id="server_8c_html_a9ef4824ea818b12731c36603eed062d5"><div class="ttname"><a href="server_8c.html#a9ef4824ea818b12731c36603eed062d5">ustime</a></div><div class="ttdeci">long long ustime(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00426">server.c:426</a></div></div>
<div class="ttc" id="server_8h_html_a1d6ca2cad092805de3acd7b74876a323"><div class="ttname"><a href="server_8h.html#a1d6ca2cad092805de3acd7b74876a323">CONFIG_DEFAULT_CLIENT_TIMEOUT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_CLIENT_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00088">server.h:88</a></div></div>
<div class="ttc" id="object_8c_html_a5f534218574d15e8333875d10d7e7316"><div class="ttname"><a href="object_8c.html#a5f534218574d15e8333875d10d7e7316">createObject</a></div><div class="ttdeci">robj * createObject(int type, void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00041">object.c:41</a></div></div>
<div class="ttc" id="structclient_html_a287c6c69470388ee449924e3a8f7933b"><div class="ttname"><a href="structclient.html#a287c6c69470388ee449924e3a8f7933b">client::slave_listening_port</a></div><div class="ttdeci">int slave_listening_port</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00750">server.h:750</a></div></div>
<div class="ttc" id="structredis_server_html_a902c2c73c0b20af987cc22e032044e29"><div class="ttname"><a href="structredis_server.html#a902c2c73c0b20af987cc22e032044e29">redisServer::cfd_count</a></div><div class="ttdeci">int cfd_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00970">server.h:970</a></div></div>
<div class="ttc" id="server_8h_html_aa0c827caa37aa713be68e285c0c14104"><div class="ttname"><a href="server_8h.html#aa0c827caa37aa713be68e285c0c14104">rpushCommand</a></div><div class="ttdeci">void rpushCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00230">t_list.c:230</a></div></div>
<div class="ttc" id="structrdb_save_info_html_af57b6e90af7dbfc2dd62eb2d903437bf"><div class="ttname"><a href="structrdb_save_info.html#af57b6e90af7dbfc2dd62eb2d903437bf">rdbSaveInfo::repl_id</a></div><div class="ttdeci">char repl_id[CONFIG_RUN_ID_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00896">server.h:896</a></div></div>
<div class="ttc" id="db_8c_html_a47000c62451a737c56a464e16b843ae4"><div class="ttname"><a href="db_8c.html#a47000c62451a737c56a464e16b843ae4">flushdbCommand</a></div><div class="ttdeci">void flushdbCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00426">db.c:426</a></div></div>
<div class="ttc" id="server_8h_html_ae87bf05241efb6cf0ed6cc7bb7068a96"><div class="ttname"><a href="server_8h.html#ae87bf05241efb6cf0ed6cc7bb7068a96">lindexCommand</a></div><div class="ttdeci">void lindexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00314">t_list.c:314</a></div></div>
<div class="ttc" id="server_8c_html_a13ee06265ca4b39a89d55522e52e6cf0"><div class="ttname"><a href="server_8c.html#a13ee06265ca4b39a89d55522e52e6cf0">commandCommand</a></div><div class="ttdeci">void commandCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02994">server.c:2994</a></div></div>
<div class="ttc" id="server_8h_html_ac3639325926480a4762281da684484a8"><div class="ttname"><a href="server_8h.html#ac3639325926480a4762281da684484a8">hkeysCommand</a></div><div class="ttdeci">void hkeysCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00797">t_hash.c:797</a></div></div>
<div class="ttc" id="structredis_server_html_a467ab80673fbca31b4729a65effc8362"><div class="ttname"><a href="structredis_server.html#a467ab80673fbca31b4729a65effc8362">redisServer::replid</a></div><div class="ttdeci">char replid[CONFIG_RUN_ID_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01123">server.h:1123</a></div></div>
<div class="ttc" id="server_8h_html_a6a8bd5902de5f6d6d0eb7e5105f40fef"><div class="ttname"><a href="server_8h.html#a6a8bd5902de5f6d6d0eb7e5105f40fef">msetCommand</a></div><div class="ttdeci">void msetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00333">t_string.c:333</a></div></div>
<div class="ttc" id="structredis_server_html_abb58a3bfa3d302d8c4b74b7c4f59644b"><div class="ttname"><a href="structredis_server.html#abb58a3bfa3d302d8c4b74b7c4f59644b">redisServer::dynamic_hz</a></div><div class="ttdeci">int dynamic_hz</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00932">server.h:932</a></div></div>
<div class="ttc" id="server_8c_html_a79785342d159d7e8dc4547ffb330835d"><div class="ttname"><a href="server_8c.html#a79785342d159d7e8dc4547ffb330835d">CLIENTS_CRON_MIN_ITERATIONS</a></div><div class="ttdeci">#define CLIENTS_CRON_MIN_ITERATIONS</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00961">server.c:961</a></div></div>
<div class="ttc" id="server_8c_html_ad708a8be8ec0172827f3006e9237f840"><div class="ttname"><a href="server_8c.html#ad708a8be8ec0172827f3006e9237f840">initServerConfig</a></div><div class="ttdeci">void initServerConfig(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01517">server.c:1517</a></div></div>
<div class="ttc" id="server_8h_html_a8cff2154afcc2e87ac85bdbbe2814091"><div class="ttname"><a href="server_8h.html#a8cff2154afcc2e87ac85bdbbe2814091">CLIENT_CLOSE_AFTER_REPLY</a></div><div class="ttdeci">#define CLIENT_CLOSE_AFTER_REPLY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00234">server.h:234</a></div></div>
<div class="ttc" id="server_8h_html_a32a2d5040a508f2d760186b8880abdfb"><div class="ttname"><a href="server_8h.html#a32a2d5040a508f2d760186b8880abdfb">rewriteConfig</a></div><div class="ttdeci">int rewriteConfig(char *path)</div></div>
<div class="ttc" id="server_8h_html_ab3c6c64d2957b6ca82b754949c302060"><div class="ttname"><a href="server_8h.html#ab3c6c64d2957b6ca82b754949c302060">zremrangebyscoreCommand</a></div><div class="ttdeci">void zremrangebyscoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01800">t_zset.c:1800</a></div></div>
<div class="ttc" id="server_8h_html_a3dec1c137e29e15e8f5bfcf372766609"><div class="ttname"><a href="server_8h.html#a3dec1c137e29e15e8f5bfcf372766609">incrbyfloatCommand</a></div><div class="ttdeci">void incrbyfloatCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00401">t_string.c:401</a></div></div>
<div class="ttc" id="server_8h_html_a32ce16d3d8626f18d6799b328923dfc9"><div class="ttname"><a href="server_8h.html#a32ce16d3d8626f18d6799b328923dfc9">zrankCommand</a></div><div class="ttdeci">void zrankCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03107">t_zset.c:3107</a></div></div>
<div class="ttc" id="server_8c_html_a3d823b9ddd3225d0c4ebb282296bf1d3"><div class="ttname"><a href="server_8c.html#a3d823b9ddd3225d0c4ebb282296bf1d3">adjustOpenFilesLimit</a></div><div class="ttdeci">void adjustOpenFilesLimit(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01803">server.c:1803</a></div></div>
<div class="ttc" id="server_8h_html_a7fdc7df0e6f17449d8c5858ddda95f67"><div class="ttname"><a href="server_8h.html#a7fdc7df0e6f17449d8c5858ddda95f67">rpoplpushCommand</a></div><div class="ttdeci">void rpoplpushCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00565">t_list.c:565</a></div></div>
<div class="ttc" id="anet_8c_html_ac2a48196c12df4f013a2ef973c0aef7f"><div class="ttname"><a href="anet_8c.html#ac2a48196c12df4f013a2ef973c0aef7f">anetTcp6Server</a></div><div class="ttdeci">int anetTcp6Server(char *err, int port, char *bindaddr, int backlog)</div><div class="ttdef"><b>Definition:</b> <a href="anet_8c_source.html#l00508">anet.c:508</a></div></div>
<div class="ttc" id="server_8h_html_aab4fb79f7d4462edc3409f47b30a1e14"><div class="ttname"><a href="server_8h.html#aab4fb79f7d4462edc3409f47b30a1e14">linsertCommand</a></div><div class="ttdeci">void linsertCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00264">t_list.c:264</a></div></div>
<div class="ttc" id="rdb_8c_html_a375bcef317cf901664d95fad3bfcfd40"><div class="ttname"><a href="rdb_8c.html#a375bcef317cf901664d95fad3bfcfd40">rdbSaveBackground</a></div><div class="ttdeci">int rdbSaveBackground(char *filename, rdbSaveInfo *rsi)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l01282">rdb.c:1282</a></div></div>
<div class="ttc" id="zmalloc_8c_html_ac24423a93cab2fbf18e28cc2f42f7f97"><div class="ttname"><a href="zmalloc_8c.html#ac24423a93cab2fbf18e28cc2f42f7f97">zrealloc</a></div><div class="ttdeci">void * zrealloc(void *ptr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00144">zmalloc.c:144</a></div></div>
<div class="ttc" id="zmalloc_8c_html_a879ee0956348fd24dc2ac69c2d4f220b"><div class="ttname"><a href="zmalloc_8c.html#a879ee0956348fd24dc2ac69c2d4f220b">zmalloc</a></div><div class="ttdeci">void * zmalloc(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00098">zmalloc.c:98</a></div></div>
<div class="ttc" id="structlist_iter_html"><div class="ttname"><a href="structlist_iter.html">listIter</a></div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00042">adlist.h:42</a></div></div>
<div class="ttc" id="server_8h_html_a16aed28fce864ad4403a609dc8456ea5"><div class="ttname"><a href="server_8h.html#a16aed28fce864ad4403a609dc8456ea5">lpushxCommand</a></div><div class="ttdeci">void lpushxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00256">t_list.c:256</a></div></div>
<div class="ttc" id="server_8h_html_a89c17a788c9beba2b0e2db97288c245e"><div class="ttname"><a href="server_8h.html#a89c17a788c9beba2b0e2db97288c245e">xinfoCommand</a></div><div class="ttdeci">void xinfoCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l02406">t_stream.c:2406</a></div></div>
<div class="ttc" id="config_8c_html_a99594147f9c18590b474b8a2dfb812c8"><div class="ttname"><a href="config_8c.html#a99594147f9c18590b474b8a2dfb812c8">resetServerSaveParams</a></div><div class="ttdeci">void resetServerSaveParams(void)</div><div class="ttdef"><b>Definition:</b> <a href="config_8c_source.html#l00152">config.c:152</a></div></div>
<div class="ttc" id="server_8h_html_acc08f077e279fea572c00484f4744fc1"><div class="ttname"><a href="server_8h.html#acc08f077e279fea572c00484f4744fc1">psetexCommand</a></div><div class="ttdeci">void psetexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00152">t_string.c:152</a></div></div>
<div class="ttc" id="replication_8c_html_a210b8e82fb1482b1655f23bac2b09509"><div class="ttname"><a href="replication_8c.html#a210b8e82fb1482b1655f23bac2b09509">replicationFeedMonitors</a></div><div class="ttdeci">void replicationFeedMonitors(client *c, list *monitors, int dictid, robj **argv, int argc)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l00303">replication.c:303</a></div></div>
<div class="ttc" id="server_8h_html_a7d4b86c89be4d951fbf048130431a16a"><div class="ttname"><a href="server_8h.html#a7d4b86c89be4d951fbf048130431a16a">AOF_WAIT_REWRITE</a></div><div class="ttdeci">#define AOF_WAIT_REWRITE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00225">server.h:225</a></div></div>
<div class="ttc" id="structredis_server_html_a8e76d99dd09948088702e8d138fb5662"><div class="ttname"><a href="structredis_server.html#a8e76d99dd09948088702e8d138fb5662">redisServer::zset_max_ziplist_entries</a></div><div class="ttdeci">size_t zset_max_ziplist_entries</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01205">server.h:1205</a></div></div>
<div class="ttc" id="structredis_server_html_a2a6541cee50890f9c9be5d252b2f9b31"><div class="ttname"><a href="structredis_server.html#a2a6541cee50890f9c9be5d252b2f9b31">redisServer::client_max_querybuf_len</a></div><div class="ttdeci">size_t client_max_querybuf_len</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01046">server.h:1046</a></div></div>
<div class="ttc" id="structredis_server_html_a3de172bb2507aa566698d109c783153a"><div class="ttname"><a href="structredis_server.html#a3de172bb2507aa566698d109c783153a">redisServer::stat_active_defrag_scanned</a></div><div class="ttdeci">long long stat_active_defrag_scanned</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01009">server.h:1009</a></div></div>
<div class="ttc" id="structredis_server_html_a1e552149c10f70ef055718ed88837bc3"><div class="ttname"><a href="structredis_server.html#a1e552149c10f70ef055718ed88837bc3">redisServer::initial_memory_usage</a></div><div class="ttdeci">size_t initial_memory_usage</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00951">server.h:951</a></div></div>
<div class="ttc" id="bio_8c_html_aaa7c819608423673bf1da5f9b2c39eda"><div class="ttname"><a href="bio_8c.html#aaa7c819608423673bf1da5f9b2c39eda">bioPendingJobsOfType</a></div><div class="ttdeci">unsigned long long bioPendingJobsOfType(int type)</div><div class="ttdef"><b>Definition:</b> <a href="bio_8c_source.html#l00219">bio.c:219</a></div></div>
<div class="ttc" id="object_8c_html_aa14f89ea2cc52c4e3d9ba91d85478a1c"><div class="ttname"><a href="object_8c.html#aa14f89ea2cc52c4e3d9ba91d85478a1c">makeObjectShared</a></div><div class="ttdeci">robj * makeObjectShared(robj *o)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00069">object.c:69</a></div></div>
<div class="ttc" id="server_8c_html_ab8d3fd6e5cef698cc6a7d670ed0e468d"><div class="ttname"><a href="server_8c.html#ab8d3fd6e5cef698cc6a7d670ed0e468d">loadDataFromDisk</a></div><div class="ttdeci">void loadDataFromDisk(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03847">server.c:3847</a></div></div>
<div class="ttc" id="server_8h_html_a8e9d7cd814b95c2cbd17701efe1374f2"><div class="ttname"><a href="server_8h.html#a8e9d7cd814b95c2cbd17701efe1374f2">CONFIG_AUTHPASS_MAX_LEN</a></div><div class="ttdeci">#define CONFIG_AUTHPASS_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00104">server.h:104</a></div></div>
<div class="ttc" id="server_8c_html_a964cda115a27998e37c5d3711ea6b676"><div class="ttname"><a href="server_8c.html#a964cda115a27998e37c5d3711ea6b676">redisSupervisedUpstart</a></div><div class="ttdeci">int redisSupervisedUpstart(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03908">server.c:3908</a></div></div>
<div class="ttc" id="server_8h_html_aa5a3b127e21d6bf089025d953c44678a"><div class="ttname"><a href="server_8h.html#aa5a3b127e21d6bf089025d953c44678a">CONFIG_DEFAULT_HZ</a></div><div class="ttdeci">#define CONFIG_DEFAULT_HZ</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00082">server.h:82</a></div></div>
<div class="ttc" id="structclient_html_accf8e4a2bc6b80403d3f0f024eaa8a1b"><div class="ttname"><a href="structclient.html#accf8e4a2bc6b80403d3f0f024eaa8a1b">client::querybuf</a></div><div class="ttdeci">sds querybuf</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00714">server.h:714</a></div></div>
<div class="ttc" id="server_8h_html_af951fdb3aa8efbce7cde83e8a31fff6a"><div class="ttname"><a href="server_8h.html#af951fdb3aa8efbce7cde83e8a31fff6a">RESTART_SERVER_GRACEFULLY</a></div><div class="ttdeci">#define RESTART_SERVER_GRACEFULLY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01740">server.h:1740</a></div></div>
<div class="ttc" id="server_8h_html_a934cea7b13db05a29264146cd5b14064"><div class="ttname"><a href="server_8h.html#a934cea7b13db05a29264146cd5b14064">CMD_CALL_SLOWLOG</a></div><div class="ttdeci">#define CMD_CALL_SLOWLOG</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00414">server.h:414</a></div></div>
<div class="ttc" id="scripting_8c_html_a0afc20a5e4e51989e17b34c3bc4602d9"><div class="ttname"><a href="scripting_8c.html#a0afc20a5e4e51989e17b34c3bc4602d9">scriptingInit</a></div><div class="ttdeci">void scriptingInit(int setup)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l00913">scripting.c:913</a></div></div>
<div class="ttc" id="networking_8c_html_a196bf9c2087770b40bfd9f4000544a67"><div class="ttname"><a href="networking_8c.html#a196bf9c2087770b40bfd9f4000544a67">setDeferredMultiBulkLength</a></div><div class="ttdeci">void setDeferredMultiBulkLength(client *c, void *node, long length)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00435">networking.c:435</a></div></div>
<div class="ttc" id="server_8h_html_a256b9506e551eaa7417f75f8fa9ed901"><div class="ttname"><a href="server_8h.html#a256b9506e551eaa7417f75f8fa9ed901">REPL_STATE_NONE</a></div><div class="ttdeci">#define REPL_STATE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00287">server.h:287</a></div></div>
<div class="ttc" id="structredis_op_html_a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9"><div class="ttname"><a href="structredis_op.html#a5c75dd3cb8eb8a3f5be7d4fdf48a9ef9">redisOp::argv</a></div><div class="ttdeci">robj ** argv</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00832">server.h:832</a></div></div>
<div class="ttc" id="structredis_server_html_abc582fb4bb1c2a826e1fe27280a716e7"><div class="ttname"><a href="structredis_server.html#abc582fb4bb1c2a826e1fe27280a716e7">redisServer::migrate_cached_sockets</a></div><div class="ttdeci">dict * migrate_cached_sockets</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00980">server.h:980</a></div></div>
<div class="ttc" id="structredis_server_html_a8938316e9f6211b407eb2b1b74648f86"><div class="ttname"><a href="structredis_server.html#a8938316e9f6211b407eb2b1b74648f86">redisServer::maxidletime</a></div><div class="ttdeci">int maxidletime</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01036">server.h:1036</a></div></div>
<div class="ttc" id="networking_8c_html_acebfaa11c5c3aa617fcc3679a58e6f17"><div class="ttname"><a href="networking_8c.html#acebfaa11c5c3aa617fcc3679a58e6f17">addReplyBulkCString</a></div><div class="ttdeci">void addReplyBulkCString(client *c, const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00588">networking.c:588</a></div></div>
<div class="ttc" id="hyperloglog_8c_html_adc6a2e5cb61800b6dc6dad89a53b2b88"><div class="ttname"><a href="hyperloglog_8c.html#adc6a2e5cb61800b6dc6dad89a53b2b88">pfdebugCommand</a></div><div class="ttdeci">void pfdebugCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="hyperloglog_8c_source.html#l01487">hyperloglog.c:1487</a></div></div>
<div class="ttc" id="structredis_server_html_af8b98ad90dc60d4e8b2bf836b518e198"><div class="ttname"><a href="structredis_server.html#af8b98ad90dc60d4e8b2bf836b518e198">redisServer::repl_timeout</a></div><div class="ttdeci">int repl_timeout</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01149">server.h:1149</a></div></div>
<div class="ttc" id="server_8c_html_a0c6b952fafcc3dff58201df20f3c4302"><div class="ttname"><a href="server_8c.html#a0c6b952fafcc3dff58201df20f3c4302">CLIENTS_PEAK_MEM_USAGE_SLOTS</a></div><div class="ttdeci">#define CLIENTS_PEAK_MEM_USAGE_SLOTS</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00903">server.c:903</a></div></div>
<div class="ttc" id="server_8h_html_ac7414291a371fd3a2bad4d34e13f0d77"><div class="ttname"><a href="server_8h.html#ac7414291a371fd3a2bad4d34e13f0d77">CONFIG_DEFAULT_SYSLOG_IDENT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SYSLOG_IDENT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00115">server.h:115</a></div></div>
<div class="ttc" id="server_8h_html_ac8d50898802f96b76479bc975e1bbbf3"><div class="ttname"><a href="server_8h.html#ac8d50898802f96b76479bc975e1bbbf3">STATS_METRIC_COMMAND</a></div><div class="ttdeci">#define STATS_METRIC_COMMAND</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00178">server.h:178</a></div></div>
<div class="ttc" id="ae_8c_html_ad1918e57c96446a7e5a5067922c1a3a5"><div class="ttname"><a href="ae_8c.html#ad1918e57c96446a7e5a5067922c1a3a5">aeCreateFileEvent</a></div><div class="ttdeci">int aeCreateFileEvent(aeEventLoop *eventLoop, int fd, int mask, aeFileProc *proc, void *clientData)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00136">ae.c:136</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a213b026c5bb4a2421289b34e620eb4ef"><div class="ttname"><a href="structredis_mem_overhead.html#a213b026c5bb4a2421289b34e620eb4ef">redisMemOverhead::allocator_rss</a></div><div class="ttdeci">float allocator_rss</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00870">server.h:870</a></div></div>
<div class="ttc" id="server_8h_html_a22c57e53d530d95ae346f13d6781a549"><div class="ttname"><a href="server_8h.html#a22c57e53d530d95ae346f13d6781a549">CONFIG_DEFAULT_SYSLOG_ENABLED</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SYSLOG_ENABLED</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00125">server.h:125</a></div></div>
<div class="ttc" id="server_8h_html_a172dfe9a0401b7e2fe512d5d596bc00b"><div class="ttname"><a href="server_8h.html#a172dfe9a0401b7e2fe512d5d596bc00b">CONFIG_DEFAULT_SLAVE_IGNORE_MAXMEMORY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_IGNORE_MAXMEMORY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00134">server.h:134</a></div></div>
<div class="ttc" id="server_8h_html_a27fb450e6e9e5d6a20c74ad87aefd2b7"><div class="ttname"><a href="server_8h.html#a27fb450e6e9e5d6a20c74ad87aefd2b7">zrevrangebylexCommand</a></div><div class="ttdeci">void zrevrangebylexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03060">t_zset.c:3060</a></div></div>
<div class="ttc" id="structredis_server_html_a426c3298fab0d00a17cb6f35c5f607b0"><div class="ttname"><a href="structredis_server.html#a426c3298fab0d00a17cb6f35c5f607b0">redisServer::stat_sync_partial_ok</a></div><div class="ttdeci">long long stat_sync_partial_ok</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01015">server.h:1015</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ab0049b4891325314ab168a96180f8500"><div class="ttname"><a href="structshared_objects_struct.html#ab0049b4891325314ab168a96180f8500">sharedObjectsStruct::loadingerr</a></div><div class="ttdeci">robj * loadingerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="module_8c_html_aff1542d7a41c4f3ff27bfd4326fbd247"><div class="ttname"><a href="module_8c.html#aff1542d7a41c4f3ff27bfd4326fbd247">moduleReleaseGIL</a></div><div class="ttdeci">void moduleReleaseGIL(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l03824">module.c:3824</a></div></div>
<div class="ttc" id="server_8c_html_a88e671bb22d29c9970e6b33a7b4312dd"><div class="ttname"><a href="server_8c.html#a88e671bb22d29c9970e6b33a7b4312dd">dictVanillaFree</a></div><div class="ttdeci">void dictVanillaFree(void *privdata, void *val)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00459">server.c:459</a></div></div>
<div class="ttc" id="server_8c_html_a68e6e5295ed738c87d1559060b0110e9"><div class="ttname"><a href="server_8c.html#a68e6e5295ed738c87d1559060b0110e9">redisOpArrayFree</a></div><div class="ttdeci">void redisOpArrayFree(redisOpArray *oa)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02257">server.c:2257</a></div></div>
<div class="ttc" id="server_8h_html_a4efe64e73e38a940543888e6c61453d8"><div class="ttname"><a href="server_8h.html#a4efe64e73e38a940543888e6c61453d8">sremCommand</a></div><div class="ttdeci">void sremCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00290">t_set.c:290</a></div></div>
<div class="ttc" id="structredis_server_html_aa58813aba5328ff8194bcf2c2326dda7"><div class="ttname"><a href="structredis_server.html#aa58813aba5328ff8194bcf2c2326dda7">redisServer::blocked_clients</a></div><div class="ttdeci">unsigned int blocked_clients</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01191">server.h:1191</a></div></div>
<div class="ttc" id="structredis_server_html_a40b0c5a28706a3d79fd7f38f76543796"><div class="ttname"><a href="structredis_server.html#a40b0c5a28706a3d79fd7f38f76543796">redisServer::hll_sparse_max_bytes</a></div><div class="ttdeci">size_t hll_sparse_max_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01207">server.h:1207</a></div></div>
<div class="ttc" id="childinfo_8c_html_a8453f3d3b0bbc7b3fcad3802aab61853"><div class="ttname"><a href="childinfo_8c.html#a8453f3d3b0bbc7b3fcad3802aab61853">receiveChildInfo</a></div><div class="ttdeci">void receiveChildInfo(void)</div><div class="ttdef"><b>Definition:</b> <a href="childinfo_8c_source.html#l00073">childinfo.c:73</a></div></div>
<div class="ttc" id="server_8c_html_a83ed68d11467f1c48f83b2d5033f16f7"><div class="ttname"><a href="server_8c.html#a83ed68d11467f1c48f83b2d5033f16f7">memtest</a></div><div class="ttdeci">void memtest(size_t megabytes, int passes)</div><div class="ttdef"><b>Definition:</b> <a href="memtest_8c_source.html#l00349">memtest.c:349</a></div></div>
<div class="ttc" id="geo_8c_html_a44f8201e2ead35ff305230162fda6473"><div class="ttname"><a href="geo_8c.html#a44f8201e2ead35ff305230162fda6473">georadiusroCommand</a></div><div class="ttdeci">void georadiusroCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00686">geo.c:686</a></div></div>
<div class="ttc" id="networking_8c_html_ab4f02ccd74d72cbd5aa3f5cd42bea2c1"><div class="ttname"><a href="networking_8c.html#ab4f02ccd74d72cbd5aa3f5cd42bea2c1">flushSlavesOutputBuffers</a></div><div class="ttdeci">void flushSlavesOutputBuffers(void)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l02127">networking.c:2127</a></div></div>
<div class="ttc" id="server_8h_html_a834b7e50f783a1eeaa1feea05fce199e"><div class="ttname"><a href="server_8h.html#a834b7e50f783a1eeaa1feea05fce199e">SHUTDOWN_NOSAVE</a></div><div class="ttdeci">#define SHUTDOWN_NOSAVE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00410">server.h:410</a></div></div>
<div class="ttc" id="db_8c_html_af4810a412b1235c49c49e26124440d9d"><div class="ttname"><a href="db_8c.html#af4810a412b1235c49c49e26124440d9d">unlinkCommand</a></div><div class="ttdeci">void unlinkCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00484">db.c:484</a></div></div>
<div class="ttc" id="structredis_command_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="structredis_command.html#ac8bf36fe0577cba66bccda3a6f7e80a4">redisCommand::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01295">server.h:1295</a></div></div>
<div class="ttc" id="structclient_html_a09bca2273efb7490d637016ba048ae6e"><div class="ttname"><a href="structclient.html#a09bca2273efb7490d637016ba048ae6e">client::querybuf_peak</a></div><div class="ttdeci">size_t querybuf_peak</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00720">server.h:720</a></div></div>
<div class="ttc" id="server_8h_html_aa3ba8e5baa37a74455b598dea729afa3"><div class="ttname"><a href="server_8h.html#aa3ba8e5baa37a74455b598dea729afa3">llenCommand</a></div><div class="ttdeci">void llenCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00308">t_list.c:308</a></div></div>
<div class="ttc" id="structclient_html_a4df1332c1e98088733ea290c8b617de5"><div class="ttname"><a href="structclient.html#a4df1332c1e98088733ea290c8b617de5">client::repl_ack_off</a></div><div class="ttdeci">long long repl_ack_off</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00744">server.h:744</a></div></div>
<div class="ttc" id="server_8h_html_af0b13ef0f1dabe404fd7d904cb66b548"><div class="ttname"><a href="server_8h.html#af0b13ef0f1dabe404fd7d904cb66b548">CMD_ASKING</a></div><div class="ttdeci">#define CMD_ASKING</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00217">server.h:217</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a98b0919e4d91db1f0737099903c2d020"><div class="ttname"><a href="structshared_objects_struct.html#a98b0919e4d91db1f0737099903c2d020">sharedObjectsStruct::masterdownerr</a></div><div class="ttdeci">robj * masterdownerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a8747868103d88dad18f00837aaeca24a"><div class="ttname"><a href="structredis_mem_overhead.html#a8747868103d88dad18f00837aaeca24a">redisMemOverhead::dataset</a></div><div class="ttdeci">size_t dataset</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00861">server.h:861</a></div></div>
<div class="ttc" id="server_8c_html_a227dd14edf2254d7b12b8ce656ce1439"><div class="ttname"><a href="server_8c.html#a227dd14edf2254d7b12b8ce656ce1439">call</a></div><div class="ttdeci">void call(client *c, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02410">server.c:2410</a></div></div>
<div class="ttc" id="structredis_server_html_afa475ce704a1c8de8a4472f89ba59fd4"><div class="ttname"><a href="structredis_server.html#afa475ce704a1c8de8a4472f89ba59fd4">redisServer::executable</a></div><div class="ttdeci">char * executable</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00930">server.h:930</a></div></div>
<div class="ttc" id="server_8h_html_aeb204872adbaabc0bd56c64f562b7928"><div class="ttname"><a href="server_8h.html#aeb204872adbaabc0bd56c64f562b7928">run_with_period</a></div><div class="ttdeci">#define run_with_period(_ms_)</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00452">server.h:452</a></div></div>
<div class="ttc" id="server_8h_html_aedd7251bdcd9ca336153d90aa7a01b0b"><div class="ttname"><a href="server_8h.html#aedd7251bdcd9ca336153d90aa7a01b0b">hsetnxCommand</a></div><div class="ttdeci">void hsetnxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00514">t_hash.c:514</a></div></div>
<div class="ttc" id="bitops_8c_html_ab37b7a9613378a1894018aa36f38717e"><div class="ttname"><a href="bitops_8c.html#ab37b7a9613378a1894018aa36f38717e">bitcountCommand</a></div><div class="ttdeci">void bitcountCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="bitops_8c_source.html#l00769">bitops.c:769</a></div></div>
<div class="ttc" id="structredis_server_html_ada2e0bf12be2309801d2515e67c008e8"><div class="ttname"><a href="structredis_server.html#ada2e0bf12be2309801d2515e67c008e8">redisServer::el</a></div><div class="ttdeci">aeEventLoop * el</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00940">server.h:940</a></div></div>
<div class="ttc" id="server_8c_html_ae45e596c457c337b249e553a27375edd"><div class="ttname"><a href="server_8c.html#ae45e596c457c337b249e553a27375edd">redisIsSupervised</a></div><div class="ttdeci">int redisIsSupervised(int mode)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03980">server.c:3980</a></div></div>
<div class="ttc" id="slowlog_8c_html_a9f809d36b7eec2078bc7a3e4ed497505"><div class="ttname"><a href="slowlog_8c.html#a9f809d36b7eec2078bc7a3e4ed497505">slowlogInit</a></div><div class="ttdeci">void slowlogInit(void)</div><div class="ttdef"><b>Definition:</b> <a href="slowlog_8c_source.html#l00114">slowlog.c:114</a></div></div>
<div class="ttc" id="expire_8c_html_aaa6d4f828c5e0a2eb4313561fd09a8d0"><div class="ttname"><a href="expire_8c.html#aaa6d4f828c5e0a2eb4313561fd09a8d0">expireatCommand</a></div><div class="ttdeci">void expireatCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00458">expire.c:458</a></div></div>
<div class="ttc" id="structredis_server_html_afcaf03ea9071943ef74fc499a34f364c"><div class="ttname"><a href="structredis_server.html#afcaf03ea9071943ef74fc499a34f364c">redisServer::stat_numconnections</a></div><div class="ttdeci">long long stat_numconnections</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00998">server.h:998</a></div></div>
<div class="ttc" id="structredis_server_html_a78056184f7c0e33de7ae2c47c06241d9"><div class="ttname"><a href="structredis_server.html#a78056184f7c0e33de7ae2c47c06241d9">redisServer::active_expire_enabled</a></div><div class="ttdeci">int active_expire_enabled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01038">server.h:1038</a></div></div>
<div class="ttc" id="expire_8c_html_a394a24f28982a4d71d587bd93e714839"><div class="ttname"><a href="expire_8c.html#a394a24f28982a4d71d587bd93e714839">expireCommand</a></div><div class="ttdeci">void expireCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00453">expire.c:453</a></div></div>
<div class="ttc" id="structredis_server_html_a8a999e130bddf30284b12a4b625afe3d"><div class="ttname"><a href="structredis_server.html#a8a999e130bddf30284b12a4b625afe3d">redisServer::loading_process_events_interval_bytes</a></div><div class="ttdeci">off_t loading_process_events_interval_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00988">server.h:988</a></div></div>
<div class="ttc" id="server_8h_html_af9b93e225d47183c97bc1f86db1aff2a"><div class="ttname"><a href="server_8h.html#af9b93e225d47183c97bc1f86db1aff2a">CONFIG_DEFAULT_SLAVE_READ_ONLY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_READ_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00133">server.h:133</a></div></div>
<div class="ttc" id="server_8c_html_af986bd0575ec9b913dfab4b8422509ae"><div class="ttname"><a href="server_8c.html#af986bd0575ec9b913dfab4b8422509ae">version</a></div><div class="ttdeci">void version(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03716">server.c:3716</a></div></div>
<div class="ttc" id="server_8h_html_a39e5c16e64adef2e14a9d66a725b91fd"><div class="ttname"><a href="server_8h.html#a39e5c16e64adef2e14a9d66a725b91fd">CONFIG_MAX_HZ</a></div><div class="ttdeci">#define CONFIG_MAX_HZ</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00084">server.h:84</a></div></div>
<div class="ttc" id="db_8c_html_a53c5f34956f6624513b7cdd46f2dedf1"><div class="ttname"><a href="db_8c.html#a53c5f34956f6624513b7cdd46f2dedf1">renameCommand</a></div><div class="ttdeci">void renameCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00905">db.c:905</a></div></div>
<div class="ttc" id="multi_8c_html_a48749bd23a226514aaae95894ba8d51e"><div class="ttname"><a href="multi_8c.html#a48749bd23a226514aaae95894ba8d51e">watchCommand</a></div><div class="ttdeci">void watchCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00322">multi.c:322</a></div></div>
<div class="ttc" id="server_8c_html_acc7cb5c8d228c7db0b6d8d86c95e705a"><div class="ttname"><a href="server_8c.html#acc7cb5c8d228c7db0b6d8d86c95e705a">resetServerStats</a></div><div class="ttdeci">void resetServerStats(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01975">server.c:1975</a></div></div>
<div class="ttc" id="pubsub_8c_html_a7322700796b561a34a18723b5d1b754a"><div class="ttname"><a href="pubsub_8c.html#a7322700796b561a34a18723b5d1b754a">subscribeCommand</a></div><div class="ttdeci">void subscribeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00277">pubsub.c:277</a></div></div>
<div class="ttc" id="server_8c_html_a4ecd19dd9a7426099e68b3257ae627a6"><div class="ttname"><a href="server_8c.html#a4ecd19dd9a7426099e68b3257ae627a6">addReplyCommandFlag</a></div><div class="ttdeci">int addReplyCommandFlag(client *c, struct redisCommand *cmd, int f, char *reply)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02946">server.c:2946</a></div></div>
<div class="ttc" id="server_8h_html_aed98ddd341b643d52417b875418b2ecb"><div class="ttname"><a href="server_8h.html#aed98ddd341b643d52417b875418b2ecb">CONFIG_DEFAULT_DEFRAG_IGNORE_BYTES</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_IGNORE_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00164">server.h:164</a></div></div>
<div class="ttc" id="server_8h_html_a938328826b94d0e9bd07b225767cad43"><div class="ttname"><a href="server_8h.html#a938328826b94d0e9bd07b225767cad43">CONFIG_DEFAULT_AOF_USE_RDB_PREAMBLE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_USE_RDB_PREAMBLE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00145">server.h:145</a></div></div>
<div class="ttc" id="structredis_server_html_a86dbe4f3f3de690343436c85dcf139c2"><div class="ttname"><a href="structredis_server.html#a86dbe4f3f3de690343436c85dcf139c2">redisServer::sentinel_mode</a></div><div class="ttdeci">int sentinel_mode</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00950">server.h:950</a></div></div>
<div class="ttc" id="replication_8c_html_a7c1fd41f13821ba72fb98e077bbd61f0"><div class="ttname"><a href="replication_8c.html#a7c1fd41f13821ba72fb98e077bbd61f0">syncCommand</a></div><div class="ttdeci">void syncCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l00627">replication.c:627</a></div></div>
<div class="ttc" id="server_8h_html_a293669fbc8a97f4cdb8a8de87e9a6911"><div class="ttname"><a href="server_8h.html#a293669fbc8a97f4cdb8a8de87e9a6911">getRandomHexChars</a></div><div class="ttdeci">void getRandomHexChars(char *p, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00595">util.c:595</a></div></div>
<div class="ttc" id="structredis_server_html_addf6373063f352c2ede7d06f1260b820"><div class="ttname"><a href="structredis_server.html#addf6373063f352c2ede7d06f1260b820">redisServer::aof_flush_postponed_start</a></div><div class="ttdeci">time_t aof_flush_postponed_start</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01067">server.h:1067</a></div></div>
<div class="ttc" id="server_8c_html_af588c16d11b3c614a398d31edde3275b"><div class="ttname"><a href="server_8c.html#af588c16d11b3c614a398d31edde3275b">serverCron</a></div><div class="ttdeci">int serverCron(struct aeEventLoop *eventLoop, long long id, void *clientData)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01089">server.c:1089</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html"><div class="ttname"><a href="structredis_mem_overhead.html">redisMemOverhead</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00851">server.h:851</a></div></div>
<div class="ttc" id="cluster_8h_html_afc2490fcb8306e719f18de95b3694d75"><div class="ttname"><a href="cluster_8h.html#afc2490fcb8306e719f18de95b3694d75">CLUSTER_MODULE_FLAG_NONE</a></div><div class="ttdeci">#define CLUSTER_MODULE_FLAG_NONE</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00106">cluster.h:106</a></div></div>
<div class="ttc" id="structdict_entry_html"><div class="ttname"><a href="structdict_entry.html">dictEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00047">dict.h:47</a></div></div>
<div class="ttc" id="cluster_8c_html_acde939ce69844e6df42f0d5887bf970f"><div class="ttname"><a href="cluster_8c.html#acde939ce69844e6df42f0d5887bf970f">clusterInit</a></div><div class="ttdeci">void clusterInit(void)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l00429">cluster.c:429</a></div></div>
<div class="ttc" id="structredis_server_html_aced844471ea20e757a4bc7bdee34d930"><div class="ttname"><a href="structredis_server.html#aced844471ea20e757a4bc7bdee34d930">redisServer::pubsub_patterns</a></div><div class="ttdeci">list * pubsub_patterns</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01220">server.h:1220</a></div></div>
<div class="ttc" id="server_8h_html_a7608d2301c8447e2237ba173d8eef88e"><div class="ttname"><a href="server_8h.html#a7608d2301c8447e2237ba173d8eef88e">CONFIG_DEFAULT_REPL_TIMEOUT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00106">server.h:106</a></div></div>
<div class="ttc" id="redis-cli_8c_html_a1dc767d40b8708fecbc214aafd78fd71"><div class="ttname"><a href="redis-cli_8c.html#a1dc767d40b8708fecbc214aafd78fd71">redisGitDirty</a></div><div class="ttdeci">char * redisGitDirty(void)</div><div class="ttdef"><b>Definition:</b> <a href="release_8c_source.html#l00044">release.c:44</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ad441a7ae10a5fee32c6d0b0dbfc92791"><div class="ttname"><a href="structredis_mem_overhead.html#ad441a7ae10a5fee32c6d0b0dbfc92791">redisMemOverhead::aof_buffer</a></div><div class="ttdeci">size_t aof_buffer</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00858">server.h:858</a></div></div>
<div class="ttc" id="server_8h_html_a4d95efc047deefbc5459b4492c3588d2"><div class="ttname"><a href="server_8h.html#a4d95efc047deefbc5459b4492c3588d2">CONFIG_DEFAULT_DEFRAG_MAX_SCAN_FIELDS</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_MAX_SCAN_FIELDS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00167">server.h:167</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a8e6a0ce0f0a88aca63b18e417de09cac"><div class="ttname"><a href="structshared_objects_struct.html#a8e6a0ce0f0a88aca63b18e417de09cac">sharedObjectsStruct::del</a></div><div class="ttdeci">robj * del</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_af6a5067383cda7ca4a7fdd76ed0a4e49"><div class="ttname"><a href="server_8c.html#af6a5067383cda7ca4a7fdd76ed0a4e49">commandTableDictType</a></div><div class="ttdeci">dictType commandTableDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00642">server.c:642</a></div></div>
<div class="ttc" id="server_8h_html_a0c7409da047d754c0adeb001025acc03"><div class="ttname"><a href="server_8h.html#a0c7409da047d754c0adeb001025acc03">PROPAGATE_NONE</a></div><div class="ttdeci">#define PROPAGATE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00422">server.h:422</a></div></div>
<div class="ttc" id="server_8h_html_a1d27594a2d9c8d24e4ed5a2e88d1113e"><div class="ttname"><a href="server_8h.html#a1d27594a2d9c8d24e4ed5a2e88d1113e">REPL_STATE_TRANSFER</a></div><div class="ttdeci">#define REPL_STATE_TRANSFER</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00303">server.h:303</a></div></div>
<div class="ttc" id="server_8h_html_a65236ea160f69cdef33ec942092af88f"><div class="ttname"><a href="server_8h.html#a65236ea160f69cdef33ec942092af88f">OBJ_STRING</a></div><div class="ttdeci">#define OBJ_STRING</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00466">server.h:466</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a5e5705378e7ceb2bcfa33b637a7a6fd2"><div class="ttname"><a href="structredis_mem_overhead.html#a5e5705378e7ceb2bcfa33b637a7a6fd2">redisMemOverhead::total_frag_bytes</a></div><div class="ttdeci">size_t total_frag_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00867">server.h:867</a></div></div>
<div class="ttc" id="server_8h_html_a14964fe6b734762bcc05bfc8cdc7204c"><div class="ttname"><a href="server_8h.html#a14964fe6b734762bcc05bfc8cdc7204c">zrevrangebyscoreCommand</a></div><div class="ttdeci">void zrevrangebyscoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02719">t_zset.c:2719</a></div></div>
<div class="ttc" id="structredis_server_html_a144bfd85a66513e2cba147e3329c6e0d"><div class="ttname"><a href="structredis_server.html#a144bfd85a66513e2cba147e3329c6e0d">redisServer::aof_current_size</a></div><div class="ttdeci">off_t aof_current_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01060">server.h:1060</a></div></div>
<div class="ttc" id="server_8h_html_a0f350070473d6d89bcd365ea4ff361cb"><div class="ttname"><a href="server_8h.html#a0f350070473d6d89bcd365ea4ff361cb">CONFIG_DEFAULT_ALWAYS_SHOW_LOGO</a></div><div class="ttdeci">#define CONFIG_DEFAULT_ALWAYS_SHOW_LOGO</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00160">server.h:160</a></div></div>
<div class="ttc" id="server_8c_html_a2275257c1c0bbf34821270d4e169c0b8"><div class="ttname"><a href="server_8c.html#a2275257c1c0bbf34821270d4e169c0b8">infoCommand</a></div><div class="ttdeci">void infoCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03640">server.c:3640</a></div></div>
<div class="ttc" id="server_8h_html_a2a0d6ba64b419357e52a6473f48bc882"><div class="ttname"><a href="server_8h.html#a2a0d6ba64b419357e52a6473f48bc882">SUPERVISED_NONE</a></div><div class="ttdeci">#define SUPERVISED_NONE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00341">server.h:341</a></div></div>
<div class="ttc" id="expire_8c_html_a698b2c7b12d4733babe53417ff0503c4"><div class="ttname"><a href="expire_8c.html#a698b2c7b12d4733babe53417ff0503c4">expireSlaveKeys</a></div><div class="ttdeci">void expireSlaveKeys(void)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00285">expire.c:285</a></div></div>
<div class="ttc" id="server_8h_html_a79f5e9dd310e06a26497ab01b3d99faf"><div class="ttname"><a href="server_8h.html#a79f5e9dd310e06a26497ab01b3d99faf">spopCommand</a></div><div class="ttdeci">void spopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00553">t_set.c:553</a></div></div>
<div class="ttc" id="structredis_server_html_a94be71fb61af4310e0bef804992da1ed"><div class="ttname"><a href="structredis_server.html#a94be71fb61af4310e0bef804992da1ed">redisServer::rdb_save_time_start</a></div><div class="ttdeci">time_t rdb_save_time_start</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01101">server.h:1101</a></div></div>
<div class="ttc" id="server_8h_html_a32774e3d7df495ab453ea9b310c597c1"><div class="ttname"><a href="server_8h.html#a32774e3d7df495ab453ea9b310c597c1">sismemberCommand</a></div><div class="ttdeci">void sismemberCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00373">t_set.c:373</a></div></div>
<div class="ttc" id="structredis_server_html_abbd87a8d07dfa99cfb535b59fcb83b4c"><div class="ttname"><a href="structredis_server.html#abbd87a8d07dfa99cfb535b59fcb83b4c">redisServer::lruclock_mutex</a></div><div class="ttdeci">pthread_mutex_t lruclock_mutex</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01278">server.h:1278</a></div></div>
<div class="ttc" id="db_8c_html_acd71f8bb3ecce70aa5a950862eaefbfb"><div class="ttname"><a href="db_8c.html#acd71f8bb3ecce70aa5a950862eaefbfb">xreadGetKeys</a></div><div class="ttdeci">int * xreadGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01414">db.c:1414</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_adb319a36f9a5125295c89701c1090a44"><div class="ttname"><a href="structshared_objects_struct.html#adb319a36f9a5125295c89701c1090a44">sharedObjectsStruct::noscripterr</a></div><div class="ttdeci">robj * noscripterr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_af29037e986e1377d7a74a9c95df0f1e0"><div class="ttname"><a href="server_8c.html#af29037e986e1377d7a74a9c95df0f1e0">serverLogFromHandler</a></div><div class="ttdeci">void serverLogFromHandler(int level, const char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00403">server.c:403</a></div></div>
<div class="ttc" id="dict_8c_html_a2e3683dd52e527ad0df8d203d8943fb6"><div class="ttname"><a href="dict_8c.html#a2e3683dd52e527ad0df8d203d8943fb6">dictCreate</a></div><div class="ttdeci">dict * dictCreate(dictType *type, void *privDataPtr)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00111">dict.c:111</a></div></div>
<div class="ttc" id="server_8c_html_a081bf08d6361c6866492e82b0ac7c69c"><div class="ttname"><a href="server_8c.html#a081bf08d6361c6866492e82b0ac7c69c">clusterNodesBlackListDictType</a></div><div class="ttdeci">dictType clusterNodesBlackListDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00687">server.c:687</a></div></div>
<div class="ttc" id="server_8h_html_a3d8f0cc8d0653ee2b6dafb454292c069"><div class="ttname"><a href="server_8h.html#a3d8f0cc8d0653ee2b6dafb454292c069">CLIENT_MASTER</a></div><div class="ttdeci">#define CLIENT_MASTER</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00229">server.h:229</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a6384c1eb0ed7c50d69e80af355a5866c"><div class="ttname"><a href="structshared_objects_struct.html#a6384c1eb0ed7c50d69e80af355a5866c">sharedObjectsStruct::busykeyerr</a></div><div class="ttdeci">robj * busykeyerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="sds_8c_html_a9153a5245ad08630651c7f4f212b5c6f"><div class="ttname"><a href="sds_8c.html#a9153a5245ad08630651c7f4f212b5c6f">sdscat</a></div><div class="ttdeci">sds sdscat(sds s, const char *t)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00408">sds.c:408</a></div></div>
<div class="ttc" id="structredis_server_html_a358f45ac0e9b0130b7bef78e34537106"><div class="ttname"><a href="structredis_server.html#a358f45ac0e9b0130b7bef78e34537106">redisServer::lua_caller</a></div><div class="ttdeci">client * lua_caller</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01244">server.h:1244</a></div></div>
<div class="ttc" id="server_8h_html_a1d52bd6ad34190b95bdd913b721579d4"><div class="ttname"><a href="server_8h.html#a1d52bd6ad34190b95bdd913b721579d4">xrangeCommand</a></div><div class="ttdeci">void xrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01294">t_stream.c:1294</a></div></div>
<div class="ttc" id="server_8c_html_a102476624bc170decc56549ae0932703"><div class="ttname"><a href="server_8c.html#a102476624bc170decc56549ae0932703">authCommand</a></div><div class="ttdeci">void authCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02893">server.c:2893</a></div></div>
<div class="ttc" id="cluster_8c_html_a8d49e8373402fda00571443d463a9ec4"><div class="ttname"><a href="cluster_8c.html#a8d49e8373402fda00571443d463a9ec4">clusterCommand</a></div><div class="ttdeci">void clusterCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l04190">cluster.c:4190</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a5d1b090719486b6cba969aa7f76fcf8e"><div class="ttname"><a href="structshared_objects_struct.html#a5d1b090719486b6cba969aa7f76fcf8e">sharedObjectsStruct::minstring</a></div><div class="ttdeci">sds minstring</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00792">server.h:792</a></div></div>
<div class="ttc" id="structredis_server_html_a159af50e60cf5a0b6b06ab72332a4fb8"><div class="ttname"><a href="structredis_server.html#a159af50e60cf5a0b6b06ab72332a4fb8">redisServer::repl_transfer_read</a></div><div class="ttdeci">off_t repl_transfer_read</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01155">server.h:1155</a></div></div>
<div class="ttc" id="server_8h_html_ae083a38d96add33ed217bf7640b11541"><div class="ttname"><a href="server_8h.html#ae083a38d96add33ed217bf7640b11541">xtrimCommand</a></div><div class="ttdeci">void xtrimCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l02336">t_stream.c:2336</a></div></div>
<div class="ttc" id="structredis_server_html_ae0e3c35b8ea641cec0a4afb2658bccb9"><div class="ttname"><a href="structredis_server.html#ae0e3c35b8ea641cec0a4afb2658bccb9">redisServer::stat_net_output_bytes</a></div><div class="ttdeci">long long stat_net_output_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01023">server.h:1023</a></div></div>
<div class="ttc" id="adlist_8c_html_ae35a3ee8d5580afa77f9f5430837d8a4"><div class="ttname"><a href="adlist_8c.html#ae35a3ee8d5580afa77f9f5430837d8a4">listRewind</a></div><div class="ttdeci">void listRewind(list *list, listIter *li)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00205">adlist.c:205</a></div></div>
<div class="ttc" id="server_8h_html_a250e4ab3a143ecbce2603ffaa3a29c0a"><div class="ttname"><a href="server_8h.html#a250e4ab3a143ecbce2603ffaa3a29c0a">CONFIG_DEFAULT_RDB_COMPRESSION</a></div><div class="ttdeci">#define CONFIG_DEFAULT_RDB_COMPRESSION</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00127">server.h:127</a></div></div>
<div class="ttc" id="server_8h_html_a27f51044a8a11ab99366a77bb3ea1e93"><div class="ttname"><a href="server_8h.html#a27f51044a8a11ab99366a77bb3ea1e93">CONFIG_DEFAULT_REPL_DISABLE_TCP_NODELAY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_DISABLE_TCP_NODELAY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00137">server.h:137</a></div></div>
<div class="ttc" id="sentinel_8c_html_a3cb995563d699c28a1f74dea410f131b"><div class="ttname"><a href="sentinel_8c.html#a3cb995563d699c28a1f74dea410f131b">sentinelTimer</a></div><div class="ttdeci">void sentinelTimer(void)</div><div class="ttdef"><b>Definition:</b> <a href="sentinel_8c_source.html#l04487">sentinel.c:4487</a></div></div>
<div class="ttc" id="structredis_server_html_a7d2a15a8dbe14095038ad527dea866d5"><div class="ttname"><a href="structredis_server.html#a7d2a15a8dbe14095038ad527dea866d5">redisServer::lazyfree_lazy_server_del</a></div><div class="ttdeci">int lazyfree_lazy_server_del</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01263">server.h:1263</a></div></div>
<div class="ttc" id="latency_8h_html_a57a542a709b21e9654b0b297303c966c"><div class="ttname"><a href="latency_8h.html#a57a542a709b21e9654b0b297303c966c">THPIsEnabled</a></div><div class="ttdeci">int THPIsEnabled(void)</div></div>
<div class="ttc" id="server_8h_html_a3cf317db9aeeba99be3654b11d3d0580"><div class="ttname"><a href="server_8h.html#a3cf317db9aeeba99be3654b11d3d0580">CONFIG_DEFAULT_SLOWLOG_LOG_SLOWER_THAN</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLOWLOG_LOG_SLOWER_THAN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00101">server.h:101</a></div></div>
<div class="ttc" id="structredis_server_html_a0773e5d1aebd4a30557321a36a1b8c57"><div class="ttname"><a href="structredis_server.html#a0773e5d1aebd4a30557321a36a1b8c57">redisServer::maxclients</a></div><div class="ttdeci">unsigned int maxclients</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01183">server.h:1183</a></div></div>
<div class="ttc" id="server_8h_html_a35b94be7201c7ad80e43f8aa214867b7"><div class="ttname"><a href="server_8h.html#a35b94be7201c7ad80e43f8aa214867b7">CONFIG_DEFAULT_AOF_LOAD_TRUNCATED</a></div><div class="ttdeci">#define CONFIG_DEFAULT_AOF_LOAD_TRUNCATED</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00144">server.h:144</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ac72519418e62af0eef5f9a568b956504"><div class="ttname"><a href="structshared_objects_struct.html#ac72519418e62af0eef5f9a568b956504">sharedObjectsStruct::unsubscribebulk</a></div><div class="ttdeci">robj * unsubscribebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a8b0d640eab37ee8093c012db67666888"><div class="ttname"><a href="server_8c.html#a8b0d640eab37ee8093c012db67666888">resetCommandTableStats</a></div><div class="ttdeci">void resetCommandTableStats(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02219">server.c:2219</a></div></div>
<div class="ttc" id="structredis_server_html_a06df01ff396d99c1b22692272de940d7"><div class="ttname"><a href="structredis_server.html#a06df01ff396d99c1b22692272de940d7">redisServer::replid2</a></div><div class="ttdeci">char replid2[CONFIG_RUN_ID_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01124">server.h:1124</a></div></div>
<div class="ttc" id="structredis_server_html_a63c89c04d1feae07ca35558055155ffb"><div class="ttname"><a href="structredis_server.html#a63c89c04d1feae07ca35558055155ffb">redisServer::port</a></div><div class="ttdeci">int port</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00960">server.h:960</a></div></div>
<div class="ttc" id="server_8c_html_a74bbe29298fd27a8ade5e78f89e87f6b"><div class="ttname"><a href="server_8c.html#a74bbe29298fd27a8ade5e78f89e87f6b">clientsCronHandleTimeout</a></div><div class="ttdeci">int clientsCronHandleTimeout(client *c, mstime_t now_ms)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00815">server.c:815</a></div></div>
<div class="ttc" id="structredis_server_html_ace9d6cef9af1e3feb31816a30a017a7c"><div class="ttname"><a href="structredis_server.html#ace9d6cef9af1e3feb31816a30a017a7c">redisServer::aof_rewrite_time_last</a></div><div class="ttdeci">time_t aof_rewrite_time_last</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01069">server.h:1069</a></div></div>
<div class="ttc" id="blocked_8c_html_a1d7d6a801531d229b34b082122c82d83"><div class="ttname"><a href="blocked_8c.html#a1d7d6a801531d229b34b082122c82d83">processUnblockedClients</a></div><div class="ttdeci">void processUnblockedClients(void)</div><div class="ttdef"><b>Definition:</b> <a href="blocked_8c_source.html#l00112">blocked.c:112</a></div></div>
<div class="ttc" id="server_8h_html_a7a91d1ddcd40677b0f5521a9a42f4638"><div class="ttname"><a href="server_8h.html#a7a91d1ddcd40677b0f5521a9a42f4638">scardCommand</a></div><div class="ttdeci">void scardCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00385">t_set.c:385</a></div></div>
<div class="ttc" id="structredis_object_html_adecc103e438ee35843ae312812d974a0"><div class="ttname"><a href="structredis_object.html#adecc103e438ee35843ae312812d974a0">redisObject::encoding</a></div><div class="ttdeci">unsigned encoding</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00605">server.h:605</a></div></div>
<div class="ttc" id="structredis_server_html_aab840164dbc88da9dd9f21004b92e3ea"><div class="ttname"><a href="structredis_server.html#aab840164dbc88da9dd9f21004b92e3ea">redisServer::aof_rewrite_scheduled</a></div><div class="ttdeci">int aof_rewrite_scheduled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01061">server.h:1061</a></div></div>
<div class="ttc" id="server_8c_html_ac9a7c8e90c7d43ad161e32bb70767d0d"><div class="ttname"><a href="server_8c.html#ac9a7c8e90c7d43ad161e32bb70767d0d">R_Zero</a></div><div class="ttdeci">double R_Zero</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00067">server.c:67</a></div></div>
<div class="ttc" id="cluster_8c_html_ac0cb91ed72fe935f5fc0bace6047a779"><div class="ttname"><a href="cluster_8c.html#ac0cb91ed72fe935f5fc0bace6047a779">verifyClusterConfigWithData</a></div><div class="ttdeci">int verifyClusterConfigWithData(void)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l03876">cluster.c:3876</a></div></div>
<div class="ttc" id="networking_8c_html_a0ea8df2930509a88eb4e98348b85a51d"><div class="ttname"><a href="networking_8c.html#a0ea8df2930509a88eb4e98348b85a51d">addReplyError</a></div><div class="ttdeci">void addReplyError(client *c, const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00384">networking.c:384</a></div></div>
<div class="ttc" id="module_8c_html_a536a21756c3b996ca78b9053e17bdc06"><div class="ttname"><a href="module_8c.html#a536a21756c3b996ca78b9053e17bdc06">moduleAcquireGIL</a></div><div class="ttdeci">void moduleAcquireGIL(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l03820">module.c:3820</a></div></div>
<div class="ttc" id="expire_8c_html_af5c458e6e7b368aae1a32b34e357fae2"><div class="ttname"><a href="expire_8c.html#af5c458e6e7b368aae1a32b34e357fae2">touchCommand</a></div><div class="ttdeci">void touchCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00520">expire.c:520</a></div></div>
<div class="ttc" id="structredis_server_html_a7dff68985c6f97d270358d27472972e2"><div class="ttname"><a href="structredis_server.html#a7dff68985c6f97d270358d27472972e2">redisServer::always_show_logo</a></div><div class="ttdeci">int always_show_logo</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00952">server.h:952</a></div></div>
<div class="ttc" id="server_8h_html_a24b004e72489e83f721bdd334234aa49"><div class="ttname"><a href="server_8h.html#a24b004e72489e83f721bdd334234aa49">OBJ_ZSET_MAX_ZIPLIST_VALUE</a></div><div class="ttdeci">#define OBJ_ZSET_MAX_ZIPLIST_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00363">server.h:363</a></div></div>
<div class="ttc" id="server_8h_html_ae93fffc90adf826b97c182893d1f7c5a"><div class="ttname"><a href="server_8h.html#ae93fffc90adf826b97c182893d1f7c5a">CONFIG_DEFAULT_DYNAMIC_HZ</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DYNAMIC_HZ</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00081">server.h:81</a></div></div>
<div class="ttc" id="aof_8c_html_acd094b7bb70912d9fc503b07a190ee80"><div class="ttname"><a href="aof_8c.html#acd094b7bb70912d9fc503b07a190ee80">bgrewriteaofCommand</a></div><div class="ttdeci">void bgrewriteaofCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l01592">aof.c:1592</a></div></div>
<div class="ttc" id="structredis_server_html_a4fa04e8ede4efc50a4eae5a4ee94be15"><div class="ttname"><a href="structredis_server.html#a4fa04e8ede4efc50a4eae5a4ee94be15">redisServer::arch_bits</a></div><div class="ttdeci">int arch_bits</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00947">server.h:947</a></div></div>
<div class="ttc" id="structredis_server_html_a88cc72814affa99c142827f25b714fd9"><div class="ttname"><a href="structredis_server.html#a88cc72814affa99c142827f25b714fd9">redisServer::assert_file</a></div><div class="ttdeci">const char * assert_file</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01269">server.h:1269</a></div></div>
<div class="ttc" id="server_8h_html_a6ac2fd3dd83df43a6b262bab091bc371"><div class="ttname"><a href="server_8h.html#a6ac2fd3dd83df43a6b262bab091bc371">CONFIG_DEFAULT_REPL_BACKLOG_SIZE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_BACKLOG_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00110">server.h:110</a></div></div>
<div class="ttc" id="rdb_8c_html_a4838759ceeea9016784d256d85dc04ea"><div class="ttname"><a href="rdb_8c.html#a4838759ceeea9016784d256d85dc04ea">rdbPopulateSaveInfo</a></div><div class="ttdeci">rdbSaveInfo * rdbPopulateSaveInfo(rdbSaveInfo *rsi)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l02446">rdb.c:2446</a></div></div>
<div class="ttc" id="server_8h_html_ac5c5c62f45277671484daad919338b5e"><div class="ttname"><a href="server_8h.html#ac5c5c62f45277671484daad919338b5e">CONFIG_DEFAULT_REPL_BACKLOG_TIME_LIMIT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_BACKLOG_TIME_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00111">server.h:111</a></div></div>
<div class="ttc" id="adlist_8c_html_ad0572eafe5ee0ebe76023a8434a9ea8c"><div class="ttname"><a href="adlist_8c.html#ad0572eafe5ee0ebe76023a8434a9ea8c">listRotate</a></div><div class="ttdeci">void listRotate(list *list)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00330">adlist.c:330</a></div></div>
<div class="ttc" id="db_8c_html_a867edfec1a517aeb68c4977557ef263c"><div class="ttname"><a href="db_8c.html#a867edfec1a517aeb68c4977557ef263c">lastsaveCommand</a></div><div class="ttdeci">void lastsaveCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00806">db.c:806</a></div></div>
<div class="ttc" id="server_8h_html_a91104f8c8859946e5d00fafbcf1aa300"><div class="ttname"><a href="server_8h.html#a91104f8c8859946e5d00fafbcf1aa300">zremrangebyrankCommand</a></div><div class="ttdeci">void zremrangebyrankCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01796">t_zset.c:1796</a></div></div>
<div class="ttc" id="db_8c_html_ad9aef1be17e5b63294cf55a9ee22204c"><div class="ttname"><a href="db_8c.html#ad9aef1be17e5b63294cf55a9ee22204c">renamenxCommand</a></div><div class="ttdeci">void renamenxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00909">db.c:909</a></div></div>
<div class="ttc" id="dict_8c_html_afc2f80f578929fbcfb7ff7a2e847cf90"><div class="ttname"><a href="dict_8c.html#afc2f80f578929fbcfb7ff7a2e847cf90">dictDisableResize</a></div><div class="ttdeci">void dictDisableResize(void)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00999">dict.c:999</a></div></div>
<div class="ttc" id="structredis_server_html_adafbaec515301e4446949c48a2670a84"><div class="ttname"><a href="structredis_server.html#adafbaec515301e4446949c48a2670a84">redisServer::monitors</a></div><div class="ttdeci">list * monitors</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00974">server.h:974</a></div></div>
<div class="ttc" id="childinfo_8c_html_ae870ecf71d2516302c699eb89cb1dc70"><div class="ttname"><a href="childinfo_8c.html#ae870ecf71d2516302c699eb89cb1dc70">closeChildInfoPipe</a></div><div class="ttdeci">void closeChildInfoPipe(void)</div><div class="ttdef"><b>Definition:</b> <a href="childinfo_8c_source.html#l00049">childinfo.c:49</a></div></div>
<div class="ttc" id="server_8h_html_acfd6e0670ac08e8f4c13f33c8a2c6b5e"><div class="ttname"><a href="server_8h.html#acfd6e0670ac08e8f4c13f33c8a2c6b5e">RDB_CHILD_TYPE_NONE</a></div><div class="ttdeci">#define RDB_CHILD_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00427">server.h:427</a></div></div>
<div class="ttc" id="server_8h_html_a3427a2458646e3be42838aff8a8d462f"><div class="ttname"><a href="server_8h.html#a3427a2458646e3be42838aff8a8d462f">xlenCommand</a></div><div class="ttdeci">void xlenCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01304">t_stream.c:1304</a></div></div>
<div class="ttc" id="server_8h_html_ada65a939812527070ed001e451d9bc54"><div class="ttname"><a href="server_8h.html#ada65a939812527070ed001e451d9bc54">CONFIG_DEFAULT_SLOWLOG_MAX_LEN</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLOWLOG_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00102">server.h:102</a></div></div>
<div class="ttc" id="server_8c_html_aeef77c6d0cbe617d2f68cc9ba193456b"><div class="ttname"><a href="server_8c.html#aeef77c6d0cbe617d2f68cc9ba193456b">lookupCommandOrOriginal</a></div><div class="ttdeci">struct redisCommand * lookupCommandOrOriginal(sds name)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02293">server.c:2293</a></div></div>
<div class="ttc" id="geo_8c_html_a455937ea1a76e1b4f6ee295b1d504295"><div class="ttname"><a href="geo_8c.html#a455937ea1a76e1b4f6ee295b1d504295">georadiusbymemberroCommand</a></div><div class="ttdeci">void georadiusbymemberroCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00691">geo.c:691</a></div></div>
<div class="ttc" id="dict_8c_html_a02c5657a37ae1d02bacad82c3454c0d1"><div class="ttname"><a href="dict_8c.html#a02c5657a37ae1d02bacad82c3454c0d1">dictFetchValue</a></div><div class="ttdeci">void * dictFetchValue(dict *d, const void *key)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00497">dict.c:497</a></div></div>
<div class="ttc" id="replication_8c_html_a965792099fe57baacccb8bd8be7d2bd0"><div class="ttname"><a href="replication_8c.html#a965792099fe57baacccb8bd8be7d2bd0">replicaofCommand</a></div><div class="ttdeci">void replicaofCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02000">replication.c:2000</a></div></div>
<div class="ttc" id="db_8c_html_a4d8a653f39ee873ef606c418acb95821"><div class="ttname"><a href="db_8c.html#a4d8a653f39ee873ef606c418acb95821">getKeysFromCommand</a></div><div class="ttdeci">int * getKeysFromCommand(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01230">db.c:1230</a></div></div>
<div class="ttc" id="structredis_server_html_acd747facbe7c55a698e167667b5deddc"><div class="ttname"><a href="structredis_server.html#acd747facbe7c55a698e167667b5deddc">redisServer::active_defrag_threshold_lower</a></div><div class="ttdeci">int active_defrag_threshold_lower</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01041">server.h:1041</a></div></div>
<div class="ttc" id="server_8c_html_ae8605e2b78cd4a81b6c6b5c30cb7366a"><div class="ttname"><a href="server_8c.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a></div><div class="ttdeci">void usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03727">server.c:3727</a></div></div>
<div class="ttc" id="networking_8c_html_adc0c436432b3be7679bed96bd8e9472e"><div class="ttname"><a href="networking_8c.html#adc0c436432b3be7679bed96bd8e9472e">securityWarningCommand</a></div><div class="ttdeci">void securityWarningCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l01924">networking.c:1924</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ac8bdd246c25c91aa5ae7af8362ff9188"><div class="ttname"><a href="structredis_mem_overhead.html#ac8bdd246c25c91aa5ae7af8362ff9188">redisMemOverhead::total_frag</a></div><div class="ttdeci">float total_frag</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00866">server.h:866</a></div></div>
<div class="ttc" id="server_8h_html_a5d49d5c9a11564577f7e78d6f52d9db5"><div class="ttname"><a href="server_8h.html#a5d49d5c9a11564577f7e78d6f52d9db5">CONFIG_DEFAULT_DEFRAG_CYCLE_MIN</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_CYCLE_MIN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00165">server.h:165</a></div></div>
<div class="ttc" id="ae_8c_html_ae2b6461448420e59fdb578cb8809d036"><div class="ttname"><a href="ae_8c.html#ae2b6461448420e59fdb578cb8809d036">aeCreateTimeEvent</a></div><div class="ttdeci">long long aeCreateTimeEvent(aeEventLoop *eventLoop, long long milliseconds, aeTimeProc *proc, void *clientData, aeEventFinalizerProc *finalizerProc)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00208">ae.c:208</a></div></div>
<div class="ttc" id="structredis_server_html_acbcfbae88969a2dd7d176d58ae6110d7"><div class="ttname"><a href="structredis_server.html#acbcfbae88969a2dd7d176d58ae6110d7">redisServer::aof_last_fsync</a></div><div class="ttdeci">time_t aof_last_fsync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01068">server.h:1068</a></div></div>
<div class="ttc" id="redis-benchmark_8c_html_ae7c9dc8f13568a9c856573751f1ee1ec"><div class="ttname"><a href="redis-benchmark_8c.html#ae7c9dc8f13568a9c856573751f1ee1ec">UNUSED</a></div><div class="ttdeci">#define UNUSED(V)</div><div class="ttdef"><b>Definition:</b> <a href="redis-benchmark_8c_source.html#l00049">redis-benchmark.c:49</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a9ec2b071c9af3042098b878026d9c3dd"><div class="ttname"><a href="structshared_objects_struct.html#a9ec2b071c9af3042098b878026d9c3dd">sharedObjectsStruct::maxstring</a></div><div class="ttdeci">sds maxstring</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00792">server.h:792</a></div></div>
<div class="ttc" id="structredis_server_html_a320d427960bbcbd74742e22bb212b30f"><div class="ttname"><a href="structredis_server.html#a320d427960bbcbd74742e22bb212b30f">redisServer::aof_rewrite_incremental_fsync</a></div><div class="ttdeci">int aof_rewrite_incremental_fsync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01073">server.h:1073</a></div></div>
<div class="ttc" id="server_8h_html_ad895fdf16e5ed5275d19ddf8578b900f"><div class="ttname"><a href="server_8h.html#ad895fdf16e5ed5275d19ddf8578b900f">SLAVE_STATE_ONLINE</a></div><div class="ttdeci">#define SLAVE_STATE_ONLINE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00313">server.h:313</a></div></div>
<div class="ttc" id="cluster_8h_html_a44b183827017eca27648d5991fc50b13"><div class="ttname"><a href="cluster_8h.html#a44b183827017eca27648d5991fc50b13">CLUSTER_DEFAULT_SLAVE_VALIDITY</a></div><div class="ttdeci">#define CLUSTER_DEFAULT_SLAVE_VALIDITY</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00017">cluster.h:17</a></div></div>
<div class="ttc" id="server_8h_html_a9f89484284fb0956374bd7b6fa639602"><div class="ttname"><a href="server_8h.html#a9f89484284fb0956374bd7b6fa639602">CLIENT_FORCE_REPL</a></div><div class="ttdeci">#define CLIENT_FORCE_REPL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00244">server.h:244</a></div></div>
<div class="ttc" id="expire_8c_html_a2311f10fbab3b7e873055e784ae61bd8"><div class="ttname"><a href="expire_8c.html#a2311f10fbab3b7e873055e784ae61bd8">pexpireatCommand</a></div><div class="ttdeci">void pexpireatCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00468">expire.c:468</a></div></div>
<div class="ttc" id="structredis_server_html_aaffc55850982666923b1b7497631ac79"><div class="ttname"><a href="structredis_server.html#aaffc55850982666923b1b7497631ac79">redisServer::timezone</a></div><div class="ttdeci">time_t timezone</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01215">server.h:1215</a></div></div>
<div class="ttc" id="server_8h_html_ad0a549a4ce81a4436199706f3513bbc2"><div class="ttname"><a href="server_8h.html#ad0a549a4ce81a4436199706f3513bbc2">CONFIG_DEFAULT_PID_FILE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_PID_FILE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00114">server.h:114</a></div></div>
<div class="ttc" id="structredis_server_html_ad780220bf56199a5e24492ce3e1adae8"><div class="ttname"><a href="structredis_server.html#ad780220bf56199a5e24492ce3e1adae8">redisServer::sofd</a></div><div class="ttdeci">int sofd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00968">server.h:968</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a2a959b51b26f4ced3ab179af23f19fba"><div class="ttname"><a href="structredis_mem_overhead.html#a2a959b51b26f4ced3ab179af23f19fba">redisMemOverhead::overhead_total</a></div><div class="ttdeci">size_t overhead_total</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00860">server.h:860</a></div></div>
<div class="ttc" id="structredis_command_html_a871d4aede11ef92c86b3c64c2a5477c0"><div class="ttname"><a href="structredis_command.html#a871d4aede11ef92c86b3c64c2a5477c0">redisCommand::getkeys_proc</a></div><div class="ttdeci">redisGetKeysProc * getkeys_proc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01298">server.h:1298</a></div></div>
<div class="ttc" id="structredis_server_html_a3bd69064f36a186f0a83bbe22cee41d2"><div class="ttname"><a href="structredis_server.html#a3bd69064f36a186f0a83bbe22cee41d2">redisServer::runid</a></div><div class="ttdeci">char runid[CONFIG_RUN_ID_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00949">server.h:949</a></div></div>
<div class="ttc" id="structredis_server_html_afce7261d2fd1519a835614d28df5afb5"><div class="ttname"><a href="structredis_server.html#afce7261d2fd1519a835614d28df5afb5">redisServer::lua_timedout</a></div><div class="ttdeci">int lua_timedout</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01256">server.h:1256</a></div></div>
<div class="ttc" id="scripting_8c_html_a9e2aac4d91cc39a7634cc42a8acea80b"><div class="ttname"><a href="scripting_8c.html#a9e2aac4d91cc39a7634cc42a8acea80b">scriptCommand</a></div><div class="ttdeci">void scriptCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01485">scripting.c:1485</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a6ee5caf807a005678e7075fd44ce7038"><div class="ttname"><a href="structshared_objects_struct.html#a6ee5caf807a005678e7075fd44ce7038">sharedObjectsStruct::select</a></div><div class="ttdeci">robj * select[PROTO_SHARED_SELECT_CMDS]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="util_8c_html_a57b6fa0683401c727ce1b85077d6bc74"><div class="ttname"><a href="util_8c.html#a57b6fa0683401c727ce1b85077d6bc74">getAbsolutePath</a></div><div class="ttdeci">sds getAbsolutePath(char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00610">util.c:610</a></div></div>
<div class="ttc" id="structredis_server_html_a4f074cb73b7191ef570261fb35b29a8e"><div class="ttname"><a href="structredis_server.html#a4f074cb73b7191ef570261fb35b29a8e">redisServer::syslog_facility</a></div><div class="ttdeci">int syslog_facility</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01121">server.h:1121</a></div></div>
<div class="ttc" id="adlist_8c_html_ad0882c8ad68f6f8edc1c032b55e289e6"><div class="ttname"><a href="adlist_8c.html#ad0882c8ad68f6f8edc1c032b55e289e6">listCreate</a></div><div class="ttdeci">list * listCreate(void)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00041">adlist.c:41</a></div></div>
<div class="ttc" id="structredis_server_html_aa2339b21f98abccd12533a54d5f9d712"><div class="ttname"><a href="structredis_server.html#aa2339b21f98abccd12533a54d5f9d712">redisServer::daemonize</a></div><div class="ttdeci">int daemonize</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01050">server.h:1050</a></div></div>
<div class="ttc" id="cluster_8c_html_a5ceb25441c0355b24f1d991b704cb3b5"><div class="ttname"><a href="cluster_8c.html#a5ceb25441c0355b24f1d991b704cb3b5">migrateCloseTimedoutSockets</a></div><div class="ttdeci">void migrateCloseTimedoutSockets(void)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05039">cluster.c:5039</a></div></div>
<div class="ttc" id="server_8c_html_adb43393a4b666131c7c9d50fc07f7417"><div class="ttname"><a href="server_8c.html#adb43393a4b666131c7c9d50fc07f7417">keylistDictType</a></div><div class="ttdeci">dictType keylistDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00664">server.c:664</a></div></div>
<div class="ttc" id="structsaveparam_html"><div class="ttname"><a href="structsaveparam.html">saveparam</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00768">server.h:768</a></div></div>
<div class="ttc" id="ae_8c_html_a13cfb20cd4911e655db460fedb5daf1d"><div class="ttname"><a href="ae_8c.html#a13cfb20cd4911e655db460fedb5daf1d">aeDeleteEventLoop</a></div><div class="ttdeci">void aeDeleteEventLoop(aeEventLoop *eventLoop)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00125">ae.c:125</a></div></div>
<div class="ttc" id="pubsub_8c_html_aff060253395a382dce70cc8090c8d5bc"><div class="ttname"><a href="pubsub_8c.html#aff060253395a382dce70cc8090c8d5bc">listMatchPubsubPattern</a></div><div class="ttdeci">int listMatchPubsubPattern(void *a, void *b)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00043">pubsub.c:43</a></div></div>
<div class="ttc" id="structredis_server_html_a073361fbb3cafb1304ba30260585b408"><div class="ttname"><a href="structredis_server.html#a073361fbb3cafb1304ba30260585b408">redisServer::cluster_configfile</a></div><div class="ttdeci">char * cluster_configfile</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01226">server.h:1226</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_af656fbe75f826d0b700d1e4dd21dc935"><div class="ttname"><a href="structshared_objects_struct.html#af656fbe75f826d0b700d1e4dd21dc935">sharedObjectsStruct::nokeyerr</a></div><div class="ttdeci">robj * nokeyerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="expire_8c_html_a9ac447b86b9a05e76145b634348fda4a"><div class="ttname"><a href="expire_8c.html#a9ac447b86b9a05e76145b634348fda4a">activeExpireCycle</a></div><div class="ttdeci">void activeExpireCycle(int type)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00097">expire.c:97</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a52f1b7a905e11005b98c2b413cf312fd"><div class="ttname"><a href="structshared_objects_struct.html#a52f1b7a905e11005b98c2b413cf312fd">sharedObjectsStruct::space</a></div><div class="ttdeci">robj * space</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a5d8232e4793ca39381aaf0de4b23023e"><div class="ttname"><a href="structshared_objects_struct.html#a5d8232e4793ca39381aaf0de4b23023e">sharedObjectsStruct::sameobjecterr</a></div><div class="ttdeci">robj * sameobjecterr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="lolwut_8c_html_a2b7e3056f3609f07c28dbb05dca5aba5"><div class="ttname"><a href="lolwut_8c.html#a2b7e3056f3609f07c28dbb05dca5aba5">lolwutCommand</a></div><div class="ttdeci">void lolwutCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="lolwut_8c_source.html#l00049">lolwut.c:49</a></div></div>
<div class="ttc" id="server_8h_html_a9a9052fd2ff219c8b78526c3aee06b0d"><div class="ttname"><a href="server_8h.html#a9a9052fd2ff219c8b78526c3aee06b0d">xrevrangeCommand</a></div><div class="ttdeci">void xrevrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01299">t_stream.c:1299</a></div></div>
<div class="ttc" id="server_8h_html_a9f6608fefa355981c2a865ef3d44f196"><div class="ttname"><a href="server_8h.html#a9f6608fefa355981c2a865ef3d44f196">CMD_RANDOM</a></div><div class="ttdeci">#define CMD_RANDOM</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00212">server.h:212</a></div></div>
<div class="ttc" id="config_8c_html_a43c6b5fe507fc33990a75da2e4778b92"><div class="ttname"><a href="config_8c.html#a43c6b5fe507fc33990a75da2e4778b92">loadServerConfig</a></div><div class="ttdeci">void loadServerConfig(char *filename, char *options)</div><div class="ttdef"><b>Definition:</b> <a href="config_8c_source.html#l00834">config.c:834</a></div></div>
<div class="ttc" id="server_8h_html_af9d0b0f45ef2c1fd29ac714a300de706"><div class="ttname"><a href="server_8h.html#af9d0b0f45ef2c1fd29ac714a300de706">CLIENT_LUA</a></div><div class="ttdeci">#define CLIENT_LUA</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00237">server.h:237</a></div></div>
<div class="ttc" id="structredis_server_html_a1a7fbbf584c0a372e035053026784436"><div class="ttname"><a href="structredis_server.html#a1a7fbbf584c0a372e035053026784436">redisServer::multiCommand</a></div><div class="ttdeci">struct redisCommand * multiCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="multi_8c_html_a05013696b351c46c4af8bc3bb3af2a82"><div class="ttname"><a href="multi_8c.html#a05013696b351c46c4af8bc3bb3af2a82">execCommand</a></div><div class="ttdeci">void execCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00114">multi.c:114</a></div></div>
<div class="ttc" id="db_8c_html_ab7d62562d550246831d204c7be7df9e8"><div class="ttname"><a href="db_8c.html#ab7d62562d550246831d204c7be7df9e8">scanCommand</a></div><div class="ttdeci">void scanCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00796">db.c:796</a></div></div>
<div class="ttc" id="structredis_server_html_a98158f8fefde91e0943a1b16668c4529"><div class="ttname"><a href="structredis_server.html#a98158f8fefde91e0943a1b16668c4529">redisServer::clients_pending_write</a></div><div class="ttdeci">list * clients_pending_write</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00973">server.h:973</a></div></div>
<div class="ttc" id="server_8c_html_adfc266c0c3523ff393445b3421b9467a"><div class="ttname"><a href="server_8c.html#adfc266c0c3523ff393445b3421b9467a">clientsCronTrackExpansiveClients</a></div><div class="ttdeci">int clientsCronTrackExpansiveClients(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00907">server.c:907</a></div></div>
<div class="ttc" id="server_8h_html_ab24065d7a9205264189681ab4e4d410e"><div class="ttname"><a href="server_8h.html#ab24065d7a9205264189681ab4e4d410e">CONFIG_DEFAULT_MAX_CLIENTS</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MAX_CLIENTS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00103">server.h:103</a></div></div>
<div class="ttc" id="expire_8c_html_a5a5a788edf07140d6e41103a31476fdd"><div class="ttname"><a href="expire_8c.html#a5a5a788edf07140d6e41103a31476fdd">pttlCommand</a></div><div class="ttdeci">void pttlCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00501">expire.c:501</a></div></div>
<div class="ttc" id="structclient_html_a3ceb1598320b93accc65299b5ccf10d7"><div class="ttname"><a href="structclient.html#a3ceb1598320b93accc65299b5ccf10d7">client::reploff</a></div><div class="ttdeci">long long reploff</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00743">server.h:743</a></div></div>
<div class="ttc" id="dict_8h_html_aa077e877a37a7dc65056290a2c9760da"><div class="ttname"><a href="dict_8h.html#aa077e877a37a7dc65056290a2c9760da">DICT_NOTUSED</a></div><div class="ttdeci">#define DICT_NOTUSED(V)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00045">dict.h:45</a></div></div>
<div class="ttc" id="structredis_server_html_a0035ae0969e226acb750cf0859bfd2c5"><div class="ttname"><a href="structredis_server.html#a0035ae0969e226acb750cf0859bfd2c5">redisServer::hash_max_ziplist_value</a></div><div class="ttdeci">size_t hash_max_ziplist_value</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01203">server.h:1203</a></div></div>
<div class="ttc" id="server_8c_html_aacccd08c1c30ec2982422f0f349f96b3"><div class="ttname"><a href="server_8c.html#aacccd08c1c30ec2982422f0f349f96b3">createSharedObjects</a></div><div class="ttdeci">void createSharedObjects(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01422">server.c:1422</a></div></div>
<div class="ttc" id="structlist_html"><div class="ttname"><a href="structlist.html">list</a></div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00047">adlist.h:47</a></div></div>
<div class="ttc" id="server_8h_html_aab8d0fb9427699c23cdbeb524f875562"><div class="ttname"><a href="server_8h.html#aab8d0fb9427699c23cdbeb524f875562">HASHTABLE_MIN_FILL</a></div><div class="ttdeci">#define HASHTABLE_MIN_FILL</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00201">server.h:201</a></div></div>
<div class="ttc" id="structredis_server_html_a2948a0fa6ec92b071befb3e78fd57b2f"><div class="ttname"><a href="structredis_server.html#a2948a0fa6ec92b071befb3e78fd57b2f">redisServer::repl_min_slaves_to_write</a></div><div class="ttdeci">int repl_min_slaves_to_write</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01140">server.h:1140</a></div></div>
<div class="ttc" id="server_8c_html_a052960af9fbd487bc866d61c2f0cc996"><div class="ttname"><a href="server_8c.html#a052960af9fbd487bc866d61c2f0cc996">prepareForShutdown</a></div><div class="ttdeci">int prepareForShutdown(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02751">server.c:2751</a></div></div>
<div class="ttc" id="cluster_8c_html_a29d9657a4ac5c0dbe65bb20c36202d43"><div class="ttname"><a href="cluster_8c.html#a29d9657a4ac5c0dbe65bb20c36202d43">clusterCron</a></div><div class="ttdeci">void clusterCron(void)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l03308">cluster.c:3308</a></div></div>
<div class="ttc" id="geo_8c_html_ac430686cb8d0fdb278f003407c7c2139"><div class="ttname"><a href="geo_8c.html#ac430686cb8d0fdb278f003407c7c2139">geodistCommand</a></div><div class="ttdeci">void geodistCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00786">geo.c:786</a></div></div>
<div class="ttc" id="db_8c_html_a0cc0184a1a7d36addb4e145134f8a2a9"><div class="ttname"><a href="db_8c.html#a0cc0184a1a7d36addb4e145134f8a2a9">swapdbCommand</a></div><div class="ttdeci">void swapdbCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01027">db.c:1027</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_aff4b27537592388d89ec9788325cc134"><div class="ttname"><a href="structshared_objects_struct.html#aff4b27537592388d89ec9788325cc134">sharedObjectsStruct::syntaxerr</a></div><div class="ttdeci">robj * syntaxerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="config_8h_html_a2772a97b4cc2a57992e8f3f8a6ef0ad7"><div class="ttname"><a href="config_8h.html#a2772a97b4cc2a57992e8f3f8a6ef0ad7">redis_fsync</a></div><div class="ttdeci">#define redis_fsync</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00094">config.h:94</a></div></div>
<div class="ttc" id="structredis_server_html_ad3a0208c5b729ff578851041f2e01441"><div class="ttname"><a href="structredis_server.html#ad3a0208c5b729ff578851041f2e01441">redisServer::rdb_child_type</a></div><div class="ttdeci">int rdb_child_type</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01103">server.h:1103</a></div></div>
<div class="ttc" id="structredis_server_html_ae0d46a978d5cd6707411f276ad869b9c"><div class="ttname"><a href="structredis_server.html#ae0d46a978d5cd6707411f276ad869b9c">redisServer::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00928">server.h:928</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a9cafe99c292b52f795f9ceef838f4249"><div class="ttname"><a href="structredis_mem_overhead.html#a9cafe99c292b52f795f9ceef838f4249">redisMemOverhead::rss_extra_bytes</a></div><div class="ttdeci">size_t rss_extra_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00873">server.h:873</a></div></div>
<div class="ttc" id="server_8c_html_a9475c3fcad317183a072323859fb5409"><div class="ttname"><a href="server_8c.html#a9475c3fcad317183a072323859fb5409">populateCommandTable</a></div><div class="ttdeci">void populateCommandTable(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02182">server.c:2182</a></div></div>
<div class="ttc" id="structclient_html_aca5279911d8623c8a01999fda40f1e4c"><div class="ttname"><a href="structclient.html#aca5279911d8623c8a01999fda40f1e4c">client::repl_ack_time</a></div><div class="ttdeci">long long repl_ack_time</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00745">server.h:745</a></div></div>
<div class="ttc" id="server_8h_html_a01c18c16bc758787b5cfc287eb7b089e"><div class="ttname"><a href="server_8h.html#a01c18c16bc758787b5cfc287eb7b089e">CLIENT_PREVENT_REPL_PROP</a></div><div class="ttdeci">#define CLIENT_PREVENT_REPL_PROP</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00249">server.h:249</a></div></div>
<div class="ttc" id="server_8h_html_a2c8d2290c3ac70d63ed2e62b11ab566b"><div class="ttname"><a href="server_8h.html#a2c8d2290c3ac70d63ed2e62b11ab566b">CONFIG_DEFAULT_TCP_KEEPALIVE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_TCP_KEEPALIVE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00122">server.h:122</a></div></div>
<div class="ttc" id="structredis_server_html_a3d1de338a7f6bb594efb159e1e34bf2d"><div class="ttname"><a href="structredis_server.html#a3d1de338a7f6bb594efb159e1e34bf2d">redisServer::protected_mode</a></div><div class="ttdeci">int protected_mode</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00982">server.h:982</a></div></div>
<div class="ttc" id="structredis_server_html_a93ff934e4b3870c270b9149fc4f65fe6"><div class="ttname"><a href="structredis_server.html#a93ff934e4b3870c270b9149fc4f65fe6">redisServer::tcpkeepalive</a></div><div class="ttdeci">int tcpkeepalive</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01037">server.h:1037</a></div></div>
<div class="ttc" id="structredis_op_array_html"><div class="ttname"><a href="structredis_op_array.html">redisOpArray</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00844">server.h:844</a></div></div>
<div class="ttc" id="cluster_8c_html_ade6a3e195889b66cd73fe6d1b17d7a4a"><div class="ttname"><a href="cluster_8c.html#ade6a3e195889b66cd73fe6d1b17d7a4a">askingCommand</a></div><div class="ttdeci">void askingCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05384">cluster.c:5384</a></div></div>
<div class="ttc" id="structredis_server_html_a672826c5f111e440081c74f2f07180d6"><div class="ttname"><a href="structredis_server.html#a672826c5f111e440081c74f2f07180d6">redisServer::rdb_compression</a></div><div class="ttdeci">int rdb_compression</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01096">server.h:1096</a></div></div>
<div class="ttc" id="server_8h_html_a612a8681d1a25cd86faf4139d161316a"><div class="ttname"><a href="server_8h.html#a612a8681d1a25cd86faf4139d161316a">CMD_MODULE_GETKEYS</a></div><div class="ttdeci">#define CMD_MODULE_GETKEYS</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00219">server.h:219</a></div></div>
<div class="ttc" id="dict_8h_html_ae8d2cc391873b2bea2b87c4f80f43120"><div class="ttname"><a href="dict_8h.html#ae8d2cc391873b2bea2b87c4f80f43120">dictGetVal</a></div><div class="ttdeci">#define dictGetVal(he)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00142">dict.h:142</a></div></div>
<div class="ttc" id="server_8h_html_a9a55797eec6ecb31c031b629ceb36b50"><div class="ttname"><a href="server_8h.html#a9a55797eec6ecb31c031b629ceb36b50">zincrbyCommand</a></div><div class="ttdeci">void zincrbyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l01661">t_zset.c:1661</a></div></div>
<div class="ttc" id="cluster_8c_html_aca571ae521b349616304e35643826ec6"><div class="ttname"><a href="cluster_8c.html#aca571ae521b349616304e35643826ec6">dumpCommand</a></div><div class="ttdeci">void dumpCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l04833">cluster.c:4833</a></div></div>
<div class="ttc" id="structredis_server_html_ad5f3f0f97fb511f8f86f21d13e03801c"><div class="ttname"><a href="structredis_server.html#ad5f3f0f97fb511f8f86f21d13e03801c">redisServer::lpushCommand</a></div><div class="ttdeci">struct redisCommand * lpushCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structclient_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="structclient.html#a6f8059414f0228f0256115e024eeed4b">client::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00711">server.h:711</a></div></div>
<div class="ttc" id="server_8c_html_a595cec82a851fe7b87861d93677cc32d"><div class="ttname"><a href="server_8c.html#a595cec82a851fe7b87861d93677cc32d">preventCommandReplication</a></div><div class="ttdeci">void preventCommandReplication(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02369">server.c:2369</a></div></div>
<div class="ttc" id="structredis_server_html_a007cbc9d6c2e3d0fa86d9355a96c9f69"><div class="ttname"><a href="structredis_server.html#a007cbc9d6c2e3d0fa86d9355a96c9f69">redisServer::slowlog_max_len</a></div><div class="ttdeci">unsigned long slowlog_max_len</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01020">server.h:1020</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_ae1d7b7b42904d9ebb1698ab3ac79a2e9"><div class="ttname"><a href="structredis_mem_overhead.html#ae1d7b7b42904d9ebb1698ab3ac79a2e9">redisMemOverhead::rss_extra</a></div><div class="ttdeci">float rss_extra</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00872">server.h:872</a></div></div>
<div class="ttc" id="structredis_server_html_a6ba0eb500edf919e115c9d159b991cd1"><div class="ttname"><a href="structredis_server.html#a6ba0eb500edf919e115c9d159b991cd1">redisServer::master_repl_offset</a></div><div class="ttdeci">long long master_repl_offset</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01125">server.h:1125</a></div></div>
<div class="ttc" id="structblocking_state_html_a1adf524d2a0c7f9eb77f4f78e6c05620"><div class="ttname"><a href="structblocking_state.html#a1adf524d2a0c7f9eb77f4f78e6c05620">blockingState::timeout</a></div><div class="ttdeci">mstime_t timeout</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00665">server.h:665</a></div></div>
<div class="ttc" id="server_8h_html_ad97c5405ed22a94e9fcc10fba577d6c0"><div class="ttname"><a href="server_8h.html#ad97c5405ed22a94e9fcc10fba577d6c0">NET_IP_STR_LEN</a></div><div class="ttdeci">#define NET_IP_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00151">server.h:151</a></div></div>
<div class="ttc" id="cluster_8c_html_a8bbf763a26259982d93a4ed3350267b8"><div class="ttname"><a href="cluster_8c.html#a8bbf763a26259982d93a4ed3350267b8">restoreCommand</a></div><div class="ttdeci">void restoreCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l04854">cluster.c:4854</a></div></div>
<div class="ttc" id="structredis_server_html_a6a317d8f5c5ed50aa4c4756bb5e95ee9"><div class="ttname"><a href="structredis_server.html#a6a317d8f5c5ed50aa4c4756bb5e95ee9">redisServer::slaves</a></div><div class="ttdeci">list * slaves</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00974">server.h:974</a></div></div>
<div class="ttc" id="structredis_server_html_a6ed7e8eb73b7d9072d719f525ea51063"><div class="ttname"><a href="structredis_server.html#a6ed7e8eb73b7d9072d719f525ea51063">redisServer::cluster_enabled</a></div><div class="ttdeci">int cluster_enabled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01224">server.h:1224</a></div></div>
<div class="ttc" id="debug_8c_html_a52331223339742c28ebd3383a0758853"><div class="ttname"><a href="debug_8c.html#a52331223339742c28ebd3383a0758853">watchdogScheduleSignal</a></div><div class="ttdeci">void watchdogScheduleSignal(int period)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l01208">debug.c:1208</a></div></div>
<div class="ttc" id="server_8h_html_a4fee297599eb9a8a4f86e3fcf77e9fa2"><div class="ttname"><a href="server_8h.html#a4fee297599eb9a8a4f86e3fcf77e9fa2">sinterCommand</a></div><div class="ttdeci">void sinterCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l00919">t_set.c:919</a></div></div>
<div class="ttc" id="server_8h_html_aac60533b8974a80cbba84fa83cefadba"><div class="ttname"><a href="server_8h.html#aac60533b8974a80cbba84fa83cefadba">blpopCommand</a></div><div class="ttdeci">void blpopCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00742">t_list.c:742</a></div></div>
<div class="ttc" id="structredis_server_html_aa63d306ce9b3447e242ab5eafab120a5"><div class="ttname"><a href="structredis_server.html#aa63d306ce9b3447e242ab5eafab120a5">redisServer::second_replid_offset</a></div><div class="ttdeci">long long second_replid_offset</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01126">server.h:1126</a></div></div>
<div class="ttc" id="structredis_mem_overhead_html_a4377a6a963ee32e22c7c7f14180a4a31"><div class="ttname"><a href="structredis_mem_overhead.html#a4377a6a963ee32e22c7c7f14180a4a31">redisMemOverhead::repl_backlog</a></div><div class="ttdeci">size_t repl_backlog</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00855">server.h:855</a></div></div>
<div class="ttc" id="structredis_op_html_ae8aa5cb4faa95420993aad5d4f2e839f"><div class="ttname"><a href="structredis_op.html#ae8aa5cb4faa95420993aad5d4f2e839f">redisOp::target</a></div><div class="ttdeci">int target</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00833">server.h:833</a></div></div>
<div class="ttc" id="structredis_server_html_abc0787f1240642d77c7e797e7a9b5667"><div class="ttname"><a href="structredis_server.html#abc0787f1240642d77c7e797e7a9b5667">redisServer::active_defrag_ignore_bytes</a></div><div class="ttdeci">size_t active_defrag_ignore_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01040">server.h:1040</a></div></div>
<div class="ttc" id="cluster_8h_html"><div class="ttname"><a href="cluster_8h.html">cluster.h</a></div></div>
<div class="ttc" id="structredis_server_html_ac7835028128a4b2dbf35822063fb73f8"><div class="ttname"><a href="structredis_server.html#ac7835028128a4b2dbf35822063fb73f8">redisServer::slave_announce_ip</a></div><div class="ttdeci">char * slave_announce_ip</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01168">server.h:1168</a></div></div>
<div class="ttc" id="db_8c_html_abce45027353410ce6f2d533057606f03"><div class="ttname"><a href="db_8c.html#abce45027353410ce6f2d533057606f03">sortGetKeys</a></div><div class="ttdeci">int * sortGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01305">db.c:1305</a></div></div>
<div class="ttc" id="server_8h_html_a3885f356f3a4cef22eb96fbfcc406333"><div class="ttname"><a href="server_8h.html#a3885f356f3a4cef22eb96fbfcc406333">STATS_METRIC_NET_OUTPUT</a></div><div class="ttdeci">#define STATS_METRIC_NET_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00180">server.h:180</a></div></div>
<div class="ttc" id="networking_8c_html_a5b7a1863aa26723ce29afe1ad44b12c1"><div class="ttname"><a href="networking_8c.html#a5b7a1863aa26723ce29afe1ad44b12c1">handleClientsWithPendingWrites</a></div><div class="ttdeci">int handleClientsWithPendingWrites(void)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l01064">networking.c:1064</a></div></div>
<div class="ttc" id="dict_8h_html_af193430dd3d5579a52b194512f72c1f0"><div class="ttname"><a href="dict_8h.html#af193430dd3d5579a52b194512f72c1f0">dictSize</a></div><div class="ttdeci">#define dictSize(d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00147">dict.h:147</a></div></div>
<div class="ttc" id="object_8c_html_aa84594b5dd7a5dda8201c15c85b1457a"><div class="ttname"><a href="object_8c.html#aa84594b5dd7a5dda8201c15c85b1457a">incrRefCount</a></div><div class="ttdeci">void incrRefCount(robj *o)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00349">object.c:349</a></div></div>
<div class="ttc" id="structredis_server_html_a25c0d5c7a909d3768192bd96a83116fc"><div class="ttname"><a href="structredis_server.html#a25c0d5c7a909d3768192bd96a83116fc">redisServer::unixtime_mutex</a></div><div class="ttdeci">pthread_mutex_t unixtime_mutex</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01280">server.h:1280</a></div></div>
<div class="ttc" id="server_8h_html_af807f6a1ed93f11b51bf3d834b859b0a"><div class="ttname"><a href="server_8h.html#af807f6a1ed93f11b51bf3d834b859b0a">hstrlenCommand</a></div><div class="ttdeci">void hstrlenCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00739">t_hash.c:739</a></div></div>
<div class="ttc" id="structredis_server_html_a1456517f960c1a06b3eb29614ab5f16e"><div class="ttname"><a href="structredis_server.html#a1456517f960c1a06b3eb29614ab5f16e">redisServer::repl_slave_lazy_flush</a></div><div class="ttdeci">int repl_slave_lazy_flush</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01174">server.h:1174</a></div></div>
<div class="ttc" id="structredis_server_html_ac57f30da06fd89c76b8dd1f93ea0083f"><div class="ttname"><a href="structredis_server.html#ac57f30da06fd89c76b8dd1f93ea0083f">redisServer::repl_serve_stale_data</a></div><div class="ttdeci">int repl_serve_stale_data</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01161">server.h:1161</a></div></div>
<div class="ttc" id="structredis_server_html_a293e6dedeaca2bf16929f9903380c7d3"><div class="ttname"><a href="structredis_server.html#a293e6dedeaca2bf16929f9903380c7d3">redisServer::stream_node_max_bytes</a></div><div class="ttdeci">size_t stream_node_max_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01208">server.h:1208</a></div></div>
<div class="ttc" id="atomicvar_8h_html_a0f02b5846dcf4ed3669ecf771c512d12"><div class="ttname"><a href="atomicvar_8h.html#a0f02b5846dcf4ed3669ecf771c512d12">atomicSet</a></div><div class="ttdeci">#define atomicSet(var, value)</div><div class="ttdef"><b>Definition:</b> <a href="atomicvar_8h_source.html#l00125">atomicvar.h:125</a></div></div>
<div class="ttc" id="zmalloc_8c_html_ad4842ce8d33e9f71028dc61b6955ecd1"><div class="ttname"><a href="zmalloc_8c.html#ad4842ce8d33e9f71028dc61b6955ecd1">zmalloc_get_allocator_info</a></div><div class="ttdeci">int zmalloc_get_allocator_info(size_t *allocated, size_t *active, size_t *resident)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00327">zmalloc.c:327</a></div></div>
<div class="ttc" id="server_8c_html_acdd4d8214a1a0cf660e5d3a48d576344"><div class="ttname"><a href="server_8c.html#acdd4d8214a1a0cf660e5d3a48d576344">setupSignalHandlers</a></div><div class="ttdeci">void setupSignalHandlers(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03810">server.c:3810</a></div></div>
<div class="ttc" id="structclient_html_a08c13433165f221a86bc5c3160f17c82"><div class="ttname"><a href="structclient.html#a08c13433165f221a86bc5c3160f17c82">client::lastinteraction</a></div><div class="ttdeci">time_t lastinteraction</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00732">server.h:732</a></div></div>
<div class="ttc" id="structredis_server_html_a1ad649607159f0284068556041fcd387"><div class="ttname"><a href="structredis_server.html#a1ad649607159f0284068556041fcd387">redisServer::zpopminCommand</a></div><div class="ttdeci">struct redisCommand * zpopminCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structredis_server_html_a933413e654fa963feaa5c069387e825c"><div class="ttname"><a href="structredis_server.html#a933413e654fa963feaa5c069387e825c">redisServer::lfu_decay_time</a></div><div class="ttdeci">int lfu_decay_time</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01188">server.h:1188</a></div></div>
<div class="ttc" id="server_8c_html_a71fbe9a81ae4723396f78c2099081737"><div class="ttname"><a href="server_8c.html#a71fbe9a81ae4723396f78c2099081737">shaScriptObjectDictType</a></div><div class="ttdeci">dictType shaScriptObjectDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00622">server.c:622</a></div></div>
<div class="ttc" id="replication_8c_html_a6f8585370e62320875abea412e5c8a9a"><div class="ttname"><a href="replication_8c.html#a6f8585370e62320875abea412e5c8a9a">replconfCommand</a></div><div class="ttdeci">void replconfCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l00776">replication.c:776</a></div></div>
<div class="ttc" id="server_8h_html_a8c19b37d1efc9fd02ae44551430a06be"><div class="ttname"><a href="server_8h.html#a8c19b37d1efc9fd02ae44551430a06be">xpendingCommand</a></div><div class="ttdeci">void xpendingCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01904">t_stream.c:1904</a></div></div>
<div class="ttc" id="structredis_server_html_adca63c4602215bd9e28e5e81bcf91fe6"><div class="ttname"><a href="structredis_server.html#adca63c4602215bd9e28e5e81bcf91fe6">redisServer::sremCommand</a></div><div class="ttdeci">struct redisCommand * sremCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="server_8h_html_a9b5a91047aa18eb5df52e99c97afab84"><div class="ttname"><a href="server_8h.html#a9b5a91047aa18eb5df52e99c97afab84">AOF_REWRITE_MIN_SIZE</a></div><div class="ttdeci">#define AOF_REWRITE_MIN_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00098">server.h:98</a></div></div>
<div class="ttc" id="sds_8c_html_a4e7207cc9002b072f67a0766fedbc7fb"><div class="ttname"><a href="sds_8c.html#a4e7207cc9002b072f67a0766fedbc7fb">sdscatrepr</a></div><div class="ttdeci">sds sdscatrepr(sds s, const char *p, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00876">sds.c:876</a></div></div>
<div class="ttc" id="structredis_server_html_ab44819023af4734d6f559d7f4e3d18bb"><div class="ttname"><a href="structredis_server.html#ab44819023af4734d6f559d7f4e3d18bb">redisServer::lua</a></div><div class="ttdeci">lua_State * lua</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01242">server.h:1242</a></div></div>
<div class="ttc" id="geo_8c_html_a6392ef9236b185a2988e3bcda4b92307"><div class="ttname"><a href="geo_8c.html#a6392ef9236b185a2988e3bcda4b92307">geohashCommand</a></div><div class="ttdeci">void geohashCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00699">geo.c:699</a></div></div>
<div class="ttc" id="server_8h_html_ac8ad217da6cfbdf399948aff4d3550ca"><div class="ttname"><a href="server_8h.html#ac8ad217da6cfbdf399948aff4d3550ca">CONFIG_DEFAULT_SLAVE_ANNOUNCE_PORT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_ANNOUNCE_PORT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00136">server.h:136</a></div></div>
<div class="ttc" id="structredis_server_html_abe85a8c7083d28cbcb693b625db5ec1a"><div class="ttname"><a href="structredis_server.html#abe85a8c7083d28cbcb693b625db5ec1a">redisServer::unixsocket</a></div><div class="ttdeci">char * unixsocket</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00964">server.h:964</a></div></div>
<div class="ttc" id="server_8c_html_aec4df04fce73561a5638b3c5137e43ef"><div class="ttname"><a href="server_8c.html#aec4df04fce73561a5638b3c5137e43ef">dictObjHash</a></div><div class="ttdeci">uint64_t dictObjHash(const void *key)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00515">server.c:515</a></div></div>
<div class="ttc" id="blocked_8c_html_a013c052c4f60c072698f634122d2a663"><div class="ttname"><a href="blocked_8c.html#a013c052c4f60c072698f634122d2a663">replyToBlockedClientTimedOut</a></div><div class="ttdeci">void replyToBlockedClientTimedOut(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="blocked_8c_source.html#l00186">blocked.c:186</a></div></div>
<div class="ttc" id="latency_8c_html_ac43a2991bfa54144ae06a30e6ebb1690"><div class="ttname"><a href="latency_8c.html#ac43a2991bfa54144ae06a30e6ebb1690">latencyCommand</a></div><div class="ttdeci">void latencyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="latency_8c_source.html#l00569">latency.c:569</a></div></div>
<div class="ttc" id="structredis_server_html_af992bf15650bd1a57d0eab937c2042df"><div class="ttname"><a href="structredis_server.html#af992bf15650bd1a57d0eab937c2042df">redisServer::master</a></div><div class="ttdeci">client * master</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01150">server.h:1150</a></div></div>
<div class="ttc" id="structrdb_save_info_html"><div class="ttname"><a href="structrdb_save_info.html">rdbSaveInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00890">server.h:890</a></div></div>
<div class="ttc" id="server_8h_html_a8c54c191e436c7dd3012167212692401"><div class="ttname"><a href="server_8h.html#a8c54c191e436c7dd3012167212692401">LL_NOTICE</a></div><div class="ttdeci">#define LL_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00335">server.h:335</a></div></div>
<div class="ttc" id="structclient_html_ae41c09e14760e794d4378519d312ba9a"><div class="ttname"><a href="structclient.html#ae41c09e14760e794d4378519d312ba9a">client::pending_querybuf</a></div><div class="ttdeci">sds pending_querybuf</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00716">server.h:716</a></div></div>
<div class="ttc" id="structmalloc__stats_html_a93e17e92b02c3ad2a4e6bf903154b3d2"><div class="ttname"><a href="structmalloc__stats.html#a93e17e92b02c3ad2a4e6bf903154b3d2">malloc_stats::process_rss</a></div><div class="ttdeci">size_t process_rss</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00904">server.h:904</a></div></div>
<div class="ttc" id="atomicvar_8h_html"><div class="ttname"><a href="atomicvar_8h.html">atomicvar.h</a></div></div>
<div class="ttc" id="structredis_server_html_a3cd30a9c8ce282f08de3c733d1ccd19d"><div class="ttname"><a href="structredis_server.html#a3cd30a9c8ce282f08de3c733d1ccd19d">redisServer::stat_expired_time_cap_reached_count</a></div><div class="ttdeci">long long stat_expired_time_cap_reached_count</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01001">server.h:1001</a></div></div>
<div class="ttc" id="server_8h_html_a163b0c739289c1a4fd117af7bd8e0ff1"><div class="ttname"><a href="server_8h.html#a163b0c739289c1a4fd117af7bd8e0ff1">lrangeCommand</a></div><div class="ttdeci">void lrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__list_8c_source.html#l00398">t_list.c:398</a></div></div>
<div class="ttc" id="server_8h_html_ac93d3efcff085863089f595a037ac664"><div class="ttname"><a href="server_8h.html#ac93d3efcff085863089f595a037ac664">incrbyCommand</a></div><div class="ttdeci">void incrbyCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00387">t_string.c:387</a></div></div>
<div class="ttc" id="server_8h_html_a06bd26a900d06b177e0b9bbb67977761"><div class="ttname"><a href="server_8h.html#a06bd26a900d06b177e0b9bbb67977761">getCommand</a></div><div class="ttdeci">void getCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00172">t_string.c:172</a></div></div>
<div class="ttc" id="server_8h_html_a4e835145118ea509fa83e502ddd7825f"><div class="ttname"><a href="server_8h.html#a4e835145118ea509fa83e502ddd7825f">sscanCommand</a></div><div class="ttdeci">void sscanCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__set_8c_source.html#l01107">t_set.c:1107</a></div></div>
<div class="ttc" id="multi_8c_html_a915c7468a9f49fcbbaf3a54e65c12e56"><div class="ttname"><a href="multi_8c.html#a915c7468a9f49fcbbaf3a54e65c12e56">discardTransaction</a></div><div class="ttdeci">void discardTransaction(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00072">multi.c:72</a></div></div>
<div class="ttc" id="server_8h_html_a87641859a9a0701a1d2ff93f5c9a6e7b"><div class="ttname"><a href="server_8h.html#a87641859a9a0701a1d2ff93f5c9a6e7b">msetnxCommand</a></div><div class="ttdeci">void msetnxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00337">t_string.c:337</a></div></div>
<div class="ttc" id="structredis_server_html_a56c6284aa27660523e8fe4ddc6b2f38b"><div class="ttname"><a href="structredis_server.html#a56c6284aa27660523e8fe4ddc6b2f38b">redisServer::repl_disable_tcp_nodelay</a></div><div class="ttdeci">int repl_disable_tcp_nodelay</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01165">server.h:1165</a></div></div>
<div class="ttc" id="structdict_type_html"><div class="ttname"><a href="structdict_type.html">dictType</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00058">dict.h:58</a></div></div>
<div class="ttc" id="bio_8h_html_a5d03c967316addafc61b7ed5d957984f"><div class="ttname"><a href="bio_8h.html#a5d03c967316addafc61b7ed5d957984f">BIO_AOF_FSYNC</a></div><div class="ttdeci">#define BIO_AOF_FSYNC</div><div class="ttdef"><b>Definition:</b> <a href="bio_8h_source.html#l00040">bio.h:40</a></div></div>
<div class="ttc" id="structredis_server_html_a98440b0fba87820830ee90965c9f54f4"><div class="ttname"><a href="structredis_server.html#a98440b0fba87820830ee90965c9f54f4">redisServer::maxmemory_policy</a></div><div class="ttdeci">int maxmemory_policy</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01185">server.h:1185</a></div></div>
<div class="ttc" id="adlist_8h_html_a648e4a2d20decff3182a72a608b0b8f2"><div class="ttname"><a href="adlist_8h.html#a648e4a2d20decff3182a72a608b0b8f2">listSetFreeMethod</a></div><div class="ttdeci">#define listSetFreeMethod(l, m)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8h_source.html#l00065">adlist.h:65</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a57d329aa59d364f97cf11cc419c8f968"><div class="ttname"><a href="structshared_objects_struct.html#a57d329aa59d364f97cf11cc419c8f968">sharedObjectsStruct::plus</a></div><div class="ttdeci">robj * plus</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="dict_8c_html_a63b2ad9054199271795e33d67fb6d6da"><div class="ttname"><a href="dict_8c.html#a63b2ad9054199271795e33d67fb6d6da">dictGetIterator</a></div><div class="ttdeci">dictIterator * dictGetIterator(dict *d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00542">dict.c:542</a></div></div>
<div class="ttc" id="structredis_server_html_a192b9c651f47c1e7e927b0c6c2620952"><div class="ttname"><a href="structredis_server.html#a192b9c651f47c1e7e927b0c6c2620952">redisServer::lazyfree_lazy_expire</a></div><div class="ttdeci">int lazyfree_lazy_expire</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01262">server.h:1262</a></div></div>
<div class="ttc" id="server_8h_html_ada6ec2e62675456c34d699bd6f2f7a5d"><div class="ttname"><a href="server_8h.html#ada6ec2e62675456c34d699bd6f2f7a5d">zscanCommand</a></div><div class="ttdeci">void zscanCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03115">t_zset.c:3115</a></div></div>
<div class="ttc" id="structredis_server_html_a9bee04e09635a42fef289e42a89f5502"><div class="ttname"><a href="structredis_server.html#a9bee04e09635a42fef289e42a89f5502">redisServer::db</a></div><div class="ttdeci">redisDb * db</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00937">server.h:937</a></div></div>
<div class="ttc" id="replication_8c_html_a52f8e1fcf71986503c1a7fff6066bfaa"><div class="ttname"><a href="replication_8c.html#a52f8e1fcf71986503c1a7fff6066bfaa">processClientsWaitingReplicas</a></div><div class="ttdeci">void processClientsWaitingReplicas(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02452">replication.c:2452</a></div></div>
<div class="ttc" id="structcluster_state_html_aff69bee08a3a0a58166a9f85acf12d56"><div class="ttname"><a href="structcluster_state.html#aff69bee08a3a0a58166a9f85acf12d56">clusterState::myself</a></div><div class="ttdeci">clusterNode * myself</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00144">cluster.h:144</a></div></div>
<div class="ttc" id="dict_8c_html_aad268687a4d34aab2c051233348a04c7"><div class="ttname"><a href="dict_8c.html#aad268687a4d34aab2c051233348a04c7">dictGetSafeIterator</a></div><div class="ttdeci">dictIterator * dictGetSafeIterator(dict *d)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00555">dict.c:555</a></div></div>
<div class="ttc" id="server_8h_html_a37cd05cbfd7fb52ad21d3a822cff2ee6"><div class="ttname"><a href="server_8h.html#a37cd05cbfd7fb52ad21d3a822cff2ee6">LOG_MAX_LEN</a></div><div class="ttdeci">#define LOG_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00096">server.h:96</a></div></div>
<div class="ttc" id="dict_8h_html_aff97c19d1616cf2c697573ee3f515692"><div class="ttname"><a href="dict_8h.html#aff97c19d1616cf2c697573ee3f515692">DICT_HT_INITIAL_SIZE</a></div><div class="ttdeci">#define DICT_HT_INITIAL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00101">dict.h:101</a></div></div>
<div class="ttc" id="sds_8c_html_a12cf0d8aca38e55eef468cc0265ef473"><div class="ttname"><a href="sds_8c.html#a12cf0d8aca38e55eef468cc0265ef473">sdsRemoveFreeSpace</a></div><div class="ttdeci">sds sdsRemoveFreeSpace(sds s)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00255">sds.c:255</a></div></div>
<div class="ttc" id="structredis_server_html_a908fb5c9a872cac4539382205fec357b"><div class="ttname"><a href="structredis_server.html#a908fb5c9a872cac4539382205fec357b">redisServer::stat_expired_stale_perc</a></div><div class="ttdeci">double stat_expired_stale_perc</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01000">server.h:1000</a></div></div>
<div class="ttc" id="structredis_server_html_ac61bf06d5e2894efe1dd86783dbb4e1d"><div class="ttname"><a href="structredis_server.html#ac61bf06d5e2894efe1dd86783dbb4e1d">redisServer::unixtime</a></div><div class="ttdeci">time_t unixtime</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01214">server.h:1214</a></div></div>
<div class="ttc" id="structredis_server_html_a16d71dc7df6d4a717d3a6e6a840bf6a5"><div class="ttname"><a href="structredis_server.html#a16d71dc7df6d4a717d3a6e6a840bf6a5">redisServer::slowlog_log_slower_than</a></div><div class="ttdeci">long long slowlog_log_slower_than</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01019">server.h:1019</a></div></div>
<div class="ttc" id="structredis_server_html_a1bdb308c6148667ad72670aa18d883ba"><div class="ttname"><a href="structredis_server.html#a1bdb308c6148667ad72670aa18d883ba">redisServer::lua_always_replicate_commands</a></div><div class="ttdeci">int lua_always_replicate_commands</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01259">server.h:1259</a></div></div>
<div class="ttc" id="server_8h_html_aea8f6f3fac3a68e35807eba109dbc501"><div class="ttname"><a href="server_8h.html#aea8f6f3fac3a68e35807eba109dbc501">CLIENT_TYPE_OBUF_COUNT</a></div><div class="ttdeci">#define CLIENT_TYPE_OBUF_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00281">server.h:281</a></div></div>
<div class="ttc" id="hyperloglog_8c_html_a258d945b9cd883a1f5190730571819fe"><div class="ttname"><a href="hyperloglog_8c.html#a258d945b9cd883a1f5190730571819fe">pfaddCommand</a></div><div class="ttdeci">void pfaddCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="hyperloglog_8c_source.html#l01174">hyperloglog.c:1174</a></div></div>
<div class="ttc" id="structredis_server_html_a898017f30dfd6e8b25edf9ace36b175a"><div class="ttname"><a href="structredis_server.html#a898017f30dfd6e8b25edf9ace36b175a">redisServer::stat_expiredkeys</a></div><div class="ttdeci">long long stat_expiredkeys</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00999">server.h:999</a></div></div>
<div class="ttc" id="sds_8c_html_a2f541b6443d075056a706b5b666066af"><div class="ttname"><a href="sds_8c.html#a2f541b6443d075056a706b5b666066af">sdscatprintf</a></div><div class="ttdeci">sds sdscatprintf(sds s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="sds_8c_source.html#l00571">sds.c:571</a></div></div>
<div class="ttc" id="server_8c_html_a20f117a4c9b350a980b7e37338dd8228"><div class="ttname"><a href="server_8c.html#a20f117a4c9b350a980b7e37338dd8228">htNeedsResize</a></div><div class="ttdeci">int htNeedsResize(dict *dict)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00730">server.c:730</a></div></div>
<div class="ttc" id="structredis_server_html_ae4d226836f4e8579243896d2ad72c8fd"><div class="ttname"><a href="structredis_server.html#ae4d226836f4e8579243896d2ad72c8fd">redisServer::supervised</a></div><div class="ttdeci">int supervised</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01048">server.h:1048</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a08fd7c7369de058dcf4225d8cd4e8e78"><div class="ttname"><a href="structshared_objects_struct.html#a08fd7c7369de058dcf4225d8cd4e8e78">sharedObjectsStruct::messagebulk</a></div><div class="ttdeci">robj * messagebulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="adlist_8c_html_a2113a59d0a138217a944af5cafee6d46"><div class="ttname"><a href="adlist_8c.html#a2113a59d0a138217a944af5cafee6d46">listRelease</a></div><div class="ttdeci">void listRelease(list *list)</div><div class="ttdef"><b>Definition:</b> <a href="adlist_8c_source.html#l00076">adlist.c:76</a></div></div>
<div class="ttc" id="ae_8c_html_a0203d90fa536ccaf3287c2b72bda1c8b"><div class="ttname"><a href="ae_8c.html#a0203d90fa536ccaf3287c2b72bda1c8b">aeGetApiName</a></div><div class="ttdeci">char * aeGetApiName(void)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00505">ae.c:505</a></div></div>
<div class="ttc" id="structredis_db_html_af8dcf36ca4b084db164becc8e1c71b67"><div class="ttname"><a href="structredis_db.html#af8dcf36ca4b084db164becc8e1c71b67">redisDb::expires</a></div><div class="ttdeci">dict * expires</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00638">server.h:638</a></div></div>
<div class="ttc" id="server_8h_html_a0b8729bdfd537311480f4c3bb3a20905"><div class="ttname"><a href="server_8h.html#a0b8729bdfd537311480f4c3bb3a20905">CONFIG_DEFAULT_CLUSTER_ANNOUNCE_IP</a></div><div class="ttdeci">#define CONFIG_DEFAULT_CLUSTER_ANNOUNCE_IP</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00117">server.h:117</a></div></div>
<div class="ttc" id="server_8h_html_ab94955184c30533b403ddc9fb9f1a7b2"><div class="ttname"><a href="server_8h.html#ab94955184c30533b403ddc9fb9f1a7b2">zrangebylexCommand</a></div><div class="ttdeci">void zrangebylexCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l03056">t_zset.c:3056</a></div></div>
<div class="ttc" id="replication_8c_html_a7165ef8a155631ec4056f99153277c2b"><div class="ttname"><a href="replication_8c.html#a7165ef8a155631ec4056f99153277c2b">waitCommand</a></div><div class="ttdeci">void waitCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02404">replication.c:2404</a></div></div>
<div class="ttc" id="rax_8c_html_a56b1e46d8b342fed1d696f59c6dff08d"><div class="ttname"><a href="rax_8c.html#a56b1e46d8b342fed1d696f59c6dff08d">raxNew</a></div><div class="ttdeci">rax * raxNew(void)</div><div class="ttdef"><b>Definition:</b> <a href="rax_8c_source.html#l00201">rax.c:201</a></div></div>
<div class="ttc" id="structredis_server_html_aa886fb87091fa910b444f9d00d792b18"><div class="ttname"><a href="structredis_server.html#aa886fb87091fa910b444f9d00d792b18">redisServer::notify_keyspace_events</a></div><div class="ttdeci">int notify_keyspace_events</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01221">server.h:1221</a></div></div>
<div class="ttc" id="structredis_server_html_aa818a00bded05cbfc242fbd30a51bd06"><div class="ttname"><a href="structredis_server.html#aa818a00bded05cbfc242fbd30a51bd06">redisServer::stat_numcommands</a></div><div class="ttdeci">long long stat_numcommands</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00997">server.h:997</a></div></div>
<div class="ttc" id="server_8c_html_a5bd4331cf0cd603021bb75be8e34cf31"><div class="ttname"><a href="server_8c.html#a5bd4331cf0cd603021bb75be8e34cf31">clientsCronResizeQueryBuffer</a></div><div class="ttdeci">int clientsCronResizeQueryBuffer(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00851">server.c:851</a></div></div>
<div class="ttc" id="structredis_server_html_a1ed4dbd1b85eb15f7d9afca46a1342da"><div class="ttname"><a href="structredis_server.html#a1ed4dbd1b85eb15f7d9afca46a1342da">redisServer::active_defrag_cycle_min</a></div><div class="ttdeci">int active_defrag_cycle_min</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01043">server.h:1043</a></div></div>
<div class="ttc" id="structae_event_loop_html"><div class="ttname"><a href="structae_event_loop.html">aeEventLoop</a></div><div class="ttdef"><b>Definition:</b> <a href="ae_8h_source.html#l00097">ae.h:97</a></div></div>
<div class="ttc" id="structredis_server_html_ae40354a1051342eb5a9db005715dcfa9"><div class="ttname"><a href="structredis_server.html#ae40354a1051342eb5a9db005715dcfa9">redisServer::idx</a></div><div class="ttdeci">int idx</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01032">server.h:1032</a></div></div>
<div class="ttc" id="structredis_server_html_a0ba0e84624d22e52e900533adf7d9ba8"><div class="ttname"><a href="structredis_server.html#a0ba0e84624d22e52e900533adf7d9ba8">redisServer::requirepass</a></div><div class="ttdeci">char * requirepass</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00945">server.h:945</a></div></div>
<div class="ttc" id="server_8c_html_a29b0af1da2432bcc90721c0b62f4e660"><div class="ttname"><a href="server_8c.html#a29b0af1da2432bcc90721c0b62f4e660">daemonize</a></div><div class="ttdeci">void daemonize(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03699">server.c:3699</a></div></div>
<div class="ttc" id="structredis_op_html_a8ed6c4d0c6382ad1787b32d10db25c5e"><div class="ttname"><a href="structredis_op.html#a8ed6c4d0c6382ad1787b32d10db25c5e">redisOp::cmd</a></div><div class="ttdeci">struct redisCommand * cmd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00834">server.h:834</a></div></div>
<div class="ttc" id="structredis_server_html_a22a84652dad6047f6c28d032b3c8327e"><div class="ttname"><a href="structredis_server.html#a22a84652dad6047f6c28d032b3c8327e">redisServer::masterauth</a></div><div class="ttdeci">char * masterauth</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01146">server.h:1146</a></div></div>
<div class="ttc" id="ae_8c_html_a2909fa15dc2d667ec824904fef9df3d8"><div class="ttname"><a href="ae_8c.html#a2909fa15dc2d667ec824904fef9df3d8">aeMain</a></div><div class="ttdeci">void aeMain(aeEventLoop *eventLoop)</div><div class="ttdef"><b>Definition:</b> <a href="ae_8c_source.html#l00496">ae.c:496</a></div></div>
<div class="ttc" id="structmalloc__stats_html_abaf85ea7348d3c27fea44dcc7cebd639"><div class="ttname"><a href="structmalloc__stats.html#abaf85ea7348d3c27fea44dcc7cebd639">malloc_stats::allocator_resident</a></div><div class="ttdeci">size_t allocator_resident</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00907">server.h:907</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a2a3c372da9bb19fb6f5f3a5a1316b6b8"><div class="ttname"><a href="structshared_objects_struct.html#a2a3c372da9bb19fb6f5f3a5a1316b6b8">sharedObjectsStruct::cone</a></div><div class="ttdeci">robj * cone</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a956bcbb62ab56e4fe9d63c0a38b6cb76"><div class="ttname"><a href="server_8c.html#a956bcbb62ab56e4fe9d63c0a38b6cb76">genRedisInfoString</a></div><div class="ttdeci">sds genRedisInfoString(char *section)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03084">server.c:3084</a></div></div>
<div class="ttc" id="rdb_8c_html_aab77fdfffc0bf7e912b9a2389c412029"><div class="ttname"><a href="rdb_8c.html#aab77fdfffc0bf7e912b9a2389c412029">bgsaveCommand</a></div><div class="ttdeci">void bgsaveCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l02401">rdb.c:2401</a></div></div>
<div class="ttc" id="multi_8c_html_aff077de006c62e609c789acee26a830c"><div class="ttname"><a href="multi_8c.html#aff077de006c62e609c789acee26a830c">queueMultiCommand</a></div><div class="ttdeci">void queueMultiCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00056">multi.c:56</a></div></div>
<div class="ttc" id="structredis_server_html_a3a842ed365a5fb2b92ea473ce9aa13f2"><div class="ttname"><a href="structredis_server.html#a3a842ed365a5fb2b92ea473ce9aa13f2">redisServer::rdb_checksum</a></div><div class="ttdeci">int rdb_checksum</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01097">server.h:1097</a></div></div>
<div class="ttc" id="server_8h_html_ae265e849da28d7e7793659e45579ee11"><div class="ttname"><a href="server_8h.html#ae265e849da28d7e7793659e45579ee11">ACTIVE_EXPIRE_CYCLE_FAST</a></div><div class="ttdeci">#define ACTIVE_EXPIRE_CYCLE_FAST</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00174">server.h:174</a></div></div>
<div class="ttc" id="structredis_command_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="structredis_command.html#a5ac083a645d964373f022d03df4849c8">redisCommand::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01291">server.h:1291</a></div></div>
<div class="ttc" id="structredis_server_html_af1e6c692e015469af388bc1e9e1307ed"><div class="ttname"><a href="structredis_server.html#af1e6c692e015469af388bc1e9e1307ed">redisServer::unblocked_clients</a></div><div class="ttdeci">list * unblocked_clients</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01193">server.h:1193</a></div></div>
<div class="ttc" id="server_8h_html_a20f2f5380db97cd09013118ffc9411cc"><div class="ttname"><a href="server_8h.html#a20f2f5380db97cd09013118ffc9411cc">CLIENT_PUBSUB</a></div><div class="ttdeci">#define CLIENT_PUBSUB</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00247">server.h:247</a></div></div>
<div class="ttc" id="pubsub_8c_html_ac269d82d816d53b573d249343770c07a"><div class="ttname"><a href="pubsub_8c.html#ac269d82d816d53b573d249343770c07a">publishCommand</a></div><div class="ttdeci">void publishCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00317">pubsub.c:317</a></div></div>
<div class="ttc" id="cluster_8c_html_a57e19f9388112556fc5429c2be240f24"><div class="ttname"><a href="cluster_8c.html#a57e19f9388112556fc5429c2be240f24">readwriteCommand</a></div><div class="ttdeci">void readwriteCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05406">cluster.c:5406</a></div></div>
<div class="ttc" id="structredis_server_html_aeea48ca4b779b703c49b82fd535b2922"><div class="ttname"><a href="structredis_server.html#aeea48ca4b779b703c49b82fd535b2922">redisServer::pexpireCommand</a></div><div class="ttdeci">struct redisCommand * pexpireCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="hyperloglog_8c_html_acebc0877c8aca6beb919b963b784356d"><div class="ttname"><a href="hyperloglog_8c.html#acebc0877c8aca6beb919b963b784356d">pfselftestCommand</a></div><div class="ttdeci">void pfselftestCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="hyperloglog_8c_source.html#l01383">hyperloglog.c:1383</a></div></div>
<div class="ttc" id="sentinel_8c_html_a8737702d09faad605816655d77a11920"><div class="ttname"><a href="sentinel_8c.html#a8737702d09faad605816655d77a11920">initSentinel</a></div><div class="ttdeci">void initSentinel(void)</div><div class="ttdef"><b>Definition:</b> <a href="sentinel_8c_source.html#l00465">sentinel.c:465</a></div></div>
<div class="ttc" id="structredis_server_html_a0c953f8b0a592e40db65c5af748d7974"><div class="ttname"><a href="structredis_server.html#a0c953f8b0a592e40db65c5af748d7974">redisServer::aof_use_rdb_preamble</a></div><div class="ttdeci">int aof_use_rdb_preamble</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01078">server.h:1078</a></div></div>
<div class="ttc" id="db_8c_html_ade65b95b0eb5517a9af03b8aecc3b64d"><div class="ttname"><a href="db_8c.html#ade65b95b0eb5517a9af03b8aecc3b64d">getKeysFreeResult</a></div><div class="ttdeci">void getKeysFreeResult(int *result)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01241">db.c:1241</a></div></div>
<div class="ttc" id="server_8c_html_aaedddabdad8daace0fe8170e3227dfe6"><div class="ttname"><a href="server_8c.html#aaedddabdad8daace0fe8170e3227dfe6">getInstantaneousMetric</a></div><div class="ttdeci">long long getInstantaneousMetric(int metric)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00802">server.c:802</a></div></div>
<div class="ttc" id="structredis_server_html_abe1289d87c7c7b12540c36b93d1bdb25"><div class="ttname"><a href="structredis_server.html#abe1289d87c7c7b12540c36b93d1bdb25">redisServer::stat_net_input_bytes</a></div><div class="ttdeci">long long stat_net_input_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01022">server.h:1022</a></div></div>
<div class="ttc" id="server_8h_html_a85ed2d5f370914814d254fdb182cca46"><div class="ttname"><a href="server_8h.html#a85ed2d5f370914814d254fdb182cca46">setnxCommand</a></div><div class="ttdeci">void setnxCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00142">t_string.c:142</a></div></div>
<div class="ttc" id="server_8h_html_a75b8ce2fafb93ddeb96f0e5602c2bd0c"><div class="ttname"><a href="server_8h.html#a75b8ce2fafb93ddeb96f0e5602c2bd0c">CONFIG_DEFAULT_DEFRAG_THRESHOLD_UPPER</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_THRESHOLD_UPPER</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00163">server.h:163</a></div></div>
<div class="ttc" id="structredis_server_html_ae11d40717bf4cf77473590daf20922db"><div class="ttname"><a href="structredis_server.html#ae11d40717bf4cf77473590daf20922db">redisServer::repl_backlog_idx</a></div><div class="ttdeci">long long repl_backlog_idx</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01132">server.h:1132</a></div></div>
<div class="ttc" id="server_8c_html_a6e0f6f6fad563644eb1b2b382b1fa9dc"><div class="ttname"><a href="server_8c.html#a6e0f6f6fad563644eb1b2b382b1fa9dc">updateCachedTime</a></div><div class="ttdeci">void updateCachedTime(void)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01056">server.c:1056</a></div></div>
<div class="ttc" id="db_8c_html_a3100815e1719696e90a6b249e100f536"><div class="ttname"><a href="db_8c.html#a3100815e1719696e90a6b249e100f536">dbsizeCommand</a></div><div class="ttdeci">void dbsizeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l00802">db.c:802</a></div></div>
<div class="ttc" id="server_8h_html_ace8cc293b491805bb904abd3ec2c8ee3"><div class="ttname"><a href="server_8h.html#ace8cc293b491805bb904abd3ec2c8ee3">OBJ_STREAM_NODE_MAX_ENTRIES</a></div><div class="ttdeci">#define OBJ_STREAM_NODE_MAX_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00365">server.h:365</a></div></div>
<div class="ttc" id="structredis_server_html_a23a0a2cb99e43742881408116b2fbd08"><div class="ttname"><a href="structredis_server.html#a23a0a2cb99e43742881408116b2fbd08">redisServer::stat_rdb_cow_bytes</a></div><div class="ttdeci">size_t stat_rdb_cow_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01024">server.h:1024</a></div></div>
<div class="ttc" id="dict_8h_html_a2afecbeab8f7efbc183048f52f6d17e5"><div class="ttname"><a href="dict_8h.html#a2afecbeab8f7efbc183048f52f6d17e5">DICT_OK</a></div><div class="ttdeci">#define DICT_OK</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00041">dict.h:41</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ae0861a6d46f478570cfa00f797eae1ac"><div class="ttname"><a href="structshared_objects_struct.html#ae0861a6d46f478570cfa00f797eae1ac">sharedObjectsStruct::execaborterr</a></div><div class="ttdeci">robj * execaborterr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="anet_8h_html_a0697b7774a7e0f4ef141839fe93536fe"><div class="ttname"><a href="anet_8h.html#a0697b7774a7e0f4ef141839fe93536fe">ANET_ERR</a></div><div class="ttdeci">#define ANET_ERR</div><div class="ttdef"><b>Definition:</b> <a href="anet_8h_source.html#l00037">anet.h:37</a></div></div>
<div class="ttc" id="cluster_8h_html_a1895138f4125c5dce77e8fe28c9bd8d1"><div class="ttname"><a href="cluster_8h.html#a1895138f4125c5dce77e8fe28c9bd8d1">CLUSTER_DEFAULT_MIGRATION_BARRIER</a></div><div class="ttdeci">#define CLUSTER_DEFAULT_MIGRATION_BARRIER</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00024">cluster.h:24</a></div></div>
<div class="ttc" id="server_8c_html_ad7d4cb9fb361d3a287c57c45ab896010"><div class="ttname"><a href="server_8c.html#ad7d4cb9fb361d3a287c57c45ab896010">tryResizeHashTables</a></div><div class="ttdeci">void tryResizeHashTables(int dbid)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00741">server.c:741</a></div></div>
<div class="ttc" id="server_8h_html_a62e5b6ba358ddcdef709e107e4d24744"><div class="ttname"><a href="server_8h.html#a62e5b6ba358ddcdef709e107e4d24744">ACTIVE_EXPIRE_CYCLE_SLOW</a></div><div class="ttdeci">#define ACTIVE_EXPIRE_CYCLE_SLOW</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00173">server.h:173</a></div></div>
<div class="ttc" id="aof_8c_html_ac13e9eab03e6ba37d7567e805b54e12f"><div class="ttname"><a href="aof_8c.html#ac13e9eab03e6ba37d7567e805b54e12f">aofRewriteBufferSize</a></div><div class="ttdeci">unsigned long aofRewriteBufferSize(void)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l00079">aof.c:79</a></div></div>
<div class="ttc" id="server_8h_html_afc9f3396e2da1194ef2ccc6ab97d4e3d"><div class="ttname"><a href="server_8h.html#afc9f3396e2da1194ef2ccc6ab97d4e3d">CONFIG_DEFAULT_SERVER_PORT</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SERVER_PORT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00086">server.h:86</a></div></div>
<div class="ttc" id="server_8h_html_a08ebaf972da18ad58c71c615aa26c5cf"><div class="ttname"><a href="server_8h.html#a08ebaf972da18ad58c71c615aa26c5cf">CONFIG_DEFAULT_REPL_DISKLESS_SYNC</a></div><div class="ttdeci">#define CONFIG_DEFAULT_REPL_DISKLESS_SYNC</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00130">server.h:130</a></div></div>
<div class="ttc" id="server_8h_html_ae934cf008a0be0ef009c92c2d006a816"><div class="ttname"><a href="server_8h.html#ae934cf008a0be0ef009c92c2d006a816">OBJ_ENCODING_INT</a></div><div class="ttdeci">#define OBJ_ENCODING_INT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00587">server.h:587</a></div></div>
<div class="ttc" id="server_8h_html_a1917805ea3942a4784ec806c33bc6033"><div class="ttname"><a href="server_8h.html#a1917805ea3942a4784ec806c33bc6033">CMD_ADMIN</a></div><div class="ttdeci">#define CMD_ADMIN</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00209">server.h:209</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_af4f77116ef0692e38caf492ab0ae0aa5"><div class="ttname"><a href="structshared_objects_struct.html#af4f77116ef0692e38caf492ab0ae0aa5">sharedObjectsStruct::rpop</a></div><div class="ttdeci">robj * rpop</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a003d043b915883dacb3360afccdaabc0"><div class="ttname"><a href="structshared_objects_struct.html#a003d043b915883dacb3360afccdaabc0">sharedObjectsStruct::cnegone</a></div><div class="ttdeci">robj * cnegone</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="redismodule_8h_html_a652ae61e2475bc8957454534544968fc"><div class="ttname"><a href="redismodule_8h.html#a652ae61e2475bc8957454534544968fc">mstime_t</a></div><div class="ttdeci">long long mstime_t</div><div class="ttdef"><b>Definition:</b> <a href="redismodule_8h_source.html#l00136">redismodule.h:136</a></div></div>
<div class="ttc" id="server_8h_html_a1783425a4095949ab8b23ae4cbe0e576"><div class="ttname"><a href="server_8h.html#a1783425a4095949ab8b23ae4cbe0e576">CONFIG_DEFAULT_DAEMONIZE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DAEMONIZE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00120">server.h:120</a></div></div>
<div class="ttc" id="structredis_command_html_abb4214e4b2dadd9f73384b61c6f13bee"><div class="ttname"><a href="structredis_command.html#abb4214e4b2dadd9f73384b61c6f13bee">redisCommand::sflags</a></div><div class="ttdeci">char * sflags</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01294">server.h:1294</a></div></div>
<div class="ttc" id="dict_8c_html_a99b61ef54f38b47e4b726b77a8ded387"><div class="ttname"><a href="dict_8c.html#a99b61ef54f38b47e4b726b77a8ded387">dictAdd</a></div><div class="ttdeci">int dictAdd(dict *d, void *key, void *val)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00265">dict.c:265</a></div></div>
<div class="ttc" id="atomicvar_8h_html_a57b17e058ecff6871debb3d1d4f3031a"><div class="ttname"><a href="atomicvar_8h.html#a57b17e058ecff6871debb3d1d4f3031a">atomicGet</a></div><div class="ttdeci">#define atomicGet(var, dstvar)</div><div class="ttdef"><b>Definition:</b> <a href="atomicvar_8h_source.html#l00120">atomicvar.h:120</a></div></div>
<div class="ttc" id="structredis_server_html_a7f3d3d90cccad86c685008f3f02492fe"><div class="ttname"><a href="structredis_server.html#a7f3d3d90cccad86c685008f3f02492fe">redisServer::lua_scripts</a></div><div class="ttdeci">dict * lua_scripts</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01245">server.h:1245</a></div></div>
<div class="ttc" id="dict_8c_html_a062edc8197cee93623adcd5e9832f3fa"><div class="ttname"><a href="dict_8c.html#a062edc8197cee93623adcd5e9832f3fa">dictGenHashFunction</a></div><div class="ttdeci">uint64_t dictGenHashFunction(const void *key, int len)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00090">dict.c:90</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a8e60666fa4a7bb1814cfc4734c9504d9"><div class="ttname"><a href="structshared_objects_struct.html#a8e60666fa4a7bb1814cfc4734c9504d9">sharedObjectsStruct::bgsaveerr</a></div><div class="ttdeci">robj * bgsaveerr</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_a309f80dceccd8fa762e54a07499f4a24"><div class="ttname"><a href="structredis_server.html#a309f80dceccd8fa762e54a07499f4a24">redisServer::clients_index</a></div><div class="ttdeci">rax * clients_index</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00976">server.h:976</a></div></div>
<div class="ttc" id="module_8c_html_a4904fe1a72e86ea32fbe45393445620d"><div class="ttname"><a href="module_8c.html#a4904fe1a72e86ea32fbe45393445620d">moduleHandleBlockedClients</a></div><div class="ttdeci">void moduleHandleBlockedClients(void)</div><div class="ttdef"><b>Definition:</b> <a href="module_8c_source.html#l03621">module.c:3621</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ac85b834d303fa79baa4900ba584e580e"><div class="ttname"><a href="structshared_objects_struct.html#ac85b834d303fa79baa4900ba584e580e">sharedObjectsStruct::nullmultibulk</a></div><div class="ttdeci">robj * nullmultibulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_ae1bafd11e7b9f269c3ab48acb8046f32"><div class="ttname"><a href="structredis_server.html#ae1bafd11e7b9f269c3ab48acb8046f32">redisServer::zset_max_ziplist_value</a></div><div class="ttdeci">size_t zset_max_ziplist_value</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01206">server.h:1206</a></div></div>
<div class="ttc" id="multi_8c_html_a39752e6b7b70b3e8df42d46168a40543"><div class="ttname"><a href="multi_8c.html#a39752e6b7b70b3e8df42d46168a40543">unwatchCommand</a></div><div class="ttdeci">void unwatchCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00334">multi.c:334</a></div></div>
<div class="ttc" id="server_8h_html_afcfb5bd97af52d1dbce331745cae030c"><div class="ttname"><a href="server_8h.html#afcfb5bd97af52d1dbce331745cae030c">sdsEncodedObject</a></div><div class="ttdeci">#define sdsEncodedObject(objptr)</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01564">server.h:1564</a></div></div>
<div class="ttc" id="structredis_server_html_a539bec706ac5acbbdef66f363a7a2524"><div class="ttname"><a href="structredis_server.html#a539bec706ac5acbbdef66f363a7a2524">redisServer::logfile</a></div><div class="ttdeci">char * logfile</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01118">server.h:1118</a></div></div>
<div class="ttc" id="structredis_command_html_a89a6c4af7ebda470a83c3b01d01dcb14"><div class="ttname"><a href="structredis_command.html#a89a6c4af7ebda470a83c3b01d01dcb14">redisCommand::microseconds</a></div><div class="ttdeci">long long microseconds</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01303">server.h:1303</a></div></div>
<div class="ttc" id="server_8h_html_acff0bf145e0c32f0ce05da78aac8a85f"><div class="ttname"><a href="server_8h.html#acff0bf145e0c32f0ce05da78aac8a85f">setCommand</a></div><div class="ttdeci">void setCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00096">t_string.c:96</a></div></div>
<div class="ttc" id="server_8c_html_a9ace62050a85a5451725d854408867df"><div class="ttname"><a href="server_8c.html#a9ace62050a85a5451725d854408867df">lru_clock</a></div><div class="ttdeci">volatile unsigned long lru_clock</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00073">server.c:73</a></div></div>
<div class="ttc" id="structredis_server_html_a062a156ed7bfa9a38ac03d6b28d7732a"><div class="ttname"><a href="structredis_server.html#a062a156ed7bfa9a38ac03d6b28d7732a">redisServer::rdb_filename</a></div><div class="ttdeci">char * rdb_filename</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01095">server.h:1095</a></div></div>
<div class="ttc" id="scripting_8c_html_ab85a8e6842f1e1c17c6954ffb09eddad"><div class="ttname"><a href="scripting_8c.html#ab85a8e6842f1e1c17c6954ffb09eddad">ldbRemoveChild</a></div><div class="ttdeci">int ldbRemoveChild(pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_8c_source.html#l01740">scripting.c:1740</a></div></div>
<div class="ttc" id="server_8h_html_a147863f3b338d25f54e026d88a487010"><div class="ttname"><a href="server_8h.html#a147863f3b338d25f54e026d88a487010">CONFIG_DEFAULT_ACTIVE_REHASHING</a></div><div class="ttdeci">#define CONFIG_DEFAULT_ACTIVE_REHASHING</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00146">server.h:146</a></div></div>
<div class="ttc" id="structredis_server_html_a9142dcad31984d994f392be24e91daff"><div class="ttname"><a href="structredis_server.html#a9142dcad31984d994f392be24e91daff">redisServer::aof_state</a></div><div class="ttdeci">int aof_state</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01053">server.h:1053</a></div></div>
<div class="ttc" id="server_8h_html_a7b811522f7befdc10e69883f360e45b4"><div class="ttname"><a href="server_8h.html#a7b811522f7befdc10e69883f360e45b4">OBJ_LIST_COMPRESS_DEPTH</a></div><div class="ttdeci">#define OBJ_LIST_COMPRESS_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00369">server.h:369</a></div></div>
<div class="ttc" id="expire_8c_html_aeba7167525fc8ded96efbc118ce9d333"><div class="ttname"><a href="expire_8c.html#aeba7167525fc8ded96efbc118ce9d333">ttlCommand</a></div><div class="ttdeci">void ttlCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00496">expire.c:496</a></div></div>
<div class="ttc" id="structredis_server_html_a86ac125d831ba2b0ad05e80972cdb0d2"><div class="ttname"><a href="structredis_server.html#a86ac125d831ba2b0ad05e80972cdb0d2">redisServer::repl_ping_slave_period</a></div><div class="ttdeci">int repl_ping_slave_period</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01128">server.h:1128</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a2f2790835bd839f996e27b66682e8665"><div class="ttname"><a href="structshared_objects_struct.html#a2f2790835bd839f996e27b66682e8665">sharedObjectsStruct::lpop</a></div><div class="ttdeci">robj * lpop</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_command_html_a2e1dc7313b72e22a19179823661deb69"><div class="ttname"><a href="structredis_command.html#a2e1dc7313b72e22a19179823661deb69">redisCommand::arity</a></div><div class="ttdeci">int arity</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01293">server.h:1293</a></div></div>
<div class="ttc" id="networking_8c_html_a8e3606ae521f6d1786660767dfe6b903"><div class="ttname"><a href="networking_8c.html#a8e3606ae521f6d1786660767dfe6b903">addDeferredMultiBulkLength</a></div><div class="ttdeci">void * addDeferredMultiBulkLength(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00425">networking.c:425</a></div></div>
<div class="ttc" id="cluster_8h_html_a71480cf46082d44207e3a4740314fc31"><div class="ttname"><a href="cluster_8h.html#a71480cf46082d44207e3a4740314fc31">CLUSTER_DEFAULT_SLAVE_NO_FAILOVER</a></div><div class="ttdeci">#define CLUSTER_DEFAULT_SLAVE_NO_FAILOVER</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8h_source.html#l00019">cluster.h:19</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a9b39b9335155d55eb2e631def6827b82"><div class="ttname"><a href="structshared_objects_struct.html#a9b39b9335155d55eb2e631def6827b82">sharedObjectsStruct::nullbulk</a></div><div class="ttdeci">robj * nullbulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8h_html_a84ef395cc8698721347af9fa5ac00904"><div class="ttname"><a href="server_8h.html#a84ef395cc8698721347af9fa5ac00904">setrangeCommand</a></div><div class="ttdeci">void setrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__string_8c_source.html#l00184">t_string.c:184</a></div></div>
<div class="ttc" id="structredis_server_html_a4a23db6c6bac41afb7aee155283dbf9b"><div class="ttname"><a href="structredis_server.html#a4a23db6c6bac41afb7aee155283dbf9b">redisServer::dbnum</a></div><div class="ttdeci">int dbnum</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01047">server.h:1047</a></div></div>
<div class="ttc" id="structredis_server_html_a531f1468f7a70bf4efc1004cdc8570b5"><div class="ttname"><a href="structredis_server.html#a531f1468f7a70bf4efc1004cdc8570b5">redisServer::slave_announce_port</a></div><div class="ttdeci">int slave_announce_port</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01167">server.h:1167</a></div></div>
<div class="ttc" id="structredis_server_html_a74b48fc7843d6cfaf61b0e49a47e2be1"><div class="ttname"><a href="structredis_server.html#a74b48fc7843d6cfaf61b0e49a47e2be1">redisServer::stop_writes_on_bgsave_err</a></div><div class="ttdeci">int stop_writes_on_bgsave_err</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01105">server.h:1105</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_ae0dc19921ef5f92e1dacd14526c8cc3e"><div class="ttname"><a href="structshared_objects_struct.html#ae0dc19921ef5f92e1dacd14526c8cc3e">sharedObjectsStruct::emptymultibulk</a></div><div class="ttdeci">robj * emptymultibulk</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="object_8c_html_a03474153296385df26f24b265d2a22eb"><div class="ttname"><a href="object_8c.html#a03474153296385df26f24b265d2a22eb">decrRefCount</a></div><div class="ttdeci">void decrRefCount(robj *o)</div><div class="ttdef"><b>Definition:</b> <a href="object_8c_source.html#l00353">object.c:353</a></div></div>
<div class="ttc" id="server_8h_html_ae3b1500717382cd57df0145b983850b7"><div class="ttname"><a href="server_8h.html#ae3b1500717382cd57df0145b983850b7">xaddCommand</a></div><div class="ttdeci">void xaddCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__stream_8c_source.html#l01165">t_stream.c:1165</a></div></div>
<div class="ttc" id="redis-check-rdb_8c_html_ac45f6a1c394687c26b8f0261661006e3"><div class="ttname"><a href="redis-check-rdb_8c.html#ac45f6a1c394687c26b8f0261661006e3">redis_check_rdb_main</a></div><div class="ttdeci">int redis_check_rdb_main(int argc, char **argv, FILE *fp)</div><div class="ttdef"><b>Definition:</b> <a href="redis-check-rdb_8c_source.html#l00342">redis-check-rdb.c:342</a></div></div>
<div class="ttc" id="server_8h_html_a7046f4b2214cca2a9bac0b8150a10d58"><div class="ttname"><a href="server_8h.html#a7046f4b2214cca2a9bac0b8150a10d58">configCommand</a></div><div class="ttdeci">void configCommand(client *c)</div></div>
<div class="ttc" id="structredis_server_html_a051898042b62130483a09369ab92e5b0"><div class="ttname"><a href="structredis_server.html#a051898042b62130483a09369ab92e5b0">redisServer::aof_fsync</a></div><div class="ttdeci">int aof_fsync</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01054">server.h:1054</a></div></div>
<div class="ttc" id="rdb_8c_html_ad37871274c208110029a2a99daeba18d"><div class="ttname"><a href="rdb_8c.html#ad37871274c208110029a2a99daeba18d">rdbLoad</a></div><div class="ttdeci">int rdbLoad(char *filename, rdbSaveInfo *rsi)</div><div class="ttdef"><b>Definition:</b> <a href="rdb_8c_source.html#l02066">rdb.c:2066</a></div></div>
<div class="ttc" id="structredis_server_html_ae08caa5f869e19e94cd95d1a2edea4b2"><div class="ttname"><a href="structredis_server.html#ae08caa5f869e19e94cd95d1a2edea4b2">redisServer::lastsave</a></div><div class="ttdeci">time_t lastsave</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01098">server.h:1098</a></div></div>
<div class="ttc" id="structredis_server_html_a8537de4289165760c3c21814b6c0841d"><div class="ttname"><a href="structredis_server.html#a8537de4289165760c3c21814b6c0841d">redisServer::loading_loaded_bytes</a></div><div class="ttdeci">off_t loading_loaded_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00986">server.h:986</a></div></div>
<div class="ttc" id="server_8h_html_ac3f69c7e78a189639eab66a2b32753d0"><div class="ttname"><a href="server_8h.html#ac3f69c7e78a189639eab66a2b32753d0">CONFIG_DEFAULT_DEFRAG_CYCLE_MAX</a></div><div class="ttdeci">#define CONFIG_DEFAULT_DEFRAG_CYCLE_MAX</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00166">server.h:166</a></div></div>
<div class="ttc" id="aof_8c_html_a1fed587e74f1e81c22594897f3d0ccf3"><div class="ttname"><a href="aof_8c.html#a1fed587e74f1e81c22594897f3d0ccf3">backgroundRewriteDoneHandler</a></div><div class="ttdeci">void backgroundRewriteDoneHandler(int exitcode, int bysignal)</div><div class="ttdef"><b>Definition:</b> <a href="aof_8c_source.html#l01633">aof.c:1633</a></div></div>
<div class="ttc" id="expire_8c_html_afd7e1cc73d466ea95d10f0bccb297194"><div class="ttname"><a href="expire_8c.html#afd7e1cc73d466ea95d10f0bccb297194">persistCommand</a></div><div class="ttdeci">void persistCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00506">expire.c:506</a></div></div>
<div class="ttc" id="server_8c_html_a3b638a07aaedd8dc871d0bbd18a662b6"><div class="ttname"><a href="server_8c.html#a3b638a07aaedd8dc871d0bbd18a662b6">zsetDictType</a></div><div class="ttdeci">dictType zsetDictType</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00602">server.c:602</a></div></div>
<div class="ttc" id="server_8h_html_a479f69398ffb0f86fdbb4fa03876bc69"><div class="ttname"><a href="server_8h.html#a479f69398ffb0f86fdbb4fa03876bc69">CONFIG_DEFAULT_HLL_SPARSE_MAX_BYTES</a></div><div class="ttdeci">#define CONFIG_DEFAULT_HLL_SPARSE_MAX_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00372">server.h:372</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_af1169abbaa153a574db3ad92b5a62dec"><div class="ttname"><a href="structshared_objects_struct.html#af1169abbaa153a574db3ad92b5a62dec">sharedObjectsStruct::queued</a></div><div class="ttdeci">robj * queued</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a5baf7e76a67bcd855a187fae72c2d3bf"><div class="ttname"><a href="server_8c.html#a5baf7e76a67bcd855a187fae72c2d3bf">afterSleep</a></div><div class="ttdeci">void afterSleep(struct aeEventLoop *eventLoop)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01415">server.c:1415</a></div></div>
<div class="ttc" id="server_8h_html_a7effaf912f26a1eabe495e899d705fee"><div class="ttname"><a href="server_8h.html#a7effaf912f26a1eabe495e899d705fee">CONFIG_DEFAULT_SLAVE_PRIORITY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_SLAVE_PRIORITY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00105">server.h:105</a></div></div>
<div class="ttc" id="structredis_server_html_aa67a20f0faa8ffcc2abcb42b15d4b3d0"><div class="ttname"><a href="structredis_server.html#aa67a20f0faa8ffcc2abcb42b15d4b3d0">redisServer::aof_last_write_status</a></div><div class="ttdeci">int aof_last_write_status</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01075">server.h:1075</a></div></div>
<div class="ttc" id="server_8c_html_a89a0f14b85c7fb6f4e42fc2df8fa7f6c"><div class="ttname"><a href="server_8c.html#a89a0f14b85c7fb6f4e42fc2df8fa7f6c">addReplyCommand</a></div><div class="ttdeci">void addReplyCommand(client *c, struct redisCommand *cmd)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02955">server.c:2955</a></div></div>
<div class="ttc" id="server_8c_html_af6ad2050172ff936330b3a32b853e317"><div class="ttname"><a href="server_8c.html#af6ad2050172ff936330b3a32b853e317">preventCommandAOF</a></div><div class="ttdeci">void preventCommandAOF(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02364">server.c:2364</a></div></div>
<div class="ttc" id="structredis_server_html_ad4654cdc5b77789a9175000290abc831"><div class="ttname"><a href="structredis_server.html#ad4654cdc5b77789a9175000290abc831">redisServer::saveparamslen</a></div><div class="ttdeci">int saveparamslen</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01094">server.h:1094</a></div></div>
<div class="ttc" id="server_8h_html_aed33d49831b424cda07b7859d156c854"><div class="ttname"><a href="server_8h.html#aed33d49831b424cda07b7859d156c854">zrevrangeCommand</a></div><div class="ttdeci">void zrevrangeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__zset_8c_source.html#l02519">t_zset.c:2519</a></div></div>
<div class="ttc" id="structredis_server_html_a8310dd417853e8153b749f1be9afe9b0"><div class="ttname"><a href="structredis_server.html#a8310dd417853e8153b749f1be9afe9b0">redisServer::masterport</a></div><div class="ttdeci">int masterport</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01148">server.h:1148</a></div></div>
<div class="ttc" id="geo_8c_html_a82b4ce858571367183e61934bc7956ee"><div class="ttname"><a href="geo_8c.html#a82b4ce858571367183e61934bc7956ee">geoaddCommand</a></div><div class="ttdeci">void geoaddCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="geo_8c_source.html#l00405">geo.c:405</a></div></div>
<div class="ttc" id="server_8c_html_ac6c49554ad3b252a11f7736b4d2e1d79"><div class="ttname"><a href="server_8c.html#ac6c49554ad3b252a11f7736b4d2e1d79">redisOpArrayInit</a></div><div class="ttdeci">void redisOpArrayInit(redisOpArray *oa)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02236">server.c:2236</a></div></div>
<div class="ttc" id="structredis_server_html_aa2a751d9d0430a065d573c0adafdb90b"><div class="ttname"><a href="structredis_server.html#aa2a751d9d0430a065d573c0adafdb90b">redisServer::lazyfree_lazy_eviction</a></div><div class="ttdeci">int lazyfree_lazy_eviction</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01261">server.h:1261</a></div></div>
<div class="ttc" id="server_8h_html_a27c7e814708df2c7eed37fbc6ac0b7f1"><div class="ttname"><a href="server_8h.html#a27c7e814708df2c7eed37fbc6ac0b7f1">OBJ_LIST_MAX_ZIPLIST_SIZE</a></div><div class="ttdeci">#define OBJ_LIST_MAX_ZIPLIST_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00368">server.h:368</a></div></div>
<div class="ttc" id="networking_8c_html_ad3c3c6d763b64355f5098a511d7b7ae4"><div class="ttname"><a href="networking_8c.html#ad3c3c6d763b64355f5098a511d7b7ae4">clientCommand</a></div><div class="ttdeci">void clientCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l01695">networking.c:1695</a></div></div>
<div class="ttc" id="server_8c_html_aed49f2a4bd56cf7199a1d7c7f7eceab9"><div class="ttname"><a href="server_8c.html#aed49f2a4bd56cf7199a1d7c7f7eceab9">R_PosInf</a></div><div class="ttdeci">double R_PosInf</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00067">server.c:67</a></div></div>
<div class="ttc" id="slowlog_8c_html_a61d4ecda7c04939cade4011b30c4fad0"><div class="ttname"><a href="slowlog_8c.html#a61d4ecda7c04939cade4011b30c4fad0">slowlogPushEntryIfNeeded</a></div><div class="ttdeci">void slowlogPushEntryIfNeeded(client *c, robj **argv, int argc, long long duration)</div><div class="ttdef"><b>Definition:</b> <a href="slowlog_8c_source.html#l00123">slowlog.c:123</a></div></div>
<div class="ttc" id="db_8c_html_a5e94ebbd0f9e5d4198ed832d321f6ff7"><div class="ttname"><a href="db_8c.html#a5e94ebbd0f9e5d4198ed832d321f6ff7">georadiusGetKeys</a></div><div class="ttdeci">int * georadiusGetKeys(struct redisCommand *cmd, robj **argv, int argc, int *numkeys)</div><div class="ttdef"><b>Definition:</b> <a href="db_8c_source.html#l01378">db.c:1378</a></div></div>
<div class="ttc" id="server_8c_html_aeac3678c664fd0436c1deb3f1b8097f4"><div class="ttname"><a href="server_8c.html#aeac3678c664fd0436c1deb3f1b8097f4">listenToPort</a></div><div class="ttdeci">int listenToPort(int port, int *fds, int *count)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l01913">server.c:1913</a></div></div>
<div class="ttc" id="server_8h_html_a8f47603665c339a8ba7c6831119235f7"><div class="ttname"><a href="server_8h.html#a8f47603665c339a8ba7c6831119235f7">hsetCommand</a></div><div class="ttdeci">void hsetCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="t__hash_8c_source.html#l00530">t_hash.c:530</a></div></div>
<div class="ttc" id="structredis_server_html_a268febb2b0b1add2594f2d7c8999567e"><div class="ttname"><a href="structredis_server.html#a268febb2b0b1add2594f2d7c8999567e">redisServer::clients</a></div><div class="ttdeci">list * clients</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00971">server.h:971</a></div></div>
<div class="ttc" id="server_8h_html_a5b8590d1c7aa090e48b9506c0842d206"><div class="ttname"><a href="server_8h.html#a5b8590d1c7aa090e48b9506c0842d206">CONFIG_DEFAULT_MAXMEMORY_POLICY</a></div><div class="ttdeci">#define CONFIG_DEFAULT_MAXMEMORY_POLICY</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00397">server.h:397</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a6f3eb32f4b1c6b80d7c749a1436161cd"><div class="ttname"><a href="structshared_objects_struct.html#a6f3eb32f4b1c6b80d7c749a1436161cd">sharedObjectsStruct::czero</a></div><div class="ttdeci">robj * czero</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="server_8c_html_a902505c4d30238285b73f529b8adfa21"><div class="ttname"><a href="server_8c.html#a902505c4d30238285b73f529b8adfa21">lookupCommandByCString</a></div><div class="ttdeci">struct redisCommand * lookupCommandByCString(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l02277">server.c:2277</a></div></div>
<div class="ttc" id="server_8h_html_a88114b5169b4c382df6b56506285e56a"><div class="ttname"><a href="server_8h.html#a88114b5169b4c382df6b56506285e56a">serverAssert</a></div><div class="ttdeci">#define serverAssert(_e)</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00456">server.h:456</a></div></div>
<div class="ttc" id="structclient_html_a81d89da91093b6bd8a49acf4a58d47b4"><div class="ttname"><a href="structclient.html#a81d89da91093b6bd8a49acf4a58d47b4">client::lastcmd</a></div><div class="ttdeci">struct redisCommand * lastcmd</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00723">server.h:723</a></div></div>
<div class="ttc" id="structredis_server_html_a2be7aa4385144f8fb0d9b18f0a7a63b9"><div class="ttname"><a href="structredis_server.html#a2be7aa4385144f8fb0d9b18f0a7a63b9">redisServer::supervised_mode</a></div><div class="ttdeci">int supervised_mode</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01049">server.h:1049</a></div></div>
<div class="ttc" id="structclient_html_a29e86d0f6d62ef1edac10a46e4c92095"><div class="ttname"><a href="structclient.html#a29e86d0f6d62ef1edac10a46e4c92095">client::authenticated</a></div><div class="ttdeci">int authenticated</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00735">server.h:735</a></div></div>
<div class="ttc" id="bio_8c_html_a3e0959494cbc322c6f3ed132cd89dfb3"><div class="ttname"><a href="bio_8c.html#a3e0959494cbc322c6f3ed132cd89dfb3">bioInit</a></div><div class="ttdeci">void bioInit(void)</div><div class="ttdef"><b>Definition:</b> <a href="bio_8c_source.html#l00096">bio.c:96</a></div></div>
<div class="ttc" id="structmalloc__stats_html_a24fe6607486bb69f2f446830dbf6c8fb"><div class="ttname"><a href="structmalloc__stats.html#a24fe6607486bb69f2f446830dbf6c8fb">malloc_stats::zmalloc_used</a></div><div class="ttdeci">size_t zmalloc_used</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00903">server.h:903</a></div></div>
<div class="ttc" id="structredis_server_html_ad47f78d56e1b3866a1a31c4389fc753e"><div class="ttname"><a href="structredis_server.html#ad47f78d56e1b3866a1a31c4389fc753e">redisServer::aof_last_write_errno</a></div><div class="ttdeci">int aof_last_write_errno</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01076">server.h:1076</a></div></div>
<div class="ttc" id="structredis_server_html_ad7d881fd1df3221d80a749be2e66d0d0"><div class="ttname"><a href="structredis_server.html#ad7d881fd1df3221d80a749be2e66d0d0">redisServer::stat_keyspace_hits</a></div><div class="ttdeci">long long stat_keyspace_hits</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01003">server.h:1003</a></div></div>
<div class="ttc" id="structsaveparam_html_ae112d79896ed83ac05e155da60e85523"><div class="ttname"><a href="structsaveparam.html#ae112d79896ed83ac05e155da60e85523">saveparam::seconds</a></div><div class="ttdeci">time_t seconds</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00769">server.h:769</a></div></div>
<div class="ttc" id="server_8h_html_ae9f6995948253652bc9454d79a72f4a7"><div class="ttname"><a href="server_8h.html#ae9f6995948253652bc9454d79a72f4a7">CLIENT_SLAVE</a></div><div class="ttdeci">#define CLIENT_SLAVE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00228">server.h:228</a></div></div>
<div class="ttc" id="anet_8c_html_a2637a681b73d89c8b6a7b0ca95afd07c"><div class="ttname"><a href="anet_8c.html#a2637a681b73d89c8b6a7b0ca95afd07c">anetTcpServer</a></div><div class="ttdeci">int anetTcpServer(char *err, int port, char *bindaddr, int backlog)</div><div class="ttdef"><b>Definition:</b> <a href="anet_8c_source.html#l00503">anet.c:503</a></div></div>
<div class="ttc" id="structredis_db_html_aad961c2f260766ff3627bf363fef3551"><div class="ttname"><a href="structredis_db.html#aad961c2f260766ff3627bf363fef3551">redisDb::dict</a></div><div class="ttdeci">dict * dict</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00637">server.h:637</a></div></div>
<div class="ttc" id="structdict_iterator_html"><div class="ttname"><a href="structdict_iterator.html">dictIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00088">dict.h:88</a></div></div>
<div class="ttc" id="dict_8c_html_ab51f7613d1fe7b63edecd24efbcc7d2b"><div class="ttname"><a href="dict_8c.html#ab51f7613d1fe7b63edecd24efbcc7d2b">dictNext</a></div><div class="ttdeci">dictEntry * dictNext(dictIterator *iter)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00562">dict.c:562</a></div></div>
<div class="ttc" id="structredis_server_html_a1bdcfae3209cbd96db35a2ae356fa15e"><div class="ttname"><a href="structredis_server.html#a1bdcfae3209cbd96db35a2ae356fa15e">redisServer::verbosity</a></div><div class="ttdeci">int verbosity</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01035">server.h:1035</a></div></div>
<div class="ttc" id="structredis_server_html_aa44041d261395c51536c5db7da288874"><div class="ttname"><a href="structredis_server.html#aa44041d261395c51536c5db7da288874">redisServer::loading_total_bytes</a></div><div class="ttdeci">off_t loading_total_bytes</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00985">server.h:985</a></div></div>
<div class="ttc" id="networking_8c_html_ae258914c132880db02b3ea87b9fcb2e1"><div class="ttname"><a href="networking_8c.html#ae258914c132880db02b3ea87b9fcb2e1">acceptUnixHandler</a></div><div class="ttdeci">void acceptUnixHandler(aeEventLoop *el, int fd, void *privdata, int mask)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00746">networking.c:746</a></div></div>
<div class="ttc" id="server_8h_html_a2e6080731ab6e81b19f1bfedf7b298f9"><div class="ttname"><a href="server_8h.html#a2e6080731ab6e81b19f1bfedf7b298f9">CONFIG_DEFAULT_LAZYFREE_LAZY_EXPIRE</a></div><div class="ttdeci">#define CONFIG_DEFAULT_LAZYFREE_LAZY_EXPIRE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00158">server.h:158</a></div></div>
<div class="ttc" id="server_8h_html_ad9e350cb5eeb396592d0d80f70e6e040"><div class="ttname"><a href="server_8h.html#ad9e350cb5eeb396592d0d80f70e6e040">STATS_METRIC_COUNT</a></div><div class="ttdeci">#define STATS_METRIC_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00181">server.h:181</a></div></div>
<div class="ttc" id="structredis_server_html_aaef517ca82e5d3ac5b2dbdebbd35f857"><div class="ttname"><a href="structredis_server.html#aaef517ca82e5d3ac5b2dbdebbd35f857">redisServer::mstime</a></div><div class="ttdeci">long long mstime</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01217">server.h:1217</a></div></div>
<div class="ttc" id="zmalloc_8c_html_a841fad39a05a81f1e8cf94138e9dae6f"><div class="ttname"><a href="zmalloc_8c.html#a841fad39a05a81f1e8cf94138e9dae6f">zmalloc_get_memory_size</a></div><div class="ttdeci">size_t zmalloc_get_memory_size(void)</div><div class="ttdef"><b>Definition:</b> <a href="zmalloc_8c_source.html#l00398">zmalloc.c:398</a></div></div>
<div class="ttc" id="expire_8c_html_a2718ceb87eb05fc1e03382c5444cf4da"><div class="ttname"><a href="expire_8c.html#a2718ceb87eb05fc1e03382c5444cf4da">getSlaveKeyWithExpireCount</a></div><div class="ttdeci">size_t getSlaveKeyWithExpireCount(void)</div><div class="ttdef"><b>Definition:</b> <a href="expire_8c_source.html#l00374">expire.c:374</a></div></div>
<div class="ttc" id="server_8h_html_a2a1b586e8f326f831f6ab466c8c3f38a"><div class="ttname"><a href="server_8h.html#a2a1b586e8f326f831f6ab466c8c3f38a">SLAVE_STATE_WAIT_BGSAVE_END</a></div><div class="ttdeci">#define SLAVE_STATE_WAIT_BGSAVE_END</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00311">server.h:311</a></div></div>
<div class="ttc" id="networking_8c_html_ae560b28a9d6ceb5ead039461970f59b8"><div class="ttname"><a href="networking_8c.html#ae560b28a9d6ceb5ead039461970f59b8">freeClientsInAsyncFreeQueue</a></div><div class="ttdeci">void freeClientsInAsyncFreeQueue(void)</div><div class="ttdef"><b>Definition:</b> <a href="networking_8c_source.html#l00939">networking.c:939</a></div></div>
<div class="ttc" id="structredis_server_html_ada9d4d8c776057d1f91e8e40dfdc70a4"><div class="ttname"><a href="structredis_server.html#ada9d4d8c776057d1f91e8e40dfdc70a4">redisServer::execCommand</a></div><div class="ttdeci">struct redisCommand * execCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="cluster_8c_html_a4b2e8f1c74deb908a4af55f7fc20f161"><div class="ttname"><a href="cluster_8c.html#a4b2e8f1c74deb908a4af55f7fc20f161">clusterRedirectBlockedClientIfNeeded</a></div><div class="ttdeci">int clusterRedirectBlockedClientIfNeeded(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="cluster_8c_source.html#l05657">cluster.c:5657</a></div></div>
<div class="ttc" id="server_8h_html_a57b24bdd0dc4a156941789096e9e1f44"><div class="ttname"><a href="server_8h.html#a57b24bdd0dc4a156941789096e9e1f44">RESTART_SERVER_CONFIG_REWRITE</a></div><div class="ttdeci">#define RESTART_SERVER_CONFIG_REWRITE</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01741">server.h:1741</a></div></div>
<div class="ttc" id="server_8h_html_a9948ae3a2778b5a06b704231b921e7fa"><div class="ttname"><a href="server_8h.html#a9948ae3a2778b5a06b704231b921e7fa">CLIENT_PREVENT_AOF_PROP</a></div><div class="ttdeci">#define CLIENT_PREVENT_AOF_PROP</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00248">server.h:248</a></div></div>
<div class="ttc" id="server_8c_html_ad2ab0777210672fa17a748e6f8cbb0ed"><div class="ttname"><a href="server_8c.html#ad2ab0777210672fa17a748e6f8cbb0ed">bytesToHuman</a></div><div class="ttdeci">void bytesToHuman(char *s, unsigned long long n)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l03054">server.c:3054</a></div></div>
<div class="ttc" id="structredis_server_html_a942145ea5901d08771aba9d27746f2cc"><div class="ttname"><a href="structredis_server.html#a942145ea5901d08771aba9d27746f2cc">redisServer::active_defrag_enabled</a></div><div class="ttdeci">int active_defrag_enabled</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01039">server.h:1039</a></div></div>
<div class="ttc" id="evict_8c_html_a1b2dc1c43909a5f4f192343765ed8183"><div class="ttname"><a href="evict_8c.html#a1b2dc1c43909a5f4f192343765ed8183">freeMemoryIfNeeded</a></div><div class="ttdeci">int freeMemoryIfNeeded(void)</div><div class="ttdef"><b>Definition:</b> <a href="evict_8c_source.html#l00446">evict.c:446</a></div></div>
<div class="ttc" id="structredis_server_html_a44b41e9adbd5c3f5d46df203b79d987a"><div class="ttname"><a href="structredis_server.html#a44b41e9adbd5c3f5d46df203b79d987a">redisServer::aof_rewrite_base_size</a></div><div class="ttdeci">off_t aof_rewrite_base_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01059">server.h:1059</a></div></div>
<div class="ttc" id="structredis_server_html_a7efbc19379f272f8ce13f1eb663a0fdb"><div class="ttname"><a href="structredis_server.html#a7efbc19379f272f8ce13f1eb663a0fdb">redisServer::assert_failed</a></div><div class="ttdeci">const char * assert_failed</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01268">server.h:1268</a></div></div>
<div class="ttc" id="structshared_objects_struct_html_a0a900c43b0635b0afef2c83d7def52c7"><div class="ttname"><a href="structshared_objects_struct.html#a0a900c43b0635b0afef2c83d7def52c7">sharedObjectsStruct::integers</a></div><div class="ttdeci">robj * integers[OBJ_SHARED_INTEGERS]</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00780">server.h:780</a></div></div>
<div class="ttc" id="structredis_server_html_aa67bd29148b6d1ad47541e9e40b7cb82"><div class="ttname"><a href="structredis_server.html#aa67bd29148b6d1ad47541e9e40b7cb82">redisServer::lpopCommand</a></div><div class="ttdeci">struct redisCommand * lpopCommand</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00990">server.h:990</a></div></div>
<div class="ttc" id="structredis_server_html_abe0f85c6013794d585451f21440f5982"><div class="ttname"><a href="structredis_server.html#abe0f85c6013794d585451f21440f5982">redisServer::active_defrag_running</a></div><div class="ttdeci">int active_defrag_running</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00944">server.h:944</a></div></div>
<div class="ttc" id="structredis_server_html_a6baf24aca17821492f320e69d6707a7e"><div class="ttname"><a href="structredis_server.html#a6baf24aca17821492f320e69d6707a7e">redisServer::daylight_active</a></div><div class="ttdeci">int daylight_active</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01216">server.h:1216</a></div></div>
<div class="ttc" id="structredis_server_html_a20f2120dbdc24446be7f4a2950a7ad9e"><div class="ttname"><a href="structredis_server.html#a20f2120dbdc24446be7f4a2950a7ad9e">redisServer::cluster_slave_no_failover</a></div><div class="ttdeci">int cluster_slave_no_failover</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01232">server.h:1232</a></div></div>
<div class="ttc" id="structredis_server_html_a7f25b998323782ef03f738b92d3eac69"><div class="ttname"><a href="structredis_server.html#a7f25b998323782ef03f738b92d3eac69">redisServer::masterhost</a></div><div class="ttdeci">char * masterhost</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01147">server.h:1147</a></div></div>
<div class="ttc" id="pubsub_8c_html_adc25a077e0766a1a45816ff2c280a247"><div class="ttname"><a href="pubsub_8c.html#adc25a077e0766a1a45816ff2c280a247">psubscribeCommand</a></div><div class="ttdeci">void psubscribeCommand(client *c)</div><div class="ttdef"><b>Definition:</b> <a href="pubsub_8c_source.html#l00297">pubsub.c:297</a></div></div>
<div class="ttc" id="server_8h_html_aea7b4966d78f67f5ab89f38f0e1bde74"><div class="ttname"><a href="server_8h.html#aea7b4966d78f67f5ab89f38f0e1bde74">SUPERVISED_SYSTEMD</a></div><div class="ttdeci">#define SUPERVISED_SYSTEMD</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00343">server.h:343</a></div></div>
<div class="ttc" id="replication_8c_html_a1e6f92550637c74bd1ae6b34ee8e36dc"><div class="ttname"><a href="replication_8c.html#a1e6f92550637c74bd1ae6b34ee8e36dc">replicationCron</a></div><div class="ttdeci">void replicationCron(void)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l02508">replication.c:2508</a></div></div>
<div class="ttc" id="structredis_server_html_a31c9cafcb063d450af2fa2a760f7b6c9"><div class="ttname"><a href="structredis_server.html#a31c9cafcb063d450af2fa2a760f7b6c9">redisServer::repl_transfer_size</a></div><div class="ttdeci">off_t repl_transfer_size</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l01154">server.h:1154</a></div></div>
<div class="ttc" id="server_8c_html_a1a3a833d70823af9432a61b05c5d04fd"><div class="ttname"><a href="server_8c.html#a1a3a833d70823af9432a61b05c5d04fd">exitFromChild</a></div><div class="ttdeci">void exitFromChild(int retcode)</div><div class="ttdef"><b>Definition:</b> <a href="server_8c_source.html#l00445">server.c:445</a></div></div>
<div class="ttc" id="replication_8c_html_a767d8f1bda78e1aca2fcb8da3d495a59"><div class="ttname"><a href="replication_8c.html#a767d8f1bda78e1aca2fcb8da3d495a59">replicationFeedSlaves</a></div><div class="ttdeci">void replicationFeedSlaves(list *slaves, int dictid, robj **argv, int argc)</div><div class="ttdef"><b>Definition:</b> <a href="replication_8c_source.html#l00173">replication.c:173</a></div></div>
<div class="ttc" id="server_8h_html_a225a9e35f2cb8aa663571625bc59a533"><div class="ttname"><a href="server_8h.html#a225a9e35f2cb8aa663571625bc59a533">STATS_METRIC_SAMPLES</a></div><div class="ttdeci">#define STATS_METRIC_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00177">server.h:177</a></div></div>
<div class="ttc" id="server_8h_html_afb6bccf6f1ac66b1d563330ab499fb32"><div class="ttname"><a href="server_8h.html#afb6bccf6f1ac66b1d563330ab499fb32">PROTO_MBULK_BIG_ARG</a></div><div class="ttdeci">#define PROTO_MBULK_BIG_ARG</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00188">server.h:188</a></div></div>
<div class="ttc" id="server_8h_html_ab72fac70fbc902a7f106f4c710e08271"><div class="ttname"><a href="server_8h.html#ab72fac70fbc902a7f106f4c710e08271">LUA_SCRIPT_TIME_LIMIT</a></div><div class="ttdeci">#define LUA_SCRIPT_TIME_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00400">server.h:400</a></div></div>
<div class="ttc" id="server_8h_html_aaf26ba9b59589bc7701e36fb440a0fbe"><div class="ttname"><a href="server_8h.html#aaf26ba9b59589bc7701e36fb440a0fbe">CMD_NOSCRIPT</a></div><div class="ttdeci">#define CMD_NOSCRIPT</div><div class="ttdef"><b>Definition:</b> <a href="server_8h_source.html#l00211">server.h:211</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
